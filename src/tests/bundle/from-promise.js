var NT=Object.create;var Of=Object.defineProperty;var PT=Object.getOwnPropertyDescriptor;var LT=Object.getOwnPropertyNames;var DT=Object.getPrototypeOf,qT=Object.prototype.hasOwnProperty;var Ue=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var HT=(e,t)=>()=>(e&&(t=e(e=0)),t);var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),hy=(e,t)=>{for(var r in t)Of(e,r,{get:t[r],enumerable:!0})},WT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of LT(t))!qT.call(e,n)&&n!==r&&Of(e,n,{get:()=>t[n],enumerable:!(o=PT(t,n))||o.enumerable});return e};var $a=(e,t,r)=>(r=e!=null?NT(DT(e)):{},WT(t||!e||!e.__esModule?Of(r,"default",{value:e,enumerable:!0}):r,e));import{createRequire as UT}from"node:module";import BT from"node:path";import jT from"node:url";var u=HT(()=>{"use strict";globalThis.require=UT(import.meta.url);globalThis.__filename=jT.fileURLToPath(import.meta.url);globalThis.__dirname=BT.dirname(__filename)});var ct=$(Hg=>{"use strict";u();Hg.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,o)=>{t.push((n,s)=>n!=null?o(n):r(s)),e.apply(this,t)})},"name",{value:e.name})};Hg.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(o=>r(null,o),r)},"name",{value:e.name})}});var tF=$((w8,eF)=>{u();var On=Ue("constants"),hj=process.cwd,rf=null,dj=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return rf||(rf=hj.call(process)),rf};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Wg=process.chdir,process.chdir=function(e){rf=null,Wg.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Wg));var Wg;eF.exports=xj;function xj(e){On.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=o(e.chmod),e.fchmod=o(e.fchmod),e.lchmod=o(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,d,g){g&&process.nextTick(g)},e.lchownSync=function(){}),dj==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(d,g,b){var M=Date.now(),T=0;f(d,g,function N(K){if(K&&(K.code==="EACCES"||K.code==="EPERM"||K.code==="EBUSY")&&Date.now()-M<6e4){setTimeout(function(){e.stat(g,function(ae,_e){ae&&ae.code==="ENOENT"?f(d,g,N):b(K)})},T),T<100&&(T+=10);return}b&&b(K)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(d,g,b,M,T,N){var K;if(N&&typeof N=="function"){var ae=0;K=function(_e,lt,Xt){if(_e&&_e.code==="EAGAIN"&&ae<10)return ae++,f.call(e,d,g,b,M,T,K);N.apply(this,arguments)}}return f.call(e,d,g,b,M,T,K)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,d,g,b,M){for(var T=0;;)try{return f.call(e,h,d,g,b,M)}catch(N){if(N.code==="EAGAIN"&&T<10){T++;continue}throw N}}}(e.readSync);function t(f){f.lchmod=function(h,d,g){f.open(h,On.O_WRONLY|On.O_SYMLINK,d,function(b,M){if(b){g&&g(b);return}f.fchmod(M,d,function(T){f.close(M,function(N){g&&g(T||N)})})})},f.lchmodSync=function(h,d){var g=f.openSync(h,On.O_WRONLY|On.O_SYMLINK,d),b=!0,M;try{M=f.fchmodSync(g,d),b=!1}finally{if(b)try{f.closeSync(g)}catch{}else f.closeSync(g)}return M}}function r(f){On.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,d,g,b){f.open(h,On.O_SYMLINK,function(M,T){if(M){b&&b(M);return}f.futimes(T,d,g,function(N){f.close(T,function(K){b&&b(N||K)})})})},f.lutimesSync=function(h,d,g){var b=f.openSync(h,On.O_SYMLINK),M,T=!0;try{M=f.futimesSync(b,d,g),T=!1}finally{if(T)try{f.closeSync(b)}catch{}else f.closeSync(b)}return M}):f.futimes&&(f.lutimes=function(h,d,g,b){b&&process.nextTick(b)},f.lutimesSync=function(){})}function o(f){return f&&function(h,d,g){return f.call(e,h,d,function(b){p(b)&&(b=null),g&&g.apply(this,arguments)})}}function n(f){return f&&function(h,d){try{return f.call(e,h,d)}catch(g){if(!p(g))throw g}}}function s(f){return f&&function(h,d,g,b){return f.call(e,h,d,g,function(M){p(M)&&(M=null),b&&b.apply(this,arguments)})}}function i(f){return f&&function(h,d,g){try{return f.call(e,h,d,g)}catch(b){if(!p(b))throw b}}}function c(f){return f&&function(h,d,g){typeof d=="function"&&(g=d,d=null);function b(M,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),g&&g.apply(this,arguments)}return d?f.call(e,h,d,b):f.call(e,h,b)}}function a(f){return f&&function(h,d){var g=d?f.call(e,h,d):f.call(e,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var nF=$((R8,oF)=>{u();var rF=Ue("stream").Stream;oF.exports=gj;function gj(e){return{ReadStream:t,WriteStream:r};function t(o,n){if(!(this instanceof t))return new t(o,n);rF.call(this);var s=this;this.path=o,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var i=Object.keys(n),c=0,a=i.length;c<a;c++){var p=i[c];this[p]=n[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){s.emit("error",f),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function r(o,n){if(!(this instanceof r))return new r(o,n);rF.call(this),this.path=o,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),i=0,c=s.length;i<c;i++){var a=s[i];this[a]=n[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var iF=$((T8,sF)=>{"use strict";u();sF.exports=bj;var yj=Object.getPrototypeOf||function(e){return e.__proto__};function bj(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:yj(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var tc=$((I8,jg)=>{u();var Ae=Ue("fs"),Sj=tF(),_j=nF(),Ej=iF(),of=Ue("util"),ht,sf;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ht=Symbol.for("graceful-fs.queue"),sf=Symbol.for("graceful-fs.previous")):(ht="___graceful-fs.queue",sf="___graceful-fs.previous");function Oj(){}function uF(e,t){Object.defineProperty(e,ht,{get:function(){return t}})}var qs=Oj;of.debuglog?qs=of.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(qs=function(){var e=of.format.apply(of,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});Ae[ht]||(cF=global[ht]||[],uF(Ae,cF),Ae.close=function(e){function t(r,o){return e.call(Ae,r,function(n){n||aF(),typeof o=="function"&&o.apply(this,arguments)})}return Object.defineProperty(t,sf,{value:e}),t}(Ae.close),Ae.closeSync=function(e){function t(r){e.apply(Ae,arguments),aF()}return Object.defineProperty(t,sf,{value:e}),t}(Ae.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){qs(Ae[ht]),Ue("assert").equal(Ae[ht].length,0)}));var cF;global[ht]||uF(global,Ae[ht]);jg.exports=Ug(Ej(Ae));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ae.__patched&&(jg.exports=Ug(Ae),Ae.__patched=!0);function Ug(e){Sj(e),e.gracefulify=Ug,e.createReadStream=lt,e.createWriteStream=Xt;var t=e.readFile;e.readFile=r;function r(D,Q,U){return typeof Q=="function"&&(U=Q,Q=null),fe(D,Q,U);function fe(Ie,be,me,se){return t(Ie,be,function(X){X&&(X.code==="EMFILE"||X.code==="ENFILE")?ec([fe,[Ie,be,me],X,se||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}var o=e.writeFile;e.writeFile=n;function n(D,Q,U,fe){return typeof U=="function"&&(fe=U,U=null),Ie(D,Q,U,fe);function Ie(be,me,se,X,we){return o(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?ec([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=i);function i(D,Q,U,fe){return typeof U=="function"&&(fe=U,U=null),Ie(D,Q,U,fe);function Ie(be,me,se,X,we){return s(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?ec([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=a);function a(D,Q,U,fe){return typeof U=="function"&&(fe=U,U=0),Ie(D,Q,U,fe);function Ie(be,me,se,X,we){return c(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?ec([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var p=e.readdir;e.readdir=h;var f=/^v[0-5]\./;function h(D,Q,U){typeof Q=="function"&&(U=Q,Q=null);var fe=f.test(process.version)?function(me,se,X,we){return p(me,Ie(me,se,X,we))}:function(me,se,X,we){return p(me,se,Ie(me,se,X,we))};return fe(D,Q,U);function Ie(be,me,se,X){return function(we,he){we&&(we.code==="EMFILE"||we.code==="ENFILE")?ec([fe,[be,me,se],we,X||Date.now(),Date.now()]):(he&&he.sort&&he.sort(),typeof se=="function"&&se.call(this,we,he))}}}if(process.version.substr(0,4)==="v0.8"){var d=_j(e);N=d.ReadStream,ae=d.WriteStream}var g=e.ReadStream;g&&(N.prototype=Object.create(g.prototype),N.prototype.open=K);var b=e.WriteStream;b&&(ae.prototype=Object.create(b.prototype),ae.prototype.open=_e),Object.defineProperty(e,"ReadStream",{get:function(){return N},set:function(D){N=D},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return ae},set:function(D){ae=D},enumerable:!0,configurable:!0});var M=N;Object.defineProperty(e,"FileReadStream",{get:function(){return M},set:function(D){M=D},enumerable:!0,configurable:!0});var T=ae;Object.defineProperty(e,"FileWriteStream",{get:function(){return T},set:function(D){T=D},enumerable:!0,configurable:!0});function N(D,Q){return this instanceof N?(g.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function K(){var D=this;et(D.path,D.flags,D.mode,function(Q,U){Q?(D.autoClose&&D.destroy(),D.emit("error",Q)):(D.fd=U,D.emit("open",U),D.read())})}function ae(D,Q){return this instanceof ae?(b.apply(this,arguments),this):ae.apply(Object.create(ae.prototype),arguments)}function _e(){var D=this;et(D.path,D.flags,D.mode,function(Q,U){Q?(D.destroy(),D.emit("error",Q)):(D.fd=U,D.emit("open",U))})}function lt(D,Q){return new e.ReadStream(D,Q)}function Xt(D,Q){return new e.WriteStream(D,Q)}var No=e.open;e.open=et;function et(D,Q,U,fe){return typeof U=="function"&&(fe=U,U=null),Ie(D,Q,U,fe);function Ie(be,me,se,X,we){return No(be,me,se,function(he,Bs){he&&(he.code==="EMFILE"||he.code==="ENFILE")?ec([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}return e}function ec(e){qs("ENQUEUE",e[0].name,e[1]),Ae[ht].push(e),Bg()}var nf;function aF(){for(var e=Date.now(),t=0;t<Ae[ht].length;++t)Ae[ht][t].length>2&&(Ae[ht][t][3]=e,Ae[ht][t][4]=e);Bg()}function Bg(){if(clearTimeout(nf),nf=void 0,Ae[ht].length!==0){var e=Ae[ht].shift(),t=e[0],r=e[1],o=e[2],n=e[3],s=e[4];if(n===void 0)qs("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-n>=6e4){qs("TIMEOUT",t.name,r);var i=r.pop();typeof i=="function"&&i.call(null,o)}else{var c=Date.now()-s,a=Math.max(s-n,1),p=Math.min(a*1.2,100);c>=p?(qs("RETRY",t.name,r),t.apply(null,r.concat([n]))):Ae[ht].push(e)}nf===void 0&&(nf=setTimeout(Bg,0))}}});var Ft=$(Fo=>{"use strict";u();var lF=ct().fromCallback,Rt=tc(),Cj=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Rt[e]=="function");Object.assign(Fo,Rt);Cj.forEach(e=>{Fo[e]=lF(Rt[e])});Fo.exists=function(e,t){return typeof t=="function"?Rt.exists(e,t):new Promise(r=>Rt.exists(e,r))};Fo.read=function(e,t,r,o,n,s){return typeof s=="function"?Rt.read(e,t,r,o,n,s):new Promise((i,c)=>{Rt.read(e,t,r,o,n,(a,p,f)=>{if(a)return c(a);i({bytesRead:p,buffer:f})})})};Fo.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Rt.write(e,t,...r):new Promise((o,n)=>{Rt.write(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffer:c})})})};Fo.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?Rt.readv(e,t,...r):new Promise((o,n)=>{Rt.readv(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesRead:i,buffers:c})})})};Fo.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Rt.writev(e,t,...r):new Promise((o,n)=>{Rt.writev(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffers:c})})})};typeof Rt.realpath.native=="function"?Fo.realpath.native=lF(Rt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var fF=$((D8,pF)=>{"use strict";u();var vj=Ue("path");pF.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(vj.parse(t).root,""))){let o=new Error(`Path contains invalid characters: ${t}`);throw o.code="EINVAL",o}}});var xF=$((H8,zg)=>{"use strict";u();var mF=Ft(),{checkPath:hF}=fF(),dF=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};zg.exports.makeDir=async(e,t)=>(hF(e),mF.mkdir(e,{mode:dF(t),recursive:!0}));zg.exports.makeDirSync=(e,t)=>(hF(e),mF.mkdirSync(e,{mode:dF(t),recursive:!0}))});var kr=$((U8,gF)=>{"use strict";u();var kj=ct().fromPromise,{makeDir:wj,makeDirSync:Gg}=xF(),$g=kj(wj);gF.exports={mkdirs:$g,mkdirsSync:Gg,mkdirp:$g,mkdirpSync:Gg,ensureDir:$g,ensureDirSync:Gg}});var Cn=$((j8,bF)=>{"use strict";u();var Mj=ct().fromPromise,yF=Ft();function Rj(e){return yF.access(e).then(()=>!0).catch(()=>!1)}bF.exports={pathExists:Mj(Rj),pathExistsSync:yF.existsSync}});var Vg=$((G8,SF)=>{"use strict";u();var rc=Ft(),Fj=ct().fromPromise;async function Tj(e,t,r){let o=await rc.open(e,"r+"),n=null;try{await rc.futimes(o,t,r)}finally{try{await rc.close(o)}catch(s){n=s}}if(n)throw n}function Aj(e,t,r){let o=rc.openSync(e,"r+");return rc.futimesSync(o,t,r),rc.closeSync(o)}SF.exports={utimesMillis:Fj(Tj),utimesMillisSync:Aj}});var Hs=$((V8,CF)=>{"use strict";u();var oc=Ft(),at=Ue("path"),_F=ct().fromPromise;function Ij(e,t,r){let o=r.dereference?n=>oc.stat(n,{bigint:!0}):n=>oc.lstat(n,{bigint:!0});return Promise.all([o(e),o(t).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function Nj(e,t,r){let o,n=r.dereference?i=>oc.statSync(i,{bigint:!0}):i=>oc.lstatSync(i,{bigint:!0}),s=n(e);try{o=n(t)}catch(i){if(i.code==="ENOENT")return{srcStat:s,destStat:null};throw i}return{srcStat:s,destStat:o}}async function Pj(e,t,r,o){let{srcStat:n,destStat:s}=await Ij(e,t,o);if(s){if(Pa(n,s)){let i=at.basename(e),c=at.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&Kg(e,t))throw new Error(cf(e,t,r));return{srcStat:n,destStat:s}}function Lj(e,t,r,o){let{srcStat:n,destStat:s}=Nj(e,t,o);if(s){if(Pa(n,s)){let i=at.basename(e),c=at.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&Kg(e,t))throw new Error(cf(e,t,r));return{srcStat:n,destStat:s}}async function EF(e,t,r,o){let n=at.resolve(at.dirname(e)),s=at.resolve(at.dirname(r));if(s===n||s===at.parse(s).root)return;let i;try{i=await oc.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Pa(t,i))throw new Error(cf(e,r,o));return EF(e,t,s,o)}function OF(e,t,r,o){let n=at.resolve(at.dirname(e)),s=at.resolve(at.dirname(r));if(s===n||s===at.parse(s).root)return;let i;try{i=oc.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Pa(t,i))throw new Error(cf(e,r,o));return OF(e,t,s,o)}function Pa(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Kg(e,t){let r=at.resolve(e).split(at.sep).filter(n=>n),o=at.resolve(t).split(at.sep).filter(n=>n);return r.every((n,s)=>o[s]===n)}function cf(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}CF.exports={checkPaths:_F(Pj),checkPathsSync:Lj,checkParentPaths:_F(EF),checkParentPathsSync:OF,isSrcSubdir:Kg,areIdentical:Pa}});var RF=$((J8,MF)=>{"use strict";u();var bt=Ft(),La=Ue("path"),{mkdirs:Dj}=kr(),{pathExists:qj}=Cn(),{utimesMillis:Hj}=Vg(),Da=Hs();async function Wj(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:o,destStat:n}=await Da.checkPaths(e,t,"copy",r);if(await Da.checkParentPaths(e,o,t,"copy"),!await kF(e,t,r))return;let i=La.dirname(t);await qj(i)||await Dj(i),await wF(n,e,t,r)}async function kF(e,t,r){return r.filter?r.filter(e,t):!0}async function wF(e,t,r,o){let s=await(o.dereference?bt.stat:bt.lstat)(t);if(s.isDirectory())return zj(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Uj(s,e,t,r,o);if(s.isSymbolicLink())return Gj(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Uj(e,t,r,o,n){if(!t)return vF(e,r,o,n);if(n.overwrite)return await bt.unlink(o),vF(e,r,o,n);if(n.errorOnExist)throw new Error(`'${o}' already exists`)}async function vF(e,t,r,o){if(await bt.copyFile(t,r),o.preserveTimestamps){Bj(e.mode)&&await jj(r,e.mode);let n=await bt.stat(t);await Hj(r,n.atime,n.mtime)}return bt.chmod(r,e.mode)}function Bj(e){return(e&128)===0}function jj(e,t){return bt.chmod(e,t|128)}async function zj(e,t,r,o,n){t||await bt.mkdir(o);let s=await bt.readdir(r);await Promise.all(s.map(async i=>{let c=La.join(r,i),a=La.join(o,i);if(!await kF(c,a,n))return;let{destStat:f}=await Da.checkPaths(c,a,"copy",n);return wF(f,c,a,n)})),t||await bt.chmod(o,e.mode)}async function Gj(e,t,r,o){let n=await bt.readlink(t);if(o.dereference&&(n=La.resolve(process.cwd(),n)),!e)return bt.symlink(n,r);let s=null;try{s=await bt.readlink(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return bt.symlink(n,r);throw i}if(o.dereference&&(s=La.resolve(process.cwd(),s)),Da.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Da.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await bt.unlink(r),bt.symlink(n,r)}MF.exports=Wj});var NF=$((Q8,IF)=>{"use strict";u();var Tt=tc(),qa=Ue("path"),$j=kr().mkdirsSync,Vj=Vg().utimesMillisSync,Ha=Hs();function Kj(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:o,destStat:n}=Ha.checkPathsSync(e,t,"copy",r);if(Ha.checkParentPathsSync(e,o,t,"copy"),r.filter&&!r.filter(e,t))return;let s=qa.dirname(t);return Tt.existsSync(s)||$j(s),FF(n,e,t,r)}function FF(e,t,r,o){let s=(o.dereference?Tt.statSync:Tt.lstatSync)(t);if(s.isDirectory())return tz(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Jj(s,e,t,r,o);if(s.isSymbolicLink())return nz(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Jj(e,t,r,o,n){return t?Yj(e,r,o,n):TF(e,r,o,n)}function Yj(e,t,r,o){if(o.overwrite)return Tt.unlinkSync(r),TF(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}function TF(e,t,r,o){return Tt.copyFileSync(t,r),o.preserveTimestamps&&Qj(e.mode,t,r),Jg(r,e.mode)}function Qj(e,t,r){return Zj(e)&&Xj(r,e),ez(t,r)}function Zj(e){return(e&128)===0}function Xj(e,t){return Jg(e,t|128)}function Jg(e,t){return Tt.chmodSync(e,t)}function ez(e,t){let r=Tt.statSync(e);return Vj(t,r.atime,r.mtime)}function tz(e,t,r,o,n){return t?AF(r,o,n):rz(e.mode,r,o,n)}function rz(e,t,r,o){return Tt.mkdirSync(r),AF(t,r,o),Jg(r,e)}function AF(e,t,r){Tt.readdirSync(e).forEach(o=>oz(o,e,t,r))}function oz(e,t,r,o){let n=qa.join(t,e),s=qa.join(r,e);if(o.filter&&!o.filter(n,s))return;let{destStat:i}=Ha.checkPathsSync(n,s,"copy",o);return FF(i,n,s,o)}function nz(e,t,r,o){let n=Tt.readlinkSync(t);if(o.dereference&&(n=qa.resolve(process.cwd(),n)),e){let s;try{s=Tt.readlinkSync(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return Tt.symlinkSync(n,r);throw i}if(o.dereference&&(s=qa.resolve(process.cwd(),s)),Ha.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Ha.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return sz(n,r)}else return Tt.symlinkSync(n,r)}function sz(e,t){return Tt.unlinkSync(t),Tt.symlinkSync(e,t)}IF.exports=Kj});var af=$((X8,PF)=>{"use strict";u();var iz=ct().fromPromise;PF.exports={copy:iz(RF()),copySync:NF()}});var Wa=$((tX,DF)=>{"use strict";u();var LF=tc(),cz=ct().fromCallback;function az(e,t){LF.rm(e,{recursive:!0,force:!0},t)}function uz(e){LF.rmSync(e,{recursive:!0,force:!0})}DF.exports={remove:cz(az),removeSync:uz}});var GF=$((oX,zF)=>{"use strict";u();var lz=ct().fromPromise,WF=Ft(),UF=Ue("path"),BF=kr(),jF=Wa(),qF=lz(async function(t){let r;try{r=await WF.readdir(t)}catch{return BF.mkdirs(t)}return Promise.all(r.map(o=>jF.remove(UF.join(t,o))))});function HF(e){let t;try{t=WF.readdirSync(e)}catch{return BF.mkdirsSync(e)}t.forEach(r=>{r=UF.join(e,r),jF.removeSync(r)})}zF.exports={emptyDirSync:HF,emptydirSync:HF,emptyDir:qF,emptydir:qF}});var JF=$((sX,KF)=>{"use strict";u();var pz=ct().fromPromise,$F=Ue("path"),To=Ft(),VF=kr();async function fz(e){let t;try{t=await To.stat(e)}catch{}if(t&&t.isFile())return;let r=$F.dirname(e),o=null;try{o=await To.stat(r)}catch(n){if(n.code==="ENOENT"){await VF.mkdirs(r),await To.writeFile(e,"");return}else throw n}o.isDirectory()?await To.writeFile(e,""):await To.readdir(r)}function mz(e){let t;try{t=To.statSync(e)}catch{}if(t&&t.isFile())return;let r=$F.dirname(e);try{To.statSync(r).isDirectory()||To.readdirSync(r)}catch(o){if(o&&o.code==="ENOENT")VF.mkdirsSync(r);else throw o}To.writeFileSync(e,"")}KF.exports={createFile:pz(fz),createFileSync:mz}});var e0=$((cX,XF)=>{"use strict";u();var hz=ct().fromPromise,YF=Ue("path"),vn=Ft(),QF=kr(),{pathExists:dz}=Cn(),{areIdentical:ZF}=Hs();async function xz(e,t){let r;try{r=await vn.lstat(t)}catch{}let o;try{o=await vn.lstat(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}if(r&&ZF(o,r))return;let n=YF.dirname(t);await dz(n)||await QF.mkdirs(n),await vn.link(e,t)}function gz(e,t){let r;try{r=vn.lstatSync(t)}catch{}try{let s=vn.lstatSync(e);if(r&&ZF(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let o=YF.dirname(t);return vn.existsSync(o)||QF.mkdirsSync(o),vn.linkSync(e,t)}XF.exports={createLink:hz(xz),createLinkSync:gz}});var r0=$((uX,t0)=>{"use strict";u();var kn=Ue("path"),Ua=Ft(),{pathExists:yz}=Cn(),bz=ct().fromPromise;async function Sz(e,t){if(kn.isAbsolute(e)){try{await Ua.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let r=kn.dirname(t),o=kn.join(r,e);if(await yz(o))return{toCwd:o,toDst:e};try{await Ua.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:kn.relative(r,e)}}function _z(e,t){if(kn.isAbsolute(e)){if(!Ua.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=kn.dirname(t),o=kn.join(r,e);if(Ua.existsSync(o))return{toCwd:o,toDst:e};if(!Ua.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:kn.relative(r,e)}}t0.exports={symlinkPaths:bz(Sz),symlinkPathsSync:_z}});var s0=$((pX,n0)=>{"use strict";u();var o0=Ft(),Ez=ct().fromPromise;async function Oz(e,t){if(t)return t;let r;try{r=await o0.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function Cz(e,t){if(t)return t;let r;try{r=o0.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}n0.exports={symlinkType:Ez(Oz),symlinkTypeSync:Cz}});var u0=$((mX,a0)=>{"use strict";u();var vz=ct().fromPromise,i0=Ue("path"),Xr=Ft(),{mkdirs:kz,mkdirsSync:wz}=kr(),{symlinkPaths:Mz,symlinkPathsSync:Rz}=r0(),{symlinkType:Fz,symlinkTypeSync:Tz}=s0(),{pathExists:Az}=Cn(),{areIdentical:c0}=Hs();async function Iz(e,t,r){let o;try{o=await Xr.lstat(t)}catch{}if(o&&o.isSymbolicLink()){let[c,a]=await Promise.all([Xr.stat(e),Xr.stat(t)]);if(c0(c,a))return}let n=await Mz(e,t);e=n.toDst;let s=await Fz(n.toCwd,r),i=i0.dirname(t);return await Az(i)||await kz(i),Xr.symlink(e,t,s)}function Nz(e,t,r){let o;try{o=Xr.lstatSync(t)}catch{}if(o&&o.isSymbolicLink()){let c=Xr.statSync(e),a=Xr.statSync(t);if(c0(c,a))return}let n=Rz(e,t);e=n.toDst,r=Tz(n.toCwd,r);let s=i0.dirname(t);return Xr.existsSync(s)||wz(s),Xr.symlinkSync(e,t,r)}a0.exports={createSymlink:vz(Iz),createSymlinkSync:Nz}});var g0=$((dX,x0)=>{"use strict";u();var{createFile:l0,createFileSync:p0}=JF(),{createLink:f0,createLinkSync:m0}=e0(),{createSymlink:h0,createSymlinkSync:d0}=u0();x0.exports={createFile:l0,createFileSync:p0,ensureFile:l0,ensureFileSync:p0,createLink:f0,createLinkSync:m0,ensureLink:f0,ensureLinkSync:m0,createSymlink:h0,createSymlinkSync:d0,ensureSymlink:h0,ensureSymlinkSync:d0}});var uf=$((gX,y0)=>{u();function Pz(e,{EOL:t=`
`,finalEOL:r=!0,replacer:o=null,spaces:n}={}){let s=r?t:"";return JSON.stringify(e,o,n).replace(/\n/g,t)+s}function Lz(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}y0.exports={stringify:Pz,stripBom:Lz}});var E0=$((bX,_0)=>{u();var nc;try{nc=tc()}catch{nc=Ue("fs")}var lf=ct(),{stringify:b0,stripBom:S0}=uf();async function Dz(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||nc,o="throws"in t?t.throws:!0,n=await lf.fromCallback(r.readFile)(e,t);n=S0(n);let s;try{s=JSON.parse(n,t?t.reviver:null)}catch(i){if(o)throw i.message=`${e}: ${i.message}`,i;return null}return s}var qz=lf.fromPromise(Dz);function Hz(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||nc,o="throws"in t?t.throws:!0;try{let n=r.readFileSync(e,t);return n=S0(n),JSON.parse(n,t.reviver)}catch(n){if(o)throw n.message=`${e}: ${n.message}`,n;return null}}async function Wz(e,t,r={}){let o=r.fs||nc,n=b0(t,r);await lf.fromCallback(o.writeFile)(e,n,r)}var Uz=lf.fromPromise(Wz);function Bz(e,t,r={}){let o=r.fs||nc,n=b0(t,r);return o.writeFileSync(e,n,r)}var jz={readFile:qz,readFileSync:Hz,writeFile:Uz,writeFileSync:Bz};_0.exports=jz});var C0=$((_X,O0)=>{"use strict";u();var pf=E0();O0.exports={readJson:pf.readFile,readJsonSync:pf.readFileSync,writeJson:pf.writeFile,writeJsonSync:pf.writeFileSync}});var ff=$((OX,w0)=>{"use strict";u();var zz=ct().fromPromise,Yg=Ft(),v0=Ue("path"),k0=kr(),Gz=Cn().pathExists;async function $z(e,t,r="utf-8"){let o=v0.dirname(e);return await Gz(o)||await k0.mkdirs(o),Yg.writeFile(e,t,r)}function Vz(e,...t){let r=v0.dirname(e);Yg.existsSync(r)||k0.mkdirsSync(r),Yg.writeFileSync(e,...t)}w0.exports={outputFile:zz($z),outputFileSync:Vz}});var R0=$((vX,M0)=>{"use strict";u();var{stringify:Kz}=uf(),{outputFile:Jz}=ff();async function Yz(e,t,r={}){let o=Kz(t,r);await Jz(e,o,r)}M0.exports=Yz});var T0=$((wX,F0)=>{"use strict";u();var{stringify:Qz}=uf(),{outputFileSync:Zz}=ff();function Xz(e,t,r){let o=Qz(t,r);Zz(e,o,r)}F0.exports=Xz});var I0=$((RX,A0)=>{"use strict";u();var e3=ct().fromPromise,At=C0();At.outputJson=e3(R0());At.outputJsonSync=T0();At.outputJSON=At.outputJson;At.outputJSONSync=At.outputJsonSync;At.writeJSON=At.writeJson;At.writeJSONSync=At.writeJsonSync;At.readJSON=At.readJson;At.readJSONSync=At.readJsonSync;A0.exports=At});var q0=$((TX,D0)=>{"use strict";u();var t3=Ft(),N0=Ue("path"),{copy:r3}=af(),{remove:L0}=Wa(),{mkdirp:o3}=kr(),{pathExists:n3}=Cn(),P0=Hs();async function s3(e,t,r={}){let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await P0.checkPaths(e,t,"move",r);await P0.checkParentPaths(e,n,t,"move");let i=N0.dirname(t);return N0.parse(i).root!==i&&await o3(i),i3(e,t,o,s)}async function i3(e,t,r,o){if(!o){if(r)await L0(t);else if(await n3(t))throw new Error("dest already exists.")}try{await t3.rename(e,t)}catch(n){if(n.code!=="EXDEV")throw n;await c3(e,t,r)}}async function c3(e,t,r){return await r3(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),L0(e)}D0.exports=s3});var j0=$((IX,B0)=>{"use strict";u();var W0=tc(),Zg=Ue("path"),a3=af().copySync,U0=Wa().removeSync,u3=kr().mkdirpSync,H0=Hs();function l3(e,t,r){r=r||{};let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=H0.checkPathsSync(e,t,"move",r);return H0.checkParentPathsSync(e,n,t,"move"),p3(t)||u3(Zg.dirname(t)),f3(e,t,o,s)}function p3(e){let t=Zg.dirname(e);return Zg.parse(t).root===t}function f3(e,t,r,o){if(o)return Qg(e,t,r);if(r)return U0(t),Qg(e,t,r);if(W0.existsSync(t))throw new Error("dest already exists.");return Qg(e,t,r)}function Qg(e,t,r){try{W0.renameSync(e,t)}catch(o){if(o.code!=="EXDEV")throw o;return m3(e,t,r)}}function m3(e,t,r){return a3(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),U0(e)}B0.exports=l3});var G0=$((PX,z0)=>{"use strict";u();var h3=ct().fromPromise;z0.exports={move:h3(q0()),moveSync:j0()}});var Xg=$((DX,$0)=>{"use strict";u();$0.exports={...Ft(),...af(),...GF(),...g0(),...I0(),...kr(),...G0(),...ff(),...Cn(),...Wa()}});var Z0=$((YX,ey)=>{u();var Y0=process.argv||[],df=process.env,x3=!("NO_COLOR"in df||Y0.includes("--no-color"))&&("FORCE_COLOR"in df||Y0.includes("--color")||process.platform==="win32"||Ue!=null&&Ue("tty").isatty(1)&&df.TERM!=="dumb"||"CI"in df),g3=(e,t,r=e)=>o=>{let n=""+o,s=n.indexOf(t,e.length);return~s?e+y3(n,t,r,s)+t:e+n+t},y3=(e,t,r,o)=>{let n="",s=0;do n+=e.substring(s,o)+r,s=o+t.length,o=e.indexOf(t,s);while(~o);return n+e.substring(s)},Q0=(e=x3)=>{let t=e?g3:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m")}};ey.exports=Q0();ey.exports.createColors=Q0});var eT=$(ty=>{u();var X0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ty.encode=function(e){if(0<=e&&e<X0.length)return X0[e];throw new TypeError("Must be between 0 and 63: "+e)};ty.decode=function(e){var t=65,r=90,o=97,n=122,s=48,i=57,c=43,a=47,p=26,f=52;return t<=e&&e<=r?e-t:o<=e&&e<=n?e-o+p:s<=e&&e<=i?e-s+f:e==c?62:e==a?63:-1}});var ny=$(oy=>{u();var tT=eT(),ry=5,rT=1<<ry,oT=rT-1,nT=rT;function b3(e){return e<0?(-e<<1)+1:(e<<1)+0}function S3(e){var t=(e&1)===1,r=e>>1;return t?-r:r}oy.encode=function(t){var r="",o,n=b3(t);do o=n&oT,n>>>=ry,n>0&&(o|=nT),r+=tT.encode(o);while(n>0);return r};oy.decode=function(t,r,o){var n=t.length,s=0,i=0,c,a;do{if(r>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(a=tT.decode(t.charCodeAt(r++)),a===-1)throw new Error("Invalid base64 digit: "+t.charAt(r-1));c=!!(a&nT),a&=oT,s=s+(a<<i),i+=ry}while(c);o.value=S3(s),o.rest=r}});var cc=$(ut=>{u();function _3(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}ut.getArg=_3;var sT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,E3=/^data:.+\,.+$/;function Ba(e){var t=e.match(sT);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}ut.urlParse=Ba;function ic(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}ut.urlGenerate=ic;var O3=32;function C3(e){var t=[];return function(r){for(var o=0;o<t.length;o++)if(t[o].input===r){var n=t[0];return t[0]=t[o],t[o]=n,t[0].result}var s=e(r);return t.unshift({input:r,result:s}),t.length>O3&&t.pop(),s}}var sy=C3(function(t){var r=t,o=Ba(t);if(o){if(!o.path)return t;r=o.path}for(var n=ut.isAbsolute(r),s=[],i=0,c=0;;)if(i=c,c=r.indexOf("/",i),c===-1){s.push(r.slice(i));break}else for(s.push(r.slice(i,c));c<r.length&&r[c]==="/";)c++;for(var a,p=0,c=s.length-1;c>=0;c--)a=s[c],a==="."?s.splice(c,1):a===".."?p++:p>0&&(a===""?(s.splice(c+1,p),p=0):(s.splice(c,2),p--));return r=s.join("/"),r===""&&(r=n?"/":"."),o?(o.path=r,ic(o)):r});ut.normalize=sy;function iT(e,t){e===""&&(e="."),t===""&&(t=".");var r=Ba(t),o=Ba(e);if(o&&(e=o.path||"/"),r&&!r.scheme)return o&&(r.scheme=o.scheme),ic(r);if(r||t.match(E3))return t;if(o&&!o.host&&!o.path)return o.host=t,ic(o);var n=t.charAt(0)==="/"?t:sy(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=n,ic(o)):n}ut.join=iT;ut.isAbsolute=function(e){return e.charAt(0)==="/"||sT.test(e)};function v3(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var r=0;t.indexOf(e+"/")!==0;){var o=e.lastIndexOf("/");if(o<0||(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/)))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}ut.relative=v3;var cT=function(){var e=Object.create(null);return!("__proto__"in e)}();function aT(e){return e}function k3(e){return uT(e)?"$"+e:e}ut.toSetString=cT?aT:k3;function w3(e){return uT(e)?e.slice(1):e}ut.fromSetString=cT?aT:w3;function uT(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}function M3(e,t,r){var o=Ao(e.source,t.source);return o!==0||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:Ao(e.name,t.name)}ut.compareByOriginalPositions=M3;function R3(e,t,r){var o;return o=e.originalLine-t.originalLine,o!==0||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:Ao(e.name,t.name)}ut.compareByOriginalPositionsNoSource=R3;function F3(e,t,r){var o=e.generatedLine-t.generatedLine;return o!==0||(o=e.generatedColumn-t.generatedColumn,o!==0||r)||(o=Ao(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:Ao(e.name,t.name)}ut.compareByGeneratedPositionsDeflated=F3;function T3(e,t,r){var o=e.generatedColumn-t.generatedColumn;return o!==0||r||(o=Ao(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:Ao(e.name,t.name)}ut.compareByGeneratedPositionsDeflatedNoLine=T3;function Ao(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}function A3(e,t){var r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=Ao(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:Ao(e.name,t.name)}ut.compareByGeneratedPositionsInflated=A3;function I3(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}ut.parseSourceMapInput=I3;function N3(e,t,r){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),r){var o=Ba(r);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var n=o.path.lastIndexOf("/");n>=0&&(o.path=o.path.substring(0,n+1))}t=iT(ic(o),t)}return sy(t)}ut.computeSourceURL=N3});var ay=$(lT=>{u();var iy=cc(),cy=Object.prototype.hasOwnProperty,Ws=typeof Map<"u";function Io(){this._array=[],this._set=Ws?new Map:Object.create(null)}Io.fromArray=function(t,r){for(var o=new Io,n=0,s=t.length;n<s;n++)o.add(t[n],r);return o};Io.prototype.size=function(){return Ws?this._set.size:Object.getOwnPropertyNames(this._set).length};Io.prototype.add=function(t,r){var o=Ws?t:iy.toSetString(t),n=Ws?this.has(t):cy.call(this._set,o),s=this._array.length;(!n||r)&&this._array.push(t),n||(Ws?this._set.set(t,s):this._set[o]=s)};Io.prototype.has=function(t){if(Ws)return this._set.has(t);var r=iy.toSetString(t);return cy.call(this._set,r)};Io.prototype.indexOf=function(t){if(Ws){var r=this._set.get(t);if(r>=0)return r}else{var o=iy.toSetString(t);if(cy.call(this._set,o))return this._set[o]}throw new Error('"'+t+'" is not in the set.')};Io.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};Io.prototype.toArray=function(){return this._array.slice()};lT.ArraySet=Io});var mT=$(fT=>{u();var pT=cc();function P3(e,t){var r=e.generatedLine,o=t.generatedLine,n=e.generatedColumn,s=t.generatedColumn;return o>r||o==r&&s>=n||pT.compareByGeneratedPositionsInflated(e,t)<=0}function xf(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}xf.prototype.unsortedForEach=function(t,r){this._array.forEach(t,r)};xf.prototype.add=function(t){P3(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};xf.prototype.toArray=function(){return this._sorted||(this._array.sort(pT.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};fT.MappingList=xf});var uy=$(hT=>{u();var ja=ny(),$e=cc(),gf=ay().ArraySet,L3=mT().MappingList;function mr(e){e||(e={}),this._file=$e.getArg(e,"file",null),this._sourceRoot=$e.getArg(e,"sourceRoot",null),this._skipValidation=$e.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=$e.getArg(e,"ignoreInvalidMapping",!1),this._sources=new gf,this._names=new gf,this._mappings=new L3,this._sourcesContents=null}mr.prototype._version=3;mr.fromSourceMap=function(t,r){var o=t.sourceRoot,n=new mr(Object.assign(r||{},{file:t.file,sourceRoot:o}));return t.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,o!=null&&(i.source=$e.relative(o,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),t.sources.forEach(function(s){var i=s;o!==null&&(i=$e.relative(o,s)),n._sources.has(i)||n._sources.add(i);var c=t.sourceContentFor(s);c!=null&&n.setSourceContent(s,c)}),n};mr.prototype.addMapping=function(t){var r=$e.getArg(t,"generated"),o=$e.getArg(t,"original",null),n=$e.getArg(t,"source",null),s=$e.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(r,o,n,s)===!1||(n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:n,name:s}))};mr.prototype.setSourceContent=function(t,r){var o=t;this._sourceRoot!=null&&(o=$e.relative(this._sourceRoot,o)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[$e.toSetString(o)]=r):this._sourcesContents&&(delete this._sourcesContents[$e.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};mr.prototype.applySourceMap=function(t,r,o){var n=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=t.file}var s=this._sourceRoot;s!=null&&(n=$e.relative(s,n));var i=new gf,c=new gf;this._mappings.unsortedForEach(function(a){if(a.source===n&&a.originalLine!=null){var p=t.originalPositionFor({line:a.originalLine,column:a.originalColumn});p.source!=null&&(a.source=p.source,o!=null&&(a.source=$e.join(o,a.source)),s!=null&&(a.source=$e.relative(s,a.source)),a.originalLine=p.line,a.originalColumn=p.column,p.name!=null&&(a.name=p.name))}var f=a.source;f!=null&&!i.has(f)&&i.add(f);var h=a.name;h!=null&&!c.has(h)&&c.add(h)},this),this._sources=i,this._names=c,t.sources.forEach(function(a){var p=t.sourceContentFor(a);p!=null&&(o!=null&&(a=$e.join(o,a)),s!=null&&(a=$e.relative(s,a)),this.setSourceContent(a,p))},this)};mr.prototype._validateMapping=function(t,r,o,n){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!o&&!n)){if(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&o)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:o,original:r,name:n});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};mr.prototype._serializeMappings=function(){for(var t=0,r=1,o=0,n=0,s=0,i=0,c="",a,p,f,h,d=this._mappings.toArray(),g=0,b=d.length;g<b;g++){if(p=d[g],a="",p.generatedLine!==r)for(t=0;p.generatedLine!==r;)a+=";",r++;else if(g>0){if(!$e.compareByGeneratedPositionsInflated(p,d[g-1]))continue;a+=","}a+=ja.encode(p.generatedColumn-t),t=p.generatedColumn,p.source!=null&&(h=this._sources.indexOf(p.source),a+=ja.encode(h-i),i=h,a+=ja.encode(p.originalLine-1-n),n=p.originalLine-1,a+=ja.encode(p.originalColumn-o),o=p.originalColumn,p.name!=null&&(f=this._names.indexOf(p.name),a+=ja.encode(f-s),s=f)),c+=a}return c};mr.prototype._generateSourcesContent=function(t,r){return t.map(function(o){if(!this._sourcesContents)return null;r!=null&&(o=$e.relative(r,o));var n=$e.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};mr.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};mr.prototype.toString=function(){return JSON.stringify(this.toJSON())};hT.SourceMapGenerator=mr});var dT=$(Us=>{u();Us.GREATEST_LOWER_BOUND=1;Us.LEAST_UPPER_BOUND=2;function ly(e,t,r,o,n,s){var i=Math.floor((t-e)/2)+e,c=n(r,o[i],!0);return c===0?i:c>0?t-i>1?ly(i,t,r,o,n,s):s==Us.LEAST_UPPER_BOUND?t<o.length?t:-1:i:i-e>1?ly(e,i,r,o,n,s):s==Us.LEAST_UPPER_BOUND?i:e<0?-1:e}Us.search=function(t,r,o,n){if(r.length===0)return-1;var s=ly(-1,r.length,t,r,o,n||Us.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&o(r[s],r[s-1],!0)===0;)--s;return s}});var yT=$(gT=>{u();function D3(e){function t(n,s,i){var c=n[s];n[s]=n[i],n[i]=c}function r(n,s){return Math.round(n+Math.random()*(s-n))}function o(n,s,i,c){if(i<c){var a=r(i,c),p=i-1;t(n,a,c);for(var f=n[c],h=i;h<c;h++)s(n[h],f,!1)<=0&&(p+=1,t(n,p,h));t(n,p+1,h);var d=p+1;o(n,s,i,d-1),o(n,s,d+1,c)}}return o}function q3(e){let t=D3.toString();return new Function(`return ${t}`)()(e)}var xT=new WeakMap;gT.quickSort=function(e,t,r=0){let o=xT.get(t);o===void 0&&(o=q3(t),xT.set(t,o)),o(e,t,r,e.length-1)}});var _T=$(yf=>{u();var A=cc(),fy=dT(),ac=ay().ArraySet,H3=ny(),za=yT().quickSort;function Ce(e,t){var r=e;return typeof e=="string"&&(r=A.parseSourceMapInput(e)),r.sections!=null?new wr(r,t):new dt(r,t)}Ce.fromSourceMap=function(e,t){return dt.fromSourceMap(e,t)};Ce.prototype._version=3;Ce.prototype.__generatedMappings=null;Object.defineProperty(Ce.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Ce.prototype.__originalMappings=null;Object.defineProperty(Ce.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Ce.prototype._charIsMappingSeparator=function(t,r){var o=t.charAt(r);return o===";"||o===","};Ce.prototype._parseMappings=function(t,r){throw new Error("Subclasses must implement _parseMappings")};Ce.GENERATED_ORDER=1;Ce.ORIGINAL_ORDER=2;Ce.GREATEST_LOWER_BOUND=1;Ce.LEAST_UPPER_BOUND=2;Ce.prototype.eachMapping=function(t,r,o){var n=r||null,s=o||Ce.GENERATED_ORDER,i;switch(s){case Ce.GENERATED_ORDER:i=this._generatedMappings;break;case Ce.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var c=this.sourceRoot,a=t.bind(n),p=this._names,f=this._sources,h=this._sourceMapURL,d=0,g=i.length;d<g;d++){var b=i[d],M=b.source===null?null:f.at(b.source);M=A.computeSourceURL(c,M,h),a({source:M,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:p.at(b.name)})}};Ce.prototype.allGeneratedPositionsFor=function(t){var r=A.getArg(t,"line"),o={source:A.getArg(t,"source"),originalLine:r,originalColumn:A.getArg(t,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var n=[],s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,fy.LEAST_UPPER_BOUND);if(s>=0){var i=this._originalMappings[s];if(t.column===void 0)for(var c=i.originalLine;i&&i.originalLine===c;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s];else for(var a=i.originalColumn;i&&i.originalLine===r&&i.originalColumn==a;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s]}return n};yf.SourceMapConsumer=Ce;function dt(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sources"),s=A.getArg(r,"names",[]),i=A.getArg(r,"sourceRoot",null),c=A.getArg(r,"sourcesContent",null),a=A.getArg(r,"mappings"),p=A.getArg(r,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i&&(i=A.normalize(i)),n=n.map(String).map(A.normalize).map(function(f){return i&&A.isAbsolute(i)&&A.isAbsolute(f)?A.relative(i,f):f}),this._names=ac.fromArray(s.map(String),!0),this._sources=ac.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(f){return A.computeSourceURL(i,f,t)}),this.sourceRoot=i,this.sourcesContent=c,this._mappings=a,this._sourceMapURL=t,this.file=p}dt.prototype=Object.create(Ce.prototype);dt.prototype.consumer=Ce;dt.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=A.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1};dt.fromSourceMap=function(t,r){var o=Object.create(dt.prototype),n=o._names=ac.fromArray(t._names.toArray(),!0),s=o._sources=ac.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(g){return A.computeSourceURL(o.sourceRoot,g,r)});for(var i=t._mappings.toArray().slice(),c=o.__generatedMappings=[],a=o.__originalMappings=[],p=0,f=i.length;p<f;p++){var h=i[p],d=new ST;d.generatedLine=h.generatedLine,d.generatedColumn=h.generatedColumn,h.source&&(d.source=s.indexOf(h.source),d.originalLine=h.originalLine,d.originalColumn=h.originalColumn,h.name&&(d.name=n.indexOf(h.name)),a.push(d)),c.push(d)}return za(o.__originalMappings,A.compareByOriginalPositions),o};dt.prototype._version=3;Object.defineProperty(dt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function ST(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var py=A.compareByGeneratedPositionsDeflatedNoLine;function bT(e,t){let r=e.length,o=e.length-t;if(!(o<=1))if(o==2){let n=e[t],s=e[t+1];py(n,s)>0&&(e[t]=s,e[t+1]=n)}else if(o<20)for(let n=t;n<r;n++)for(let s=n;s>t;s--){let i=e[s-1],c=e[s];if(py(i,c)<=0)break;e[s-1]=c,e[s]=i}else za(e,py,t)}dt.prototype._parseMappings=function(t,r){var o=1,n=0,s=0,i=0,c=0,a=0,p=t.length,f=0,h={},d={},g=[],b=[],M,T,N,K,ae;let _e=0;for(;f<p;)if(t.charAt(f)===";")o++,f++,n=0,bT(b,_e),_e=b.length;else if(t.charAt(f)===",")f++;else{for(M=new ST,M.generatedLine=o,K=f;K<p&&!this._charIsMappingSeparator(t,K);K++);for(T=t.slice(f,K),N=[];f<K;)H3.decode(t,f,d),ae=d.value,f=d.rest,N.push(ae);if(N.length===2)throw new Error("Found a source, but no line and column");if(N.length===3)throw new Error("Found a source and line, but no column");if(M.generatedColumn=n+N[0],n=M.generatedColumn,N.length>1&&(M.source=c+N[1],c+=N[1],M.originalLine=s+N[2],s=M.originalLine,M.originalLine+=1,M.originalColumn=i+N[3],i=M.originalColumn,N.length>4&&(M.name=a+N[4],a+=N[4])),b.push(M),typeof M.originalLine=="number"){let Xt=M.source;for(;g.length<=Xt;)g.push(null);g[Xt]===null&&(g[Xt]=[]),g[Xt].push(M)}}bT(b,_e),this.__generatedMappings=b;for(var lt=0;lt<g.length;lt++)g[lt]!=null&&za(g[lt],A.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...g)};dt.prototype._findMapping=function(t,r,o,n,s,i){if(t[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[o]);if(t[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[n]);return fy.search(t,r,s,i)};dt.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var r=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var o=this._generatedMappings[t+1];if(r.generatedLine===o.generatedLine){r.lastGeneratedColumn=o.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};dt.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",A.compareByGeneratedPositionsDeflated,A.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(o>=0){var n=this._generatedMappings[o];if(n.generatedLine===r.generatedLine){var s=A.getArg(n,"source",null);s!==null&&(s=this._sources.at(s),s=A.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var i=A.getArg(n,"name",null);return i!==null&&(i=this._names.at(i)),{source:s,line:A.getArg(n,"originalLine",null),column:A.getArg(n,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}};dt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1};dt.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;var o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];var n=t;this.sourceRoot!=null&&(n=A.relative(this.sourceRoot,n));var s;if(this.sourceRoot!=null&&(s=A.urlParse(this.sourceRoot))){var i=n.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!s.path||s.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(r)return null;throw new Error('"'+n+'" is not in the SourceMap.')};dt.prototype.generatedPositionFor=function(t){var r=A.getArg(t,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var o={source:r,originalLine:A.getArg(t,"line"),originalColumn:A.getArg(t,"column")},n=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,A.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(n>=0){var s=this._originalMappings[n];if(s.source===o.source)return{line:A.getArg(s,"generatedLine",null),column:A.getArg(s,"generatedColumn",null),lastColumn:A.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};yf.BasicSourceMapConsumer=dt;function wr(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new ac,this._names=new ac;var s={line:-1,column:0};this._sections=n.map(function(i){if(i.url)throw new Error("Support for url field in sections not implemented.");var c=A.getArg(i,"offset"),a=A.getArg(c,"line"),p=A.getArg(c,"column");if(a<s.line||a===s.line&&p<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=c,{generatedOffset:{generatedLine:a+1,generatedColumn:p+1},consumer:new Ce(A.getArg(i,"map"),t)}})}wr.prototype=Object.create(Ce.prototype);wr.prototype.constructor=Ce;wr.prototype._version=3;Object.defineProperty(wr.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}});wr.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=fy.search(r,this._sections,function(s,i){var c=s.generatedLine-i.generatedOffset.generatedLine;return c||s.generatedColumn-i.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:r.generatedLine-(n.generatedOffset.generatedLine-1),column:r.generatedColumn-(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}};wr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})};wr.prototype.sourceContentFor=function(t,r){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],s=n.consumer.sourceContentFor(t,!0);if(s||s==="")return s}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')};wr.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var o=this._sections[r];if(o.consumer._findSourceIndex(A.getArg(t,"source"))!==-1){var n=o.consumer.generatedPositionFor(t);if(n){var s={line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}};wr.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],s=n.consumer._generatedMappings,i=0;i<s.length;i++){var c=s[i],a=n.consumer._sources.at(c.source);a=A.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var p=null;c.name&&(p=n.consumer._names.at(c.name),this._names.add(p),p=this._names.indexOf(p));var f={source:a,generatedLine:c.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(n.generatedOffset.generatedLine===c.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:p};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}za(this.__generatedMappings,A.compareByGeneratedPositionsDeflated),za(this.__originalMappings,A.compareByOriginalPositions)};yf.IndexedSourceMapConsumer=wr});var OT=$(ET=>{u();var W3=uy().SourceMapGenerator,bf=cc(),U3=/(\r?\n)/,B3=10,uc="$$$isSourceNode$$$";function Zt(e,t,r,o,n){this.children=[],this.sourceContents={},this.line=e??null,this.column=t??null,this.source=r??null,this.name=n??null,this[uc]=!0,o!=null&&this.add(o)}Zt.fromStringWithSourceMap=function(t,r,o){var n=new Zt,s=t.split(U3),i=0,c=function(){var d=b(),g=b()||"";return d+g;function b(){return i<s.length?s[i++]:void 0}},a=1,p=0,f=null;return r.eachMapping(function(d){if(f!==null)if(a<d.generatedLine)h(f,c()),a++,p=0;else{var g=s[i]||"",b=g.substr(0,d.generatedColumn-p);s[i]=g.substr(d.generatedColumn-p),p=d.generatedColumn,h(f,b),f=d;return}for(;a<d.generatedLine;)n.add(c()),a++;if(p<d.generatedColumn){var g=s[i]||"";n.add(g.substr(0,d.generatedColumn)),s[i]=g.substr(d.generatedColumn),p=d.generatedColumn}f=d},this),i<s.length&&(f&&h(f,c()),n.add(s.splice(i).join(""))),r.sources.forEach(function(d){var g=r.sourceContentFor(d);g!=null&&(o!=null&&(d=bf.join(o,d)),n.setSourceContent(d,g))}),n;function h(d,g){if(d===null||d.source===void 0)n.add(g);else{var b=o?bf.join(o,d.source):d.source;n.add(new Zt(d.originalLine,d.originalColumn,b,g,d.name))}}};Zt.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[uc]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Zt.prototype.prepend=function(t){if(Array.isArray(t))for(var r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[uc]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Zt.prototype.walk=function(t){for(var r,o=0,n=this.children.length;o<n;o++)r=this.children[o],r[uc]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Zt.prototype.join=function(t){var r,o,n=this.children.length;if(n>0){for(r=[],o=0;o<n-1;o++)r.push(this.children[o]),r.push(t);r.push(this.children[o]),this.children=r}return this};Zt.prototype.replaceRight=function(t,r){var o=this.children[this.children.length-1];return o[uc]?o.replaceRight(t,r):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,r):this.children.push("".replace(t,r)),this};Zt.prototype.setSourceContent=function(t,r){this.sourceContents[bf.toSetString(t)]=r};Zt.prototype.walkSourceContents=function(t){for(var r=0,o=this.children.length;r<o;r++)this.children[r][uc]&&this.children[r].walkSourceContents(t);for(var n=Object.keys(this.sourceContents),r=0,o=n.length;r<o;r++)t(bf.fromSetString(n[r]),this.sourceContents[n[r]])};Zt.prototype.toString=function(){var t="";return this.walk(function(r){t+=r}),t};Zt.prototype.toStringWithSourceMap=function(t){var r={code:"",line:1,column:0},o=new W3(t),n=!1,s=null,i=null,c=null,a=null;return this.walk(function(p,f){r.code+=p,f.source!==null&&f.line!==null&&f.column!==null?((s!==f.source||i!==f.line||c!==f.column||a!==f.name)&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),s=f.source,i=f.line,c=f.column,a=f.name,n=!0):n&&(o.addMapping({generated:{line:r.line,column:r.column}}),s=null,n=!1);for(var h=0,d=p.length;h<d;h++)p.charCodeAt(h)===B3?(r.line++,r.column=0,h+1===d?(s=null,n=!1):n&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(p,f){o.setSourceContent(p,f)}),{code:r.code,map:o}};ET.SourceNode=Zt});var CT=$(Sf=>{u();Sf.SourceMapGenerator=uy().SourceMapGenerator;Sf.SourceMapConsumer=_T().SourceMapConsumer;Sf.SourceNode=OT().SourceNode});u();u();u();var js=e=>typeof e=="function",l=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(c){return t(c,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var B=e=>e;var zs=e=>()=>e,Po=zs(!0),eo=zs(!1),Cf=zs(null),Va=zs(void 0),Lo=Va;function m(e,t,r,o,n,s,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return c(i(s(n(o(r(t(e)))))));case 9:return a(c(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let f=1;f<arguments.length;f++)p=arguments[f](p);return p}}}u();u();u();var Gs=e=>(t,r)=>t===r||e(t,r);var dy=l(2,(e,t)=>Gs((r,o)=>e(t(r),t(o))));var xy=e=>Gs((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});u();var Ka=e=>l(3,(t,r,o)=>e(t,n=>Object.assign({},n,{[r]:o(n)}))),Ja=e=>l(2,(t,r)=>e(t,o=>({[r]:o}))),Ya=(e,t)=>l(3,(r,o,n)=>t(r,s=>e(n(s),i=>Object.assign({},s,{[o]:i}))));u();u();u();u();u();var zT="3.6.4",wn=()=>zT;var wf=Symbol.for(`effect/GlobalValue/globalStoreId/${wn()}`);wf in globalThis||(globalThis[wf]=new Map);var kf=globalThis[wf],q=(e,t)=>(kf.has(e)||kf.set(e,t()),kf.get(e));u();var Qa=e=>typeof e=="string",pc=e=>typeof e=="number";var yy=e=>typeof e=="bigint";var Do=js;var $T=e=>typeof e=="object"&&e!==null,Mn=e=>$T(e)||Do(e),k=l(2,(e,t)=>Mn(e)&&t in e),Rn=l(2,(e,t)=>k(e,"_tag")&&e._tag===t),Fn=e=>e==null;var hr=e=>k(e,Symbol.iterator);var Mf=e=>k(e,"then")&&Do(e.then);u();u();var Tn=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var Rf=Symbol.for("effect/Gen/GenKind"),Af=e=>Mn(e)&&Rf in e,Ff=class{value;constructor(t){this.value=t}get _F(){return B}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[Rf]=Rf;[Symbol.iterator](){return new fc(this)}},fc=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var Sy=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Ff(e)},VT=335903614,KT=4150755663,JT=1481765933,YT=1284865837,QT=9007199254740992,ZT=134217728,Xa=class{_state;constructor(t,r,o,n){return Fn(r)&&Fn(t)?(r=Math.random()*4294967295>>>0,t=0):Fn(r)&&(r=t,t=0),Fn(n)&&Fn(o)?(n=this._state?this._state[3]:KT,o=this._state?this._state[2]:VT):Fn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),by(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*ZT+r)/QT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;XT(this._state,t,r,JT,YT),by(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(s>>>i|s<<c)>>>0}};function XT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,c=(r&65535)*(n&65535)>>>0,a=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),s=s<<16>>>0,c=c+s>>>0,c>>>0<s>>>0&&(a=a+1>>>0),a=a+Math.imul(r,o)>>>0,a=a+Math.imul(t,n)>>>0,e[0]=a,e[1]=c}function by(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var Tf=Symbol.for("effect/Utils/YieldWrap"),Mr=class{#e;constructor(t){this.#e=t}[Tf](){return this.#e}};function $s(e){if(typeof e=="object"&&e!==null&&Tf in e)return e[Tf]();throw new Error(Tn("yieldWrapGet"))}var It=q("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var eA=e=>{let t={[e](r){return r()}};return function(r){return t[e](r)}},Ne=eA("effect_internal_function");var Nf=q(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),F=Symbol.for("effect/Hash"),w=e=>{if(It.enabled===!0)return 0;switch(typeof e){case"number":return tu(e);case"bigint":return ce(e.toString(10));case"boolean":return ce(String(e));case"symbol":return ce(String(e));case"string":return ce(e);case"undefined":return ce("undefined");case"function":case"object":return e===null?ce("null"):e instanceof Date?w(e.toISOString()):tA(e)?e[F]():Vs(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Vs=e=>(Nf.has(e)||Nf.set(e,tu(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Nf.get(e)),L=e=>t=>t*53^e,eu=e=>e&3221225471|e>>>1&1073741824,tA=e=>k(e,F),tu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return eu(t)},ce=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return eu(t)},rA=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=m(ce(t[o]),L(w(e[t[o]])));return eu(r)},ru=e=>rA(e,Object.keys(e)),Nt=e=>{let t=6151;for(let r=0;r<e.length;r++)t=m(t,L(w(e[r])));return eu(t)},V=function(){if(arguments.length===1){let r=arguments[0];return function(o){return Object.defineProperty(r,F,{value(){return o},enumerable:!1}),o}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,F,{value(){return t},enumerable:!1}),t};var R=Symbol.for("effect/Equal");function v(){return arguments.length===1?e=>ou(e,arguments[0]):ou(arguments[0],arguments[1])}function ou(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(Ks(e)&&Ks(t))return w(e)===w(t)&&e[R](t)?!0:It.enabled&&It.tester?It.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(It.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((o,n)=>ou(o,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let o=Object.keys(e),n=Object.keys(t);if(o.length===n.length){for(let s of o)if(!(s in t&&ou(e[s],t[s])))return It.tester?It.tester(e,t):!1;return!0}}return It.tester?It.tester(e,t):!1}}return It.enabled&&It.tester?It.tester(e,t):!1}var Ks=e=>k(e,R),mc=()=>v;u();var j=Symbol.for("nodejs.util.inspect.custom"),J=e=>k(e,"toJSON")&&Do(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(J):e,te=e=>JSON.stringify(e,null,2),kG={toJSON(){return J(this)},[j](){return this.toJSON()},toString(){return te(this.toJSON())}},_y=class{[j](){return this.toJSON()}toString(){return te(this.toJSON())}},qo=(e,t=2)=>{try{return typeof e=="object"?Ey(e,t):String(e)}catch{return String(e)}},Ey=(e,t)=>{let r=[],o=JSON.stringify(e,(n,s)=>typeof s=="object"&&s!==null?r.includes(s)?void 0:r.push(s)&&s:s,t);return r=void 0,o};u();u();var O=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};u();var An="Async",Js="Commit",Pe="Failure",Ys="OnFailure",Qs="OnSuccess",Zs="OnSuccessAndFailure",Le="Success",su="Sync",Oy="Tag",ro="UpdateRuntimeFlags",Xs="While",iu="WithRuntime",ei="Yield",hc="RevertFlags";var Pf=Symbol.for("effect/Effect"),Cy=Symbol.for("effect/Stream"),vy=Symbol.for("effect/Sink"),ky=Symbol.for("effect/Channel"),Ho={_R:e=>e,_E:e=>e,_A:e=>e,_V:wn()},nA={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},sA={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},oo={[Pf]:Ho,[Cy]:Ho,[vy]:nA,[ky]:sA,[R](e){return this===e},[F](){return V(this,Vs(this))},[Symbol.iterator](){return new fc(new Mr(this))},pipe(){return O(this,arguments)}},ti={[F](){return V(this,ru(this))},[R](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let o of t)if(!(o in e&&v(this[o],e[o])))return!1;return!0}},wy={...oo,_op:Js},Lf={...wy,...ti};u();var My=Symbol.for("effect/Option"),Ry={...oo,[My]:{_A:e=>e},[j](){return this.toJSON()},toString(){return te(this.toJSON())}},cA=Object.assign(Object.create(Ry),{_tag:"Some",_op:"Some",[R](e){return cu(e)&&Df(e)&&v(this.value,e.value)},[F](){return V(this,L(w(this._tag))(w(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:J(this.value)}}}),aA=w("None"),uA=Object.assign(Object.create(Ry),{_tag:"None",_op:"None",[R](e){return cu(e)&&au(e)},[F](){return aA},toJSON(){return{_id:"Option",_tag:this._tag}}}),cu=e=>k(e,My),au=e=>e._tag==="None",Df=e=>e._tag==="Some",Wo=Object.create(uA),Uo=e=>{let t=Object.create(cA);return t.value=e,t};var Hf=Symbol.for("effect/Either"),Fy={...oo,[Hf]:{_R:e=>e},[j](){return this.toJSON()},toString(){return te(this.toJSON())}},lA=Object.assign(Object.create(Fy),{_tag:"Right",_op:"Right",[R](e){return Wf(e)&&uu(e)&&v(this.right,e.right)},[F](){return L(w(this._tag))(w(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:J(this.right)}}}),pA=Object.assign(Object.create(Fy),{_tag:"Left",_op:"Left",[R](e){return Wf(e)&&ri(e)&&v(this.left,e.left)},[F](){return L(w(this._tag))(w(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:J(this.left)}}}),Wf=e=>k(e,Hf),ri=e=>e._tag==="Left",uu=e=>e._tag==="Right",lu=e=>{let t=Object.create(pA);return t.left=e,t},pu=e=>{let t=Object.create(lA);return t.right=e,t},Uf=e=>uu(e)?Wo:Uo(e.left),Bf=e=>ri(e)?Wo:Uo(e.right);var Ve=pu,St=lu;var no=ri,oi=uu;var fA=l(2,(e,{onLeft:t,onRight:r})=>no(e)?t(e.left):r(e.right));var fu=fA({onLeft:B,onRight:B});var Ay=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(no(o))return o;r.push(o.right)}return Ve(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(no(o))return o;t[r]=o.right}return Ve(t)};u();var jf=e=>e.length>0;var de={};hy(de,{Do:()=>VA,TypeId:()=>hA,all:()=>Wy,andThen:()=>wA,ap:()=>NA,as:()=>Dy,asVoid:()=>vA,bind:()=>$A,bindTo:()=>zA,composeK:()=>TA,contains:()=>Vf,containsWith:()=>jy,exists:()=>jA,filter:()=>DA,filterMap:()=>By,firstSomeOf:()=>_A,flatMap:()=>er,flatMapNullable:()=>MA,flatten:()=>RA,fromIterable:()=>xA,fromNullable:()=>dr,gen:()=>JA,getEquivalence:()=>qA,getLeft:()=>yA,getOrElse:()=>De,getOrNull:()=>OA,getOrThrow:()=>xc,getOrThrowWith:()=>Ly,getOrUndefined:()=>pt,getOrder:()=>HA,getRight:()=>gA,isNone:()=>z,isOption:()=>Py,isSome:()=>W,let:()=>GA,lift2:()=>WA,liftNullable:()=>EA,liftPredicate:()=>UA,liftThrowable:()=>CA,map:()=>Me,match:()=>Ke,none:()=>S,orElse:()=>bA,orElseEither:()=>SA,orElseSome:()=>Gf,partitionMap:()=>LA,product:()=>Hy,productMany:()=>IA,reduceCompact:()=>PA,some:()=>_,tap:()=>qy,toArray:()=>Uy,toRefinement:()=>dA,void:()=>kA,zipLeft:()=>AA,zipRight:()=>FA,zipWith:()=>$f});u();u();var mu=e=>(t,r)=>t===r?0:e(t,r);var Iy=mu((e,t)=>e<t?-1:1);var Ny=l(2,(e,t)=>mu((r,o)=>e(t(r),t(o))));var zf=e=>l(2,(t,r)=>e(t,r)===1);var hA=Symbol.for("effect/Option"),S=()=>Wo,_=Uo,Py=cu,z=au,W=Df,Ke=l(2,(e,{onNone:t,onSome:r})=>z(e)?t():r(e.value)),dA=e=>t=>W(e(t)),xA=e=>{for(let t of e)return _(t);return S()},gA=Bf,yA=Uf,De=l(2,(e,t)=>z(e)?t():e.value),bA=l(2,(e,t)=>z(e)?t():e),Gf=l(2,(e,t)=>z(e)?_(t()):e),SA=l(2,(e,t)=>z(e)?Me(t(),pu):Me(e,lu)),_A=e=>{let t=S();for(t of e)if(W(t))return t;return t},dr=e=>e==null?S():_(e),EA=e=>(...t)=>dr(e(...t)),OA=De(Cf),pt=De(Va),CA=e=>(...t)=>{try{return _(e(...t))}catch{return S()}},Ly=l(2,(e,t)=>{if(W(e))return e.value;throw t()}),xc=Ly(()=>new Error("getOrThrow called on a None")),Me=l(2,(e,t)=>z(e)?S():_(t(e.value))),Dy=l(2,(e,t)=>Me(e,()=>t)),vA=Dy(void 0),kA=_(void 0);var er=l(2,(e,t)=>z(e)?S():t(e.value)),wA=l(2,(e,t)=>er(e,r=>{let o=js(t)?t(r):t;return Py(o)?o:_(o)})),MA=l(2,(e,t)=>z(e)?S():dr(t(e.value))),RA=er(B),FA=l(2,(e,t)=>er(e,()=>t)),TA=l(2,(e,t)=>r=>er(e(r),t)),AA=l(2,(e,t)=>qy(e,()=>t)),qy=l(2,(e,t)=>er(e,r=>Me(t(r),()=>r))),Hy=(e,t)=>W(e)&&W(t)?_([e.value,t.value]):S(),IA=(e,t)=>{if(z(e))return S();let r=[e.value];for(let o of t){if(z(o))return S();r.push(o.value)}return _(r)},Wy=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(z(o))return S();r.push(o.value)}return _(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(z(o))return S();t[r]=o.value}return _(t)},$f=l(3,(e,t,r)=>Me(Hy(e,t),([o,n])=>r(o,n))),NA=l(2,(e,t)=>$f(e,t,(r,o)=>r(o))),PA=l(3,(e,t,r)=>{let o=t;for(let n of e)W(n)&&(o=r(o,n.value));return o}),Uy=e=>z(e)?[]:[e.value],LA=l(2,(e,t)=>{if(z(e))return[S(),S()];let r=t(e.value);return ri(r)?[_(r.left),S()]:[S(),_(r.right)]}),By=l(2,(e,t)=>z(e)?S():t(e.value)),DA=l(2,(e,t)=>By(e,r=>t(r)?Uo(r):Wo)),qA=e=>Gs((t,r)=>z(t)?z(r):z(r)?!1:e(t.value,r.value)),HA=e=>mu((t,r)=>W(t)?W(r)?e(t.value,r.value):1:-1),WA=e=>l(2,(t,r)=>$f(t,r,e)),UA=l(2,(e,t)=>t(e)?_(e):S()),jy=e=>l(2,(t,r)=>z(t)?!1:e(t.value,r)),BA=mc(),Vf=jy(BA),jA=l(2,(e,t)=>z(e)?!1:t(e.value)),zA=Ja(Me),GA=Ka(Me);var $A=Ya(Me,er),VA=_({}),KA=Sy(),JA=(...e)=>{let t;e.length===1?t=e[0]:t=e[1].bind(e[0]);let r=t(KA),o=r.next();if(o.done)return _(o.value);{let n=o.value;if(Af(n)?n=n.value:n=$s(n),z(n))return n;for(;!o.done;)if(o=r.next(n.value),!o.done&&(n=o.value,Af(n)?n=n.value:n=$s(n),z(n)))return n;return _(o.value)}};u();var zy=(...e)=>e;var gc=e=>new Array(e),Kf=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=new Array(r);for(let n=0;n<r;n++)o[n]=t(n);return o};var ee=e=>Array.isArray(e)?e:Array.from(e),$y=e=>Array.isArray(e)?e:[e];var ni=l(2,(e,t)=>[t,...e]);var Vy=l(2,(e,t)=>[...e,t]),Jf=l(2,(e,t)=>ee(e).concat(ee(t)));var YA=Array.isArray,QA=e=>e.length===0,Ky=QA,Jy=jf,xt=jf;var Yy=(e,t)=>e<0||e>=t.length,ZA=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),XA=l(2,(e,t)=>{let r=Math.floor(t);return Yy(r,e)?S():_(e[r])}),Yf=l(2,(e,t)=>{let r=Math.floor(t);if(Yy(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var Bo=XA(0),gt=Yf(0),du=e=>xt(e)?_(Qf(e)):S(),Qf=e=>e[e.length-1];var Rr=e=>e.slice(1);var eI=(e,t)=>{let r=0;for(let o of e){if(!t(o,r))break;r++}return r},Qy=l(2,(e,t)=>rI(e,eI(e,t))),Zy=l(2,(e,t)=>{let r=ee(e);return r.slice(ZA(t,r),r.length)});var Zf=e=>Array.from(e).reverse(),Nn=l(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var Xf=l(2,(e,t)=>Xy(e,t,zy)),Xy=l(3,(e,t,r)=>{let o=ee(e),n=ee(t);if(xt(o)&&xt(n)){let s=[r(gt(o),gt(n))],i=Math.min(o.length,n.length);for(let c=1;c<i;c++)s[c]=r(o[c],n[c]);return s}return[]});var tI=mc();var rI=l(2,(e,t)=>{let r=Array.from(e),o=Math.floor(t);return xt(r)?o>=1?oI(r,o):[[],r]:[r,[]]}),oI=l(2,(e,t)=>{let r=Math.max(1,Math.floor(t));return r>=e.length?[nI(e),[]]:[ni(e.slice(1,r),gt(e)),e.slice(r)]});var nI=e=>e.slice();var sI=l(3,(e,t,r)=>{let o=ee(e),n=ee(t);return xt(o)?xt(n)?rb(r)(Jf(o,n)):o:n}),Fr=l(2,(e,t)=>sI(e,t,tI));var Bt=()=>[],_t=e=>[e],Tr=l(2,(e,t)=>e.map(t)),eb=l(2,(e,t)=>{if(Ky(e))return[];let r=[];for(let o=0;o<e.length;o++){let n=t(e[o],o);for(let s=0;s<n.length;s++)r.push(n[s])}return r}),xu=eb(B),si=l(2,(e,t)=>{let r=ee(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);W(s)&&o.push(s.value)}return o});var tb=si(B);var tr=l(3,(e,t,r)=>ee(e).reduce((o,n,s)=>r(o,n,s),t)),gu=l(3,(e,t,r)=>ee(e).reduceRight((o,n,s)=>r(o,n,s),t));var em=(e,t)=>{let r=[],o=e,n;for(;W(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var ii=xy;var rb=l(2,(e,t)=>{let r=ee(e);if(xt(r)){let o=[gt(r)],n=Rr(r);for(let s of n)o.every(i=>!t(s,i))&&o.push(s);return o}return[]}),tm=e=>rb(e,mc());var so=l(2,(e,t)=>ee(e).join(t));u();var ob=e=>!e;u();u();u();var sb=Symbol.for("effect/Context/Tag"),iI="effect/STM",cI=Symbol.for(iI),rm={...oo,_tag:"Tag",_op:"Tag",[cI]:Ho,[sb]:{_Service:e=>e,_Identifier:e=>e},toString(){return te(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[j](){return this.toJSON()},of(e){return e},context(e){return sm(this,e)}},ib=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;let o=Object.create(rm);return Object.defineProperty(o,"stack",{get(){return r.stack}}),o.key=e,o};var om=Symbol.for("effect/Context"),aI={[om]:{_Services:e=>e},[R](e){if(nm(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!v(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[F](){return V(this,tu(this.unsafeMap.size))},pipe(){return O(this,arguments)},toString(){return te(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(J)}},[j](){return this.toJSON()}},jo=e=>{let t=Object.create(aI);return t.unsafeMap=e,t},uI=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[2].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},nm=e=>k(e,om);var lI=jo(new Map),cb=()=>lI,sm=(e,t)=>jo(new Map([[e.key,t]])),ab=l(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t.key,r),jo(o)}),im=l(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw uI(t);return e.unsafeMap.get(t.key)}),ub=im,lb=l(2,(e,t)=>e.unsafeMap.has(t.key)?Uo(e.unsafeMap.get(t.key)):Wo),pb=l(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return jo(r)});var Et=ib;var fb=nm;var Ot=cb,cm=sm,ve=ab,Be=ub,ci=im,xr=lb,Pn=pb;u();u();u();var mb=Symbol.for("effect/Chunk");function fI(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var hb=[],mI=e=>Gs((t,r)=>t.length===r.length&&rr(t).every((o,n)=>e(o,Ln(r,n)))),hI=mI(v),dI={[mb]:{_A:e=>e},toString(){return te(this.toJSON())},toJSON(){return{_id:"Chunk",values:rr(this).map(J)}},[j](){return this.toJSON()},[R](e){return db(e)&&hI(this,e)},[F](){return V(this,Nt(rr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return hb[Symbol.iterator]();default:return rr(this)[Symbol.iterator]()}},pipe(){return O(this,arguments)}},Ye=e=>{let t=Object.create(dI);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Ar,t.right=Ar;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Ar,t.right=Ar;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Ar,t.right=Ar;break}}return t},db=e=>k(e,mb),Ar=Ye({_tag:"IEmpty"}),Pt=()=>Ar,yc=(...e)=>e.length===1?Re(e[0]):bI(e),Re=e=>Ye({_tag:"ISingleton",a:e}),Nr=e=>db(e)?e:Ye({_tag:"IArray",array:ee(e)}),am=(e,t,r)=>{switch(e.backing._tag){case"IArray":{fI(e.backing.array,0,t,r,e.length);break}case"IConcat":{am(e.left,t,r),am(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Ln(e,o),o+=1,n+=1;break}}};var xI=e=>{switch(e.backing._tag){case"IEmpty":return hb;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return am(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Ar,e.right=Ar,e.depth=0,t}}},rr=xI,gI=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return Ye({_tag:"IArray",array:Zf(e.backing.array)});case"IConcat":return Ye({_tag:"IConcat",left:Ir(e.backing.right),right:Ir(e.backing.left)});case"ISlice":return ai(Zf(rr(e)))}},Ir=gI,yI=l(2,(e,t)=>t<0||t>=e.length?S():_(Ln(e,t))),ai=e=>Ye({_tag:"IArray",array:e}),bI=e=>ai(e),Ln=l(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Ln(e.left,t):Ln(e.right,t-e.left.length);case"ISlice":return Ln(e.backing.chunk,t+e.backing.offset)}}),yu=l(2,(e,t)=>jt(e,Re(t))),Qe=l(2,(e,t)=>jt(Re(t),e));var um=l(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Ar;switch(e.backing._tag){case"ISlice":return Ye({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?um(e.right,t-e.left.length):Ye({_tag:"IConcat",left:um(e.left,t),right:e.right});default:return Ye({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var jt=l(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return Ye({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=jt(e.right,t);return Ye({_tag:"IConcat",left:e.left,right:o})}else{let o=jt(e.right.right,t);if(o.depth===e.depth-3){let n=Ye({_tag:"IConcat",left:e.right.left,right:o});return Ye({_tag:"IConcat",left:e.left,right:n})}else{let n=Ye({_tag:"IConcat",left:e.left,right:e.right.left});return Ye({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=jt(e,t.left);return Ye({_tag:"IConcat",left:o,right:t.right})}else{let o=jt(e,t.left.left);if(o.depth===t.depth-3){let n=Ye({_tag:"IConcat",left:o,right:t.left.right});return Ye({_tag:"IConcat",left:n,right:t.right})}else{let n=Ye({_tag:"IConcat",left:t.left.right,right:t.right});return Ye({_tag:"IConcat",left:o,right:n})}}});var lm=e=>e.length===0,tt=e=>e.length>0,bu=yI(0),pm=e=>Ln(e,0),Ze=pm;var ot=e=>um(e,1);u();var hm=Symbol.for("effect/Duration"),li=BigInt(0),fm=BigInt(24),ui=BigInt(60),Su=BigInt(1e3),mm=BigInt(1e6),dm=BigInt(1e9),xb=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,nt=e=>{if(yb(e))return e;if(pc(e))return pi(e);if(yy(e))return bc(e);if(Array.isArray(e)){if(e.length===2&&pc(e[0])&&pc(e[1]))return bc(BigInt(e[0])*dm+BigInt(e[1]))}else if(Qa(e)){xb.lastIndex=0;let t=xb.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nano":case"nanos":return bc(BigInt(o));case"micro":case"micros":return EI(BigInt(o));case"milli":case"millis":return pi(s);case"second":case"seconds":return gm(s);case"minute":case"minutes":return OI(s);case"hour":case"hours":return CI(s);case"day":case"days":return vI(s);case"week":case"weeks":return kI(s)}}}throw new Error("Invalid DurationInput")};var gb={_tag:"Millis",millis:0},SI={_tag:"Infinity"},_I={[hm]:hm,[F](){return V(this,ru(this.value))},[R](e){return yb(e)&&FI(this,e)},toString(){return`Duration(${bm(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:MI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},io=e=>{let t=Object.create(_I);return pc(e)?isNaN(e)||e<=0?t.value=gb:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=SI:e<=li?t.value=gb:t.value={_tag:"Nanos",nanos:e},t},yb=e=>k(e,hm);var xm=io(0);var bc=e=>io(e),EI=e=>io(e*Su),pi=e=>io(e),gm=e=>io(e*1e3),OI=e=>io(e*6e4),CI=e=>io(e*36e5),vI=e=>io(e*864e5),kI=e=>io(e*6048e5),Pr=e=>{let t=nt(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var wI=e=>{let t=nt(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},MI=e=>{let t=nt(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/dm),Number(t.value.nanos%dm)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var bb=l(3,(e,t,r)=>{let o=nt(e),n=nt(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(Pr(o),Pr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var RI=(e,t)=>bb(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var ym=l(2,(e,t)=>bb(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),FI=l(2,(e,t)=>RI(nt(e),nt(t))),bm=e=>{let t=nt(e),r=[];if(t.value._tag==="Infinity")return"Infinity";let o=wI(t);o%mm&&r.push(`${o%mm}ns`);let n=o/mm;n%Su!==li&&r.push(`${n%Su}ms`);let s=n/Su;s%ui!==li&&r.push(`${s%ui}s`);let i=s/ui;i%ui!==li&&r.push(`${i%ui}m`);let c=i/ui;c%fm!==li&&r.push(`${c%fm}h`);let a=c/fm;return a!==li&&r.push(`${a}d`),r.reverse().join(" ")};u();u();u();u();u();u();u();var Sm=Math.pow(2,5),Sb=Sm-1,_b=Sm/2,Eb=Sm/4;function TI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function zo(e,t){return t>>>e&Sb}function Go(e){return 1<<e}function _u(e,t){return TI(e&t-1)}u();u();var Ob=(e,t)=>({value:e,previous:t});u();function Dn(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function _m(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function Cb(e,t,r,o){let n=o.length;if(e){let a=n;for(;a>=t;)o[a--]=o[a];return o[t]=r,o}let s=0,i=0,c=new Array(n+1);for(;s<t;)c[i++]=o[s++];for(c[t]=r;s<n;)c[++i]=o[s++];return c}var ao=class e{_tag="EmptyNode";modify(t,r,o,n,s,i){let c=o(S());return z(c)?new e:(++i.value,new fi(t,n,s,c))}};function or(e){return Rn(e,"EmptyNode")}function II(e){return or(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Eu(e,t){return or(e)?!1:t===e.edit}var fi=class e{edit;hash;key;value;_tag="LeafNode";constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n}modify(t,r,o,n,s,i){if(v(s,this.key)){let a=o(this.value);return a===this.value?this:z(a)?(--i.value,new ao):Eu(this,t)?(this.value=a,this):new e(t,n,s,a)}let c=o(S());return z(c)?this:(++i.value,vb(t,r,this.hash,this,n,new e(t,n,s,c)))}},Em=class e{edit;hash;children;_tag="CollisionNode";constructor(t,r,o){this.edit=t,this.hash=r,this.children=o}modify(t,r,o,n,s,i){if(n===this.hash){let a=Eu(this,t),p=this.updateCollisionList(a,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let c=o(S());return z(c)?this:(++i.value,vb(t,r,this.hash,this,n,new fi(t,n,s,c)))}updateCollisionList(t,r,o,n,s,i,c){let a=n.length;for(let f=0;f<a;++f){let h=n[f];if("key"in h&&v(i,h.key)){let d=h.value,g=s(d);return g===d?n:z(g)?(--c.value,_m(t,f,n)):Dn(t,f,new fi(r,o,i,g),n)}}let p=s(S());return z(p)?n:(++c.value,Dn(t,a,new fi(r,o,i,p),n))}},Sc=class e{edit;mask;children;_tag="IndexedNode";constructor(t,r,o){this.edit=t,this.mask=r,this.children=o}modify(t,r,o,n,s,i){let c=this.mask,a=this.children,p=zo(r,n),f=Go(p),h=_u(c,f),d=c&f,g=Eu(this,t);if(!d){let K=new ao().modify(t,r+5,o,n,s,i);return K?a.length>=_b?PI(t,p,K,c,a):new e(t,c|f,Cb(g,h,K,a)):this}let b=a[h],M=b.modify(t,r+5,o,n,s,i);if(b===M)return this;let T=c,N;if(or(M)){if(T&=~f,!T)return new ao;if(a.length<=2&&II(a[h^1]))return a[h^1];N=_m(g,h,a)}else N=Dn(g,h,M,a);return g?(this.mask=T,this.children=N,this):new e(t,T,N)}},Om=class e{edit;size;children;_tag="ArrayNode";constructor(t,r,o){this.edit=t,this.size=r,this.children=o}modify(t,r,o,n,s,i){let c=this.size,a=this.children,p=zo(r,n),f=a[p],h=(f||new ao).modify(t,r+5,o,n,s,i);if(f===h)return this;let d=Eu(this,t),g;if(or(f)&&!or(h))++c,g=Dn(d,p,h,a);else if(!or(f)&&or(h)){if(--c,c<=Eb)return NI(t,c,p,a);g=Dn(d,p,new ao,a)}else g=Dn(d,p,h,a);return d?(this.size=c,this.children=g,this):new e(t,c,g)}};function NI(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let c=0,a=o.length;c<a;++c)if(c!==r){let p=o[c];p&&!or(p)&&(n[s++]=p,i|=1<<c)}return new Sc(e,i,n)}function PI(e,t,r,o,n){let s=[],i=o,c=0;for(let a=0;i;++a)i&1&&(s[a]=n[c++]),i>>>=1;return s[t]=r,new Om(e,c+1,s)}function LI(e,t,r,o,n,s){if(r===n)return new Em(e,r,[s,o]);let i=zo(t,r),c=zo(t,n);if(i===c)return a=>new Sc(e,Go(i)|Go(c),[a]);{let a=i<c?[o,s]:[s,o];return new Sc(e,Go(i)|Go(c),a)}}function vb(e,t,r,o,n,s){let i,c=t;for(;;){let a=LI(e,c,r,o,n,s);if(typeof a=="function")i=Ob(a,i),c=c+5;else{let p=a;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var kb="effect/HashMap",Ou=Symbol.for(kb),qI={[Ou]:Ou,[Symbol.iterator](){return new Cu(this,(e,t)=>[e,t])},[F](){let e=w(kb);for(let t of this)e^=m(w(t[0]),L(w(t[1])));return V(this,e)},[R](e){if(Fb(e)){if(e._size!==this._size)return!1;for(let t of this){let r=m(e,ku(t[0],w(t[0])));if(z(r))return!1;if(!v(t[1],r.value))return!1}return!0}return!1},toString(){return te(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},Cm=(e,t,r,o)=>{let n=Object.create(qI);return n._editable=e,n._edit=t,n._root=r,n._size=o,n},Cu=class e{map;f;v;constructor(t,r){this.map=t,this.f=r,this.v=wb(this.map._root,this.f,void 0)}next(){if(z(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=vu(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},vu=e=>e?Mb(e[0],e[1],e[2],e[3],e[4]):S(),wb=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return W(e.value)?_({value:t(e.key,e.value.value),cont:r}):vu(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return Mb(o.length,o,0,t,r)}default:return vu(r)}},Mb=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!or(s))return wb(s,o,[e,t,r,o,n])}return vu(n)},HI=Cm(!1,0,new ao,0),hi=()=>HI;var Rb=e=>{let t=_c(hi());for(let r of e)qn(t,r[0],r[1]);return km(t)},Fb=e=>k(e,Ou),Tb=e=>e&&or(e._root),Ab=l(2,(e,t)=>ku(e,t,w(t))),ku=l(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return v(t,o.key)?o.value:S();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,c=s.length;i<c;++i){let a=s[i];if("key"in a&&v(t,a.key))return a.value}}return S()}case"IndexedNode":{let s=zo(n,r),i=Go(s);if(o.mask&i){o=o.children[_u(o.mask,i)],n+=5;break}return S()}case"ArrayNode":{if(o=o.children[zo(n,r)],o){n+=5;break}return S()}default:return S()}});var vm=l(2,(e,t)=>W(ku(e,t,w(t))));var qn=l(3,(e,t,r)=>Mu(e,t,()=>_(r))),WI=l(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:Cm(e._editable,e._edit,t,r)),wu=e=>new Cu(e,t=>t);var di=e=>e._size,_c=e=>Cm(!0,e._edit+1,e._root,e._size),km=e=>(e._editable=!1,e),Ib=l(2,(e,t)=>{let r=_c(e);return t(r),km(r)}),Mu=l(3,(e,t,r)=>Nb(e,t,w(t),r)),Nb=l(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return m(e,WI(s,n.value))});var Ru=l(2,(e,t)=>Mu(e,t,S));var Pb=l(2,(e,t)=>xi(e,hi(),(r,o,n)=>qn(r,n,t(o,n))));var Fu=l(2,(e,t)=>xi(e,void 0,(r,o,n)=>t(o,n))),xi=l(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return W(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,c=s.length;i<c;){let a=s[i++];a&&!or(a)&&(a._tag==="LeafNode"?W(a.value)&&(t=r(t,a.value.value,a.key)):n.push(a.children))}return t});var Db="effect/HashSet",Tu=Symbol.for(Db),UI={[Tu]:Tu,[Symbol.iterator](){return wu(this._keyMap)},[F](){return V(this,L(w(this._keyMap))(w(Db)))},[R](e){return qb(e)?di(this._keyMap)===di(e._keyMap)&&v(this._keyMap,e._keyMap):!1},toString(){return te(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},Au=e=>{let t=Object.create(UI);return t._keyMap=e,t},qb=e=>k(e,Tu),BI=Au(hi()),Ec=()=>BI,Hb=e=>{let t=Iu(Ec());for(let r of e)gi(t,r);return Nu(t)},Wb=(...e)=>{let t=Iu(Ec());for(let r of e)gi(t,r);return Nu(t)},Ub=l(2,(e,t)=>vm(e._keyMap,t));var Bb=e=>di(e._keyMap),Iu=e=>Au(_c(e._keyMap)),Nu=e=>(e._keyMap._editable=!1,e),wm=l(2,(e,t)=>{let r=Iu(e);return t(r),Nu(r)}),gi=l(2,(e,t)=>e._keyMap._editable?(qn(t,!0)(e._keyMap),e):Au(qn(t,!0)(e._keyMap))),Mm=l(2,(e,t)=>e._keyMap._editable?(Ru(t)(e._keyMap),e):Au(Ru(t)(e._keyMap))),jb=l(2,(e,t)=>wm(e,r=>{for(let o of t)Mm(r,o)}));var zb=l(2,(e,t)=>wm(Ec(),r=>{Gb(e,o=>gi(r,o));for(let o of t)gi(r,o)}));var Gb=l(2,(e,t)=>Fu(e._keyMap,(r,o)=>t(o))),$b=l(3,(e,t,r)=>xi(e._keyMap,t,(o,n,s)=>r(o,s)));var Lr=Ec,Pu=Hb,Hn=Wb,Vb=Ub;var Wn=Bb;var Un=gi,Rm=Mm,Fm=jb;var uo=zb;var Bn=$b;u();var Kb=Symbol.for("effect/MutableRef"),zI={[Kb]:Kb,toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableRef",current:J(this.current)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},Dr=e=>{let t=Object.create(zI);return t.current=e,t},Lu=l(3,(e,t,r)=>v(t,e.current)?(e.current=r,!0):!1);var Lt=e=>e.current;var nr=l(2,(e,t)=>(e.current=t,e));var qu="effect/FiberId",$o=Symbol.for(qu),yi="None",Tm="Runtime",Am="Composite",GI=ce(`${qu}-${yi}`),Im=class{[$o]=$o;_tag=yi;id=-1;startTimeMillis=-1;[F](){return GI}[R](t){return Wu(t)&&t._tag===yi}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[j](){return this.toJSON()}},Nm=class{id;startTimeMillis;[$o]=$o;_tag=Tm;constructor(t,r){this.id=t,this.startTimeMillis=r}[F](){return V(this,ce(`${qu}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[R](t){return Wu(t)&&t._tag===Tm&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[j](){return this.toJSON()}},Pm=class{left;right;[$o]=$o;_tag=Am;constructor(t,r){this.left=t,this.right=r}_hash;[F](){return m(ce(`${qu}-${this._tag}`),L(w(this.left)),L(w(this.right)),V(this))}[R](t){return Wu(t)&&t._tag===Am&&v(this.left,t.left)&&v(this.right,t.right)}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:J(this.left),right:J(this.right)}}[j](){return this.toJSON()}},Hu=new Im;var Wu=e=>k(e,$o);var Yb=l(2,(e,t)=>e._tag===yi?t:t._tag===yi?e:new Pm(e,t));var Du=e=>{switch(e._tag){case yi:return Lr();case Tm:return Hn(e.id);case Am:return m(Du(e.left),uo(Du(e.right)))}},Jb=q(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Dr(0));var Uu=e=>Array.from(Du(e)).map(r=>`#${r}`).join(",");var Qb=()=>{let e=Lt(Jb);return m(Jb,nr(e+1)),new Nm(e,Date.now())};var Gt=Hu;var Lm=Yb;var Xb=Uu;var Bu=Qb;u();var zn=hi;var eS=Rb,tS=Tb,Dm=Ab;var gr=qn,qm=wu;var rS=di;var oS=Ib,nS=Mu;var ju=Pb;var sS=Fu,Hm=xi;u();var Oc=Symbol.for("effect/List"),Wm=e=>ee(e),VI=e=>dy(ii(e),Wm),KI=VI(v),JI={[Oc]:Oc,_tag:"Cons",toString(){return te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Wm(this).map(J)}},[j](){return this.toJSON()},[R](e){return cS(e)&&this._tag===e._tag&&KI(this,e)},[F](){return V(this,Nt(Wm(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();let r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return O(this,arguments)}},zu=(e,t)=>{let r=Object.create(JI);return r.head=e,r.tail=t,r},YI=ce("Nil"),QI={[Oc]:Oc,_tag:"Nil",toString(){return te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[j](){return this.toJSON()},[F](){return YI},[R](e){return cS(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return O(this,arguments)}},iS=Object.create(QI),cS=e=>k(e,Oc),qr=e=>e._tag==="Nil",Cc=e=>e._tag==="Cons";var ZI=()=>iS,po=(e,t)=>zu(e,t),Hr=ZI,vc=e=>zu(e,iS);var aS=l(2,(e,t)=>XI(t,e)),Gu=l(2,(e,t)=>po(t,e)),XI=l(2,(e,t)=>{if(qr(e))return t;if(qr(t))return e;{let r=zu(t.head,e),o=r,n=t.tail;for(;!qr(n);){let s=zu(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var uS=l(3,(e,t,r)=>{let o=t,n=e;for(;!qr(n);)o=r(o,n.head),n=n.tail;return o});var lS=e=>{let t=Hr(),r=e;for(;!qr(r);)t=Gu(t,r.head),r=r.tail;return t};u();u();u();u();var cK=Object.assign(Object.create(Array.prototype),{[F](){return V(this,Nt(this))},[R](e){return Array.isArray(e)&&this.length===e.length?this.every((t,r)=>v(t,e[r])):!1}}),_i=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=ti,e}(),$u=e=>Object.assign(Object.create(ti),e);u();var eN=Symbol.for("effect/DifferContextPatch");function fS(e){return e}var wc={..._i.prototype,[eN]:{_Value:fS,_Patch:fS}},tN=Object.assign(Object.create(wc),{_tag:"Empty"}),rN=Object.create(tN),Um=()=>rN,oN=Object.assign(Object.create(wc),{_tag:"AndThen"}),nN=(e,t)=>{let r=Object.create(oN);return r.first=e,r.second=t,r},sN=Object.assign(Object.create(wc),{_tag:"AddService"}),iN=(e,t)=>{let r=Object.create(sN);return r.key=e,r.service=t,r},cN=Object.assign(Object.create(wc),{_tag:"RemoveService"}),aN=e=>{let t=Object.create(cN);return t.key=e,t},uN=Object.assign(Object.create(wc),{_tag:"UpdateService"}),lN=(e,t)=>{let r=Object.create(uN);return r.key=e,r.update=t,r},mS=(e,t)=>{let r=new Map(e.unsafeMap),o=Um();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),v(i,s)||(o=kc(lN(n,()=>s))(o))}else r.delete(n),o=kc(iN(n,s))(o);for(let[n]of r.entries())o=kc(aN(n))(o);return o},kc=l(2,(e,t)=>nN(e,t)),hS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,o=Re(e),n=new Map(t.unsafeMap);for(;tt(o);){let i=Ze(o),c=ot(o);switch(i._tag){case"Empty":{o=c;break}case"AddService":{n.set(i.key,i.service),o=c;break}case"AndThen":{o=Qe(Qe(c,i.second),i.first);break}case"RemoveService":{n.delete(i.key),o=c;break}case"UpdateService":{n.set(i.key,i.update(n.get(i.key))),r=!0,o=c;break}}}if(!r)return jo(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,c]of n)s.set(i,c);return jo(s)});u();var fN=Symbol.for("effect/DifferHashSetPatch");function Bm(e){return e}var Ku={..._i.prototype,[fN]:{_Value:Bm,_Key:Bm,_Patch:Bm}},mN=Object.assign(Object.create(Ku),{_tag:"Empty"}),hN=Object.create(mN),jm=()=>hN,dN=Object.assign(Object.create(Ku),{_tag:"AndThen"}),xN=(e,t)=>{let r=Object.create(dN);return r.first=e,r.second=t,r},gN=Object.assign(Object.create(Ku),{_tag:"Add"}),yN=e=>{let t=Object.create(gN);return t.value=e,t},bN=Object.assign(Object.create(Ku),{_tag:"Remove"}),SN=e=>{let t=Object.create(bN);return t.value=e,t},dS=(e,t)=>{let[r,o]=Bn([e,jm()],([n,s],i)=>Vb(i)(n)?[Rm(i)(n),s]:[n,Vu(yN(i))(s)])(t);return Bn(o,(n,s)=>Vu(SN(s))(n))(r)},Vu=l(2,(e,t)=>xN(e,t)),xS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,o=Re(e);for(;tt(o);){let n=Ze(o),s=ot(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Qe(n.first)(Qe(n.second)(s));break}case"Add":{r=Un(n.value)(r),o=s;break}case"Remove":r=Rm(n.value)(r),o=s}}return r});u();var EN=Symbol.for("effect/DifferReadonlyArrayPatch");function gS(e){return e}var Rc={..._i.prototype,[EN]:{_Value:gS,_Patch:gS}},ON=Object.assign(Object.create(Rc),{_tag:"Empty"}),CN=Object.create(ON),zm=()=>CN,vN=Object.assign(Object.create(Rc),{_tag:"AndThen"}),kN=(e,t)=>{let r=Object.create(vN);return r.first=e,r.second=t,r},wN=Object.assign(Object.create(Rc),{_tag:"Append"}),MN=e=>{let t=Object.create(wN);return t.values=e,t},RN=Object.assign(Object.create(Rc),{_tag:"Slice"}),FN=(e,t)=>{let r=Object.create(RN);return r.from=e,r.until=t,r},TN=Object.assign(Object.create(Rc),{_tag:"Update"}),AN=(e,t)=>{let r=Object.create(TN);return r.index=e,r.patch=t,r},yS=e=>{let t=0,r=zm();for(;t<e.oldValue.length&&t<e.newValue.length;){let o=e.oldValue[t],n=e.newValue[t],s=e.differ.diff(o,n);v(s,e.differ.empty)||(r=Mc(r,AN(t,s))),t=t+1}return t<e.oldValue.length&&(r=Mc(r,FN(0,t))),t<e.newValue.length&&(r=Mc(r,MN(Zy(t)(e.newValue)))),r},Mc=l(2,(e,t)=>kN(e,t)),bS=l(3,(e,t,r)=>{if(e._tag==="Empty")return t;let o=t.slice(),n=_t(e);for(;Jy(n);){let s=gt(n),i=Rr(n);switch(s._tag){case"Empty":{n=i;break}case"AndThen":{i.unshift(s.first,s.second),n=i;break}case"Append":{for(let c of s.values)o.push(c);n=i;break}case"Slice":{o=o.slice(s.from,s.until),n=i;break}case"Update":{o[s.index]=r.patch(s.patch,o[s.index]),n=i;break}}}return o});var SS=Symbol.for("effect/Differ"),NN={[SS]:{_P:B,_V:B}},Vo=e=>{let t=Object.create(NN);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},Gm=()=>Vo({empty:Um(),combine:(e,t)=>kc(t)(e),diff:(e,t)=>mS(e,t),patch:(e,t)=>hS(t)(e)});var $m=()=>Vo({empty:jm(),combine:(e,t)=>Vu(t)(e),diff:(e,t)=>dS(e,t),patch:(e,t)=>xS(t)(e)});var Vm=e=>Vo({empty:zm(),combine:(t,r)=>Mc(t,r),diff:(t,r)=>yS({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>bS(t,r,e)});var Ju=()=>_S((e,t)=>t),_S=e=>Vo({empty:B,combine:(t,r)=>t===B?r:r===B?t:o=>r(t(o)),diff:(t,r)=>v(t,r)?B:zs(r),patch:(t,r)=>e(r,t(r))});u();var Fc=255,ES=8,Yu=e=>e&Fc,Qu=e=>e>>ES&Fc,$n=(e,t)=>(e&Fc)+((t&e&Fc)<<ES),Zu=$n(0,0),OS=e=>$n(e,e),CS=e=>$n(e,0);var vS=l(2,(e,t)=>$n(Yu(e)&~t,Qu(e)));var Jm=l(2,(e,t)=>e|t);var kS=e=>~e>>>0&Fc;var PN=0,Wr=1,MS=2,Ym=4,Xu=16,Qm=32;var RS=e=>el(e,Qm);var Zm=l(2,(e,t)=>e|t);var fo=e=>Tc(e)&&!LN(e),Tc=e=>el(e,Wr);var el=l(2,(e,t)=>(e&t)!==0),Xm=(...e)=>e.reduce((t,r)=>t|r,0),FS=Xm(PN);var eh=e=>el(e,Ym);var LN=e=>el(e,Xu);var sr=l(2,(e,t)=>$n(e^t,t)),mo=l(2,(e,t)=>e&(kS(Yu(t))|Qu(t))|Yu(t)&Qu(t));var th=Vo({empty:Zu,diff:(e,t)=>sr(e,t),combine:(e,t)=>Jm(t)(e),patch:(e,t)=>mo(t,e)});var TS=Zu;var rh=OS,oh=CS;var nh=vS;u();var AS={_tag:"Empty"},ah=(e,t)=>({_tag:"Par",left:e,right:t}),tl=(e,t)=>({_tag:"Seq",left:e,right:t}),uh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var IS=e=>{let t=vc(e),r=Hr();for(;;){let[o,n]=uS(t,[NS(),Hr()],([s,i],c)=>{let[a,p]=DN(c);return[zN(s,a),aS(i,p)]});if(r=qN(r,o),qr(n))return lS(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},DN=e=>{let t=e,r=NS(),o=Hr(),n=Hr();for(;;)switch(t._tag){case"Empty":{if(qr(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=po(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let c=s.left,a=s.right;t=ah(tl(c,i),tl(a,i));break}case"Seq":{let c=s.left,a=s.right;t=tl(c,tl(a,i));break}case"Single":{t=s,n=po(i,n);break}}break}case"Single":{if(r=jN(r,t),qr(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},qN=(e,t)=>{if(qr(e))return vc(ih(t));if(GN(t))return e;let r=QN(e.head),o=$N(t);return r.length===1&&o.length===1&&v(r[0],o[0])?po(YN(e.head,ih(t)),e.tail):po(ih(t),e)},HN=Symbol.for("effect/RequestBlock/Entry"),ch=class{request;result;listeners;ownerId;state;[HN]=WN;constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s}},WN={_R:e=>e};var lh=e=>new ch(e.request,e.result,e.listeners,e.ownerId,e.state),UN=Symbol.for("effect/RequestBlock/RequestBlockParallel"),BN={_R:e=>e},Ic=class{map;[UN]=BN;constructor(t){this.map=t}},NS=()=>new Ic(zn());var jN=(e,t)=>new Ic(nS(e.map,t.dataSource,r=>Gf(Me(r,yu(t.blockedRequest)),()=>Re(t.blockedRequest)))),zN=(e,t)=>new Ic(Hm(e.map,t.map,(r,o,n)=>gr(r,n,Ke(Dm(r,n),{onNone:()=>o,onSome:s=>jt(o,s)})))),GN=e=>tS(e.map),$N=e=>Array.from(qm(e.map)),ih=e=>JN(ju(e.map,t=>Re(t))),VN=Symbol.for("effect/RequestBlock/RequestBlockSequential"),KN={_R:e=>e},rl=class{map;[VN]=KN;constructor(t){this.map=t}},JN=e=>new rl(e),YN=(e,t)=>new rl(Hm(t.map,e.map,(r,o,n)=>gr(r,n,Ke(Dm(r,n),{onNone:()=>Pt(),onSome:s=>jt(s,o)}))));var QN=e=>Array.from(qm(e.map)),PS=e=>Array.from(e.map);u();u();var Vn="Die",Kn="Empty",Jn="Fail",Yn="Interrupt",Qn="Parallel",Zn="Sequential";var WS="effect/Cause",fh=Symbol.for(WS),XN={_E:e=>e},Ei={[fh]:XN,[F](){return m(w(WS),L(w(tP(this))),V(this))},[R](e){return nl(e)&&eP(this,e)},pipe(){return O(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:J(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:J(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:J(this.left),right:J(this.right)}}},toString(){return Yo(this)},[j](){return this.toJSON()}},yr=(()=>{let e=Object.create(Ei);return e._tag=Kn,e})(),Ko=e=>{let t=Object.create(Ei);return t._tag=Jn,t.error=e,t},ft=e=>{let t=Object.create(Ei);return t._tag=Vn,t.defect=e,t},$t=e=>{let t=Object.create(Ei);return t._tag=Yn,t.fiberId=e,t},vt=(e,t)=>{let r=Object.create(Ei);return r._tag=Qn,r.left=e,r.right=t,r},je=(e,t)=>{let r=Object.create(Ei);return r._tag=Zn,r.left=e,r.right=t,r},nl=e=>k(e,fh);var Oi=e=>e._tag===Vn;var sl=e=>e._tag===Kn?!0:Xn(e,!0,(t,r)=>{switch(r._tag){case Kn:return _(t);case Vn:case Jn:case Yn:return _(!1);default:return S()}});var il=e=>W(US(e)),es=e=>Lc(void 0,oP)(e),Nc=e=>Ir(Xn(e,Pt(),(t,r)=>r._tag===Jn?_(m(t,Qe(r.error))):S())),cl=e=>Ir(Xn(e,Pt(),(t,r)=>r._tag===Vn?_(m(t,Qe(r.defect))):S())),Pc=e=>Xn(e,Lr(),(t,r)=>r._tag===Yn?_(m(t,Un(r.fiberId))):S()),mh=e=>Jo(e,t=>t._tag===Jn?_(t.error):S()),Ur=e=>{let t=mh(e);switch(t._tag){case"None":return Ve(e);case"Some":return St(t.value)}};var US=e=>Jo(e,t=>t._tag===Yn?_(t.fiberId):S()),hh=e=>Ci(e,{onEmpty:S(),onFail:()=>S(),onDie:t=>_(ft(t)),onInterrupt:()=>S(),onSequential:(t,r)=>W(t)&&W(r)?_(je(t.value,r.value)):W(t)&&z(r)?_(t.value):z(t)&&W(r)?_(r.value):S(),onParallel:(t,r)=>W(t)&&W(r)?_(vt(t.value,r.value)):W(t)&&z(r)?_(t.value):z(t)&&W(r)?_(r.value):S()}),BS=e=>Ci(e,{onEmpty:S(),onFail:t=>_(ft(t)),onDie:t=>_(ft(t)),onInterrupt:()=>S(),onSequential:(t,r)=>W(t)&&W(r)?_(je(t.value,r.value)):W(t)&&z(r)?_(t.value):z(t)&&W(r)?_(r.value):S(),onParallel:(t,r)=>W(t)&&W(r)?_(vt(t.value,r.value)):W(t)&&z(r)?_(t.value):z(t)&&W(r)?_(r.value):S()});var al=e=>Ci(e,{onEmpty:yr,onFail:()=>yr,onDie:t=>ft(t),onInterrupt:t=>$t(t),onSequential:je,onParallel:vt}),jS=e=>Ci(e,{onEmpty:yr,onFail:t=>ft(t),onDie:t=>ft(t),onInterrupt:t=>$t(t),onSequential:(t,r)=>je(t,r),onParallel:(t,r)=>vt(t,r)});var zS=l(2,(e,t)=>Ci(e,{onEmpty:yr,onFail:r=>t(r),onDie:r=>ft(r),onInterrupt:r=>$t(r),onSequential:(r,o)=>je(r,o),onParallel:(r,o)=>vt(r,o)})),dh=e=>zS(e,B);var eP=(e,t)=>{let r=Re(e),o=Re(t);for(;tt(r)&&tt(o);){let[n,s]=m(Ze(r),Xn([Lr(),Pt()],([a,p],f)=>{let[h,d]=ph(f);return _([m(a,uo(h)),m(p,jt(d))])})),[i,c]=m(Ze(o),Xn([Lr(),Pt()],([a,p],f)=>{let[h,d]=ph(f);return _([m(a,uo(h)),m(p,jt(d))])}));if(!v(n,i))return!1;r=s,o=c}return!0},tP=e=>rP(Re(e),Pt()),rP=(e,t)=>{for(;;){let[r,o]=m(e,tr([Lr(),Pt()],([s,i],c)=>{let[a,p]=ph(c);return[m(s,uo(a)),m(i,jt(p))]})),n=Wn(r)>0?m(t,Qe(r)):t;if(lm(o))return Ir(n);e=o,t=n}throw new Error(Tn("Cause.flattenCauseLoop"))},Jo=l(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case Zn:case Qn:{r.push(o.right),r.push(o.left);break}}break}case"Some":return n}}return S()});var ph=e=>{let t=e,r=[],o=Lr(),n=Pt();for(;t!==void 0;)switch(t._tag){case Kn:{if(r.length===0)return[o,n];t=r.pop();break}case Jn:{if(o=Un(o,yc(t._tag,t.error)),r.length===0)return[o,n];t=r.pop();break}case Vn:{if(o=Un(o,yc(t._tag,t.defect)),r.length===0)return[o,n];t=r.pop();break}case Yn:{if(o=Un(o,yc(t._tag,t.fiberId)),r.length===0)return[o,n];t=r.pop();break}case Zn:{switch(t.left._tag){case Kn:{t=t.right;break}case Zn:{t=je(t.left.left,je(t.left.right,t.right));break}case Qn:{t=vt(je(t.left.left,t.right),je(t.left.right,t.right));break}default:{n=Qe(n,t.right),t=t.left;break}}break}case Qn:{r.push(t.right),t=t.left;break}}throw new Error(Tn("Cause.evaluateCauseLoop"))};var oP={emptyCase:Po,failCase:eo,dieCase:eo,interruptCase:Po,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var DS="SequentialCase",qS="ParallelCase",Ci=l(2,(e,{onDie:t,onEmpty:r,onFail:o,onInterrupt:n,onParallel:s,onSequential:i})=>Lc(e,void 0,{emptyCase:()=>r,failCase:(c,a)=>o(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>n(a),sequentialCase:(c,a,p)=>i(a,p),parallelCase:(c,a,p)=>s(a,p)})),Xn=l(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=W(i)?i.value:o,n._tag){case Zn:{s.push(n.right),n=n.left;break}case Qn:{s.push(n.right),n=n.left;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),Lc=l(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Kn:{n.push(Ve(r.emptyCase(t)));break}case Jn:{n.push(Ve(r.failCase(t,i.error)));break}case Vn:{n.push(Ve(r.dieCase(t,i.defect)));break}case Yn:{n.push(Ve(r.interruptCase(t,i.fiberId)));break}case Zn:{o.push(i.right),o.push(i.left),n.push(St({_tag:DS}));break}case Qn:{o.push(i.right),o.push(i.left),n.push(St({_tag:qS}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case DS:{let c=s.pop(),a=s.pop(),p=r.sequentialCase(t,c,a);s.push(p);break}case qS:{let c=s.pop(),a=s.pop(),p=r.parallelCase(t,c,a);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),Yo=(e,t)=>es(e)?"All fibers interrupted without errors.":ul(e).map(function(r){return t?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${GS(r.cause,"  ")}
}`}).join(`
`),GS=(e,t)=>{let r=e.stack.split(`
`),o=`${t}[cause]: ${r[0]}`;for(let n=1,s=r.length;n<s;n++)o+=`
${t}${r[n]}`;return e.cause&&(o+=` {
${GS(e.cause,`${t}  `)}
${t}}`),o},ol=class e extends globalThis.Error{span=void 0;constructor(t){let r=typeof t=="object"&&t!==null,o=Error.stackTraceLimit;Error.stackTraceLimit=1,super(nP(t),r&&"cause"in t&&typeof t.cause<"u"?{cause:new e(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=o,this.name=t instanceof Error?t.name:"Error",r&&(HS in t&&(this.span=t[HS]),Object.keys(t).forEach(n=>{n in this||(this[n]=t[n])})),this.stack=iP(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}},nP=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(k(e,"toString")&&Do(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},sP=/\((.*)\)/,Dc=q("effect/Tracer/spanToTrace",()=>new WeakMap),iP=(e,t,r)=>{let o=[e],n=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let s=1;s<n.length&&!n[s].includes("Generator.next");s++){if(n[s].includes("effect_internal_function")){o.pop();break}o.push(n[s].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let s=r,i=0;for(;s&&s._tag==="Span"&&i<10;){let c=Dc.get(s);if(typeof c=="function"){let a=c();if(typeof a=="string"){let p=a.match(sP),f=p?p[1]:a.replace(/^at /,"");o.push(`    at ${s.name} (${f})`)}else o.push(`    at ${s.name}`)}else o.push(`    at ${s.name}`);s=pt(s.parent),i++}}return o.join(`
`)},HS=Symbol.for("effect/SpanAnnotation"),ul=e=>Lc(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[new ol(r)],failCase:(t,r)=>[new ol(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();u();var rs="Pending",qc="Done";var cP="effect/Deferred",VS=Symbol.for(cP),KS={_E:e=>e,_A:e=>e},JS=e=>({_tag:rs,joiners:e}),xh=e=>({_tag:qc,effect:e});u();var Qo=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};u();var YS=Symbol.for("effect/Tracer"),uP=e=>({[YS]:YS,...e}),Br=Et("effect/Tracer"),br=Et("effect/ParentSpan"),QS=function(){let e="abcdef0123456789",t=e.length;return function(r){let o="";for(let n=0;n<r;n++)o+=e.charAt(Math.floor(Math.random()*t));return o}}(),gh=class{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(t,r,o,n,s,i){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this.kind=i,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:QS(32),this.spanId=QS(16)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,o){this.events.push([t,r,o??{}])}},ZS=uP({span:(e,t,r,o,n,s)=>new gh(e,t,r,o,n,s),context:e=>e()});var ho=e=>{if(e?.captureStackTrace===!1)return e;if(e?.captureStackTrace!==void 0&&typeof e.captureStackTrace!="boolean")return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=t;let o=!1;return{...e,captureStackTrace:()=>{if(o!==!1)return o;if(r.stack!==void 0){let n=r.stack.split(`
`);if(n[3]!==void 0)return o=n[3].trim(),o}}}};var fP="effect/EffectError",yh=Symbol.for(fP),c_=e=>k(e,yh),a_=e=>({[yh]:yh,_tag:"EffectError",cause:e}),xo=(e,t)=>{let r=new ze("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},xl=e=>{let t=new ze("RunBlocked");return t.effect_instruction_i0=e,t},vi=Symbol.for("effect/Effect"),fl=class{patch;op;_op=hc;constructor(t,r){this.patch=t,this.op=r}},ze=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[vi]=Ho;constructor(t){this._op=t}[R](t){return this===t}[F](){return V(this,Vs(this))}pipe(){return O(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:J(this.effect_instruction_i0),effect_instruction_i1:J(this.effect_instruction_i1),effect_instruction_i2:J(this.effect_instruction_i2)}}toString(){return te(this.toJSON())}[j](){return this.toJSON()}[Symbol.iterator](){return new Qo(new Mr(this))}},ml=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[vi]=Ho;constructor(t){this._op=t,this._tag=t}[R](t){return $c(t)&&t._op==="Failure"&&v(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ce(this._tag),L(w(this.effect_instruction_i0)),V(this))}get cause(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return te(this.toJSON())}[j](){return this.toJSON()}[Symbol.iterator](){return new Qo(new Mr(this))}},hl=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[vi]=Ho;constructor(t){this._op=t,this._tag=t}[R](t){return $c(t)&&t._op==="Success"&&v(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ce(this._tag),L(w(this.effect_instruction_i0)),V(this))}get value(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:J(this.value)}}toString(){return te(this.toJSON())}[j](){return this.toJSON()}[Symbol.iterator](){return new Qo(new Mr(this))}},ue=e=>k(e,vi),re=e=>{let t=new ze(iu);return t.effect_instruction_i0=e,t},Zo=l(3,(e,t,r)=>Fe(o=>x(e,n=>x(ke(I(()=>o(t(n)))),s=>I(()=>r(n,s)).pipe(Se({onFailure:i=>{switch(s._tag){case Pe:return Y(vt(s.effect_instruction_i0,i));case Le:return Y(i)}},onSuccess:()=>s})))))),le=l(2,(e,t)=>x(e,()=>y(t))),Ee=e=>le(e,void 0),Wc=function(){let e=new ze(Js);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Tn("you're not supposed to end up here"))}return e},u_=(e,t=Gt)=>{let r=new ze(An),o;return r.effect_instruction_i0=n=>{o=e(n)},r.effect_instruction_i1=t,o!==void 0?_r(r,n=>o):r},qe=(e,t=Gt)=>Wc(e,function(){let r,o;function n(a){r?r(a):o===void 0&&(o=a)}let s=new ze(An);s.effect_instruction_i0=a=>{r=a,o&&a(o)},s.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Ne(()=>this.effect_instruction_i0(n,c.signal))):i=Ne(()=>this.effect_instruction_i0(n)),i||c?_r(s,a=>(c&&c.abort(),i??H)):s}),jr=l(2,(e,t)=>{let r=new ze(Ys);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Sr=l(2,(e,t)=>Xe(e,{onFailure:t,onSuccess:y})),Uc=l(3,(e,t,r)=>jr(e,o=>{let n=Ur(o);switch(n._tag){case"Left":return t(n.left)?r(n.left):Y(o);case"Right":return Y(n.right)}})),l_=l(2,(e,t)=>jr(e,r=>{let o=Ur(r);switch(o._tag){case"Left":return m(t(o.left),De(()=>Y(r)));case"Right":return Y(o.right)}})),p_=e=>re((t,r)=>e(Tc(r.runtimeFlags))),dl=Symbol.for("effect/SpanAnnotation"),XS=Symbol.for("effect/OriginalAnnotation");var f_=(e,t)=>W(t)?new Proxy(e,{has(r,o){return o===dl||o===XS||o in r},get(r,o){return o===dl?t.value:o===XS?e:r[o]}}):e,go=e=>Mn(e)&&!(dl in e)?re(t=>Y(ft(f_(e,W_(t))))):Y(ft(e)),Xo=e=>tn(()=>ft(new _P(e))),en=e=>x(E(e),go),zr=e=>Xe(e,{onFailure:t=>y(St(t)),onSuccess:t=>y(Ve(t))}),ke=e=>Bc(e,{onFailure:ie,onSuccess:xe}),G=e=>Mn(e)&&!(dl in e)?re(t=>Y(Ko(f_(e,W_(t))))):Y(Ko(e)),kt=e=>x(E(e),G),Y=e=>{let t=new ml(Pe);return t.effect_instruction_i0=e,t},tn=e=>x(E(e),Y),rn=re(e=>y(e.id())),Dt=e=>re(t=>e(t.id())),x=l(2,(e,t)=>{let r=new ze(Qs);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),ns=l(2,(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return ue(o)?o:Mf(o)?qe(n=>{o.then(s=>n(y(s)),s=>n(G(new un(s))))}):y(o)})),gl=e=>{let t=new ze("OnStep");return t.effect_instruction_i0=e,t},wt=e=>x(e,B),on=e=>Xe(e,{onFailure:y,onSuccess:G}),Bc=l(2,(e,t)=>Se(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),Se=l(2,(e,t)=>{let r=new ze(Zs);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),Xe=l(2,(e,t)=>Se(e,{onFailure:r=>{if(cl(r).length>0)return Y(jS(r));let n=Nc(r);return n.length>0?t.onFailure(pm(n)):Y(r)},onSuccess:t.onSuccess})),st=l(2,(e,t)=>I(()=>{let r=ee(e),o=gc(r.length),n=0;return le(Mi({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),qt=l(2,(e,t)=>I(()=>{let r=ee(e),o=0;return Mi({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),yl=l(e=>typeof e[0]=="boolean"||ue(e[0]),(e,t)=>ue(e)?x(e,r=>r?t.onTrue():t.onFalse()):e?t.onTrue():t.onFalse()),bl=x(rn,e=>Sl(e)),Sl=e=>Y($t(e)),Gr=e=>{let t=new ze(ro);return t.effect_instruction_i0=rh(Wr),t.effect_instruction_i1=()=>e,t},m_=e=>Wc(e,function(){let t=new ze(ro);return t.effect_instruction_i0=rh(Wr),t.effect_instruction_i1=r=>Tc(r)?Ne(()=>this.effect_instruction_i0(Gr)):Ne(()=>this.effect_instruction_i0(yo)),t}),$r=l(2,(e,t)=>Fe(r=>x(ke(r(e)),o=>Th(t,o)))),C=l(2,(e,t)=>x(e,r=>E(()=>t(r)))),jc=l(2,(e,t)=>Xe(e,{onFailure:r=>kt(()=>t.onFailure(r)),onSuccess:r=>E(()=>t.onSuccess(r))})),nn=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=Ur(r);switch(o._tag){case"Left":return kt(()=>t(o.left));case"Right":return Y(o.right)}},onSuccess:y})),_l=l(2,(e,t)=>yt(e,r=>Il(r)?H:t(r.effect_instruction_i0))),yt=l(2,(e,t)=>Fe(r=>Se(r(e),{onFailure:o=>{let n=ie(o);return Se(t(n),{onFailure:s=>ie(je(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=xe(o);return ne(t(n),n)}}))),_r=l(2,(e,t)=>yt(e,Ti({onFailure:r=>es(r)?Ee(t(Pc(r))):H,onSuccess:()=>H}))),ss=l(2,(e,t)=>mP(e,t,y)),is=e=>_h(e,B),_h=l(2,(e,t)=>Xe(e,{onFailure:r=>go(t(r)),onSuccess:y})),h_=(e,t)=>ee(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[Bt(),Bt()]),ki=re((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new hl(Le);return t.effect_instruction_i0=e,t},I=e=>x(E(e),B),E=e=>{let t=new ze(su);return t.effect_instruction_i0=e,t},Vt=l(e=>e.length===3||e.length===2&&!(Mn(e[1])&&"onlyEffect"in e[1]),(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return ue(o)?le(o,r):Mf(o)?qe(n=>{o.then(s=>n(y(r)),s=>n(G(new un(s))))}):y(r)})),El=e=>re(t=>{let r=t.getFiberRef(Hc),o=m(r,De(()=>t.scope()));return e(We(Hc,_(o)))}),mP=l(3,(e,t,r)=>Se(e,{onFailure:o=>cl(o).length>0?Y(xc(BS(o))):t(),onSuccess:r})),yo=e=>{let t=new ze(ro);return t.effect_instruction_i0=oh(Wr),t.effect_instruction_i1=()=>e,t},Fe=e=>Wc(e,function(){let t=new ze(ro);return t.effect_instruction_i0=oh(Wr),t.effect_instruction_i1=r=>Tc(r)?Ne(()=>this.effect_instruction_i0(Gr)):Ne(()=>this.effect_instruction_i0(yo)),t}),H=y(void 0);var sn=e=>{let t=new ze(ro);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},wi=l(2,(e,t)=>x(t,r=>r?m(e,C(_)):y(S()))),Mi=e=>{let t=new ze(Xs);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},d_=l(2,(e,t)=>We(e,wl,t)),x_=l(2,(e,t)=>We(e,kh,t)),Ol=l(2,(e,t)=>{let r=new ze(ro);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r}),g_=l(2,(e,t)=>We(e,Mh,t)),y_=l(2,(e,t)=>We(e,Ri,t)),Vr=e=>{let t=new ze(ei);return typeof e?.priority<"u"?vh(t,e.priority):t},cs=l(2,(e,t)=>x(e,r=>C(t,o=>[r,o])));var as=l(2,(e,t)=>x(e,r=>le(t,r))),ne=l(2,(e,t)=>x(e,()=>t)),Kr=l(3,(e,t,r)=>x(e,o=>C(t,n=>r(o,n)))),us=qe(()=>{let e=setInterval(()=>{},2147483647);return E(()=>clearInterval(e))}),ls=e=>x(rn,t=>m(e,Ht(t))),Ht=l(2,(e,t)=>x(e.interruptAsFork(t),()=>e.await)),b_={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return O(this,arguments)}},S_={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return O(this,arguments)}},__={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return O(this,arguments)}},E_={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return O(this,arguments)}},Eh={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return O(this,arguments)}},Oh={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return O(this,arguments)}},O_={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return O(this,arguments)}},C_={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return O(this,arguments)}};var hP="effect/FiberRef",dP=Symbol.for(hP),xP={_A:e=>e},Wt=e=>v_(e,t=>[t,t]);var He=l(2,(e,t)=>x(Wt(e),t)),os=l(2,(e,t)=>v_(e,()=>[void 0,t]));var v_=l(2,(e,t)=>re(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var gP="effect/RequestResolver",k_=Symbol.for(gP),yP={_A:e=>e,_R:e=>e},e_=class e{runAll;target;[k_]=yP;constructor(t,r){this.runAll=t,this.target=r}[F](){return V(this,this.target?w(this.target):Vs(this))}[R](t){return this.target?bP(t)&&v(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Nr(t))}pipe(){return O(this,arguments)}},bP=e=>k(e,k_);var We=l(3,(e,t,r)=>Zo(as(Wt(t),os(t,r)),()=>e,o=>os(t,o))),rt=l(3,(e,t,r)=>He(t,o=>We(e,t,r(o)))),Te=(e,t)=>ps(e,{differ:Ju(),fork:t?.fork??B,join:t?.join}),w_=e=>{let t=$m();return ps(e,{differ:t,fork:t.empty})},SP=e=>{let t=Vm(Ju());return ps(e,{differ:t,fork:t.empty})},Cl=e=>{let t=Gm();return ps(e,{differ:t,fork:t.empty})},ps=(e,t)=>({[dP]:xP,initial:e,diff:(r,o)=>t.differ.diff(r,o),combine:(r,o)=>t.differ.combine(r,o),patch:r=>o=>t.differ.patch(r,o),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return O(this,arguments)}}),M_=e=>ps(e,{differ:th,fork:th.empty}),mt=q(Symbol.for("effect/FiberRef/currentContext"),()=>Cl(Ot())),cn=q(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Te(0)),vl=q(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Te(2048)),an=q(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Te(zn())),Ch=q(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Te(Eh)),kl=q(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Te(Hr())),vh=l(2,(e,t)=>We(e,cn,t)),R_=l(2,(e,t)=>We(e,vl,t)),wl=q(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Te("unbounded")),kh=q(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Te(!0)),wh=q(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Te(_(Oh))),F_=l(2,(e,t)=>We(e,wh,t)),bo=q(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>SP(Bt())),T_=Wt(bo),Hc=q(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Te(S(),{fork:()=>S(),join:(e,t)=>e})),fs=q(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Te(yr,{fork:()=>yr,join:(e,t)=>e})),Mh=q(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>Te(!0)),Ri=q(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>Te(!0)),zc=q(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>Te(zn())),Ml=q(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>Te(Pt())),Rl=Symbol.for("effect/Scope"),Fl=Symbol.for("effect/CloseableScope"),Tl=(e,t)=>e.addFinalizer(()=>Ee(t)),ms=(e,t)=>e.addFinalizer(t),So=(e,t)=>e.close(t),hs=(e,t)=>e.fork(t);var Al=function(){class e extends globalThis.Error{commit(){return G(this)}toJSON(){return{...this}}[j](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Yo(Ko(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Lf),e}(),ds=(e,t)=>{class r extends Al{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},t_=Symbol.for("effect/Cause/errors/RuntimeException"),_P=ds({[t_]:t_},"RuntimeException");var bh=Symbol.for("effect/Cause/errors/InterruptedException"),nJ=ds({[bh]:bh},"InterruptedException"),A_=e=>k(e,bh),r_=Symbol.for("effect/Cause/errors/IllegalArgument"),Gc=ds({[r_]:r_},"IllegalArgumentException");var Sh=Symbol.for("effect/Cause/errors/NoSuchElement"),Kt=ds({[Sh]:Sh},"NoSuchElementException"),I_=e=>k(e,Sh),o_=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),sJ=ds({[o_]:o_},"InvalidPubSubCapacityException"),n_=Symbol.for("effect/Cause/errors/ExceededCapacityException"),iJ=ds({[n_]:n_},"ExceededCapacityException");var s_=Symbol.for("effect/Cause/errors/Timeout"),EP=ds({[s_]:s_},"TimeoutException"),N_=e=>new EP(`Operation timed out before the specified duration of '${bm(e)}' elapsed`);var i_=Symbol.for("effect/Cause/errors/UnknownException"),un=function(){class e extends Al{cause;_tag="UnknownException";error;constructor(r,o){super(o??"An unknown error occurred",{cause:r}),this.cause=r,this.error=r}}return Object.assign(e.prototype,{[i_]:i_,name:"UnknownException"}),e}();var $c=e=>ue(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),Rh=e=>e._tag==="Failure",Il=e=>e._tag==="Success";var P_=l(2,(e,t)=>{switch(e._tag){case Pe:return ie(e.effect_instruction_i0);case Le:return xe(t)}}),Vc=e=>P_(e,void 0);var ln=(e,t)=>OP(e,t?.parallel?vt:je),Fi=e=>ie(ft(e));var Kc=e=>ie(Ko(e)),ie=e=>{let t=new ml(Pe);return t.effect_instruction_i0=e,t},L_=l(2,(e,t)=>{switch(e._tag){case Pe:return ie(e.effect_instruction_i0);case Le:return t(e.effect_instruction_i0)}});var D_=e=>m(e,L_(B));var Nl=e=>ie($t(e)),pl=l(2,(e,t)=>{switch(e._tag){case Pe:return ie(e.effect_instruction_i0);case Le:return xe(t(e.effect_instruction_i0))}});var Ti=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Pe:return t(e.effect_instruction_i0);case Le:return r(e.effect_instruction_i0)}}),xs=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Pe:return t(e.effect_instruction_i0);case Le:return r(e.effect_instruction_i0)}}),xe=e=>{let t=new hl(Le);return t.effect_instruction_i0=e,t},Jt=xe(void 0);var Jc=l(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case Pe:switch(t._tag){case Le:return ie(e.effect_instruction_i0);case Pe:return ie(r(e.effect_instruction_i0,t.effect_instruction_i0))}case Le:switch(t._tag){case Le:return xe(o(e.effect_instruction_i0,t.effect_instruction_i0));case Pe:return ie(t.effect_instruction_i0)}}}),OP=(e,t)=>{let r=Nr(e);return tt(r)?m(ot(r),tr(m(Ze(r),pl(Re)),(o,n)=>m(o,Jc(n,{onSuccess:(s,i)=>m(s,Qe(i)),onFailure:t}))),pl(Ir),pl(o=>rr(o)),_):S()},Yc=e=>({[VS]:KS,state:Dr(JS([])),blockingOn:e,pipe(){return O(this,arguments)}}),Mt=()=>x(rn,e=>q_(e)),q_=e=>E(()=>Yc(e)),it=e=>qe(t=>{let r=Lt(e.state);switch(r._tag){case qc:return t(r.effect);case rs:return r.joiners.push(t),CP(e,t)}},e.blockingOn),Fh=l(2,(e,t)=>$r(t,e)),Qc=l(2,(e,t)=>E(()=>{let r=Lt(e.state);switch(r._tag){case qc:return!1;case rs:{nr(e.state,xh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t);return!0}}})),Th=l(2,(e,t)=>Qc(e,t));var gs=l(2,(e,t)=>Qc(e,Y(t)));var H_=e=>x(rn,t=>Qc(e,Sl(t)));var Zc=l(2,(e,t)=>Qc(e,y(t)));var Xc=(e,t)=>{let r=Lt(e.state);if(r._tag===rs){nr(e.state,xh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t)}},CP=(e,t)=>E(()=>{let r=Lt(e.state);if(r._tag===rs){let o=r.joiners.indexOf(t);o>=0&&r.joiners.splice(o,1)}}),vP=Wt(mt),ir=()=>vP;var cr=e=>x(ir(),e),Er=l(2,(e,t)=>We(mt,t)(e)),Pl=l(2,(e,t)=>rt(mt,r=>Pn(r,t))(e)),ys=l(2,(e,t)=>cr(r=>Er(e,t(r)))),W_=e=>{let t=e.getFiberRef(mt).unsafeMap.get(br.key);return t!==void 0&&t._tag==="Span"?_(t):S()},kP={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:S(),context:Ot(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Jt},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},U_=e=>{let t=Object.create(kP);return t.name=e,t};var bs=it;var B_=Th;var j_=H_;var Ah=Yc;u();var z_=D_;var G_=xe;u();var $_=Symbol.for("effect/MutableHashMap"),wP={[$_]:$_,[Symbol.iterator](){return new Ph(this)},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},Ph=class e{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let t=this.referentialIterator.next();return t.done?(this.bucketIterator=new Lh(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new e(this.self)}},Lh=class{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}},Ss=()=>{let e=Object.create(wP);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e};var Ge=l(2,(e,t)=>{if(Ks(t)===!1)return e.referential.has(t)?_(e.referential.get(t)):S();let r=t[F](),o=e.buckets.get(r);return o===void 0?S():MP(e,o,t)}),MP=(e,t,r,o=!1)=>{for(let n=0,s=t.length;n<s;n++)if(r[R](t[n][0])){let i=t[n][1];return o&&(t.splice(n,1),e.bucketsSize--),_(i)}return S()},Or=l(2,(e,t)=>W(Ge(e,t))),Ut=l(3,(e,t,r)=>{if(Ks(t)===!1)return e.referential.set(t,r),e;let o=t[F](),n=e.buckets.get(o);return n===void 0?(e.buckets.set(o,[[t,r]]),e.bucketsSize++,e):(V_(e,n,t),n.push([t,r]),e.bucketsSize++,e)}),V_=(e,t,r)=>{for(let o=0,n=t.length;o<n;o++)if(r[R](t[o][0])){t.splice(o,1),e.bucketsSize--;return}};var _s=l(2,(e,t)=>{if(Ks(t)===!1)return e.referential.delete(t),e;let r=t[F](),o=e.buckets.get(r);return o===void 0||(V_(e,o,t),o.length===0&&e.buckets.delete(r)),e});var Ll=e=>e.referential.size+e.bucketsSize;u();u();var K_=Symbol.for("effect/MutableList"),RP={[K_]:K_,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();let r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},FP=e=>({value:e,removed:!1,prev:void 0,next:void 0}),J_=()=>{let e=Object.create(RP);return e.head=void 0,e.tail=void 0,e._length=0,e};var Y_=e=>Dh(e)===0,Dh=e=>e._length;var Q_=l(2,(e,t)=>{let r=FP(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),Z_=e=>{let t=e.head;if(t!==void 0)return TP(e,t),t.value};var TP=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var eE=Symbol.for("effect/MutableQueue"),qh=Symbol.for("effect/mutable/MutableQueue/Empty"),AP={[eE]:eE,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},IP=e=>{let t=Object.create(AP);return t.queue=J_(),t.capacity=e,t};var tE=()=>IP(void 0);var rE=l(2,(e,t)=>{let r=Dh(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(Q_(t)(e.queue),!0)});var oE=l(2,(e,t)=>Y_(e.queue)?t:Z_(e.queue));u();u();u();var NP="effect/Clock",Hh=Symbol.for(NP),Yt=Et("effect/Clock"),PP=2**31-1,sE={unsafeSchedule(e,t){let r=Pr(t);if(r>PP)return eo;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},iE=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));let t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),LP=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return iE;let t=iE()-e.bigint();return()=>t+e.bigint()}(),Wh=class{[Hh]=Hh;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return LP()}currentTimeMillis=E(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=E(()=>this.unsafeCurrentTimeNanos());scheduler(){return y(sE)}sleep(t){return qe(r=>{let o=sE.unsafeSchedule(()=>r(H),t);return Ee(E(o))})}},Uh=()=>new Wh;u();u();u();var pn=Iy;u();var cE=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");u();u();var jh="And",zh="Or",Gh="InvalidData",$h="MissingData",Vh="SourceUnavailable",Kh="Unsupported";var UP="effect/ConfigError",uE=Symbol.for(UP),Ai={_tag:"ConfigError",[uE]:uE},Jh=(e,t)=>{let r=Object.create(Ai);return r._op=jh,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},Yh=(e,t)=>{let r=Object.create(Ai);return r._op=zh,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},BP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ai);return o._op=Gh,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${m(this.path,so(r.pathDelim))}: "${this.message}")`}}),o},_o=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ai);return o._op=$h,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${m(this.path,so(r.pathDelim))}: "${this.message}")`}}),o},jP=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(Ai);return n._op=Vh,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${m(this.path,so(o.pathDelim))}: "${this.message}")`}}),n},zP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ai);return o._op=Kh,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${m(this.path,so(r.pathDelim))}: "${this.message}")`}}),o};var fn=l(2,(e,t)=>{switch(e._op){case jh:return Jh(fn(e.left,t),fn(e.right,t));case zh:return Yh(fn(e.left,t),fn(e.right,t));case Gh:return BP([...t,...e.path],e.message);case $h:return _o([...t,...e.path],e.message);case Vh:return jP([...t,...e.path],e.message,e.cause);case Kh:return zP([...t,...e.path],e.message)}});u();var pE={_tag:"Empty"};var Hl=l(2,(e,t)=>{let r=vc(t),o=e;for(;Cc(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=po(n.first,po(n.second,r.tail));break}case"MapName":{o=Tr(o,n.f),r=r.tail;break}case"Nested":{o=ni(o,n.name),r=r.tail;break}case"Unnested":{if(m(Bo(o),Vf(n.name)))o=Rr(o),r=r.tail;else return St(_o(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return Ve(o)});u();var fE="Constant",mE="Fail",hE="Fallback",dE="Described",xE="Lazy",gE="MapOrFail",yE="Nested",bE="Primitive",SE="Sequence",_E="HashMap",EE="ZipWith";var Wl=(e,t)=>[...e,...t],VP="effect/ConfigProvider",OE=Symbol.for(VP),Ii=Et("effect/ConfigProvider"),KP="effect/ConfigProviderFlat",CE=Symbol.for(KP),JP=e=>({[OE]:OE,pipe(){return O(this,arguments)},...e}),YP=e=>({[CE]:CE,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),QP=e=>JP({load:t=>x(ar(e,Bt(),t,!1),r=>Ke(Bo(r),{onNone:()=>G(_o(Bt(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),vE=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=a=>m(a,so(t)),n=a=>a.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return QP(YP({load:(a,p,f=!0)=>{let h=o(a),d=s(),g=h in d?_(d[h]):S();return m(g,nn(()=>_o(a,`Expected ${h} to exist in the process context`)),x(b=>rL(b,a,p,r,f)))},enumerateChildren:a=>E(()=>{let p=s(),d=Object.keys(p).map(g=>n(g.toUpperCase())).filter(g=>{for(let b=0;b<a.length;b++){let M=m(a,Yf(b)),T=g[b];if(T===void 0||M!==T)return!1}return!0}).flatMap(g=>g.slice(a.length,a.length+1));return Pu(d)}),patch:pE}))};var ZP=(e,t,r,o)=>{let n=em(r.length,a=>a>=o.length?S():_([e(a),a+1])),s=em(o.length,a=>a>=r.length?S():_([t(a),a+1])),i=Wl(r,n),c=Wl(o,s);return[i,c]},XP=(e,t)=>{let r=t;if(r._tag==="Nested"){let o=e.slice();for(;r._tag==="Nested";)o.push(r.name),r=r.config;return o}return e},ar=(e,t,r,o)=>{let n=r;switch(n._tag){case fE:return y(_t(n.value));case dE:return I(()=>ar(e,t,n.config,o));case mE:return G(_o(t,n.message));case hE:return m(I(()=>ar(e,t,n.first,o)),Sr(s=>n.condition(s)?m(ar(e,t,n.second,o),Sr(i=>G(Yh(s,i)))):G(s)));case xE:return I(()=>ar(e,t,n.config(),o));case gE:return I(()=>m(ar(e,t,n.original,o),x(st(s=>m(n.mapOrFail(s),nn(fn(XP(t,n.original))))))));case yE:return I(()=>ar(e,Wl(t,_t(n.name)),n.config,o));case bE:return m(Hl(t,e.patch),x(s=>m(e.load(s,n,o),x(i=>{if(i.length===0){let c=m(du(s),De(()=>"<n/a>"));return G(_o([],`Expected ${n.description} with name ${c}`))}return y(i)}))));case SE:return m(Hl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(nL),x(i=>i.length===0?I(()=>C(ar(e,s,n.config,!0),_t)):m(st(i,c=>ar(e,Vy(t,`[${c}]`),n.config,!0)),C(c=>{let a=xu(c);return a.length===0?_t(Bt()):_t(a)}))))));case _E:return I(()=>m(Hl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(i=>m(i,st(c=>ar(e,Wl(s,_t(c)),n.valueConfig,o)),C(c=>c.length===0?_t(zn()):m(oL(c),Tr(a=>eS(Xf(ee(i),a)))))))))));case EE:return I(()=>m(ar(e,t,n.left,o),zr,x(s=>m(ar(e,t,n.right,o),zr,x(i=>{if(no(s)&&no(i))return G(Jh(s.left,i.left));if(no(s)&&oi(i))return G(s.left);if(oi(s)&&no(i))return G(i.left);if(oi(s)&&oi(i)){let c=m(t,so(".")),a=eL(t,c),[p,f]=ZP(a,a,m(s.right,Tr(Ve)),m(i.right,Tr(Ve)));return m(p,Xf(f),st(([h,d])=>m(cs(h,d),C(([g,b])=>n.zip(g,b)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},eL=(e,t)=>r=>St(_o(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var tL=(e,t)=>e.split(new RegExp(`\\s*${cE(t)}\\s*`)),rL=(e,t,r,o,n)=>n?m(tL(e,o),st(s=>r.parse(s.trim())),nn(fn(t))):m(r.parse(e),jc({onFailure:fn(t),onSuccess:_t})),oL=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),nL=e=>m(st(e,iL),jc({onFailure:()=>Bt(),onSuccess:Nn(pn)}),zr,C(fu));var sL=/^(\[(\d+)\])$/,iL=e=>{let t=e.match(sL);if(t!==null){let r=t[2];return m(r!==void 0&&r.length>0?_(r):S(),er(cL))}return S()};var cL=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?S():_(t)};u();var kE=Symbol.for("effect/Console"),Eo=Et("effect/Console"),wE={[kE]:kE,assert(e,...t){return E(()=>{console.assert(e,...t)})},clear:E(()=>{console.clear()}),count(e){return E(()=>{console.count(e)})},countReset(e){return E(()=>{console.countReset(e)})},debug(...e){return E(()=>{console.debug(...e)})},dir(e,t){return E(()=>{console.dir(e,t)})},dirxml(...e){return E(()=>{console.dirxml(...e)})},error(...e){return E(()=>{console.error(...e)})},group(e){return e?.collapsed?E(()=>console.groupCollapsed(e?.label)):E(()=>console.group(e?.label))},groupEnd:E(()=>{console.groupEnd()}),info(...e){return E(()=>{console.info(...e)})},log(...e){return E(()=>{console.log(...e)})},table(e,t){return E(()=>{console.table(e,t)})},time(e){return E(()=>console.time(e))},timeEnd(e){return E(()=>console.timeEnd(e))},timeLog(e,...t){return E(()=>{console.timeLog(e,...t)})},trace(...e){return E(()=>{console.trace(...e)})},warn(...e){return E(()=>{console.warn(...e)})},unsafe:console};u();var uL="effect/Random",RE=Symbol.for(uL),Ni=Et("effect/Random"),Qh=class{seed;[RE]=RE;PRNG;constructor(t){this.seed=t,this.PRNG=new Xa(t)}get next(){return E(()=>this.PRNG.number())}get nextBoolean(){return C(this.next,t=>t>.5)}get nextInt(){return E(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return C(this.next,o=>(r-t)*o+t)}nextIntBetween(t,r){return E(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return lL(t,r=>this.nextIntBetween(0,r))}},lL=(e,t)=>I(()=>m(E(()=>Array.from(e)),x(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return m(o,qt(n=>m(t(n),C(s=>pL(r,n-1,s)))),le(Nr(r)))}))),pL=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},FE=e=>new Qh(w(e));var mL=m(Ot(),ve(Yt,Uh()),ve(Eo,wE),ve(Ni,FE(Math.random())),ve(Ii,vE()),ve(Br,ZS)),ye=q(Symbol.for("effect/DefaultServices/currentServices"),()=>Cl(mL)),TE=e=>{let t=nt(e);return ea(r=>r.sleep(t))},ea=e=>He(ye,t=>e(Be(t,Yt))),AE=ea(e=>e.currentTimeMillis),IE=ea(e=>e.currentTimeNanos),NE=l(2,(e,t)=>rt(ye,ve(Yt,t))(e)),PE=l(2,(e,t)=>rt(ye,ve(Ii,t))(e)),LE=e=>He(ye,t=>e(Be(t,Ii)));var Ul=e=>He(ye,t=>e(Be(t,Ni))),DE=l(2,(e,t)=>rt(ye,ve(Ni,t))(e));var Bl=e=>He(ye,t=>e(Be(t,Br))),qE=l(2,(e,t)=>rt(ye,ve(Br,t))(e));var Zh=TE,jl=AE,HE=IE,WE=ea,UE=Yt;u();u();function BE(e){return new Jr(e)}function jE(){return BE(new Map)}var ed=Symbol.for("effect/FiberRefs"),Jr=class{locals;[ed]=ed;constructor(t){this.locals=t}pipe(){return O(this,arguments)}},hL=(e,t,r,o=!1)=>{let n=e,s=t,i=r,c=o,a;for(;a===void 0;)if(xt(s)&&xt(i)){let p=gt(s)[0],f=Rr(s),h=gt(i)[0],d=gt(i)[1],g=Rr(i);p.startTimeMillis<h.startTimeMillis?(i=g,c=!0):p.startTimeMillis>h.startTimeMillis?s=f:p.id<h.id?(i=g,c=!0):p.id>h.id?s=f:a=[d,c]}else a=[n.initial,!0];return a},zl=l(3,(e,t,r)=>{let o=new Map(e.locals);return r.locals.forEach((n,s)=>{let i=n[0][1];if(!n[0][0][R](t)){if(!o.has(s)){if(v(i,s.initial))return;o.set(s,[[t,s.join(s.initial,i)]]);return}let c=o.get(s),[a,p]=hL(s,c,n);if(p){let f=s.diff(a,i),h=c[0][1],d=s.join(h,s.patch(f)(h));if(!v(h,d)){let g,b=c[0][0];b[R](t)?g=[[b,d],...c.slice(1)]:g=[[t,d],...c],o.set(s,g)}}}}),new Jr(o)}),rd=l(2,(e,t)=>{let r=new Map;return zE(e,r,t),new Jr(r)}),zE=(e,t,r)=>{e.locals.forEach((o,n)=>{let s=o[0][1],i=n.patch(n.fork)(s);v(s,i)?t.set(n,o):t.set(n,[[r,i],...o])})},GE=e=>Pu(e.locals.keys()),$E=e=>qt(GE(e),t=>os(t,Es(e,t))),ta=l(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new Jr(r)}),Li=l(2,(e,t)=>e.locals.has(t)?_(gt(e.locals.get(t))[1]):S()),Es=l(2,(e,t)=>m(Li(e,t),De(()=>t.initial))),Di=l(2,(e,{fiberId:t,fiberRef:r,value:o})=>{if(e.locals.size===0)return new Jr(new Map([[r,[[t,o]]]]));let n=new Map(e.locals);return td(n,t,r,o),new Jr(n)}),td=(e,t,r,o)=>{let n=e.get(r)??[],s;if(xt(n)){let[i,c]=gt(n);if(i[R](t)){if(v(c,o))return;s=[[t,o],...n.slice(1)]}else s=[[t,o],...n]}else s=[[t,o]];e.set(r,s)},VE=l(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new Jr(new Map(t));let o=new Map(e.locals);return r!==void 0&&zE(e,o,r),t.forEach(([n,s])=>{s.length===1?td(o,s[0][0],n,s[0][1]):s.forEach(([i,c])=>{td(o,i,n,c)})}),new Jr(o)});var nd=Li,KE=Es,JE=zl,YE=$E;var QE=VE;var ZE=jE;u();var dL=b_,sd=S_,id=__,cd=E_,ad=Eh,ud=Oh,ld=O_,xL=C_;var gL=m(pn,Ny(e=>e.ordinal));var XE=zf(gL);var eO=e=>{switch(e){case"All":return dL;case"Debug":return ud;case"Error":return id;case"Fatal":return sd;case"Info":return ad;case"Trace":return ld;case"None":return xL;case"Warning":return cd}};u();u();var tO=(e,t)=>({label:e,startTime:t}),rO=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var oO=tO,nO=rO;u();u();u();var Yr=Symbol.for("effect/Readable");var TY={[Yr]:Yr,pipe(){return O(this,arguments)}};var $l=Symbol.for("effect/Ref"),dd={_A:e=>e},hd=class{ref;[$l]=dd;[Yr];constructor(t){this.ref=t,this[Yr]=Yr,this.get=E(()=>Lt(this.ref))}get;modify(t){return E(()=>{let r=Lt(this.ref),[o,n]=t(r);return r!==n&&nr(n)(this.ref),o})}pipe(){return O(this,arguments)}},Vl=e=>new hd(Dr(e)),Os=e=>E(()=>Vl(e)),ur=e=>e.get,Oo=l(2,(e,t)=>e.modify(()=>[void 0,t])),sO=l(2,(e,t)=>e.modify(r=>[r,t]));var Kl=l(2,(e,t)=>e.modify(t));var ra=l(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var oa=Os,Yl=ur,iO=sO;var cO=Kl;var aO=ra;u();var uO=Bl;u();var pO="Empty",fO="Add",mO="Remove",hO="Update",dO="AndThen",xO={_tag:pO},na=(e,t)=>{let r=new Map(e.locals),o=xO;for(let[n,s]of t.locals.entries()){let i=gt(s)[1],c=r.get(n);if(c!==void 0){let a=gt(c)[1];v(a,i)||(o=Ql({_tag:hO,fiberRef:n,patch:n.diff(a,i)})(o))}else o=Ql({_tag:fO,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=Ql({_tag:mO,fiberRef:n})(o);return o},Ql=l(2,(e,t)=>({_tag:dO,first:e,second:t})),Zl=l(3,(e,t,r)=>{let o=r,n=_t(e);for(;xt(n);){let s=gt(n),i=Rr(n);switch(s._tag){case pO:{n=i;break}case fO:{o=Di(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case mO:{o=ta(o,s.fiberRef),n=i;break}case hO:{let c=Es(o,s.fiberRef);o=Di(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(c)}),n=i;break}case dO:{n=ni(s.first)(ni(s.second)(i));break}}}return o});u();var yO="effect/MetricLabel",gd=Symbol.for(yO),yd=class{key;value;[gd]=gd;_hash;constructor(t,r){this.key=t,this.value=r,this._hash=ce(yO+this.key+this.value)}[F](){return this._hash}[R](t){return bL(t)&&this.key===t.key&&this.value===t.value}pipe(){return O(this,arguments)}},Cs=(e,t)=>new yd(e,t),bL=e=>k(e,gd);var bO=l(e=>ue(e[0]),function(){let e=arguments;return rt(e[0],an,typeof e[1]=="string"?gr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>gr(r,o,n),t))}),tp=e=>C(e,_),SO=e=>nn(e,_),Sd=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),E(()=>{try{return t()}catch(o){throw a_(Ko(r?r(o):new un(o)))}})},_O=l(3,(e,t,r)=>Sr(e,o=>k(o,t)&&o[t]===r.failure?r.onFailure(o):G(o))),EO=l(2,(e,t)=>jr(e,r=>{let o=Jo(r,n=>Oi(n)?_(n):S());switch(o._tag){case"None":return Y(r);case"Some":return t(o.value.defect)}})),OO=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return Y(r);case"Some":return o.value}},onSuccess:y})),CO=l(2,(e,t)=>jr(e,r=>{let o=Jo(r,n=>Oi(n)?_(n):S());switch(o._tag){case"None":return Y(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:Y(r)}}})),vO=l(3,(e,t,r)=>Uc(e,Rn(t),r)),kO=l(2,(e,t)=>{let r;return Uc(e,o=>(r??=Object.keys(t),k(o,"_tag")&&Qa(o._tag)&&r.includes(o._tag)),o=>t[o._tag](o))}),wO=e=>Bc(e,{onFailure:B,onSuccess:()=>yr}),Qr=WE,MO=Qr(y),RO=l(2,(e,t)=>ne(Zh(t),e)),rp=e=>re((t,r)=>e({id:t.id(),status:r,interruptors:Pc(t.getFiberRef(fs))})),FO=rp(e=>Wn(e.interruptors)>0?bl:H),TO=rp(y),qi=e=>aa(e,op,na),SL=e=>aa(e,cs(op,ki),([t,r],[o,n])=>[na(t,o),sr(r,n)]),AO=y({}),IO=Ya(C,x),NO=Ja(C),PO=Ka(C),LO=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?(o.push(c),y(!0)):t(c,a))}return C(s,()=>o)})),DO=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>C(p?t(c,a):y(!1),f=>(f||o.push(c),f)))}return C(s,()=>o)})),qO=e=>C(ir(),e),_d=e=>ss(e,()=>x(Vr(),()=>_d(e))),HO=l(2,(e,t)=>C(st(e,B),si(t))),WO=l(3,(e,t,r)=>sa(e,t,o=>en(()=>r(o)))),UO=l(3,(e,t,r)=>sa(e,t,()=>Xo(r))),sa=l(3,(e,t,r)=>x(e,o=>t(o)?y(o):r(o))),BO=l(3,(e,t,r)=>I(()=>t(e)?y(e):G(r(e)))),jO=l(e=>ue(e[0]),(e,t,r)=>sa(e,t,o=>r===void 0?G(new Kt):kt(()=>r(o)))),zO=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(S()):GO(r,0,t,o.value)})),GO=(e,t,r,o)=>x(r(o,t),n=>{if(n)return y(_(o));let s=e.next();return s.done?y(S()):GO(e,t+1,r,s.value)}),$O=e=>I(()=>{let t=Nr(e);return tt(t)?m(ot(t),tr(Ze(t),(r,o)=>ss(r,()=>o))):en(()=>new Gc("Received an empty collection of effects"))}),VO=l(2,(e,t)=>on(t(on(e)))),ia=l(2,(e,t)=>Xe(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),KO=l(2,(e,t)=>I(()=>JO(e[Symbol.iterator](),0,t))),JO=(e,t,r)=>{let o=e.next();return o.done?y(!0):x(r(o.value,t),n=>n?JO(e,t+1,r):y(n))},Ed=e=>{let t=x(x(e,()=>Vr()),()=>t);return t},YO=function(){let e;return arguments.length===1?e=arguments[0]:e=arguments[1].bind(arguments[0]),I(()=>{let t=e(m),r=Ne(()=>t.next()),o=n=>n.done?y(n.value):x($s(n.value),s=>o(Ne(()=>t.next(s))));return o(r)})},op=re(e=>y(e.getFiberRefs())),QO=e=>x(e,t=>{let o=t[Symbol.iterator]().next();return o.done?G(new Kt):y(o.value)}),Od=e=>ia(e,{onFailure:Lo,onSuccess:Lo}),ZO=e=>Se(e,{onFailure:t=>vd(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>H}),XO=e=>sp((t,r)=>JE(r,t,e)),eC=e=>ia(e,{onFailure:Po,onSuccess:eo}),tC=e=>ia(e,{onFailure:eo,onSuccess:Po}),Cd=(e,t)=>I(()=>t.while(e)?x(t.body(e),r=>Cd(r,t)):y(e)),Co=e=>(...t)=>{let r=dr(e),o;for(let n=0,s=t.length;n<s;n++){let i=t[n];nl(i)&&(o!==void 0?o=je(o,i):o=i,t=[...t.slice(0,n),...t.slice(n+1)],n--)}return o===void 0&&(o=yr),re(n=>(n.log(t,o,r),H))},rC=Co(),oC=Co(ld),vd=Co(ud),nC=Co(ad),sC=Co(cd),iC=Co(id),cC=Co(sd),aC=l(2,(e,t)=>x(jl,r=>rt(e,kl,Gu(oO(t,r))))),uC=Wt(an),lC=(e,t)=>t.discard?fC(e,t.while,t.step,t.body):C(pC(e,t.while,t.step,t.body),ee),pC=(e,t,r,o)=>I(()=>t(e)?x(o(e),n=>C(pC(r(e),t,r,o),Gu(n))):E(()=>Hr())),fC=(e,t,r,o)=>I(()=>t(e)?x(o(e),()=>fC(r(e),t,r,o)):H),mC=l(3,(e,t,r)=>I(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,c=0;for(;!(i=o.next()).done;){let a=c++,p=i.value;s=x(s,f=>C(r(f,p,a),([h,d])=>(n.push(d),h)))}return C(s,a=>[a,n])})),Hi=l(2,(e,t)=>Se(e,{onFailure:r=>tn(()=>t(r)),onSuccess:y})),kd=e=>m(Mt(),x(t=>m(SL(e),$r(t),wd,C(r=>ne(r,m(it(t),x(([o,n])=>le(cs(vs(o[0]),sn(o[1])),n)))))))),hC=e=>Xe(e,{onFailure:t=>y(t),onSuccess:y}),np=e=>C(e,t=>!t),dC=e=>x(e,t=>{switch(t._tag){case"None":return H;case"Some":return G(new Kt)}}),wd=e=>C(oa(!0),t=>Ee(wi(e,iO(t,!1)))),xC=e=>Xe(e,{onFailure:()=>y(S()),onSuccess:t=>y(_(t))}),gC=l(2,(e,t)=>ss(e,()=>kt(t))),yC=l(2,(e,t)=>ss(e,()=>E(t))),bC=e=>Se(e,{onFailure:t=>{let r=ee(Nc(t));return r.length===0?Y(t):G(r)},onSuccess:y}),vs=e=>sp((t,r)=>m(e,Zl(t,r))),SC=e=>e.length>=1?qe((t,r)=>{try{e(r).then(o=>t(xe(o)),o=>t(Fi(o)))}catch(o){t(Fi(o))}}):qe(t=>{try{e().then(r=>t(xe(r)),r=>t(Fi(r)))}catch(r){t(Fi(r))}}),Wi=l(3,(e,t,r)=>cr(o=>Er(e,ve(o,t,r)))),_C=l(3,(e,t,r)=>cr(o=>x(r,n=>Er(e,m(o,ve(t,n)))))),EC=Ul(y),OC=l(3,(e,t,r)=>ee(e).reduce((o,n,s)=>x(o,i=>r(i,n,s)),y(t))),CC=l(3,(e,t,r)=>ee(e).reduceRight((o,n,s)=>x(o,i=>r(n,i,s)),y(t))),vC=l(3,(e,t,r)=>x(E(()=>e[Symbol.iterator]()),o=>kC(o,0,t,r.while,r.body))),kC=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?x(n(r,s.value,t),i=>kC(e,t+1,i,o,n)):y(r)},wC=l(2,(e,t)=>I(()=>MC(e,t))),MC=(e,t)=>x(e,r=>t<=0?y(r):ne(Vr(),MC(e,t-1))),RC=e=>Se(e,{onFailure:G,onSuccess:y}),FC=e=>I(()=>YE(e)),ks=Zh,ca=y(S()),TC=e=>y(_(e)),aa=l(3,(e,t,r)=>x(t,o=>x(e,n=>C(t,s=>[r(o,s),n])))),AC=l(e=>ue(e[0]),function(){return Md(arguments[0],typeof arguments[1]=="string"?[Cs(arguments[1],arguments[2])]:Object.entries(arguments[1]).map(([e,t])=>Cs(e,t)))}),Md=l(2,(e,t)=>rt(e,bo,r=>Fr(r,t))),IC=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?y(!0):(o.push(c),t(c,a)))}return C(s,()=>o)})),NC=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>m(p?t(c,a):y(!1),C(f=>(f&&o.push(c),f))))}return C(s,()=>o)})),PC=l(2,(e,{onFailure:t,onSuccess:r})=>Se(e,{onFailure:o=>{let n=Ur(o);switch(n._tag){case"Left":return ne(t(n.left),Y(o));case"Right":return Y(o)}},onSuccess:o=>le(r(o),o)})),LC=l(2,(e,t)=>jr(e,r=>Ke(hh(r),{onNone:()=>Y(r),onSome:o=>ne(t(o),Y(r))}))),Rd=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=Ur(r);switch(o._tag){case"Left":return ne(t(o.left),Y(r));case"Right":return Y(r)}},onSuccess:y})),DC=l(3,(e,t,r)=>Rd(e,o=>Rn(o,t)?r(o):H)),qC=l(2,(e,t)=>Se(e,{onFailure:r=>ne(t(r),Y(r)),onSuccess:y})),HC=e=>Fd(e,HE),Fd=l(2,(e,t)=>aa(e,t,(r,o)=>bc(o-r))),_L=uO,WC=_L(y),Td=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?qe((o,n)=>{try{t(n).then(s=>o(xe(s)),s=>o(r?kt(()=>r(s)):G(new un(s))))}catch(s){o(r?kt(()=>r(s)):G(new un(s)))}}):qe(o=>{try{t().then(n=>o(xe(n)),n=>o(r?kt(()=>r(n)):G(new un(n))))}catch(n){o(r?kt(()=>r(n)):G(new un(n)))}})},UC=l(2,(e,t)=>x(e,r=>Sd({try:()=>t.try(r),catch:t.catch}))),BC=l(2,(e,t)=>x(e,r=>Td({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),jC=l(2,(e,t)=>I(()=>t()?ca:tp(e))),zC=l(2,(e,t)=>x(t,r=>r?ca:tp(e))),GC=e=>Hi(e,dh),sp=e=>re(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),H)),$C=l(3,(e,t,r)=>ys(e,o=>ve(o,t,r(ci(o,t))))),ip=l(2,(e,t)=>I(()=>t()?C(e,_):y(S()))),VC=l(3,(e,t,r)=>x(Wt(t),o=>r(o)?C(e,n=>[o,_(n)]):y([o,S()]))),KC=l(3,(e,t,r)=>x(Yl(t),o=>r(o)?C(e,n=>[o,_(n)]):y([o,S()]))),JC=l(2,(e,t)=>t(e)),YC=(e,t)=>(...r)=>x(e,o=>t(o)(...r)),QC=(e,t)=>(...r)=>C(e,o=>t(o)(...r)),Ad=e=>new Proxy({},{get(t,r,o){return(...n)=>x(e,s=>s[r](...n))}}),Id=e=>new Proxy({},{get(t,r,o){return x(e,n=>ue(n[r])?n[r]:y(n[r]))}}),ZC=e=>({functions:Ad(e),constants:Id(e)}),XC=e=>C(ir(),xr(e)),Nd=e=>x(ir(),xr(e)),ev=function(){let e=arguments;return Od(x(Pd,t=>E(()=>{if(typeof e[0]=="string")t.attribute(e[0],e[1]);else for(let r in e[0])t.attribute(r,e[0][r])})))},tv=l(e=>ue(e[0]),function(){let e=arguments;return rt(e[0],zc,typeof e[1]=="string"?gr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>gr(r,o,n),t))}),rv=Nd(br),Pd=x(ir(),e=>{let t=e.unsafeMap.get(br.key);return t!==void 0&&t._tag==="Span"?y(t):G(new Kt)}),ov=l(e=>ue(e[0]),(e,t,r)=>rt(e,Ml,yu({_tag:"SpanLink",span:t,attributes:r??{}}))),nv=BigInt(0),cp=(e,t,r)=>{if(e.getFiberRef(Mh)===!1)return U_(t);let n=e.getFiberRef(mt),s=e.getFiberRef(ye),i=Be(s,Br),c=Be(s,UE),a=e.getFiberRef(Ri),p=e.getFiberRefs(),f=nd(p,zc),h=nd(p,Ml),d=r.parent?_(r.parent):r.root?S():xr(n,br),g=h._tag==="Some"?r.links!==void 0?[...rr(h.value),...r.links??[]]:rr(h.value):r.links??Bt(),b=i.span(t,d,r.context??Ot(),g,a?c.unsafeCurrentTimeNanos():nv,r.kind??"internal");return typeof r.captureStackTrace=="function"&&Dc.set(b,r.captureStackTrace),f._tag==="Some"&&sS(f.value,(M,T)=>b.attribute(T,M)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([M,T])=>b.attribute(M,T)),b},sv=(e,t)=>(t=ho(t),re(r=>y(cp(r,e,t)))),iv=Wt(zc),cv=Wt(Ml),Ld=(e,t,r,o)=>E(()=>{e.status._tag!=="Ended"&&(Rh(t)&&Dc.has(e)&&e.attribute("code.stacktrace",Dc.get(e)()),e.end(o?r.unsafeCurrentTimeNanos():nv,t))}),Xl=(e,...t)=>{let r=ho(t.length===1?void 0:t[0]),o=t[t.length-1];return re(n=>{let s=cp(n,e,r),i=n.getFiberRef(Ri),c=Be(n.getFiberRef(ye),Yt);return yt(o(s),a=>Ld(s,a,c,i))})},ep=l(2,(e,t)=>Wi(e,br,t)),Dd=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=ho(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return Xl(t,r,n=>ep(o,n))}return o=>Xl(t,r,n=>ep(o,n))},av=e=>function(){let t=e.captureStackTrace??!1;if(e.captureStackTrace!==!1){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let o=new Error;Error.stackTraceLimit=r;let n=!1;t=()=>{if(n!==!1)return n;if(o.stack)return n=o.stack.trim().split(`
`).slice(2).join(`
`).trim(),n}}return I(()=>{let r=typeof e.options=="function"?e.options.apply(null,arguments):e.options;return Dd(I(()=>Ne(()=>e.body.apply(this,arguments))),r.name,{...r,captureStackTrace:t})})},uv=e=>e==null?G(new Kt):y(e),lv=e=>Sr(C(e,_),t=>I_(t)?ca:G(t));u();u();var qd=Pf;var pv=oo;u();u();var mv="Sequential",hv="Parallel",EL="ParallelN",Zr={_tag:mv},dv={_tag:hv},xv=e=>({_tag:EL,parallelism:e}),Hd=e=>e._tag===mv,Wd=e=>e._tag===hv;var up=Zr,lp=dv,pp=xv;u();var ws=na;var Ms=Zl;u();u();var mp="effect/FiberStatus",mn=Symbol.for(mp),fp="Done",yv="Running",bv="Suspended",OL=ce(`${mp}-${fp}`),Bd=class{[mn]=mn;_tag=fp;[F](){return OL}[R](t){return hp(t)&&t._tag===fp}},jd=class{runtimeFlags;[mn]=mn;_tag=yv;constructor(t){this.runtimeFlags=t}[F](){return m(w(mp),L(w(this._tag)),L(w(this.runtimeFlags)),V(this))}[R](t){return hp(t)&&t._tag===yv&&this.runtimeFlags===t.runtimeFlags}},zd=class{runtimeFlags;blockingOn;[mn]=mn;_tag=bv;constructor(t,r){this.runtimeFlags=t,this.blockingOn=r}[F](){return m(w(mp),L(w(this._tag)),L(w(this.runtimeFlags)),L(w(this.blockingOn)),V(this))}[R](t){return hp(t)&&t._tag===bv&&this.runtimeFlags===t.runtimeFlags&&v(this.blockingOn,t.blockingOn)}},Sv=new Bd,_v=e=>new jd(e),Ev=(e,t)=>new zd(e,t),hp=e=>k(e,mn),Ov=e=>e._tag===fp;var Cv=Sv,Gd=_v,vv=Ev;var kv=Ov;u();var Nv=Symbol.for("effect/Micro"),Qt=Symbol.for("effect/Micro/runSymbol"),Mv=e=>typeof e=="object"&&e!==null&&Nv in e,Rv=Symbol.for("effect/Micro/MicroCause"),vL={_E:B},dp=class extends globalThis.Error{_tag;traces;[Rv];constructor(t,r,o){let n=`MicroCause.${t}`,s,i,c;if(r instanceof globalThis.Error){s=`(${n}) ${r.name}`,i=r.message;let a=i.split(`
`).length;c=r.stack?`(${n}) ${r.stack.split(`
`).slice(0,a+3).join(`
`)}`:`${s}: ${i}`}else s=n,i=qo(r,0),c=`${s}: ${i}`;o.length>0&&(c+=`
    ${o.join(`
    `)}`),super(i),this._tag=t,this.traces=o,this[Rv]=vL,this.name=s,this.stack=c}pipe(){return O(this,arguments)}toString(){return this.stack}[j](){return this.stack}};var Kd=class extends dp{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},kL=(e,t=[])=>new Kd(e,t),Jd=class extends dp{constructor(t=[]){super("Interrupt","interrupted",t)}},wL=(e=[])=>new Jd(e);var xp=St(wL()),la=Ve;var Pv=e=>St(kL(e));var ML=Symbol.for("effect/Micro/Env"),Fv=Symbol.for("effect/Micro/EnvRef"),RL={[ML]:{_R:B},pipe(){return O(this,arguments)}},Zd=e=>{let t=Object.create(RL);return t.refs=e,t},Lv=()=>{let e=new AbortController,t=Object.create(null);return t[bp.key]=e,t[Rs.key]=e.signal,t[Bv.key]=new gp,Zd(t)},Fs=l(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),Dv=l(3,(e,t,r)=>{let o=Object.assign(Object.create(null),e.refs);return o[t.key]=r,Zd(o)}),qv=l(2,(e,t)=>Zd(t(Object.assign(Object.create(null),e.refs))));var FL="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),gp=class{tasks=[];running=!1;scheduleTask(t,r){this.tasks.push(t),this.running||(this.running=!0,FL(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let t=this.tasks;this.tasks=[];for(let r=0,o=t.length;r<o;r++)t[r]()}shouldYield(t){return!1}flush(){for(;this.tasks.length>0;)this.runTasks()}},TL={[Fv]:Fv},Ts=(e,t)=>q(e,()=>{let r=Object.create(TL);return r.key=e,r.initial=t(),r}),bp=Ts("effect/Micro/currentAbortController",()=>{}),Rs=Ts("effect/Micro/currentAbortSignal",()=>{}),Hv=Ts("effect/Micro/currentContext",()=>Ot()),AL=Ts("effect/Micro/currentConcurrency",()=>"unbounded"),Wv=Ts("effect/Micro/currentMaxDepthBeforeYield",()=>2048),Uv=Ts("effect/Micro/currentInterruptible",()=>!0),Bv=Ts("effect/Micro/currentScheduler",()=>new gp);var IL={...pv,_op:"Micro",[Nv]:{_A:B,_E:B,_R:B},[Symbol.iterator](){return new Qo(new Mr(this))}},Bi=q("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:Wv.initial})),NL=e=>{let t=Object.create(IL);return t[Qt]=e,t},jv=(e,t)=>NL(function r(o,n){if(t&&o.refs[Uv.key]!==!1&&o.refs[Rs.key].aborted)return n(xp);Bi.depth++,Bi.depth===1&&(Bi.maxDepthBeforeYield=Fs(o,Wv));let s=o.refs[Bv.key];if(Bi.depth>=Bi.maxDepthBeforeYield||s.shouldYield(o))s.scheduleTask(()=>r(o,n),0);else try{e(o,n)}catch(i){n(Pv(i))}Bi.depth--}),vo=e=>jv(e,!0),ua=e=>vo(function(t,r){r(e)});var Yd=e=>ua(la(e));var Qd=e=>vo(function(t,r){r(la(e()))});var yp=e=>vo(function(t,r){e()[Qt](t,r)}),Tv=Yd(void 0);var PL=e=>vo(function(t,r){let o=!1,n=e.length>1?new AbortController:void 0,s=Fs(t,Rs),i;function c(){a(i?UL(DL(i,ua(xp))):ua(xp)),n!==void 0&&n.abort()}function a(p){o||(o=!0,s.removeEventListener("abort",c),p[Qt](t,r))}i=n===void 0?e(a):e(a,n.signal),!o&&s.addEventListener("abort",c)});var LL=l(2,(e,t)=>vo(function(r,o){e[Qt](r,function(n){o(n._tag==="Left"?n:la(t(n.right)))})}));var zv=l(2,(e,t)=>vo(function(r,o){e[Qt](r,function(n){if(n._tag==="Left")return o(n);t(n.right)[Qt](r,o)})}));var DL=l(2,(e,t)=>vo(function(r,o){e[Qt](r,function(n){if(n._tag==="Left")return o(n);if(Fs(r,Rs).aborted)return o(xp);let s=Mv(t)?t:typeof t=="function"?t(n.right):t;Mv(s)?s[Qt](r,o):o(la(s))})}));var qL=e=>LL(e,t=>{}),HL=e=>vo(function(t,r){e[Qt](t,function(o){r(la(o))})});function WL(e){let t=new AbortController,r=Fs(e,Rs);function o(){t.abort(),r.removeEventListener("abort",o)}return r.addEventListener("abort",o),[qv(e,function(s){return s[bp.key]=t,s[Rs.key]=t.signal,s}),o]}var $d=Symbol.for("effect/Micro/MicroScope");var Av=class e{[$d];state={_tag:"Open",finalizers:new Set};constructor(){this[$d]=$d}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return yp(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),Tv):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return yp(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},zv(BL(r,o=>HL(o(t))),o=>qL(ua(Ay(o))))}return Tv})}get fork(){return Qd(()=>{let t=new e;if(this.state._tag==="Closed")return t.state=this.state,t;function r(o){return t.close(o)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(o=>Qd(()=>this.unsafeRemoveFinalizer(r))),t})}};var UL=e=>jv(function(t,r){let o=qv(t,function(n){return n[Uv.key]=!1,n[Rs.key]=new AbortController().signal,n});e[Qt](o,r)},!1);var BL=(e,t,r)=>vo(function(o,n){let s=r?.concurrency==="inherit"?Fs(o,AL):r?.concurrency??1,i=s==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,s),[c,a]=WL(o),p,f=Array.from(e),h=f.length,d=r?.discard?void 0:new Array(h),g=0,b=0,M=0,T=!1;function N(){for(T=!0;b<i&&g<h;){let K=g,ae=f[K];g++,b++;try{t(ae,K)[Qt](c,function(_e){_e._tag==="Left"?p===void 0&&(p=_e,h=g,a()):d!==void 0&&(d[K]=_e.right),M++,b--,M===h?n(p??Ve(d)):!T&&b<i&&N()})}catch(_e){p=Pv(_e),h=g,a()}}T=!1}N()});var Vd=Symbol.for("effect/Micro/Handle");var Iv=class{parentSignal;[Vd];observers=new Set;_exit=void 0;_controller;isRoot;constructor(t,r){this.parentSignal=t,this[Vd]=Vd,this.isRoot=r!==void 0,this._controller=r??new AbortController,this.isRoot||t.addEventListener("abort",this.unsafeInterrupt)}unsafePoll(){return this._exit??null}unsafeInterrupt=()=>{this._controller.abort()};emit(t){this._exit||(this._exit=t,this.isRoot||this.parentSignal.removeEventListener("abort",this.unsafeInterrupt),this.observers.forEach(r=>r(t)),this.observers.clear())}addObserver(t){if(this._exit)return t(this._exit);this.observers.add(t)}removeObserver(t){this.observers.delete(t)}get await(){return yp(()=>this._exit?Yd(this._exit):PL(t=>{function r(o){t(Yd(o))}return this.addObserver(r),Qd(()=>{this.removeObserver(r)})}))}get join(){return zv(this.await,ua)}get interrupt(){return yp(()=>(this.unsafeInterrupt(),this.await))}};u();var Sp=class{buckets=[];scheduleTask(t,r){let o=this.buckets.length,n,s=0;for(;s<o&&this.buckets[s][0]<=r;s++)n=this.buckets[s];n&&n[0]===r?n[1].push(t):s===o?this.buckets.push([r,[t]]):this.buckets.splice(s,0,[r,[t]])}},Xd=class{maxNextTickBeforeTimer;running=!1;tasks=new Sp;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(vl)?t.getFiberRef(cn):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},$v=q(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new Xd(2048)),_p=class{tasks=new Sp;deferred=!1;scheduleTask(t,r){this.deferred?$v.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(vl)?t.getFiberRef(cn):!1}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var hn=q(Symbol.for("effect/FiberRef/currentScheduler"),()=>Te($v)),Vv=l(2,(e,t)=>We(e,hn,t));u();var Ep=q(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Te(new Map));u();var tx=(e,t,r,o)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return He(wl,n=>n==="unbounded"?r():n>1?o(n):t());default:return e>1?o(e):t()}},pa=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return He(wl,o=>o==="unbounded"||o>1?r():t());default:return e>1?r():t()}};u();u();u();var Op="InterruptSignal",Cp="Stateful",vp="Resume",kp="YieldNow",wp=e=>({_tag:Op,cause:e}),ji=e=>({_tag:Cp,onFiber:e}),As=e=>({_tag:vp,effect:e}),Kv=()=>({_tag:kp});var GL="effect/FiberScope",Mp=Symbol.for(GL),rx=class{[Mp]=Mp;fiberId=Gt;roots=new Set;add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},ox=class{fiberId;parent;[Mp]=Mp;constructor(t,r){this.fiberId=t,this.parent=r}add(t,r){this.parent.tell(ji(o=>{o.addChild(r),r.addObserver(()=>{o.removeChild(r)})}))}},Yv=e=>new ox(e.id(),e),dn=q(Symbol.for("effect/FiberScope/Global"),()=>new rx);var $L="effect/Fiber",fa=Symbol.for($L),ma={_E:e=>e,_A:e=>e},VL={[fa]:ma,pipe(){return O(this,arguments)}},KL="effect/Fiber",Zv=Symbol.for(KL);var nx=e=>e.await;var Xv=e=>e.inheritAll;var ek=l(2,(e,t)=>e.interruptAsFork(t)),xn=e=>as(wt(e.await),e.inheritAll);var L4={...VL,id:()=>Gt,await:us,children:y([]),inheritAll:us,poll:y(S()),interruptAsFork:()=>us};var gn="effect/FiberCurrent";u();var JL="effect/Logger",rk=Symbol.for(JL),ok={_Message:e=>e,_Output:e=>e},Rp=e=>({[rk]:ok,log:e,pipe(){return O(this,arguments)}});var W4={[rk]:ok,log:Lo,pipe(){return O(this,arguments)}};var nk=Rp(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let c=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${Uu(o)}`].join(" "),f=$y(s);for(let h=0;h<f.length;h++){let d=qo(f[h]);d.length>0&&(p=p+" message=",p=sx(d,p))}if(t!=null&&t._tag!=="Empty"&&(p=p+" cause=",p=sx(Yo(t,{renderErrorCause:!0}),p)),Cc(i)){p=p+" ";let h=!0;for(let d of i)h?h=!1:p=p+" ",p=p+m(d,nO(c))}if(rS(e)>0){p=p+" ";let h=!0;for(let[d,g]of e)h?h=!1:p=p+" ",p=p+ZL(d),p=p+"=",p=sx(qo(g),p)}return p}),YL=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,QL=/^[^\s"=]+$/,sx=(e,t)=>t+(e.match(QL)?e:YL(e));var ZL=e=>e.replace(/[\s="]/g,"_");var Is={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},U4={None:[],All:[],Trace:[Is.gray],Debug:[Is.blue],Info:[Is.green],Warning:[Is.yellow],Error:[Is.red],Fatal:[Is.bgBrightRed,Is.black]};var B4=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null&&process.stdout.isTTY===!0;var j4=typeof self=="object"&&self!==null&&typeof self.constructor=="function"&&self.constructor.name.includes("Worker");u();u();var sk="effect/MetricBoundaries",ix=Symbol.for(sk),cx=class{values;[ix]=ix;constructor(t){this.values=t,this._hash=m(ce(sk),L(Nt(this.values)))}_hash;[F](){return this._hash}[R](t){return e2(t)&&v(this.values,t.values)}pipe(){return O(this,arguments)}},e2=e=>k(e,ix),t2=e=>{let t=m(e,Jf(Re(Number.POSITIVE_INFINITY)),tm);return new cx(t)};var ik=e=>m(Kf(e.count-1,t=>e.start*Math.pow(e.factor,t)),ai,t2);u();u();var o2="effect/MetricKeyType",ha=Symbol.for(o2),lk="effect/MetricKeyType/Counter",ax=Symbol.for(lk),pk="effect/MetricKeyType/Frequency",ux=Symbol.for(pk),fk="effect/MetricKeyType/Gauge",lx=Symbol.for(fk),mk="effect/MetricKeyType/Histogram",px=Symbol.for(mk),hk="effect/MetricKeyType/Summary",fx=Symbol.for(hk),da={_In:e=>e,_Out:e=>e},mx=class{incremental;bigint;[ha]=da;[ax]=ax;constructor(t,r){this.incremental=t,this.bigint=r,this._hash=ce(lk)}_hash;[F](){return this._hash}[R](t){return dx(t)}pipe(){return O(this,arguments)}},n2=ce(pk),ck=class{preregisteredWords;[ha]=da;[ux]=ux;constructor(t){this.preregisteredWords=t}[F](){return n2}[R](t){return xx(t)}pipe(){return O(this,arguments)}},s2=ce(fk),ak=class{bigint;[ha]=da;[lx]=lx;constructor(t){this.bigint=t}[F](){return s2}[R](t){return gx(t)}pipe(){return O(this,arguments)}},hx=class{boundaries;[ha]=da;[px]=px;constructor(t){this.boundaries=t,this._hash=m(ce(mk),L(w(this.boundaries)))}_hash;[F](){return this._hash}[R](t){return yx(t)&&v(this.boundaries,t.boundaries)}pipe(){return O(this,arguments)}},uk=class{maxAge;maxSize;error;quantiles;[ha]=da;[fx]=fx;constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this._hash=m(ce(hk),L(w(this.maxAge)),L(w(this.maxSize)),L(w(this.error)),L(Nt(this.quantiles)))}_hash;[F](){return this._hash}[R](t){return bx(t)&&v(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&v(this.quantiles,t.quantiles)}pipe(){return O(this,arguments)}},dk=e=>new mx(e?.incremental??!1,e?.bigint??!1);var xk=e=>new hx(e);var dx=e=>k(e,ax),xx=e=>k(e,ux),gx=e=>k(e,lx),yx=e=>k(e,px),bx=e=>k(e,fx);var i2="effect/MetricKey",yk=Symbol.for(i2),c2={_Type:e=>e},a2=ii(v),xa=class{name;keyType;description;tags;[yk]=c2;constructor(t,r,o,n=[]){this.name=t,this.keyType=r,this.description=o,this.tags=n,this._hash=m(ce(this.name+this.description),L(w(this.keyType)),L(Nt(this.tags)))}_hash;[F](){return this._hash}[R](t){return u2(t)&&this.name===t.name&&v(this.keyType,t.keyType)&&v(this.description,t.description)&&a2(this.tags,t.tags)}pipe(){return O(this,arguments)}},u2=e=>k(e,yk),bk=(e,t)=>new xa(e,dk(t),dr(t?.description));var Sk=(e,t,r)=>new xa(e,xk(t),dr(r));var _k=l(2,(e,t)=>t.length===0?e:new xa(e.name,e.keyType,e.description,Fr(e.tags,t)));u();u();u();var p2="effect/MetricState",ga=Symbol.for(p2),Ek="effect/MetricState/Counter",Sx=Symbol.for(Ek),Ok="effect/MetricState/Frequency",_x=Symbol.for(Ok),Ck="effect/MetricState/Gauge",Ex=Symbol.for(Ck),vk="effect/MetricState/Histogram",Ox=Symbol.for(vk),kk="effect/MetricState/Summary",Cx=Symbol.for(kk),ya={_A:e=>e},vx=class{count;[ga]=ya;[Sx]=Sx;constructor(t){this.count=t}[F](){return m(w(Ek),L(w(this.count)),V(this))}[R](t){return m2(t)&&this.count===t.count}pipe(){return O(this,arguments)}},f2=ii(v),kx=class{occurrences;[ga]=ya;[_x]=_x;constructor(t){this.occurrences=t}_hash;[F](){return m(ce(Ok),L(Nt(ee(this.occurrences.entries()))),V(this))}[R](t){return h2(t)&&f2(ee(this.occurrences.entries()),ee(t.occurrences.entries()))}pipe(){return O(this,arguments)}},wx=class{value;[ga]=ya;[Ex]=Ex;constructor(t){this.value=t}[F](){return m(w(Ck),L(w(this.value)),V(this))}[R](t){return d2(t)&&this.value===t.value}pipe(){return O(this,arguments)}},Mx=class{buckets;count;min;max;sum;[ga]=ya;[Ox]=Ox;constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s}[F](){return m(w(vk),L(w(this.buckets)),L(w(this.count)),L(w(this.min)),L(w(this.max)),L(w(this.sum)),V(this))}[R](t){return x2(t)&&v(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},Rx=class{error;quantiles;count;min;max;sum;[ga]=ya;[Cx]=Cx;constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i}[F](){return m(w(kk),L(w(this.error)),L(w(this.quantiles)),L(w(this.count)),L(w(this.min)),L(w(this.max)),L(w(this.sum)),V(this))}[R](t){return g2(t)&&this.error===t.error&&v(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},wk=e=>new vx(e),Mk=e=>new kx(e),Rk=e=>new wx(e),Fk=e=>new Mx(e.buckets,e.count,e.min,e.max,e.sum),Tk=e=>new Rx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var m2=e=>k(e,Sx),h2=e=>k(e,_x),d2=e=>k(e,Ex),x2=e=>k(e,Ox),g2=e=>k(e,Cx);var b2="effect/MetricHook",S2=Symbol.for(b2),_2={_In:e=>e,_Out:e=>e},ba=e=>({[S2]:_2,pipe(){return O(this,arguments)},...e});var Ak=BigInt(0),Nk=e=>{let t=e.keyType.bigint?Ak:0,r=e.keyType.incremental?e.keyType.bigint?o=>o>=Ak:o=>o>=0:o=>!0;return ba({get:()=>wk(t),update:o=>{r(o)&&(t=t+o)}})},Pk=e=>{let t=new Map;for(let o of e.keyType.preregisteredWords)t.set(o,0);return ba({get:()=>Mk(t),update:o=>{let n=t.get(o)??0;t.set(o,n+1)}})},Lk=(e,t)=>{let r=t;return ba({get:()=>Rk(r),update:o=>{r=o}})},Dk=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;m(t,Nn(pn),Tr((h,d)=>{n[d]=h}));let p=h=>{let d=0,g=r;for(;d!==g;){let b=Math.floor(d+(g-d)/2),M=n[b];h<=M?g=b:d=b,g===d+1&&(h<=n[d]?g=d:d=g)}o[d]=o[d]+1,s=s+1,i=i+h,h<c&&(c=h),h>a&&(a=h)},f=()=>{let h=gc(r),d=0;for(let g=0;g<r;g++){let b=n[g],M=o[g];d=d+M,h[g]=[b,d]}return h};return ba({get:()=>Fk({buckets:f(),count:s,min:c,max:a,sum:i}),update:p})},qk=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=m(n,Nn(pn)),i=gc(o),c=0,a=0,p=0,f=Number.MAX_VALUE,h=Number.MIN_VALUE,d=b=>{let M=[],T=0;for(;T!==o-1;){let N=i[T];if(N!=null){let[K,ae]=N,_e=pi(b-K);ym(_e,xm)&&_e<=r&&M.push(ae)}T=T+1}return E2(t,s,Nn(M,pn))},g=(b,M)=>{if(o>0){c=c+1;let T=c%o;i[T]=[M,b]}a=a+1,p=p+b,b<f&&(f=b),b>h&&(h=b)};return ba({get:()=>Tk({error:t,quantiles:d(Date.now()),count:a,min:f,max:h,sum:p}),update:([b,M])=>g(b,M)})},E2=(e,t,r)=>{let o=r.length;if(!xt(t))return Bt();let n=t[0],s=t.slice(1),i=Ik(e,o,S(),0,n,r),c=_t(i);return s.forEach(a=>{c.push(Ik(e,o,i.value,i.consumed,a,i.rest))}),Tr(c,a=>[a.quantile,a.value])},Ik=(e,t,r,o,n,s)=>{let i=e,c=t,a=r,p=o,f=n,h=s,d=e,g=t,b=r,M=o,T=n,N=s;for(;;){if(!xt(h))return{quantile:f,value:S(),consumed:p,rest:[]};if(f===1)return{quantile:f,value:_(Qf(h)),consumed:p+h.length,rest:[]};let K=Qy(h,No=>No<=h[0]),ae=f*c,_e=i/2*ae,lt=p+K[0].length,Xt=Math.abs(lt-ae);if(lt<ae-_e){d=i,g=c,b=Bo(h),M=lt,T=f,N=K[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}if(lt>ae+_e)return{quantile:f,value:a,consumed:p,rest:h};switch(a._tag){case"None":{d=i,g=c,b=Bo(h),M=lt,T=f,N=K[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}case"Some":{let No=Math.abs(ae-a.value);if(Xt<No){d=i,g=c,b=Bo(h),M=lt,T=f,N=K[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}return{quantile:f,value:_(a.value),consumed:p,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};u();var C2="effect/MetricPair",v2=Symbol.for(C2),k2={_Type:e=>e};var Hk=(e,t)=>({[v2]:k2,metricKey:e,metricState:t,pipe(){return O(this,arguments)}});var M2="effect/MetricRegistry",Wk=Symbol.for(M2),Fx=class{[Wk]=Wk;map=Ss();snapshot(){let t=[];for(let[r,o]of this.map)t.push(Hk(r,o.get()));return t}get(t){let r=m(this.map,Ge(t),pt);if(r==null){if(dx(t.keyType))return this.getCounter(t);if(gx(t.keyType))return this.getGauge(t);if(xx(t.keyType))return this.getFrequency(t);if(yx(t.keyType))return this.getHistogram(t);if(bx(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=m(this.map,Ge(t),pt);if(r==null){let o=Nk(t);m(this.map,Or(t))||m(this.map,Ut(t,o)),r=o}return r}getFrequency(t){let r=m(this.map,Ge(t),pt);if(r==null){let o=Pk(t);m(this.map,Or(t))||m(this.map,Ut(t,o)),r=o}return r}getGauge(t){let r=m(this.map,Ge(t),pt);if(r==null){let o=Lk(t,t.keyType.bigint?BigInt(0):0);m(this.map,Or(t))||m(this.map,Ut(t,o)),r=o}return r}getHistogram(t){let r=m(this.map,Ge(t),pt);if(r==null){let o=Dk(t);m(this.map,Or(t))||m(this.map,Ut(t,o)),r=o}return r}getSummary(t){let r=m(this.map,Ge(t),pt);if(r==null){let o=qk(t);m(this.map,Or(t))||m(this.map,Ut(t,o)),r=o}return r}},Uk=()=>new Fx;var F2="effect/Metric",T2=Symbol.for(F2),A2={_Type:e=>e,_In:e=>e,_Out:e=>e},Bk=q(Symbol.for("effect/Metric/globalMetricRegistry"),()=>Uk()),jk=function(e,t,r){let o=Object.assign(n=>Vt(n,s=>N2(o,s)),{[T2]:A2,keyType:e,unsafeUpdate:t,unsafeValue:r,register(){return this.unsafeValue([]),this},pipe(){return O(this,arguments)}});return o};var Sa=(e,t)=>zk(bk(e,t));var zk=e=>{let t,r=new WeakMap,o=n=>{if(n.length===0)return t!==void 0||(t=Bk.get(e)),t;let s=r.get(n);return s!==void 0||(s=Bk.get(_k(e,n)),r.set(n,s)),s};return jk(e.keyType,(n,s)=>o(s).update(n),n=>o(n).get())};var Gk=(e,t,r)=>zk(Sk(e,t,r));var $k=l(3,(e,t,r)=>I2(e,[Cs(t,r)]));var I2=l(2,(e,t)=>jk(e.keyType,(r,o)=>e.unsafeUpdate(r,Fr(t,o)),r=>e.unsafeValue(Fr(t,r))));var N2=l(2,(e,t)=>He(bo,r=>E(()=>e.unsafeUpdate(t,r))));u();var L2="effect/Request",Tx=Symbol.for(L2),D2={_E:e=>e,_A:e=>e},w6={...ti,[Tx]:D2},Vk=e=>k(e,Tx);var Ax=l(2,(e,t)=>He(Ep,r=>E(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,Xc(o.result,t))}})));var zi=class{count=0;observers=new Set;interrupted=!1;addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};u();u();u();u();u();var yn={Forward:0,Backward:1},Fp=class e{self;stack;direction;count=0;constructor(t,r,o){this.self=t,this.stack=r,this.direction=o}clone(){return new e(this.self,this.stack.slice(),this.direction)}reversed(){return new e(this.self,this.stack.slice(),this.direction===yn.Forward?yn.Backward:yn.Forward)}next(){let t=this.entry;switch(this.count++,this.direction===yn.Forward?this.moveNext():this.movePrev(),t._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:t.value}}}get key(){return this.stack.length>0?_(this.stack[this.stack.length-1].key):S()}get value(){return this.stack.length>0?_(this.stack[this.stack.length-1].value):S()}get entry(){return Me(du(this.stack),t=>[t.key,t.value])}get index(){let t=0,r=this.stack;if(r.length===0){let o=this.self._root;return o!=null?o.count:0}else r[r.length-1].left!=null&&(t=r[r.length-1].left.count);for(let o=r.length-2;o>=0;--o)r[o+1]===r[o].right&&(++t,r[o].left!=null&&(t+=r[o].left.count));return t}moveNext(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r.right!=null)for(r=r.right;r!=null;)t.push(r),r=r.left;else for(t.pop();t.length>0&&t[t.length-1].right===r;)r=t[t.length-1],t.pop()}get hasNext(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].right!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].left===t[r])return!0;return!1}movePrev(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)t.push(r),r=r.right;else for(t.pop();t.length>0&&t[t.length-1].left===r;)r=t[t.length-1],t.pop()}get hasPrev(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].left!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].right===t[r])return!0;return!1}};u();var P={Red:0,Black:1},Cr=({color:e,count:t,key:r,left:o,right:n,value:s})=>({color:e,key:r,value:s,left:o,right:n,count:t});function Ix(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}var ko=({count:e,key:t,left:r,right:o,value:n},s)=>({color:s,key:t,value:n,left:r,right:o,count:e}),Oe=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var Kk="effect/RedBlackTree",Nx=Symbol.for(Kk),W2={_Key:e=>e,_Value:e=>e},U2={[Nx]:W2,[F](){let e=w(Kk);for(let t of this)e^=m(w(t[0]),L(w(t[1])));return V(this,e)},[R](e){if(Jk(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;let t=Array.from(e);return Array.from(this).every((r,o)=>{let n=t[o];return v(r[0],n[0])&&v(r[1],n[1])})}return!1},[Symbol.iterator](){let e=[],t=this._root;for(;t!=null;)e.push(t),t=t.left;return new Fp(this,e,yn.Forward)},toString(){return te(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},_a=(e,t)=>{let r=Object.create(U2);return r._ord=e,r._root=t,r},Jk=e=>k(e,Nx);var Yk=l(2,(e,t)=>{let r=e._ord,o=e._root;for(;o!==void 0;){let n=r(t,o.key);if(v(t,o.key))return _(o.value);n<=0?o=o.left:o=o.right}return S()});var Px=l(2,(e,t)=>W(Yk(e,t))),Qk=l(3,(e,t,r)=>{let o=e._ord,n=e._root,s=[],i=[];for(;n!=null;){let c=o(t,n.key);s.push(n),i.push(c),c<=0?n=n.left:n=n.right}s.push({color:P.Red,key:t,value:r,left:void 0,right:void 0,count:1});for(let c=s.length-2;c>=0;--c){let a=s[c];i[c]<=0?s[c]={color:a.color,key:a.key,value:a.value,left:s[c+1],right:a.right,count:a.count+1}:s[c]={color:a.color,key:a.key,value:a.value,left:a.left,right:s[c+1],count:a.count+1}}for(let c=s.length-1;c>1;--c){let a=s[c-1],p=s[c];if(a.color===P.Black||p.color===P.Black)break;let f=s[c-2];if(f.left===a)if(a.left===p){let h=f.right;if(h&&h.color===P.Red)a.color=P.Black,f.right=ko(h,P.Black),f.color=P.Red,c-=1;else{if(f.color=P.Red,f.left=a.right,a.color=P.Black,a.right=f,s[c-2]=a,s[c-1]=p,Oe(f),Oe(a),c>=3){let d=s[c-3];d.left===f?d.left=a:d.right=a}break}}else{let h=f.right;if(h&&h.color===P.Red)a.color=P.Black,f.right=ko(h,P.Black),f.color=P.Red,c-=1;else{if(a.right=p.left,f.color=P.Red,f.left=p.right,p.color=P.Black,p.left=a,p.right=f,s[c-2]=p,s[c-1]=a,Oe(f),Oe(a),Oe(p),c>=3){let d=s[c-3];d.left===f?d.left=p:d.right=p}break}}else if(a.right===p){let h=f.left;if(h&&h.color===P.Red)a.color=P.Black,f.left=ko(h,P.Black),f.color=P.Red,c-=1;else{if(f.color=P.Red,f.right=a.left,a.color=P.Black,a.left=f,s[c-2]=a,s[c-1]=p,Oe(f),Oe(a),c>=3){let d=s[c-3];d.right===f?d.right=a:d.left=a}break}}else{let h=f.left;if(h&&h.color===P.Red)a.color=P.Black,f.left=ko(h,P.Black),f.color=P.Red,c-=1;else{if(a.left=p.right,f.color=P.Red,f.right=p.left,p.color=P.Black,p.right=a,p.left=f,s[c-2]=p,s[c-1]=a,Oe(f),Oe(a),Oe(p),c>=3){let d=s[c-3];d.right===f?d.right=p:d.left=p}break}}}return s[0].color=P.Black,_a(e._ord,s[0])}),Zk=e=>Xk(e,yn.Forward);var Xk=(e,t)=>{let r=e[Symbol.iterator](),o=0;return{[Symbol.iterator]:()=>Xk(e,t),next:()=>{o++;let n=r.key;switch(t===yn.Forward?r.moveNext():r.movePrev(),n._tag){case"None":return{done:!0,value:o};case"Some":return{done:!1,value:n.value}}}}};var ew=l(2,(e,t)=>{if(!Px(e,t))return e;let r=e._ord,o=r,n=e._root,s=[];for(;n!==void 0;){let a=o(t,n.key);s.push(n),v(t,n.key)?n=void 0:a<=0?n=n.left:n=n.right}if(s.length===0)return e;let i=new Array(s.length),c=s[s.length-1];i[i.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let a=s.length-2;a>=0;--a)c=s[a],c.left===s[a+1]?i[a]={color:c.color,key:c.key,value:c.value,left:i[a+1],right:c.right,count:c.count}:i[a]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[a+1],count:c.count};if(c=i[i.length-1],c.left!==void 0&&c.right!==void 0){let a=i.length;for(c=c.left;c.right!=null;)i.push(c),c=c.right;let p=i[a-1];i.push({color:c.color,key:p.key,value:p.value,left:c.left,right:c.right,count:c.count}),i[a-1].key=c.key,i[a-1].value=c.value;for(let f=i.length-2;f>=a;--f)c=i[f],i[f]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[f+1],count:c.count};i[a-1].left=i[a]}if(c=i[i.length-1],c.color===P.Red){let a=i[i.length-2];a.left===c?a.left=void 0:a.right===c&&(a.right=void 0),i.pop();for(let p=0;p<i.length;++p)i[p].count--;return _a(r,i[0])}else if(c.left!==void 0||c.right!==void 0){c.left!==void 0?Ix(c,c.left):c.right!==void 0&&Ix(c,c.right),c.color=P.Black;for(let a=0;a<i.length-1;++a)i[a].count--;return _a(r,i[0])}else{if(i.length===1)return _a(r,void 0);{for(let p=0;p<i.length;++p)i[p].count--;let a=i[i.length-2];B2(i),a.left===c?a.left=void 0:a.right=void 0}}return _a(r,i[0])});var B2=e=>{let t,r,o,n;for(let s=e.length-1;s>=0;--s){if(t=e[s],s===0){t.color=P.Black;return}if(r=e[s-1],r.left===t){if(o=r.right,o!==void 0&&o.right!==void 0&&o.right.color===P.Red){if(o=r.right=Cr(o),n=o.right=Cr(o.right),r.right=o.left,o.left=r,o.right=n,o.color=r.color,t.color=P.Black,r.color=P.Black,n.color=P.Black,Oe(r),Oe(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o;return}else if(o!==void 0&&o.left!==void 0&&o.left.color===P.Red){if(o=r.right=Cr(o),n=o.left=Cr(o.left),r.right=n.left,o.left=n.right,n.left=r,n.right=o,n.color=r.color,r.color=P.Black,o.color=P.Black,t.color=P.Black,Oe(r),Oe(o),Oe(n),s>1){let i=e[s-2];i.left===r?i.left=n:i.right=n}e[s-1]=n;return}if(o!==void 0&&o.color===P.Black)if(r.color===P.Red){r.color=P.Black,r.right=ko(o,P.Red);return}else{r.right=ko(o,P.Red);continue}else if(o!==void 0){if(o=Cr(o),r.right=o.left,o.left=r,o.color=r.color,r.color=P.Red,Oe(r),Oe(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}else{if(o=r.left,o!==void 0&&o.left!==void 0&&o.left.color===P.Red){if(o=r.left=Cr(o),n=o.left=Cr(o.left),r.left=o.right,o.right=r,o.left=n,o.color=r.color,t.color=P.Black,r.color=P.Black,n.color=P.Black,Oe(r),Oe(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o;return}else if(o!==void 0&&o.right!==void 0&&o.right.color===P.Red){if(o=r.left=Cr(o),n=o.right=Cr(o.right),r.left=n.right,o.right=n.left,n.right=r,n.left=o,n.color=r.color,r.color=P.Black,o.color=P.Black,t.color=P.Black,Oe(r),Oe(o),Oe(n),s>1){let i=e[s-2];i.right===r?i.right=n:i.left=n}e[s-1]=n;return}if(o!==void 0&&o.color===P.Black)if(r.color===P.Red){r.color=P.Black,r.left=ko(o,P.Red);return}else{r.left=ko(o,P.Red);continue}else if(o!==void 0){if(o=Cr(o),r.left=o.right,o.right=r,o.color=r.color,r.color=P.Red,Oe(r),Oe(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}}};var tw=Px,rw=Qk,ow=Zk;var nw=ew;var Lx=Symbol.for("effect/SortedSet"),z2={[Lx]:{_A:e=>e},[F](){return m(w(this.keyTree),L(w(Lx)),V(this))},[R](e){return G2(e)&&v(this.keyTree,e.keyTree)},[Symbol.iterator](){return ow(this.keyTree)},toString(){return te(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(J)}},[j](){return this.toJSON()},pipe(){return O(this,arguments)}},iw=e=>{let t=Object.create(z2);return t.keyTree=e,t},G2=e=>k(e,Lx);var cw=l(2,(e,t)=>tw(e.keyTree,t)?e:iw(rw(e.keyTree,t,!0)));var aw=l(2,(e,t)=>iw(nw(e.keyTree,t)));var $2="effect/Supervisor",Vi=Symbol.for($2),Ea={_T:e=>e},Gi=class e{underlying;value0;[Vi]=Ea;constructor(t,r){this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,m(this.value,C(t)))}zip(t){return new $i(this,t)}},$i=class e{left;right;_tag="Zip";[Vi]=Ea;constructor(t,r){this.left=t,this.right=r}get value(){return cs(this.left.value,this.right.value)}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Gi(this,m(this.value,C(t)))}zip(t){return new e(this,t)}},Hx=e=>k(e,Vi)&&Rn(e,"Zip"),Dx=class{[Vi]=Ea;fibers=new Set;get value(){return E(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Gi(this,m(this.value,C(t)))}zip(t){return new $i(this,t)}onRun(t,r){return t()}},qx=class{effect;[Vi]=Ea;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Gi(this,m(this.value,C(t)))}zip(t){return new $i(this,t)}onRun(t,r){return t()}},lw=class{ref;[Vi]=Ea;constructor(t){this.ref=t}get value(){return E(()=>Lt(this.ref))}onStart(t,r,o,n){m(this.ref,nr(m(Lt(this.ref),cw(n))))}onEnd(t,r){m(this.ref,nr(m(Lt(this.ref),aw(r))))}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Gi(this,m(this.value,C(t)))}zip(t){return new $i(this,t)}onRun(t,r){return t()}},V2=()=>new Dx,pw=E(V2),K2=e=>new qx(e),Ns=q("effect/Supervisor/none",()=>K2(H));u();u();var fw=Vo;var hw="Empty",dw="AddSupervisor",xw="RemoveSupervisor",gw="AndThen",Ki={_tag:hw},Ap=(e,t)=>({_tag:gw,first:e,second:t}),J2=(e,t)=>Y2(t,Re(e)),Y2=(e,t)=>{let r=e,o=t;for(;tt(o);){let n=Ze(o);switch(n._tag){case hw:{o=ot(o);break}case dw:{r=r.zip(n.supervisor),o=ot(o);break}case xw:{r=Wx(r,n.supervisor),o=ot(o);break}case gw:{o=Qe(n.first)(Qe(n.second)(ot(o)));break}}}return r},Wx=(e,t)=>v(e,t)?Ns:Hx(e)?Wx(e.left,t).zip(Wx(e.right,t)):e,Ip=e=>v(e,Ns)?Lr():Hx(e)?m(Ip(e.left),uo(Ip(e.right))):Hn(e),Q2=(e,t)=>{if(v(e,t))return Ki;let r=Ip(e),o=Ip(t),n=m(o,Fm(r),Bn(Ki,(i,c)=>Ap(i,{_tag:dw,supervisor:c}))),s=m(r,Fm(o),Bn(Ki,(i,c)=>Ap(i,{_tag:xw,supervisor:c})));return Ap(n,s)},yw=fw({empty:Ki,patch:J2,combine:Ap,diff:Q2});var X2=Sa("effect_fiber_started",{incremental:!0}),bw=Sa("effect_fiber_active"),eD=Sa("effect_fiber_successes",{incremental:!0}),tD=Sa("effect_fiber_failures",{incremental:!0}),rD=$k(Gk("effect_fiber_lifetimes",ik({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Oa="Continue",oD="Done",Sw="Yield",nD={_E:e=>e,_A:e=>e},Ca=e=>{throw new Error(`BUG: FiberRuntime - ${qo(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},bn=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),wo=q("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Np={[Qs]:(e,t,r)=>Ne(()=>t.effect_instruction_i1(r)),OnStep:(e,t,r)=>xe(xe(r)),[Zs]:(e,t,r)=>Ne(()=>t.effect_instruction_i2(r)),[hc]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),fo(e._runtimeFlags)&&e.isInterrupted()?ie(e.getInterruptedCause()):xe(r)),[Xs]:(e,t,r)=>(Ne(()=>t.effect_instruction_i2(r)),Ne(()=>t.effect_instruction_i0())?(e.pushStack(t),Ne(()=>t.effect_instruction_i1())):H)},sD={[Op]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),fo(t)?ie(o.cause):r),[vp]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Cp]:(e,t,r,o)=>(o.onFiber(e,Gd(t)),r),[kp]:(e,t,r,o)=>x(Vr(),()=>r)},iD=e=>qt(IS(e),t=>Ps(PS(t),([r,o])=>{let n=new Map,s=[];for(let c of o){s.push(rr(c));for(let a of c)n.set(a.request,a)}let i=s.flat();return We(ED(r.runAll(s),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),Ep,n)},!1,!1)),va=class{[fa]=ma;[Zv]=nD;pipe(){return O(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(t,r,o){if(this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Hp),this._scheduler=this.getFiberRef(hn),eh(o)){let n=this.getFiberRef(bo);X2.unsafeUpdate(1,n),bw.unsafeUpdate(1,n)}this._tracer=Be(this.getFiberRef(ye),Br)}id(){return this._fiberId}resume(t){this.tell(As(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>kv(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return Yv(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(fs)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return I(()=>{let r=Yc(this._fiberId);return this.tell(ji((o,n)=>{Xc(r,E(()=>t(o,n)))})),it(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return qe(t=>{let r=o=>t(y(o));return this.tell(ji((o,n)=>{o._exitValue!==null?r(this._exitValue):o.addObserver(r)})),E(()=>this.tell(ji((o,n)=>{o.removeObserver(r)})))},this.id())}get inheritAll(){return re((t,r)=>{let o=t.id(),n=t.getFiberRefs(),s=r.runtimeFlags,i=this.getFiberRefs(),c=zl(n,o,i);t.setFiberRefs(c);let a=t.getFiberRef(Ow),p=m(sr(s,a),nh(Wr),nh(Xu));return sn(p)})}get poll(){return E(()=>dr(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return E(()=>this.tell(wp($t(t))))}unsafeInterruptAsFork(t){this.tell(wp($t(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef(Ow,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=ta(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=Di(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this._tracer=Be(this.getFiberRef(ye),Br),this._supervisor=this.getFiberRef(Hp),this._scheduler=this.getFiberRef(hn)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Oa,o=globalThis[gn];globalThis[gn]=this;try{for(;r===Oa;)r=this._queue.length===0?oD:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[gn]=o}this._queue.length>0&&!this._running?(this._running=!0,r===Sw?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(cn))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=sD[n._tag](this,t,o,n)}return o}isInterrupted(){return!sl(this.getFiberRef(fs))}addInterruptedCause(t){let r=this.getFiberRef(fs);this.setFiberRef(fs,je(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(wp($t(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Mi({while:()=>!r,body:()=>{let n=t.next();return n.done?E(()=>{r=!0}):Ee(n.value.await)},step:()=>{}})}return null}reportExitValue(t){if(eh(this._runtimeFlags)){let r=this.getFiberRef(bo),o=this.id().startTimeMillis,n=Date.now();switch(rD.unsafeUpdate(n-o,r),bw.unsafeUpdate(-1,r),t._tag){case Le:{eD.unsafeUpdate(1,r);break}case Pe:{tD.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(wh);!es(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(pD)}log(t,r,o){let n=W(o)?o.value:this.getFiberRef(Ch),s=this.getFiberRef(cD);if(XE(s,n))return;let i=this.getFiberRef(kl),c=this.getFiberRef(an),a=this.getLoggers(),p=this.getFiberRefs();if(Wn(a)>0){let f=Be(this.getFiberRef(ye),Yt),h=new Date(f.unsafeCurrentTimeMillis());for(let d of a)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:c,date:h})}}evaluateMessageWhileSuspended(t){switch(t._tag){case kp:return Sw;case Op:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ie(t.cause)),this._asyncInterruptor=null),Oa;case vp:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Oa;case Cp:return t.onFiber(this,this._exitValue!==null?Cv:vv(this._runtimeFlags,this._asyncBlockingOn)),Oa;default:return Ca(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=fo(this._runtimeFlags)&&this.isInterrupted()?ie(this.getInterruptedCause()):t;for(;r!==null;){let o=r,n=this.runLoop(o);if(n===bn){let s=wo.currentOp;wo.currentOp=null,s._op===ei?RS(this._runtimeFlags)?(this.tell(Kv()),this.tell(As(Jt)),r=null):r=Jt:s._op===An&&(r=null)}else{this._runtimeFlags=m(this._runtimeFlags,Zm(Xu));let s=this.interruptAllChildren();s!==null?r=x(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(As(n)),r=null)}}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(As(t));else{this._running=!0;let r=globalThis[gn];globalThis[gn]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[gn]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(As(t))}patchRuntimeFlags(t,r){let o=mo(t,r);return globalThis[gn]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(As(s)))};fo(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(Y(ft(s)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==Ys)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==Qs&&t._op!==Xs)return t;t=this.popStack()}}[Oy](t){return C(Wt(mt),r=>ci(r,t))}Left(t){return G(t.left)}None(t){return G(new Kt)}Right(t){return xe(t.right)}Some(t){return xe(t.value)}Micro(t){return u_(r=>{let o=Lv().pipe(Dv(Hv,this.getFiberRef(mt))),n=r;return t[Qt](o,s=>{if(s._tag==="Right")return n(xe(s.right));switch(s.left._tag){case"Interrupt":return n(ie($t(Gt)));case"Fail":return n(G(s.left.error));case"Die":return n(go(s.left.defect))}}),qe(s=>{n=i=>{s(H)},Fs(o,bp).abort()})})}[su](t){let r=Ne(()=>t.effect_instruction_i0()),o=this.getNextSuccessCont();return o!==void 0?(o._op in Np||Ca(o),Np[o._op](this,o,r)):(wo.currentOp=xe(r),bn)}[Le](t){let r=t,o=this.getNextSuccessCont();return o!==void 0?(o._op in Np||Ca(o),Np[o._op](this,o,r.effect_instruction_i0)):(wo.currentOp=r,bn)}[Pe](t){let r=t.effect_instruction_i0,o=this.getNextFailCont();if(o!==void 0)switch(o._op){case Ys:case Zs:return fo(this._runtimeFlags)&&this.isInterrupted()?ie(al(r)):Ne(()=>o.effect_instruction_i1(r));case"OnStep":return fo(this._runtimeFlags)&&this.isInterrupted()?ie(al(r)):xe(ie(r));case hc:return this.patchRuntimeFlags(this._runtimeFlags,o.patch),fo(this._runtimeFlags)&&this.isInterrupted()?ie(je(r,this.getInterruptedCause())):ie(r);default:Ca(o)}else return wo.currentOp=ie(r),bn}[iu](t){return Ne(()=>t.effect_instruction_i0(this,Gd(this._runtimeFlags)))}Blocked(t){let r=this.getFiberRefs(),o=this._runtimeFlags;if(this._steps.length>0){let n=[],s=this._steps[this._steps.length-1],i=this.popStack();for(;i&&i._op!=="OnStep";)n.push(i),i=this.popStack();this.setFiberRefs(s.refs),this._runtimeFlags=s.flags;let c=ws(s.refs,r),a=sr(s.flags,o);return xe(xo(t.effect_instruction_i0,re(p=>{for(;n.length>0;)p.pushStack(n.pop());return p.setFiberRefs(Ms(p.id(),p.getFiberRefs())(c)),p._runtimeFlags=mo(a)(p._runtimeFlags),t.effect_instruction_i1})))}return Fe(n=>x(Ls(xl(t.effect_instruction_i0)),()=>n(t.effect_instruction_i1)))}RunBlocked(t){return iD(t.effect_instruction_i0)}[ro](t){let r=t.effect_instruction_i0,o=this._runtimeFlags,n=mo(o,r);if(fo(n)&&this.isInterrupted())return ie(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.effect_instruction_i1){let s=sr(n,o);return this.pushStack(new fl(s,t)),Ne(()=>t.effect_instruction_i1(o))}else return Jt}[Qs](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[Ys](t){return this.pushStack(t),t.effect_instruction_i0}[Zs](t){return this.pushStack(t),t.effect_instruction_i0}[An](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,t.effect_instruction_i0),wo.currentOp=t,bn}[ei](t){return this.isYielding=!1,wo.currentOp=t,bn}[Xs](t){let r=t.effect_instruction_i0,o=t.effect_instruction_i1;return r()?(this.pushStack(t),o()):Jt}[Js](t){return Ne(()=>t.commit())}runLoop(t){let r=t;for(this.currentOpCount=0;;){if(this._runtimeFlags&MS&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),!this.isYielding){this.currentOpCount+=1;let o=this._scheduler.shouldYield(this);if(o!==!1){this.isYielding=!0,this.currentOpCount=0;let n=r;r=x(Vr({priority:o}),()=>n)}}try{if((!("_op"in r)||!(r._op in this))&&Ca(r),r=this._tracer.context(()=>wn()!==r[qd]._V?Xo(`Cannot execute an Effect versioned ${r[qd]._V} with a Runtime of version ${wn()}`):this[r._op](r),this),r===bn){let o=wo.currentOp;return o._op===ei||o._op===An?bn:(wo.currentOp=null,o._op===Le||o._op===Pe?o:ie(ft(o)))}}catch(o){c_(o)?r=ie(o.cause):A_(o)?r=ie(je(ft(o),$t(Gt))):r=go(o)}}}run=()=>{this.drainQueueOnCurrentThread()}},cD=q("effect/FiberRef/currentMinimumLogLevel",()=>Te(eO("Info"))),aD=e=>Rp(t=>{let r=KE(t.context,ye);Be(r,Eo).unsafe.log(e.log(t))});var uD=q(Symbol.for("effect/Logger/defaultLogger"),()=>aD(nk));var lD=q(Symbol.for("effect/Logger/tracerLogger"),()=>Rp(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=er(Li(r,mt),xr(br)),c=Me(Li(r,ye),p=>Be(p,Yt));if(i._tag==="None"||i.value._tag==="ExternalSpan"||c._tag==="None")return;let a=Object.fromEntries(ju(e,qo));a["effect.fiberId"]=Xb(o),a["effect.logLevel"]=n.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=Yo(t)),i.value.event(String(s),c.value.unsafeCurrentTimeNanos(),a)}));var pD=q(Symbol.for("effect/FiberRef/currentLoggers"),()=>w_(Hn(uD,lD)));var vw=function(){if(typeof arguments[0]=="string")return fr(an,gr(arguments[0],arguments[1]));let e=Object.entries(arguments[0]);return fr(an,oS(t=>{for(let r=0;r<e.length;r++){let[o,n]=e[r];gr(t,o,n)}return t}))},wa=l(e=>ue(e[0]),(e,t)=>yo(Vt(e,r=>Ji(o=>t(r,o))))),kw=l(e=>ue(e[0]),(e,t)=>vr(e,Ji(r=>t(r)))),Ji=e=>re(t=>{let r=t.getFiberRefs(),o=t._runtimeFlags;return x(Kx,n=>ms(n,s=>re(i=>{let c=i.getFiberRefs(),a=i._runtimeFlags,p=ws(c,r),f=sr(a,o),h=ws(r,c);return i.setFiberRefs(Ms(p,i.id(),r)),vr(Ol(e(s),f),E(()=>{i.setFiberRefs(Ms(h,i.id(),i.getFiberRefs()))}))})))}),ww=e=>We(Hc,_(dn))(e),_w=Symbol.for("effect/Effect/existsPar/found"),Mw=l(e=>hr(e[0])&&!ue(e[0]),(e,t,r)=>pa(r?.concurrency,()=>I(()=>Rw(e[Symbol.iterator](),0,t)),()=>Xe(pr(e,(o,n)=>yl(t(o,n),{onTrue:()=>G(_w),onFalse:()=>H}),r),{onFailure:o=>o===_w?y(!0):G(o),onSuccess:()=>y(!1)}))),Rw=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(x(r(o.value,t),n=>n?y(n):Rw(e,t+1,r)))},Fw=l(e=>hr(e[0])&&!ue(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>C(t(n,s),ob):t;return pa(r?.concurrency,()=>I(()=>ee(e).reduceRight((n,s,i)=>Kr(n,I(()=>o(s,i)),(c,a)=>a?[s,...c]:c),E(()=>new Array))),()=>C(pr(e,(n,s)=>C(o(n,s),i=>i?_(n):S()),r),tb))}),fD=e=>{if(Array.isArray(e)||hr(e))return[e,S()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),_(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},mD=(e,t,r)=>{let o=[];for(let n of e)o.push(zr(n));return x(pr(o,B,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=S(),i=n.length,c=new Array(i),a=new Array(i),p=!1;for(let f=0;f<i;f++){let h=n[f];h._tag==="Left"?(c[f]=_(h.left),p=!0):(a[f]=h.right,c[f]=s)}return p?t._tag==="Some"?G(t.value(c)):G(c):r?.discard?H:t._tag==="Some"?y(t.value(a)):y(a)})},hD=(e,t,r)=>{let o=[];for(let n of e)o.push(zr(n));return r?.discard?pr(o,B,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):C(pr(o,B,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},Yi=(e,t)=>{let[r,o]=fD(e);return t?.mode==="validate"?mD(r,o,t):t?.mode==="either"?hD(r,o,t):t?.discard!==!0&&o._tag==="Some"?C(pr(r,B,t),o.value):pr(r,B,t)},Tw=e=>t=>Yi(t,e),Aw=(e,t)=>C(Yi(ee(e).map(ke),t),si(r=>Il(r)?_(r.effect_instruction_i0):S())),Bx=l(2,(e,t)=>Array.from({length:t},()=>e)),Iw=l(e=>ue(e[0]),(e,t,r)=>Yi(Bx(e,t),r)),pr=l(e=>hr(e[0]),(e,t,r)=>re(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(kh);return r?.discard?tx(r.concurrency,()=>Sn(up)(s=>n?Ps(e,(i,c)=>s(t(i,c)),!0,!1,1):qt(e,(i,c)=>s(t(i,c)))),()=>Sn(lp)(s=>Ps(e,(i,c)=>s(t(i,c)),n,!1)),s=>Sn(pp(s))(i=>Ps(e,(c,a)=>i(t(c,a)),n,!1,s))):tx(r?.concurrency,()=>Sn(up)(s=>n?Ux(e,1,(i,c)=>s(t(i,c)),!0):st(e,(i,c)=>s(t(i,c)))),()=>Sn(lp)(s=>Pp(e,(i,c)=>s(t(i,c)),n)),s=>Sn(pp(s))(i=>Ux(e,s,(c,a)=>i(t(c,a)),n)))})),Pp=(e,t,r)=>I(()=>{let o=ee(e),n=new Array(o.length);return ne(Ps(o,(i,c)=>x(t(i,c),a=>E(()=>n[c]=a)),r,!1),y(n))}),Ps=(e,t,r,o,n)=>Fe(s=>El(i=>re(c=>{let a=Array.from(e).reverse(),p=a.length;if(p===0)return H;let f=0,h=!1,d=n?Math.min(a.length,n):a.length,g=new Set,b=new Array,M=()=>g.forEach(et=>{et._scheduler.scheduleTask(()=>{et.unsafeInterruptAsFork(c.id())},0)}),T=new Array,N=new Array,K=new Array,ae=()=>{let et=b.filter(({exit:D})=>D._tag==="Failure").sort((D,Q)=>D.index<Q.index?-1:D.index===Q.index?0:1).map(({exit:D})=>D);return et.length===0&&et.push(Jt),et},_e=(et,D=!1)=>{let Q=yo(i(et)),U=dD(Q,c,c._runtimeFlags,dn);return c._scheduler.scheduleTask(()=>{D&&U.unsafeInterruptAsFork(c.id()),U.resume(Q)},0),U},lt=()=>{o||(p-=a.length,a=[]),h=!0,M()},Xt=r?gl:ke,No=_e(qe(et=>{let D=(U,fe)=>{U._op==="Blocked"?K.push(U):(b.push({index:fe,exit:U}),U._op==="Failure"&&!h&&lt())},Q=()=>{if(a.length>0){let U=a.pop(),fe=f++,Ie=()=>{let X=a.pop();return fe=f++,x(Vr(),()=>x(Xt(s(t(X,fe))),be))},be=X=>a.length>0&&(D(X,fe),a.length>0)?Ie():y(X),me=x(Xt(s(t(U,fe))),be),se=_e(me);T.push(se),g.add(se),h&&se._scheduler.scheduleTask(()=>{se.unsafeInterruptAsFork(c.id())},0),se.addObserver(X=>{let we;if(X._op==="Failure"?we=X:we=X.effect_instruction_i0,N.push(se),g.delete(se),D(we,fe),b.length===p)et(y(De(ln(ae(),{parallel:!0}),()=>Jt)));else if(K.length+b.length===p){let he=K.map(Bs=>Bs.effect_instruction_i0).reduce(ah);et(y(xo(he,Ps([De(ln(ae(),{parallel:!0}),()=>Jt),...K.map(Bs=>Bs.effect_instruction_i1)],Bs=>Bs,r,!0,n))))}else Q()})}};for(let U=0;U<d;U++)Q()}));return Ee(yt(wt(s(xn(No))),Ti({onFailure:()=>{lt();let et=K.length+1,D=Math.min(typeof n=="number"?n:K.length,K.length),Q=Array.from(K);return qe(U=>{let fe=[],Ie=0,be=0,me=(X,we)=>he=>{fe[X]=he,Ie++,Ie===et&&U(xc(ln(fe,{parallel:!0}))),Q.length>0&&we&&se()},se=()=>{_e(Q.pop(),!0).addObserver(me(be,!0)),be++};No.addObserver(me(be,!1)),be++;for(let X=0;X<D;X++)se()})},onSuccess:()=>st(N,et=>et.inheritAll)})))}))),Ux=(e,t,r,o)=>I(()=>{let n=ee(e),s=new Array(n.length);return ne(Ps(n,(c,a)=>C(r(c,a),p=>s[a]=p),o,!1,t),y(s))}),lr=e=>re((t,r)=>y(Pw(e,t,r.runtimeFlags))),Ls=e=>xD(e,dn),Nw=l(2,(e,t)=>lr(_l(e,r=>{let o=Ur(r);switch(o._tag){case"Left":return t(o.left);case"Right":return Y(o.right)}}))),Pw=(e,t,r,o=null)=>{let n=Lp(e,t,r,o);return n.resume(e),n},dD=(e,t,r,o=null)=>Lp(e,t,r,o),Lp=(e,t,r,o=null)=>{let n=Bu(),s=t.getFiberRefs(),i=rd(s,n),c=new va(n,i,r),a=Es(i,mt),p=c._supervisor;return p.onStart(a,e,_(t),c),c.addObserver(h=>p.onEnd(h,c)),(o!==null?o:m(t.getFiberRef(Hc),De(()=>t.scope()))).add(r,c),c},xD=(e,t)=>re((r,o)=>y(Pw(e,r,o.runtimeFlags,t))),jx=l(e=>Do(e[2]),(e,t,r,o)=>pa(o?.concurrency,()=>ee(e).reduce((n,s,i)=>Kr(n,s,(c,a)=>r(c,a,i)),y(t)),()=>x(oa(t),n=>x(pr(e,(s,i)=>x(s,c=>aO(n,a=>r(a,c,i))),o),()=>Yl(n))))),zx=l(e=>hr(e[0]),(e,t,r)=>m(pr(e,(o,n)=>zr(t(o,n)),r),C(o=>h_(o,B)))),Lw=l(e=>hr(e[0]),(e,t,r)=>x(zx(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?H:y(n):G(o))),Dw=e=>{let t=Nr(e);if(!tt(t))return en(()=>new Gc("Received an empty collection of effects"));let r=Ze(t),o=ot(t),n=s=>m(Xv(s[1]),le(s[0]));return m(Mt(),x(s=>m(oa(o.length),x(i=>Fe(c=>m(lr(Gr(r)),x(a=>m(o,st(p=>lr(Gr(p))),C(p=>ai(p)),C(p=>m(p,Qe(a))),Vt(p=>m(p,tr(H,(f,h)=>m(f,ne(m(nx(h),x(gD(p,h,s,i)),lr,Ee)))))),x(p=>m(c(m(bs(s),x(n))),_r(()=>m(p,tr(H,(f,h)=>m(f,as(ls(h))))))))))))))))},gD=(e,t,r,o)=>n=>xs(n,{onFailure:s=>m(cO(o,i=>[i===0?m(gs(r,s),Ee):H,i-1]),wt),onSuccess:s=>m(Zc(r,[s,t]),x(i=>i?m(Nr(e),tr(H,(c,a)=>a===t?c:m(c,as(ls(a))))):H))}),qw=l(e=>hr(e[0])&&!ue(e[0]),(e,t,r,o)=>pa(o?.concurrency,()=>ee(e).reduce((n,s,i)=>Kr(n,s,(c,a)=>r(c,a,i)),t),()=>I(()=>m(jx([t,...e],S(),(n,s,i)=>{switch(n._tag){case"None":return _(s);case"Some":return _(r(n.value,s,i))}},o),C(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return n.value}}))))),Dp=e=>cr(t=>Ke(xr(t,_n),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return x(hs(r,lp),o=>En(e,o))}}})),Ew=e=>t=>cr(r=>Ke(xr(r,_n),{onNone:()=>t,onSome:o=>o.strategy._tag==="ParallelN"&&o.strategy.parallelism===e?t:x(hs(o,pp(e)),n=>En(t,n))})),Sn=e=>t=>cr(r=>Ke(xr(r,_n),{onNone:()=>t(B),onSome:o=>{let n=e._tag==="Parallel"?Dp:e._tag==="Sequential"?qp:Ew(e.parallelism);switch(o.strategy._tag){case"Parallel":return n(t(Dp));case"Sequential":return n(t(qp));case"ParallelN":return n(t(Ew(o.strategy.parallelism)))}}})),Ds=e=>x(_n,e),Gx=e=>x(Ma(),t=>SD(e,t)),qp=e=>cr(t=>Ke(xr(t,_n),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return x(hs(r,up),o=>En(e,o))}}})),Hw=(e,t)=>$x([Cs(e,t)]),$x=e=>fr(bo,t=>Fr(t,e)),Ww=l(2,(e,t)=>Zo(Ma(),r=>x(En(e,r),t),(r,o)=>So(r,o))),Uw=l(e=>ue(e[1]),(e,t,r)=>Vx(e,t,(o,n)=>[o,n],r)),Vx=l(e=>ue(e[1]),(e,t,r,o)=>wt(Mo(ke(e),ke(t),(n,s)=>Jc(n,s,{onSuccess:r,onFailure:(i,c)=>o?.concurrent?vt(i,c):je(i,c)}),o)));var Bw=l(e=>hr(e[0]),(e,t,r)=>on(pr(e,(o,n)=>on(t(o,n)),r))),jw=e=>fr(ye,ve(Yt,e)),zw=e=>fr(ye,ve(Ni,e)),Gw=e=>fr(ye,ve(Ii,e)),$w=e=>Ds(t=>x(hs(t,Zr),r=>m(e,En(r),C(o=>[Dt(n=>So(r,Nl(n))),o])))),Vw=l(e=>ue(e[1]),(e,t,r)=>Mo(e,t,(o,n)=>[o,n],r)),Kw=l(e=>ue(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?as(e,t):Mo(e,t,(o,n)=>o,r)),Jw=l(e=>ue(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?ne(e,t):Mo(e,t,(o,n)=>n,r)),Mo=l(e=>ue(e[1]),(e,t,r,o)=>C(Yi([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),Yw=e=>e===TS?H:m(ki,x(t=>{let r=mo(t,e),o=sr(r,t);return m(sn(e),ne(Ji(()=>sn(o))),Ee)}),yo),_n=Et("effect/Scope"),Kx=_n,yD=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.add(t)},bD={[Rl]:Rl,[Fl]:Fl,pipe(){return O(this,arguments)},fork(e){return E(()=>{let t=Qw(e);if(this.state._tag==="Closed")return t.state=this.state,t;let r=o=>t.close(o);return this.state.finalizers.add(r),yD(t,o=>E(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return I(()=>{if(this.state._tag==="Closed")return H;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?H:Hd(this.strategy)?m(st(t,r=>ke(r(e))),x(r=>m(ln(r),Me(Vc),De(()=>Jt)))):Wd(this.strategy)?m(Pp(t,r=>ke(r(e)),!1),x(r=>m(ln(r,{parallel:!0}),Me(Vc),De(()=>Jt)))):m(Ux(t,this.strategy.parallelism,r=>ke(r(e)),!1),x(r=>m(ln(r,{parallel:!0}),Me(Vc),De(()=>Jt))))})},addFinalizer(e){return I(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.add(e),H))}},Qw=(e=Zr)=>{let t=Object.create(bD);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Ma=(e=Zr)=>E(()=>Qw(e)),En=l(2,(e,t)=>ys(e,Pn(cm(_n,t)))),SD=l(2,(e,t)=>m(e,En(t),yt(r=>t.close(r)))),_D=e=>ps(e,{differ:yw,fork:Ki}),Wp=l(2,(e,t)=>Ee(wa(x(Wt(e),r=>le(os(e,t),r)),r=>os(e,r)))),fr=l(2,(e,t)=>He(e,r=>Wp(e,t(r))));var Ow=M_(FS),Hp=_D(Ns),Zw=e=>Ee(nx(Up(e))),Up=e=>({[fa]:ma,id:()=>ee(e).reduce((t,r)=>Lm(t,r.id()),Gt),await:ke(Pp(e,t=>wt(t.await),!1)),children:C(Pp(e,t=>t.children,!1),xu),inheritAll:qt(e,t=>t.inheritAll),poll:C(st(e,t=>t.poll),gu(_(xe(new Array)),(t,r)=>{switch(r._tag){case"None":return S();case"Some":switch(t._tag){case"None":return S();case"Some":return _(Jc(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:vt}))}}})),interruptAsFork:t=>qt(e,r=>r.interruptAsFork(t)),pipe(){return O(this,arguments)}});var Jx=l(3,(e,t,r)=>Yx(e,t,{onSelfWin:(o,n)=>x(o.await,s=>{switch(s._tag){case Le:return x(o.inheritAll,()=>r.onSelfDone(s,n));case Pe:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>x(o.await,s=>{switch(s._tag){case Le:return x(o.inheritAll,()=>r.onOtherDone(s,n));case Pe:return r.onOtherDone(s,n)}})})),Xw=e=>Fe(t=>Dt(r=>x(Ls(t(e)),o=>m(t(xn(o)),_r(()=>m(o,ek(r))))))),Bp=l(2,(e,t)=>Dt(r=>Jx(e,t,{onSelfDone:(o,n)=>xs(o,{onFailure:s=>m(xn(n),Hi(i=>vt(s,i))),onSuccess:s=>m(n,Ht(r),le(s))}),onOtherDone:(o,n)=>xs(o,{onFailure:s=>m(xn(n),Hi(i=>vt(i,s))),onSuccess:s=>m(n,Ht(r),le(s))})}))),Yx=l(3,(e,t,r)=>re((o,n)=>{let s=n.runtimeFlags,i=Dr(!0),c=Lp(e,o,s,r.selfScope),a=Lp(t,o,s,r.otherScope);return qe(p=>{c.addObserver(()=>Cw(c,a,r.onSelfWin,i,p)),a.addObserver(()=>Cw(a,c,r.onOtherWin,i,p)),c.startFork(e),a.startFork(t)},Lm(c.id(),a.id()))})),Cw=(e,t,r,o,n)=>{Lu(!0,!1)(o)&&n(r(e,t))},vr=l(2,(e,t)=>Fe(r=>Se(r(e),{onFailure:o=>Se(t,{onFailure:n=>Y(je(o,n)),onSuccess:()=>Y(o)}),onSuccess:o=>le(t,o)}))),ED=(e,t,r)=>Dt(o=>x(x(Ls(Gr(e)),n=>qe(s=>{let i=t.map(p=>p.listeners.count),c=()=>{i.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&$c(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&il(p.result.state.current.effect.cause)))&&(a.forEach(p=>p()),r?.(),s(ls(n)))};n.addObserver(p=>{a.forEach(f=>f()),s(p)});let a=t.map((p,f)=>{let h=d=>{i[f]=d,c()};return p.listeners.addObserver(h),()=>p.listeners.removeObserver(h)});return c(),E(()=>{a.forEach(p=>p())})})),()=>I(()=>{let n=t.flatMap(s=>s.state.completed?[]:[s]);return qt(n,s=>Ax(s.request,Nl(o)))})));var ka=(e,t)=>(t=ho(t),yo(re(r=>{let o=ci(r.getFiberRef(mt),_n),n=cp(r,e,t),s=r.getFiberRef(Ri),i=Be(r.getFiberRef(ye),Yt);return le(ms(o,c=>Ld(n,c,i,s)),n)}))),eM=e=>fr(ye,ve(Br,e)),tM=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=ho(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return x(ka(t,ho(r)),n=>Wi(o,br,n))}return o=>x(ka(t,ho(r)),n=>Wi(o,br,n))};var rM=(e,t,r,o)=>$u({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),oM=(e,t)=>$u({_tag:"Pending",key:e,deferred:t}),OD=(e,t)=>$u({_tag:"Refreshing",deferred:e,complete:t}),Qx=Symbol.for("effect/Cache/MapKey"),Zx=class{current;[Qx]=Qx;previous=void 0;next=void 0;constructor(t){this.current=t}[F](){return m(w(this.current),L(w(this.previous)),L(w(this.next)),V(this))}[R](t){return this===t?!0:CD(t)&&v(this.current,t.current)&&v(this.previous,t.previous)&&v(this.next,t.next)}},Qi=e=>new Zx(e),CD=e=>k(e,Qx),Xx=class{head=void 0;tail=void 0;add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},vD=()=>new Xx,kD=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),wD=()=>kD(Ss(),vD(),tE(),Dr(!1),0,0),MD="effect/Cache",RD=Symbol.for(MD),FD={_Key:e=>e,_Error:e=>e,_Value:e=>e},TD="effect/ConsumerCache",AD=Symbol.for(TD),ID={_Key:e=>e,_Error:e=>e,_Value:e=>e},ND=e=>e,jp=e=>({loadedMillis:e}),eg=class{capacity;context;fiberId;lookup;timeToLive;[RD]=FD;[AD]=ID;cacheState;constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this.cacheState=wD()}get(t){return C(this.getEither(t),fu)}get cacheStats(){return E(()=>ND({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Ll(this.cacheState.map)}))}getOption(t){return I(()=>Ke(Ge(this.cacheState.map,t),{onNone:()=>{let r=Qi(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return I(()=>Ke(Ge(this.cacheState.map,t),{onNone:()=>{let r=Qi(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return E(()=>Or(this.cacheState.map,t))}entryStats(t){return E(()=>{let r=Ge(this.cacheState.map,t);if(W(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return _(jp(o))}case"Pending":return S();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return _(jp(o))}}return S()})}getEither(t){return I(()=>{let r=t,o,n,s=pt(Ge(this.cacheState.map,r));return s===void 0&&(n=Ah(this.fiberId),o=Qi(r),Or(this.cacheState.map,r)?s=pt(Ge(this.cacheState.map,r)):Ut(this.cacheState.map,r,oM(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),C(this.lookupValueOf(t,n),Ve)):x(this.resolveMapValue(s),Ke({onNone:()=>this.getEither(t),onSome:i=>y(St(i))}))})}invalidate(t){return E(()=>{_s(this.cacheState.map,t)})}invalidateWhen(t,r){return E(()=>{let o=Ge(this.cacheState.map,t);W(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&_s(this.cacheState.map,t)})}get invalidateAll(){return E(()=>{this.cacheState.map=Ss()})}refresh(t){return Qr(r=>I(()=>{let o=t,n=Ah(this.fiberId),s=pt(Ge(this.cacheState.map,o));if(s===void 0&&(Or(this.cacheState.map,o)?s=pt(Ge(this.cacheState.map,o)):Ut(this.cacheState.map,o,oM(Qi(o),n))),s===void 0)return Ee(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=pt(Ge(this.cacheState.map,o));return v(i,s)&&_s(this.cacheState.map,o),Ee(this.get(t))}return m(this.lookupValueOf(t,n),ip(()=>{let i=pt(Ge(this.cacheState.map,o));if(v(i,s)){let c=OD(n,s);return Ut(this.cacheState.map,o,c),!0}return!1}),Ee)}case"Pending":return bs(s.deferred);case"Refreshing":return bs(s.deferred)}}))}set(t,r){return Qr(o=>E(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=G_(r),c=rM(Qi(s),i,jp(n),n+Pr(nt(this.timeToLive(i))));Ut(this.cacheState.map,s,c)}))}get size(){return E(()=>Ll(this.cacheState.map))}get values(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}get entries(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}get keys(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return Qr(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.hasExpired(o,t.timeToLiveMillis)?(_s(this.cacheState.map,t.key.current),y(S())):(this.trackHit(),C(t.exit,_));case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(S()):C(bs(t.deferred),_);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(S()):C(bs(t.deferred),_):C(t.complete.exit,_)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(rE(this.cacheState.accesses,t),Lu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=oE(this.cacheState.accesses,qh);n===qh?r=!1:this.cacheState.keys.add(n)}let o=Ll(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?Or(this.cacheState.map,n.current)&&(_s(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}nr(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return Qr(o=>I(()=>{let n=t;return m(this.lookup(t),Er(this.context),ke,x(s=>{let i=o.unsafeCurrentTimeMillis(),c=jp(i),a=rM(Qi(n),s,c,i+Pr(nt(this.timeToLive(s))));return Ut(this.cacheState.map,n,a),ne(B_(r,s),s)}),_r(()=>ne(j_(r),E(()=>{_s(this.cacheState.map,n)}))))}))}};var nM=(e,t,r)=>new eg(e,Ot(),Hu,t,o=>nt(r(o)));u();var sM=es;var iM=Lc;var Z={};hy(Z,{Do:()=>qW,EffectTypeId:()=>kq,Tag:()=>pj,acquireRelease:()=>bH,acquireReleaseInterruptible:()=>SH,acquireUseRelease:()=>_H,addFinalizer:()=>EH,all:()=>Iq,allSuccesses:()=>Pq,allWith:()=>Nq,allowInterrupt:()=>J1,andThen:()=>nU,annotateCurrentSpan:()=>YB,annotateLogs:()=>QU,annotateLogsScoped:()=>ZU,annotateSpans:()=>JB,ap:()=>NB,as:()=>iH,asSome:()=>cH,asSomeError:()=>aH,asVoid:()=>uH,async:()=>n1,asyncEffect:()=>s1,awaitAllChildren:()=>NH,bind:()=>HW,bindTo:()=>WW,blocked:()=>PB,cacheRequestResult:()=>HB,cached:()=>Fq,cachedFunction:()=>Tq,cachedInvalidateWithTTL:()=>Rq,cachedWithTTL:()=>Mq,catch:()=>k1,catchAll:()=>w1,catchAllCause:()=>M1,catchAllDefect:()=>R1,catchIf:()=>F1,catchSome:()=>T1,catchSomeCause:()=>A1,catchSomeDefect:()=>I1,catchTag:()=>N1,catchTags:()=>P1,cause:()=>L1,checkInterruptible:()=>Y1,clock:()=>oW,clockWith:()=>nW,configProviderWith:()=>SW,console:()=>cW,consoleWith:()=>aW,context:()=>OW,contextWith:()=>CW,contextWithEffect:()=>vW,currentParentSpan:()=>ZB,currentSpan:()=>QB,custom:()=>i1,daemonChildren:()=>PH,delay:()=>pW,descriptor:()=>LH,descriptorWith:()=>DH,die:()=>f1,dieMessage:()=>m1,dieSync:()=>h1,diffFiberRefs:()=>qH,disconnect:()=>Q1,dropUntil:()=>Lq,dropWhile:()=>Dq,either:()=>BW,ensuring:()=>OH,ensuringChild:()=>HH,ensuringChildren:()=>WH,eventually:()=>D1,every:()=>qq,exists:()=>Hq,exit:()=>jW,fail:()=>a1,failCause:()=>l1,failCauseSync:()=>p1,failSync:()=>u1,fiberId:()=>UH,fiberIdWith:()=>BH,filter:()=>Wq,filterMap:()=>Uq,filterOrDie:()=>VW,filterOrDieMessage:()=>KW,filterOrElse:()=>JW,filterOrFail:()=>YW,finalizersMask:()=>wH,findFirst:()=>Bq,firstSuccessOf:()=>jq,flatMap:()=>oU,flatten:()=>sU,flip:()=>lH,flipWith:()=>pH,forEach:()=>zq,forever:()=>gU,fork:()=>jH,forkAll:()=>GH,forkDaemon:()=>zH,forkIn:()=>$H,forkScoped:()=>VH,forkWithErrorHandler:()=>KH,fromFiber:()=>JH,fromFiberEffect:()=>YH,fromNullable:()=>uj,functionWithSpan:()=>ij,gen:()=>d1,getFiberRefs:()=>wU,getRuntimeFlags:()=>pB,head:()=>Gq,if:()=>$W,ignore:()=>q1,ignoreLogged:()=>H1,inheritFiberRefs:()=>MU,interrupt:()=>Z1,interruptWith:()=>X1,interruptible:()=>eH,interruptibleMask:()=>tH,intoDeferred:()=>zW,isEffect:()=>wq,isFailure:()=>LU,isSuccess:()=>DU,iterate:()=>yU,labelMetrics:()=>xB,labelMetricsScoped:()=>yB,let:()=>UW,liftPredicate:()=>sH,linkSpans:()=>tj,locally:()=>RU,locallyScoped:()=>TU,locallyScopedWith:()=>AU,locallyWith:()=>FU,log:()=>BU,logAnnotations:()=>XU,logDebug:()=>GU,logError:()=>KU,logFatal:()=>JU,logInfo:()=>$U,logTrace:()=>zU,logWarning:()=>VU,logWithLevel:()=>jU,loop:()=>bU,makeSemaphore:()=>EB,makeSpan:()=>rj,makeSpanScoped:()=>oj,map:()=>fH,mapAccum:()=>mH,mapBoth:()=>hH,mapError:()=>dH,mapErrorCause:()=>xH,mapInputContext:()=>kW,match:()=>qU,matchCause:()=>HU,matchCauseEffect:()=>WU,matchEffect:()=>UU,merge:()=>gH,mergeAll:()=>$q,metricLabels:()=>bB,negate:()=>yH,never:()=>x1,none:()=>g1,onError:()=>CH,onExit:()=>vH,onInterrupt:()=>rH,once:()=>Aq,option:()=>GW,optionFromOptional:()=>lj,orDie:()=>tB,orDieWith:()=>rB,orElse:()=>oB,orElseFail:()=>nB,orElseSucceed:()=>sB,parallelErrors:()=>W1,parallelFinalizers:()=>kH,partition:()=>Vq,patchFiberRefs:()=>IU,patchRuntimeFlags:()=>fB,promise:()=>y1,provide:()=>wW,provideService:()=>MW,provideServiceEffect:()=>RW,race:()=>cU,raceAll:()=>iU,raceFirst:()=>aU,raceWith:()=>uU,random:()=>iB,randomWith:()=>cB,reduce:()=>Kq,reduceEffect:()=>Jq,reduceRight:()=>Yq,reduceWhile:()=>Qq,repeat:()=>SU,repeatN:()=>_U,repeatOrElse:()=>EU,replicate:()=>Zq,replicateEffect:()=>Xq,request:()=>qB,retry:()=>B1,retryOrElse:()=>j1,runCallback:()=>CB,runFork:()=>OB,runPromise:()=>vB,runPromiseExit:()=>kB,runRequestBlock:()=>LB,runSync:()=>wB,runSyncExit:()=>MB,runtime:()=>lB,sandbox:()=>U1,schedule:()=>OU,scheduleForked:()=>CU,scheduleFrom:()=>vU,scope:()=>RH,scopeWith:()=>FH,scoped:()=>TH,sequentialFinalizers:()=>MH,serviceConstants:()=>IW,serviceFunction:()=>FW,serviceFunctionEffect:()=>TW,serviceFunctions:()=>AW,serviceMembers:()=>NW,serviceOption:()=>PW,serviceOptional:()=>LW,setFiberRefs:()=>NU,sleep:()=>fW,spanAnnotations:()=>XB,spanLinks:()=>ej,step:()=>DB,succeed:()=>b1,succeedNone:()=>S1,succeedSome:()=>_1,summarized:()=>lU,supervised:()=>QH,suspend:()=>E1,sync:()=>O1,tagMetrics:()=>dB,tagMetricsScoped:()=>gB,takeUntil:()=>e1,takeWhile:()=>t1,tap:()=>pU,tapBoth:()=>fU,tapDefect:()=>mU,tapError:()=>hU,tapErrorCause:()=>xU,tapErrorTag:()=>dU,timed:()=>mW,timedWith:()=>hW,timeout:()=>dW,timeoutFail:()=>gW,timeoutFailCause:()=>yW,timeoutOption:()=>xW,timeoutTo:()=>bW,tracer:()=>jB,tracerWith:()=>zB,transplant:()=>ZH,try:()=>z1,tryMap:()=>G1,tryMapPromise:()=>$1,tryPromise:()=>V1,uninterruptible:()=>oH,uninterruptibleMask:()=>nH,unless:()=>QW,unlessEffect:()=>ZW,unsafeMakeSemaphore:()=>_B,unsandbox:()=>K1,updateFiberRefs:()=>PU,updateService:()=>DW,useSpan:()=>nj,using:()=>AH,validate:()=>RB,validateAll:()=>r1,validateFirst:()=>o1,validateWith:()=>FB,void:()=>C1,when:()=>XW,whenEffect:()=>eU,whenFiberRef:()=>tU,whenRef:()=>rU,whileLoop:()=>kU,withClock:()=>iW,withClockScoped:()=>sW,withConcurrency:()=>XH,withConfigProvider:()=>_W,withConfigProviderScoped:()=>EW,withConsole:()=>lW,withConsoleScoped:()=>uW,withEarlyRelease:()=>IH,withFiberRuntime:()=>c1,withLogSpan:()=>YU,withMaxOpsBeforeYield:()=>rW,withMetric:()=>SB,withParentSpan:()=>aj,withRandom:()=>aB,withRandomScoped:()=>uB,withRequestBatching:()=>WB,withRequestCache:()=>BB,withRequestCaching:()=>UB,withRuntimeFlagsPatch:()=>mB,withRuntimeFlagsPatchScoped:()=>hB,withScheduler:()=>eW,withSchedulingPriority:()=>tW,withSpan:()=>sj,withSpanScoped:()=>cj,withTracer:()=>GB,withTracerEnabled:()=>VB,withTracerScoped:()=>$B,withTracerTiming:()=>KB,withUnhandledErrorLogLevel:()=>eB,yieldNow:()=>v1,zip:()=>TB,zipLeft:()=>AB,zipRight:()=>IB,zipWith:()=>zR});u();u();u();u();u();u();u();u();u();var LD="effect/ScheduleInterval",Fa=Symbol.for(LD),tg={[Fa]:Fa,startMillis:0,endMillis:0},rg=(e,t)=>e>t?tg:{[Fa]:Fa,startMillis:e,endMillis:t},cM=l(2,(e,t)=>aM(e,t)===e),aM=l(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t);var uM=e=>e.startMillis>=e.endMillis;var lM=l(2,(e,t)=>{let r=Math.max(e.startMillis,t.startMillis),o=Math.min(e.endMillis,t.endMillis);return rg(r,o)});var pM=e=>rg(e,Number.POSITIVE_INFINITY);var og=tg,fM=cM;var mM=uM;var hM=lM;var dM=pM;var HD="effect/ScheduleIntervals",sg=Symbol.for(HD),ig=e=>({[sg]:sg,intervals:e});var xM=l(2,(e,t)=>WD(e.intervals,t.intervals,Pt())),WD=(e,t,r)=>{let o=e,n=t,s=r;for(;tt(o)&&tt(n);){let i=m(Ze(o),hM(Ze(n))),c=mM(i)?s:m(s,Qe(i));m(Ze(o),fM(Ze(n)))?o=ot(o):n=ot(n),s=c}return ig(Ir(s))},zp=e=>m(e.intervals,bu,De(()=>og)).startMillis,gM=e=>m(e.intervals,bu,De(()=>og)).endMillis,yM=l(2,(e,t)=>zp(e)<zp(t)),bM=e=>tt(e.intervals);var SM=ig;var _M=xM,EM=zp,cg=gM,OM=yM,CM=bM;var ug="Continue",vM="Done",kM=e=>({_tag:ug,intervals:e}),wM=e=>({_tag:ug,intervals:SM(Re(e))}),MM={_tag:vM},RM=e=>e._tag===ug,FM=e=>e._tag===vM;var TM=kM;var AM=wM,Zi=MM,lg=RM,Ta=FM;u();var NM=So;var PM=hs;u();u();var jD="effect/Schedule",HM=Symbol.for(jD),WM=e=>k(e,HM),zD="effect/ScheduleDriver",GD=Symbol.for(zD),$D={_Out:e=>e,_In:e=>e,_R:e=>e},VD={_Out:e=>e,_In:e=>e,_R:e=>e},pg=class{initial;step;[HM]=$D;constructor(t,r){this.initial=t,this.step=r}pipe(){return O(this,arguments)}},fg=class{schedule;ref;[GD]=VD;constructor(t,r){this.schedule=t,this.ref=r}get state(){return C(ur(this.ref),t=>t[1])}get last(){return x(ur(this.ref),([t,r])=>{switch(t._tag){case"None":return kt(()=>new Kt);case"Some":return y(t.value)}})}get reset(){return Oo(this.ref,[S(),this.schedule.initial])}next(t){return m(C(ur(this.ref),r=>r[1]),x(r=>m(jl,x(o=>m(I(()=>this.schedule.step(o,t,r)),x(([n,s,i])=>{let c=Oo(this.ref,[_(s),n]);if(Ta(i))return ne(c,G(S()));let a=EM(i.intervals)-o;return a<=0?le(c,s):m(c,ne(ks(pi(a))),le(s))}))))))}},Aa=(e,t)=>new pg(e,t);var KD=l(2,(e,t)=>dg(e,(r,o)=>E(()=>t(r,o)))),dg=l(2,(e,t)=>Aa(e.initial,(r,o,n)=>x(e.step(r,o,n),([s,i,c])=>Ta(c)?y([s,i,Zi]):C(t(o,i),a=>a?[s,i,c]:[s,i,Zi]))));var xg=e=>m(Os([S(),e.initial]),C(t=>new fg(e,t)));var UM=l(2,(e,t)=>JD(e,t,_M)),JD=l(3,(e,t,r)=>Aa([e.initial,t.initial],(o,n,s)=>m(Kr(e.step(o,n,s[0]),t.step(o,n,s[1]),(i,c)=>[i,c]),x(([[i,c,a],[p,f,h]])=>lg(a)&&lg(h)?mg(e,t,n,i,c,a.intervals,p,f,h.intervals,r):y([[i,p],[c,f],Zi]))))),mg=(e,t,r,o,n,s,i,c,a,p)=>{let f=p(s,a);return CM(f)?y([[o,i],[n,c],TM(f)]):m(s,OM(a))?x(e.step(cg(s),r,o),([h,d,g])=>Ta(g)?y([[h,i],[d,c],Zi]):mg(e,t,r,h,d,g.intervals,i,c,a,p)):x(t.step(cg(a),r,i),([h,d,g])=>Ta(g)?y([[o,h],[n,d],Zi]):mg(e,t,r,o,n,s,h,d,g.intervals,p))};var YD=l(2,(e,t)=>QD(e,r=>E(()=>t(r)))),QD=l(2,(e,t)=>Aa(e.initial,(r,o,n)=>x(e.step(r,o,n),([s,i,c])=>C(t(i),a=>[s,a,c]))));var ZD=e=>Aa(e.initial,(t,r,o)=>m(e.step(t,r,o),C(([n,s,i])=>[n,r,i])));var BM=e=>eq(Sg,t=>t<e);var XD=(e,t)=>Aa(e,(r,o,n)=>E(()=>[t(n),n,AM(dM(r))]));var jM=l(2,(e,t)=>dg(e,(r,o)=>np(t(r))));var zM=l(2,(e,t)=>dg(e,(r,o)=>t(r))),eq=l(2,(e,t)=>KD(e,(r,o)=>t(o)));var Gp=Symbol.for("effect/Schedule/ScheduleDefect"),hg=class{error;[Gp];constructor(t){this.error=t,this[Gp]=Gp}},tq=e=>k(e,Gp),$p=e=>Sr(e,t=>go(new hg(t))),GM=e=>jr(e,t=>Ke(Jo(t,r=>Oi(r)&&tq(r.defect)?_(r.defect):S()),{onNone:()=>Y(t),onSome:r=>G(r.error)})),DM=l(2,(e,t)=>gg(e,t,(r,o)=>G(r))),$M=l(2,(e,t)=>{if(WM(t))return DM(e,t);let r=t.schedule??ZD(Sg),o=t.while?zM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):$p(c)}):r,n=t.until?jM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):$p(c)}):o,s=t.times?UM(n,BM(t.times)).pipe(YD(i=>i[0])):n;return GM(DM(e,s))}),gg=l(3,(e,t,r)=>x(xg(t),o=>Xe(e,{onFailure:n=>r(n,S()),onSuccess:n=>VM(e,o,r,n)}))),VM=(e,t,r,o)=>Xe(t.next(o),{onFailure:()=>is(t.last),onSuccess:n=>Xe(e,{onFailure:s=>r(s,_(n)),onSuccess:s=>VM(e,t,r,s)})}),qM=l(2,(e,t)=>yg(e,t,(r,o)=>G(r))),KM=l(2,(e,t)=>{if(WM(t))return qM(e,t);let r=t.schedule??Sg,o=t.while?zM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):$p(c)}):r,n=t.until?jM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):$p(c)}):o,s=t.times?UM(n,BM(t.times)):n;return GM(qM(e,s))}),yg=l(3,(e,t,r)=>x(xg(t),o=>JM(e,o,r))),JM=(e,t,r)=>Sr(e,o=>Xe(t.next(o),{onFailure:()=>m(t.last,is,x(n=>r(o,n))),onSuccess:()=>JM(e,t,r)})),Vp=l(2,(e,t)=>bg(e,void 0,t)),bg=l(3,(e,t,r)=>x(xg(r),o=>YM(e,t,o))),YM=(e,t,r)=>Xe(r.next(t),{onFailure:()=>is(r.last),onSuccess:()=>x(e,o=>YM(e,o,r))});var Sg=XD(0,e=>e+1);var Eg=class{permits;waiters=new Set;taken=0;constructor(t){this.permits=t}get free(){return this.permits-this.taken}take=t=>qe(r=>{if(this.free<t){let o=()=>{this.free<t||(this.waiters.delete(o),this.taken+=t,r(y(t)))};return this.waiters.add(o),E(()=>{this.waiters.delete(o)})}return this.taken+=t,r(y(t))});updateTaken=t=>re(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(hn).scheduleTask(()=>{let o=this.waiters.values(),n=o.next();for(;n.done===!1&&this.free>0;)n.value(),n=o.next()},r.getFiberRef(cn)),y(this.free)));release=t=>this.updateTaken(r=>r-t);releaseAll=this.updateTaken(t=>0);withPermits=t=>r=>Fe(o=>x(o(this.take(t)),n=>vr(o(r),this.release(n))))},Jp=e=>new Eg(e),XM=e=>E(()=>Jp(e)),eR=e=>Yp(e,Zw),tR=l(2,(e,t)=>C(Cg(e,t),r=>r[0])),Cg=l(2,(e,t)=>{let r=nt(t);return x(ir(),o=>C(Qp(S()),n=>[Er(rq(e,r,n),o),oq(n)]))}),ZM=(e,t,r)=>{let o=Pr(nt(t));return m(Mt(),Vt(n=>$r(e,n)),C(n=>_([r+o,n])))},rq=(e,t,r)=>Fe(o=>m(Qr(n=>n.currentTimeMillis),x(n=>cq(r,s=>{switch(s._tag){case"None":return _(ZM(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?_(ZM(e,t,n)):S()}}})),x(n=>z(n)?Xo("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):o(it(n.value[1]))))),oq=e=>Oo(e,S()),rR=l(2,(e,t)=>Yp(e,r=>t(Up(r)))),Yp=l(2,(e,t)=>x(pw,r=>m(wg(e,r),vr(x(r.value,t))))),oR=l(e=>hr(e[0]),(e,t)=>t?.discard?qt(e,lr):C(st(e,lr),Up)),vg=l(2,(e,t)=>Fe(r=>x(t.fork(Zr),o=>m(r(e),yt(n=>o.close(n)),Ls,Vt(n=>o.addFinalizer(()=>Dt(s=>v(s,n.id())?H:Ee(ls(n))))))))),kg=e=>Ds(t=>vg(e,t)),nR=e=>xn(e),sR=e=>I(()=>x(e,xn)),_g=Symbol.for("effect/Effect/memoizeFunction.key"),Kp=class{a;eq;[_g]=_g;constructor(t,r){this.a=t,this.eq=r}[R](t){return k(t,_g)?this.eq?this.eq(this.a,t.a):v(this.a,t.a):!1}[F](){return this.eq?0:V(this,w(this.a))}},iR=(e,t)=>m(E(()=>Ss()),x(Qp),C(r=>o=>m(r.modifyEffect(n=>{let s=m(n,Ge(new Kp(o,t)));return z(s)?m(Mt(),Vt(i=>m(qi(e(o)),$r(i),lr)),C(i=>[i,m(n,Ut(new Kp(o,t),i))])):y([s.value,n])}),x(it),x(([n,s])=>m(vs(n),le(s)))))),cR=l(2,(e,t)=>m(ke(e),Bp(ke(t)),r=>wt(r))),aR=l(2,(e,t)=>m(e,Vp(t),kg)),wg=l(2,(e,t)=>rt(Hp,o=>o.zip(t))(e)),uR=l(2,(e,t)=>Mg(e,{onTimeout:()=>N_(t),duration:t})),Mg=l(2,(e,{duration:t,onTimeout:r})=>wt(Ia(e,{onTimeout:()=>kt(r),onSuccess:y,duration:t}))),lR=l(2,(e,{duration:t,onTimeout:r})=>wt(Ia(e,{onTimeout:()=>tn(r),onSuccess:y,duration:t}))),pR=l(2,(e,t)=>Ia(e,{duration:t,onSuccess:_,onTimeout:S})),Ia=l(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>Dt(n=>Yx(e,Gr(ks(t)),{onSelfWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>le(Ht(i,n),r(c.value))):x(Ht(i,n),()=>ie(c.cause))),onOtherWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>le(Ht(i,n),o())):x(Ht(i,n),()=>ie(c.cause))),otherScope:dn}))),nq="effect/Ref/SynchronizedRef",sq=Symbol.for(nq),iq={_A:e=>e},Og=class{ref;withLock;[sq]=iq;[$l]=dd;[Yr];constructor(t,r){this.ref=t,this.withLock=r,this[Yr]=Yr,this.get=ur(this.ref)}get;modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(x(ur(this.ref),t),x(([r,o])=>le(Oo(this.ref,o),r))))}pipe(){return O(this,arguments)}},Qp=e=>E(()=>fR(e)),fR=e=>{let t=Vl(e),r=Jp(1);return new Og(t,r.withPermits(1))},cq=l(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return C(o.value,n=>[n,n])}}));u();var hR="Fresh";u();u();var dR=Ht;var Xp=e=>(t,r)=>{let o=Bu(),n=[[mt,[[o,e.context]]]];r?.scheduler&&n.push([hn,[[o,r.scheduler]]]);let s=QE(e.fiberRefs,{entries:n,forkAs:o});r?.updateRefs&&(s=r.updateRefs(s,o));let i=new va(o,s,e.runtimeFlags),c=t;r?.scope&&(c=x(PM(r.scope,Zr),p=>ne(Tl(p,Dt(f=>v(f,i.id())?H:Ht(i,f))),yt(t,f=>NM(p,f)))));let a=i._supervisor;return a!==Ns&&(a.onStart(e.context,c,S(),i),i.addObserver(p=>a.onEnd(p,i))),dn.add(e.runtimeFlags,i),r?.immediate===!1?i.resume(c):i.start(c),i},Ig=e=>(t,r={})=>{let o=Xp(e)(t,r);return r.onExit&&o.addObserver(n=>{r.onExit(n)}),(n,s)=>Ig(e)(m(o,dR(n??Gt)),{...s,onExit:s?.onExit?i=>s.onExit(z_(i)):void 0})},uq=e=>t=>{let r=bR(e)(t);if(r._tag==="Failure")throw gR(r.effect_instruction_i0);return r.effect_instruction_i0},Tg=class extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}},lq=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Tg(e);return Error.stackTraceLimit=t,r};var Rg=Symbol.for("effect/Runtime/FiberFailure"),Fg=Symbol.for("effect/Runtime/FiberFailure/Cause"),Ag=class extends Error{[Rg];[Fg];constructor(t){super(),this[Rg]=Rg,this[Fg]=t;let r=ul(t);if(r.length>0){let o=r[0];this.name=o.name,this.message=o.message,this.stack=o.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[Fg].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[j](){return this.toString()}},gR=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Ag(e);return Error.stackTraceLimit=t,r};var yR=e=>{let t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return Kc(t.left);case"Right":return xe(t.right);case"Some":return xe(t.value);case"None":return Kc(Kt())}},bR=e=>t=>{let r=yR(t);if(r)return r;let o=new _p,n=Xp(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw lq(n)},pq=e=>(t,r)=>SR(e)(t,r).then(o=>{switch(o._tag){case Le:return o.effect_instruction_i0;case Pe:throw gR(o.effect_instruction_i0)}}),SR=e=>(t,r)=>new Promise(o=>{let n=yR(t);n&&o(n);let s=Xp(e)(t);s.addObserver(i=>{o(i)}),r?.signal!==void 0&&(r.signal.aborted?s.unsafeInterruptAsFork(s.id()):r.signal.addEventListener("abort",()=>{s.unsafeInterruptAsFork(s.id())},{once:!0}))}),Zp=class{context;runtimeFlags;fiberRefs;constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return O(this,arguments)}},fq=e=>new Zp(e.context,e.runtimeFlags,e.fiberRefs),ef=()=>re((e,t)=>y(new Zp(e.getFiberRef(mt),t.runtimeFlags,e.getFiberRefs()))),mq=Xm(Wr,Qm,Ym),Ro=fq({context:Ot(),runtimeFlags:mq,fiberRefs:ZE()});var _R=Ig(Ro),ER=Xp(Ro),OR=pq(Ro),CR=SR(Ro),vR=uq(Ro),kR=bR(Ro),wR=e=>I(()=>{let t;return x(Mt(),r=>x(ef(),o=>Fe(n=>ne(lr(n(Se(e(s=>Ig(o)($r(s,r))),{onFailure:s=>gs(r,s),onSuccess:s=>(t=s,H)}))),n(_r(it(r),()=>t??H))))))});u();var RR=l(2,(e,t)=>e.modifyEffect(t));var dq="effect/Layer",FR=Symbol.for(dq),xq={_RIn:e=>e,_E:e=>e,_ROut:e=>e},v9={[FR]:xq,pipe(){return O(this,arguments)}},gq="effect/Layer/MemoMap",Ng=Symbol.for(gq),yq=e=>k(e,FR),bq=e=>e._tag===hR,Pg=class{ref;[Ng];constructor(t){this.ref=t,this[Ng]=Ng}getOrElseMemoize(t,r){return m(RR(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,c=m(s,x(([a,p])=>m(vs(a),le(p))),yt(Ti({onFailure:()=>H,onSuccess:()=>ms(r,i)})));return y([c,o])}return m(Os(0),x(s=>m(Mt(),x(i=>m(Os(()=>H),C(c=>{let a=Fe(f=>m(Ma(),x(h=>m(f(x(AR(t,h,!0),d=>qi(d(this)))),ke,x(d=>{switch(d._tag){case Pe:return m(gs(i,d.effect_instruction_i0),ne(So(h,d)),ne(Y(d.effect_instruction_i0)));case Le:return m(Oo(c,g=>m(So(h,g),wi(Kl(s,b=>[b===1,b-1])),Ee)),ne(ra(s,g=>g+1)),ne(ms(r,g=>m(E(()=>o.delete(t)),ne(ur(c)),x(b=>b(g))))),ne(Zc(i,d.effect_instruction_i0)),le(d.effect_instruction_i0[1]))}}))))),p=[m(it(i),yt(xs({onFailure:()=>H,onSuccess:()=>ra(s,f=>f+1)}))),f=>m(ur(c),x(h=>h(f)))];return[a,bq(t)?o:o.set(t,p)]}))))))}),wt)}},Sq=I(()=>C(Qp(new Map),e=>new Pg(e)));var TR=l(2,(e,t)=>x(Sq,r=>x(AR(e,t),o=>o(r))));var AR=(e,t,r=!1)=>{let o=e;switch(o._tag){case"Locally":return E(()=>n=>o.f(n.getOrElseMemoize(o.self,t)));case"ExtendScope":return E(()=>n=>Ds(s=>n.getOrElseMemoize(o.layer,s)));case"Fold":return E(()=>n=>m(n.getOrElseMemoize(o.layer,t),Se({onFailure:s=>n.getOrElseMemoize(o.failureK(s),t),onSuccess:s=>n.getOrElseMemoize(o.successK(s),t)})));case"Fresh":return E(()=>n=>m(o.layer,TR(t)));case"FromEffect":return r?E(()=>n=>o.effect):E(()=>n=>n.getOrElseMemoize(e,t));case"Provide":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),x(s=>m(n.getOrElseMemoize(o.second,t),Er(s)))));case"Scoped":return r?E(()=>n=>En(o.effect,t)):E(()=>n=>n.getOrElseMemoize(e,t));case"Suspend":return E(()=>n=>n.getOrElseMemoize(o.evaluate(),t));case"ProvideMerge":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),Kr(n.getOrElseMemoize(o.second,t),o.zipK)));case"ZipWith":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),Mo(n.getOrElseMemoize(o.second,t),o.zipK,{concurrent:!0})))}};var _q=l(2,(e,t)=>Zo(Ma(),r=>x(TR(t,r),o=>Pl(e,o)),(r,o)=>So(r,o))),Eq=l(2,(e,t)=>{let r=ws(Ro.fiberRefs,t.fiberRefs),o=sr(Ro.runtimeFlags,t.runtimeFlags);return Fe(n=>re(s=>{let i=s.getFiberRef(mt),c=s.getFiberRefs(),a=Ms(s.id(),c)(r),p=s._runtimeFlags,f=mo(o)(p),h=ws(a,c),d=sr(f,p);return s.setFiberRefs(a),s._runtimeFlags=f,vr(Pl(n(e),Pn(i,t.context)),re(g=>(g.setFiberRefs(Ms(g.id(),g.getFiberRefs())(h)),g._runtimeFlags=mo(d)(g._runtimeFlags),H)))}))}),IR=l(2,(e,t)=>yq(t)?_q(e,t):fb(t)?Pl(e,t):Eq(e,t));var NR=C(Wt(ye),Be(Eo)),PR=e=>He(ye,t=>e(Be(t,Eo))),LR=l(2,(e,t)=>rt(e,ye,ve(Eo,t))),DR=e=>fr(ye,ve(Eo,e));u();var Lg=q(Symbol.for("effect/FiberRef/currentCache"),()=>Te(nM(65536,()=>C(Mt(),e=>({listeners:new zi,handle:e})),()=>gm(60)))),Dg=q(Symbol.for("effect/FiberRef/currentCacheEnabled"),()=>Te(!1)),qR=(e,t)=>x(ue(t)?t:y(t),r=>Dt(o=>{let n=new Proxy(e,{});return He(Dg,s=>{if(s){let c=He(Lg,a=>x(a.getEither(n),p=>{switch(p._tag){case"Left":return p.left.listeners.interrupted?x(a.invalidateWhen(n,f=>f.handle===p.left.handle),()=>c):(p.left.listeners.increment(),Fe(f=>x(ke(xo(AS,f(it(p.left.handle)))),h=>(p.left.listeners.decrement(),h))));case"Right":return p.right.listeners.increment(),Fe(f=>x(ke(xo(uh(r,lh({request:n,result:p.right.handle,listeners:p.right.listeners,ownerId:o,state:{completed:!1}})),f(it(p.right.handle)))),()=>(p.right.listeners.decrement(),it(p.right.handle))))}}));return c}let i=new zi;return i.increment(),x(Mt(),c=>vr(xo(uh(r,lh({request:n,result:c,listeners:i,ownerId:o,state:{completed:!1}})),it(c)),E(()=>i.decrement())))})})),HR=(e,t)=>He(Dg,r=>r?He(Lg,o=>x(o.getEither(e),n=>{switch(n._tag){case"Left":return H;case"Right":return Fh(n.right.handle,t)}})):H),WR=l(2,(e,t)=>We(e,Dg,t)),UR=l(2,(e,t)=>We(e,Lg,t));u();var BR=Vk;var kq=vi,wq=ue,Mq=tR,Rq=Cg,Fq=kd,Tq=iR,Aq=wd,Iq=Yi,Nq=Tw,Pq=Aw,Lq=LO,Dq=DO,qq=KO,Hq=Mw,Wq=Fw,Uq=HO,Bq=zO,jq=$O,zq=pr,Gq=QO,$q=jx,Vq=zx,Kq=OC,Jq=qw,Yq=CC,Qq=vC,Zq=Bx,Xq=Iw,e1=IC,t1=NC,r1=Lw,o1=Bw,n1=qe,s1=wR,i1=Wc,c1=re,a1=G,u1=kt,l1=Y,p1=tn,f1=go,m1=Xo,h1=en,d1=YO,x1=us,g1=dC,y1=SC,b1=y,S1=ca,_1=TC,E1=I,O1=E,C1=H;var v1=Vr,k1=_O;var w1=Sr,M1=jr,R1=EO,F1=Uc,T1=l_,A1=OO,I1=CO,N1=vO,P1=kO,L1=wO,D1=_d,q1=Od,H1=ZO,W1=bC,U1=RC,B1=KM,j1=yg,z1=Sd;var G1=UC,$1=BC,V1=Td,K1=GC,J1=FO,Y1=p_,Q1=Xw,Z1=bl,X1=Sl,eH=Gr,tH=m_,rH=_r,oH=yo,nH=Fe,sH=BO,iH=le,cH=tp,aH=SO,uH=Ee,lH=on,pH=VO,fH=C,mH=mC,hH=jc,dH=nn,xH=Hi,gH=hC,yH=np,bH=wa,SH=kw,_H=Zo,EH=Ji,OH=vr,CH=_l,vH=yt,kH=Dp,wH=Sn,MH=qp,RH=Kx,FH=Ds,TH=Gx,AH=Ww,IH=$w,NH=eR,PH=ww,LH=TO,DH=rp,qH=qi,HH=rR,WH=Yp,UH=rn,BH=Dt,jH=lr,zH=Ls,GH=oR,$H=vg,VH=kg,KH=Nw,JH=nR,YH=sR,QH=wg,ZH=El,XH=d_,eW=Vv,tW=vh,rW=R_,oW=MO,nW=Qr,sW=jw,iW=NE,cW=NR,aW=PR,uW=DR,lW=LR,pW=RO,fW=ks,mW=HC,hW=Fd,dW=uR,xW=pR,gW=Mg,yW=lR,bW=Ia,SW=LE,_W=PE,EW=Gw,OW=ir,CW=qO,vW=cr,kW=ys,wW=IR,MW=Wi,RW=_C,FW=QC,TW=YC,AW=Ad,IW=Id,NW=ZC,PW=XC,LW=Nd,DW=$C,qW=AO,HW=IO,WW=NO,UW=PO;var BW=zr,jW=ke,zW=$r,GW=xC,$W=yl;var VW=WO,KW=UO,JW=sa,YW=jO,QW=jC,ZW=zC,XW=ip,eU=wi,tU=VC,rU=KC,oU=x,nU=ns,sU=wt,iU=Dw,cU=Bp,aU=cR,uU=Jx,lU=aa,pU=Vt,fU=PC,mU=LC,hU=Rd,dU=DC,xU=qC,gU=Ed,yU=Cd,bU=lC,SU=$M,_U=wC,EU=gg,OU=Vp,CU=aR,vU=bg,kU=Mi,wU=op,MU=XO,RU=We,FU=rt,TU=Wp,AU=fr,IU=vs,NU=FC,PU=sp,LU=eC,DU=tC,qU=ia,HU=Bc,WU=Se,UU=Xe,BU=rC,jU=(e,...t)=>Co(e)(...t),zU=oC,GU=vd,$U=nC,VU=sC,KU=iC,JU=cC,YU=aC,QU=bO,ZU=vw,XU=uC,eB=F_,tB=is,rB=_h,oB=ss,nB=gC,sB=yC,iB=EC,cB=Ul,aB=DE,uB=zw,lB=ef,pB=ki,fB=sn,mB=Ol,hB=Yw,dB=AC,xB=Md,gB=Hw,yB=$x,bB=T_,SB=JC,_B=Jp,EB=XM,OB=ER,CB=_R,vB=OR,kB=CR,wB=vR,MB=kR,RB=Uw,FB=Vx,TB=Vw,AB=Kw,IB=Jw,zR=Mo,NB=l(2,(e,t)=>zR(e,t,(r,o)=>r(o))),PB=xo,LB=xl,DB=gl,qB=l(e=>BR(e[0]),qR),HB=HR,WB=x_,UB=WR,BB=UR,jB=WC,zB=Bl,GB=qE,$B=eM,VB=g_,KB=y_,JB=tv,YB=ev,QB=Pd,ZB=rv,XB=iv,ej=cv,tj=ov,rj=sv,oj=ka,nj=Xl,sj=Dd,ij=av,cj=tM,aj=ep,uj=uv,lj=lv,pj=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function o(){}Object.setPrototypeOf(o,rm),o.key=e,Object.defineProperty(o,"stack",{get(){return r.stack}});let n=new Map;return new Proxy(o,{get(i,c,a){if(c==="use")return h=>ns(o,h);if(c in o)return o[c];if(n.has(c))return n.get(c);let p=(...h)=>ns(o,d=>typeof d[c]=="function"?(n.set(c,(...g)=>ns(o,b=>b[c](...g))),d[c](...h)):(n.set(c,ns(o,g=>g[c])),d[c])),f=ns(o,h=>h[c]);return Object.assign(p,f),Object.setPrototypeOf(p,Object.getPrototypeOf(f)),n.set(c,p),p}})};u();var fj=function(){let e=Symbol.for("effect/Data/Error/plainArgs");return class extends Al{constructor(r){super(r?.message,r?.cause?{cause:r.cause}:void 0),r&&(Object.assign(this,r),Object.defineProperty(this,e,{value:r,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),Xi=e=>{class t extends fj{_tag=e}return t.prototype.name=e,t};u();u();u();u();var Na=class{constructor(t,r,o,n,s){this.message=t;this.stack=r;this.span=o;this.isPlainString=n;this.errorType=s}};u();var GR=e=>{if(typeof e=="string")return{isPlainString:!0,message:e};if(e instanceof Error&&k(e,"cause")&&k(e,"_tag"))return{isPlainString:!1,type:e._tag,message:e.cause};if(e instanceof Error&&k(e,"error"))return{isPlainString:!1,type:e.name,message:e.error};if(k(e,"_tag")&&k(e,"message"))return{isPlainString:!1,type:e._tag,message:e.message};if(k(e,"toString")&&js(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==Array.prototype.toString){let t=e.toString(),r=t.split(": ");if(r.length>1){let[o,...n]=r;return{isPlainString:!1,type:o,message:n}}return{message:t,isPlainString:!1}}return{message:`Error: ${JSON.stringify(e)}`,isPlainString:!1}};var $R=Symbol.for("effect/SpanAnnotation"),qg=e=>{let t=k(e,$R)?e[$R]:void 0,{message:r,type:o,isPlainString:n}=GR(e);return e instanceof Error?new Na(r,e.stack?.split(`
`).filter(s=>/at (.*)/.exec(s)).join(`\r
`),t,!1,o):new Na(r,void 0,t,n,o)};var VR=e=>iM(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[qg(r)],failCase:(t,r)=>[qg(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();u();var KR=e=>Array.from(e.entries()).reduce((t,[r,o])=>r==="code.stacktrace"?{attributes:t.attributes,stacktrace:[...t.stacktrace,o]}:{attributes:new Map([...t.attributes,[r,o]]),stacktrace:t.stacktrace},{stacktrace:[],attributes:new Map});u();var tf=/ {4}at /g,JR=/^(file:\/\/)?(.*.([jt])sx?)(\?.*)?:(\d*):(\d*)$/;u();var YR=global.process!==void 0?new RegExp(global.process.cwd(),"g"):null,QR=e=>YR===null?e:e.replace(YR,".");u();var ZR=e=>{let t=e.split(`\r
`),r=new RegExp(`${process.cwd()}/.(?![node_modules])`);return t.filter(o=>o.match(r)).map(o=>o.trimStart())};u();u();u();var XR=e=>{let t=JR.exec(e);if(t===null||t.length!==7)return;let r=t[2],o=+t[5],n=+t[6];return{filePath:r,line:o,column:n}};u();u();var mf=$a(Xg(),1);u();var sc=class extends Xi("fs-error"){};var V0=e=>m(Z.tryPromise({try:async()=>await mf.default.readFile(e,{encoding:"utf8"}),catch:t=>new sc({cause:t})}),Z.withSpan("readFile",{attributes:{path:e}})),K0=e=>m(Z.tryPromise({try:async()=>await mf.default.exists(e),catch:t=>new sc({cause:t})}),Z.withSpan("exists",{attributes:{path:e}})),J0=e=>m(Z.tryPromise({try:async()=>await mf.default.readJson(e),catch:t=>new sc({cause:t})}),Z.withSpan("readJson",{attributes:{path:e}}));var d3=7,hf=({filePath:e,line:t,column:r},o=!1)=>Z.gen(function*(){let n=t>=4?t-4:0;return(yield*V0(e)).split(`
`).splice(n,d3).map((i,c)=>{let a=c+n+1,p=o?r+1:r;return{line:a,code:i,column:a===t?p:void 0}})});u();import j3 from"path";var _f=$a(Z0(),1),vT=$a(CT(),1);var kT=e=>Z.gen(function*(){if(!(yield*K0(`${e.filePath}.map`))){let c=_f.default.yellow(`${e.filePath}.map does not exist: unable to retrieve spans sourcemaps.`);console.warn(`${_f.default.blue(_f.default.underline("effect-errors"))}: ${c}`);return}let r=yield*J0(`${e.filePath}.map`);if(r.version===void 0||r.sources===void 0)return;let n=new vT.SourceMapConsumer(r).originalPositionFor({column:e.column,line:e.line});if(n.source===null||n.line===null||n.column===null)return;let s=j3.resolve(e.filePath.substring(0,e.filePath.lastIndexOf("/")),n.source),i=yield*hf({filePath:s,line:n.line,column:n.column},!0);return{runPath:`${e.filePath}:${e.line}:${e.column}`,sourcesPath:`${s}:${n.line}:${n.column+1}`,source:i}});var wT=e=>Z.gen(function*(){let t=XR(e);if(t===void 0)return;let{filePath:r,line:o,column:n}=t;if(r.endsWith(".ts")||r.endsWith(".tsx")){let i=yield*hf(t);return{runPath:`${r}:${o}:${n}`,sourcesPath:void 0,source:i}}return yield*kT(t)});var my=e=>m(Z.forEach(e,t=>Z.gen(function*(){let r=t.split(" "),o=r.length===2?r[1]:r[r.length-1].slice(1,-1),n=yield*wT(o);if(n===void 0)return{runPath:t.replaceAll(tf,"at "),source:void 0,sourcesPath:void 0};let s=new RegExp(`${process.cwd()}/node_modules/`);if(!n.sourcesPath?.match(s))return{runPath:n.runPath,sourcesPath:n.sourcesPath,source:n.source}})),Z.map(t=>t.filter(r=>r!==void 0)));var MT=({reverseSpans:e,stripCwd:t})=>({message:r,stack:o,span:n,errorType:s,isPlainString:i})=>Z.gen(function*(){let c=[],a=[];if(o){let f=ZR(o),h=yield*my(f);c.push(...h)}if(n!==void 0){let f=n;for(;f!==void 0&&f._tag==="Span";){let{name:h,attributes:d,status:g}=f,{attributes:b,stacktrace:M}=KR(d),T=yield*my(M),N=g._tag==="Ended"?+`${(g.endTime-g.startTime)/BigInt(1e6)}`:void 0;c.push(...T),a.push({name:h,attributes:Object.fromEntries(b),durationInMilliseconds:N}),f=de.getOrUndefined(f.parent)}}let p;return o!==void 0&&(p=t===!0?QR(o):o),{errorType:s,message:r,stack:p?.replaceAll(tf,"at ").split(`\r
`),sources:c.length>0?c:void 0,spans:e===!0?a.toReversed():a,isPlainString:i}});var RT=(e,t={reverseSpans:!0,stripCwd:!0})=>Z.gen(function*(){if(sM(e))return{interrupted:!0,errors:[]};let r=VR(e);return{interrupted:!1,errors:yield*Z.forEach(r,MT(t))}});u();var FT=(e,t)=>typeof t=="bigint"?{type:"bigint",value:t.toString()}:t;u();import{fileURLToPath as G3}from"node:url";var AT=$a(Xg(),1);u();var Ga=class extends Xi("FetchError"){};u();var Ef=class extends Xi("FileError"){};u();var z3=new RegExp(process.cwd(),"g"),TT=e=>Z.sync(()=>{console.info(`\r
\u{1F4C1} ${e.replace(z3,".")}`)});var $3=G3(import.meta.url),V3=Z.withSpan("readUser")(Z.tryPromise({try:async()=>await AT.default.readJson("./src/examples/data/user.json"),catch:e=>new Ef({cause:e})})),K3=e=>Z.withSpan("fetchUser",{attributes:{userId:e}})(Z.tryPromise({try:async()=>await fetch(`https://yolo-bro-oh-no.org/users/${e}`),catch:t=>new Ga({cause:t})})),J3=e=>Z.withSpan("unwrapFetchUserResponse")(Z.tryPromise({try:async()=>await e.json(),catch:t=>new Ga({cause:t})})),Y3=Z.withSpan("fromPromiseTask")(Z.gen(function*(){yield*TT($3);let{id:e}=yield*V3,t=yield*K3(e);return yield*J3(t)})),IT=Y3;Z.runPromise(m(IT,Z.sandbox,Z.catchAll(e=>Z.gen(function*(){let t=yield*RT(e);return yield*Z.fail(JSON.stringify(t,FT,2))})))).catch(console.error);
