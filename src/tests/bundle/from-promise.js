var IT=Object.create;var Df=Object.defineProperty;var PT=Object.getOwnPropertyDescriptor;var NT=Object.getOwnPropertyNames;var LT=Object.getPrototypeOf,DT=Object.prototype.hasOwnProperty;var Ve=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var qT=(e,t)=>()=>(e&&(t=e(e=0)),t);var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dy=(e,t)=>{for(var r in t)Df(e,r,{get:t[r],enumerable:!0})},HT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NT(t))!DT.call(e,n)&&n!==r&&Df(e,n,{get:()=>t[n],enumerable:!(o=PT(t,n))||o.enumerable});return e};var eu=(e,t,r)=>(r=e!=null?IT(LT(e)):{},HT(t||!e||!e.__esModule?Df(r,"default",{value:e,enumerable:!0}):r,e));import{createRequire as WT}from"node:module";import BT from"node:path";import UT from"node:url";var u=qT(()=>{"use strict";globalThis.require=WT(import.meta.url);globalThis.__filename=UT.fileURLToPath(import.meta.url);globalThis.__dirname=BT.dirname(__filename)});var at=H(Xg=>{"use strict";u();Xg.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,o)=>{t.push((n,s)=>n!=null?o(n):r(s)),e.apply(this,t)})},"name",{value:e.name})};Xg.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(o=>r(null,o),r)},"name",{value:e.name})}});var OR=H((WX,ER)=>{u();var kn=Ve("constants"),aU=process.cwd,mf=null,uU=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return mf||(mf=aU.call(process)),mf};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ey=process.chdir,process.chdir=function(e){mf=null,ey.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ey));var ey;ER.exports=lU;function lU(e){kn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=o(e.chmod),e.fchmod=o(e.fchmod),e.lchmod=o(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,d,g){g&&process.nextTick(g)},e.lchownSync=function(){}),uU==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(d,g,b){var M=Date.now(),T=0;f(d,g,function L(J){if(J&&(J.code==="EACCES"||J.code==="EPERM"||J.code==="EBUSY")&&Date.now()-M<6e4){setTimeout(function(){e.stat(g,function(ue,Ee){ue&&ue.code==="ENOENT"?f(d,g,L):b(J)})},T),T<100&&(T+=10);return}b&&b(J)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(d,g,b,M,T,L){var J;if(L&&typeof L=="function"){var ue=0;J=function(Ee,ft,er){if(Ee&&Ee.code==="EAGAIN"&&ue<10)return ue++,f.call(e,d,g,b,M,T,J);L.apply(this,arguments)}}return f.call(e,d,g,b,M,T,J)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,d,g,b,M){for(var T=0;;)try{return f.call(e,h,d,g,b,M)}catch(L){if(L.code==="EAGAIN"&&T<10){T++;continue}throw L}}}(e.readSync);function t(f){f.lchmod=function(h,d,g){f.open(h,kn.O_WRONLY|kn.O_SYMLINK,d,function(b,M){if(b){g&&g(b);return}f.fchmod(M,d,function(T){f.close(M,function(L){g&&g(T||L)})})})},f.lchmodSync=function(h,d){var g=f.openSync(h,kn.O_WRONLY|kn.O_SYMLINK,d),b=!0,M;try{M=f.fchmodSync(g,d),b=!1}finally{if(b)try{f.closeSync(g)}catch{}else f.closeSync(g)}return M}}function r(f){kn.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,d,g,b){f.open(h,kn.O_SYMLINK,function(M,T){if(M){b&&b(M);return}f.futimes(T,d,g,function(L){f.close(T,function(J){b&&b(L||J)})})})},f.lutimesSync=function(h,d,g){var b=f.openSync(h,kn.O_SYMLINK),M,T=!0;try{M=f.futimesSync(b,d,g),T=!1}finally{if(T)try{f.closeSync(b)}catch{}else f.closeSync(b)}return M}):f.futimes&&(f.lutimes=function(h,d,g,b){b&&process.nextTick(b)},f.lutimesSync=function(){})}function o(f){return f&&function(h,d,g){return f.call(e,h,d,function(b){p(b)&&(b=null),g&&g.apply(this,arguments)})}}function n(f){return f&&function(h,d){try{return f.call(e,h,d)}catch(g){if(!p(g))throw g}}}function s(f){return f&&function(h,d,g,b){return f.call(e,h,d,g,function(M){p(M)&&(M=null),b&&b.apply(this,arguments)})}}function i(f){return f&&function(h,d,g){try{return f.call(e,h,d,g)}catch(b){if(!p(b))throw b}}}function c(f){return f&&function(h,d,g){typeof d=="function"&&(g=d,d=null);function b(M,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),g&&g.apply(this,arguments)}return d?f.call(e,h,d,b):f.call(e,h,b)}}function a(f){return f&&function(h,d){var g=d?f.call(e,h,d):f.call(e,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var kR=H((UX,CR)=>{u();var vR=Ve("stream").Stream;CR.exports=pU;function pU(e){return{ReadStream:t,WriteStream:r};function t(o,n){if(!(this instanceof t))return new t(o,n);vR.call(this);var s=this;this.path=o,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var i=Object.keys(n),c=0,a=i.length;c<a;c++){var p=i[c];this[p]=n[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){s.emit("error",f),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function r(o,n){if(!(this instanceof r))return new r(o,n);vR.call(this),this.path=o,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),i=0,c=s.length;i<c;i++){var a=s[i];this[a]=n[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var MR=H((zX,wR)=>{"use strict";u();wR.exports=mU;var fU=Object.getPrototypeOf||function(e){return e.__proto__};function mU(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:fU(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var nc=H(($X,oy)=>{u();var Ie=Ve("fs"),hU=OR(),dU=kR(),xU=MR(),hf=Ve("util"),xt,xf;typeof Symbol=="function"&&typeof Symbol.for=="function"?(xt=Symbol.for("graceful-fs.queue"),xf=Symbol.for("graceful-fs.previous")):(xt="___graceful-fs.queue",xf="___graceful-fs.previous");function gU(){}function TR(e,t){Object.defineProperty(e,xt,{get:function(){return t}})}var Us=gU;hf.debuglog?Us=hf.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Us=function(){var e=hf.format.apply(hf,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});Ie[xt]||(RR=global[xt]||[],TR(Ie,RR),Ie.close=function(e){function t(r,o){return e.call(Ie,r,function(n){n||FR(),typeof o=="function"&&o.apply(this,arguments)})}return Object.defineProperty(t,xf,{value:e}),t}(Ie.close),Ie.closeSync=function(e){function t(r){e.apply(Ie,arguments),FR()}return Object.defineProperty(t,xf,{value:e}),t}(Ie.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Us(Ie[xt]),Ve("assert").equal(Ie[xt].length,0)}));var RR;global[xt]||TR(global,Ie[xt]);oy.exports=ty(xU(Ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ie.__patched&&(oy.exports=ty(Ie),Ie.__patched=!0);function ty(e){hU(e),e.gracefulify=ty,e.createReadStream=ft,e.createWriteStream=er;var t=e.readFile;e.readFile=r;function r(q,Z,j){return typeof Z=="function"&&(j=Z,Z=null),me(q,Z,j);function me(Pe,Se,he,ie){return t(Pe,Se,function(X){X&&(X.code==="EMFILE"||X.code==="ENFILE")?oc([me,[Pe,Se,he],X,ie||Date.now(),Date.now()]):typeof he=="function"&&he.apply(this,arguments)})}}var o=e.writeFile;e.writeFile=n;function n(q,Z,j,me){return typeof j=="function"&&(me=j,j=null),Pe(q,Z,j,me);function Pe(Se,he,ie,X,Me){return o(Se,he,ie,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?oc([Pe,[Se,he,ie,X],de,Me||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=i);function i(q,Z,j,me){return typeof j=="function"&&(me=j,j=null),Pe(q,Z,j,me);function Pe(Se,he,ie,X,Me){return s(Se,he,ie,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?oc([Pe,[Se,he,ie,X],de,Me||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=a);function a(q,Z,j,me){return typeof j=="function"&&(me=j,j=0),Pe(q,Z,j,me);function Pe(Se,he,ie,X,Me){return c(Se,he,ie,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?oc([Pe,[Se,he,ie,X],de,Me||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var p=e.readdir;e.readdir=h;var f=/^v[0-5]\./;function h(q,Z,j){typeof Z=="function"&&(j=Z,Z=null);var me=f.test(process.version)?function(he,ie,X,Me){return p(he,Pe(he,ie,X,Me))}:function(he,ie,X,Me){return p(he,ie,Pe(he,ie,X,Me))};return me(q,Z,j);function Pe(Se,he,ie,X){return function(Me,de){Me&&(Me.code==="EMFILE"||Me.code==="ENFILE")?oc([me,[Se,he,ie],Me,X||Date.now(),Date.now()]):(de&&de.sort&&de.sort(),typeof ie=="function"&&ie.call(this,Me,de))}}}if(process.version.substr(0,4)==="v0.8"){var d=dU(e);L=d.ReadStream,ue=d.WriteStream}var g=e.ReadStream;g&&(L.prototype=Object.create(g.prototype),L.prototype.open=J);var b=e.WriteStream;b&&(ue.prototype=Object.create(b.prototype),ue.prototype.open=Ee),Object.defineProperty(e,"ReadStream",{get:function(){return L},set:function(q){L=q},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return ue},set:function(q){ue=q},enumerable:!0,configurable:!0});var M=L;Object.defineProperty(e,"FileReadStream",{get:function(){return M},set:function(q){M=q},enumerable:!0,configurable:!0});var T=ue;Object.defineProperty(e,"FileWriteStream",{get:function(){return T},set:function(q){T=q},enumerable:!0,configurable:!0});function L(q,Z){return this instanceof L?(g.apply(this,arguments),this):L.apply(Object.create(L.prototype),arguments)}function J(){var q=this;tt(q.path,q.flags,q.mode,function(Z,j){Z?(q.autoClose&&q.destroy(),q.emit("error",Z)):(q.fd=j,q.emit("open",j),q.read())})}function ue(q,Z){return this instanceof ue?(b.apply(this,arguments),this):ue.apply(Object.create(ue.prototype),arguments)}function Ee(){var q=this;tt(q.path,q.flags,q.mode,function(Z,j){Z?(q.destroy(),q.emit("error",Z)):(q.fd=j,q.emit("open",j))})}function ft(q,Z){return new e.ReadStream(q,Z)}function er(q,Z){return new e.WriteStream(q,Z)}var Do=e.open;e.open=tt;function tt(q,Z,j,me){return typeof j=="function"&&(me=j,j=null),Pe(q,Z,j,me);function Pe(Se,he,ie,X,Me){return Do(Se,he,ie,function(de,$s){de&&(de.code==="EMFILE"||de.code==="ENFILE")?oc([Pe,[Se,he,ie,X],de,Me||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}return e}function oc(e){Us("ENQUEUE",e[0].name,e[1]),Ie[xt].push(e),ry()}var df;function FR(){for(var e=Date.now(),t=0;t<Ie[xt].length;++t)Ie[xt][t].length>2&&(Ie[xt][t][3]=e,Ie[xt][t][4]=e);ry()}function ry(){if(clearTimeout(df),df=void 0,Ie[xt].length!==0){var e=Ie[xt].shift(),t=e[0],r=e[1],o=e[2],n=e[3],s=e[4];if(n===void 0)Us("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-n>=6e4){Us("TIMEOUT",t.name,r);var i=r.pop();typeof i=="function"&&i.call(null,o)}else{var c=Date.now()-s,a=Math.max(s-n,1),p=Math.min(a*1.2,100);c>=p?(Us("RETRY",t.name,r),t.apply(null,r.concat([n]))):Ie[xt].push(e)}df===void 0&&(df=setTimeout(ry,0))}}});var Tt=H(Io=>{"use strict";u();var AR=at().fromCallback,Ft=nc(),yU=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Ft[e]=="function");Object.assign(Io,Ft);yU.forEach(e=>{Io[e]=AR(Ft[e])});Io.exists=function(e,t){return typeof t=="function"?Ft.exists(e,t):new Promise(r=>Ft.exists(e,r))};Io.read=function(e,t,r,o,n,s){return typeof s=="function"?Ft.read(e,t,r,o,n,s):new Promise((i,c)=>{Ft.read(e,t,r,o,n,(a,p,f)=>{if(a)return c(a);i({bytesRead:p,buffer:f})})})};Io.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.write(e,t,...r):new Promise((o,n)=>{Ft.write(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffer:c})})})};Io.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.readv(e,t,...r):new Promise((o,n)=>{Ft.readv(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesRead:i,buffers:c})})})};Io.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.writev(e,t,...r):new Promise((o,n)=>{Ft.writev(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffers:c})})})};typeof Ft.realpath.native=="function"?Io.realpath.native=AR(Ft.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var PR=H((YX,IR)=>{"use strict";u();var bU=Ve("path");IR.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(bU.parse(t).root,""))){let o=new Error(`Path contains invalid characters: ${t}`);throw o.code="EINVAL",o}}});var qR=H((ZX,ny)=>{"use strict";u();var NR=Tt(),{checkPath:LR}=PR(),DR=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};ny.exports.makeDir=async(e,t)=>(LR(e),NR.mkdir(e,{mode:DR(t),recursive:!0}));ny.exports.makeDirSync=(e,t)=>(LR(e),NR.mkdirSync(e,{mode:DR(t),recursive:!0}))});var Rr=H((eee,HR)=>{"use strict";u();var SU=at().fromPromise,{makeDir:_U,makeDirSync:sy}=qR(),iy=SU(_U);HR.exports={mkdirs:iy,mkdirsSync:sy,mkdirp:iy,mkdirpSync:sy,ensureDir:iy,ensureDirSync:sy}});var wn=H((ree,BR)=>{"use strict";u();var EU=at().fromPromise,WR=Tt();function OU(e){return WR.access(e).then(()=>!0).catch(()=>!1)}BR.exports={pathExists:EU(OU),pathExistsSync:WR.existsSync}});var cy=H((nee,UR)=>{"use strict";u();var sc=Tt(),vU=at().fromPromise;async function CU(e,t,r){let o=await sc.open(e,"r+"),n=null;try{await sc.futimes(o,t,r)}finally{try{await sc.close(o)}catch(s){n=s}}if(n)throw n}function kU(e,t,r){let o=sc.openSync(e,"r+");return sc.futimesSync(o,t,r),sc.closeSync(o)}UR.exports={utimesMillis:vU(CU),utimesMillisSync:kU}});var js=H((iee,$R)=>{"use strict";u();var ic=Tt(),ut=Ve("path"),jR=at().fromPromise;function wU(e,t,r){let o=r.dereference?n=>ic.stat(n,{bigint:!0}):n=>ic.lstat(n,{bigint:!0});return Promise.all([o(e),o(t).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function MU(e,t,r){let o,n=r.dereference?i=>ic.statSync(i,{bigint:!0}):i=>ic.lstatSync(i,{bigint:!0}),s=n(e);try{o=n(t)}catch(i){if(i.code==="ENOENT")return{srcStat:s,destStat:null};throw i}return{srcStat:s,destStat:o}}async function RU(e,t,r,o){let{srcStat:n,destStat:s}=await wU(e,t,o);if(s){if(Ba(n,s)){let i=ut.basename(e),c=ut.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&ay(e,t))throw new Error(gf(e,t,r));return{srcStat:n,destStat:s}}function FU(e,t,r,o){let{srcStat:n,destStat:s}=MU(e,t,o);if(s){if(Ba(n,s)){let i=ut.basename(e),c=ut.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&ay(e,t))throw new Error(gf(e,t,r));return{srcStat:n,destStat:s}}async function zR(e,t,r,o){let n=ut.resolve(ut.dirname(e)),s=ut.resolve(ut.dirname(r));if(s===n||s===ut.parse(s).root)return;let i;try{i=await ic.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ba(t,i))throw new Error(gf(e,r,o));return zR(e,t,s,o)}function GR(e,t,r,o){let n=ut.resolve(ut.dirname(e)),s=ut.resolve(ut.dirname(r));if(s===n||s===ut.parse(s).root)return;let i;try{i=ic.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ba(t,i))throw new Error(gf(e,r,o));return GR(e,t,s,o)}function Ba(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function ay(e,t){let r=ut.resolve(e).split(ut.sep).filter(n=>n),o=ut.resolve(t).split(ut.sep).filter(n=>n);return r.every((n,s)=>o[s]===n)}function gf(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}$R.exports={checkPaths:jR(RU),checkPathsSync:FU,checkParentPaths:jR(zR),checkParentPathsSync:GR,isSrcSubdir:ay,areIdentical:Ba}});var QR=H((aee,YR)=>{"use strict";u();var _t=Tt(),Ua=Ve("path"),{mkdirs:TU}=Rr(),{pathExists:AU}=wn(),{utimesMillis:IU}=cy(),ja=js();async function PU(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:o,destStat:n}=await ja.checkPaths(e,t,"copy",r);if(await ja.checkParentPaths(e,o,t,"copy"),!await KR(e,t,r))return;let i=Ua.dirname(t);await AU(i)||await TU(i),await JR(n,e,t,r)}async function KR(e,t,r){return r.filter?r.filter(e,t):!0}async function JR(e,t,r,o){let s=await(o.dereference?_t.stat:_t.lstat)(t);if(s.isDirectory())return qU(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return NU(s,e,t,r,o);if(s.isSymbolicLink())return HU(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function NU(e,t,r,o,n){if(!t)return VR(e,r,o,n);if(n.overwrite)return await _t.unlink(o),VR(e,r,o,n);if(n.errorOnExist)throw new Error(`'${o}' already exists`)}async function VR(e,t,r,o){if(await _t.copyFile(t,r),o.preserveTimestamps){LU(e.mode)&&await DU(r,e.mode);let n=await _t.stat(t);await IU(r,n.atime,n.mtime)}return _t.chmod(r,e.mode)}function LU(e){return(e&128)===0}function DU(e,t){return _t.chmod(e,t|128)}async function qU(e,t,r,o,n){t||await _t.mkdir(o);let s=await _t.readdir(r);await Promise.all(s.map(async i=>{let c=Ua.join(r,i),a=Ua.join(o,i);if(!await KR(c,a,n))return;let{destStat:f}=await ja.checkPaths(c,a,"copy",n);return JR(f,c,a,n)})),t||await _t.chmod(o,e.mode)}async function HU(e,t,r,o){let n=await _t.readlink(t);if(o.dereference&&(n=Ua.resolve(process.cwd(),n)),!e)return _t.symlink(n,r);let s=null;try{s=await _t.readlink(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return _t.symlink(n,r);throw i}if(o.dereference&&(s=Ua.resolve(process.cwd(),s)),ja.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(ja.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await _t.unlink(r),_t.symlink(n,r)}YR.exports=PU});var rF=H((lee,tF)=>{"use strict";u();var At=nc(),za=Ve("path"),WU=Rr().mkdirsSync,BU=cy().utimesMillisSync,Ga=js();function UU(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:o,destStat:n}=Ga.checkPathsSync(e,t,"copy",r);if(Ga.checkParentPathsSync(e,o,t,"copy"),r.filter&&!r.filter(e,t))return;let s=za.dirname(t);return At.existsSync(s)||WU(s),ZR(n,e,t,r)}function ZR(e,t,r,o){let s=(o.dereference?At.statSync:At.lstatSync)(t);if(s.isDirectory())return JU(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return jU(s,e,t,r,o);if(s.isSymbolicLink())return ZU(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function jU(e,t,r,o,n){return t?zU(e,r,o,n):XR(e,r,o,n)}function zU(e,t,r,o){if(o.overwrite)return At.unlinkSync(r),XR(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}function XR(e,t,r,o){return At.copyFileSync(t,r),o.preserveTimestamps&&GU(e.mode,t,r),uy(r,e.mode)}function GU(e,t,r){return $U(e)&&VU(r,e),KU(t,r)}function $U(e){return(e&128)===0}function VU(e,t){return uy(e,t|128)}function uy(e,t){return At.chmodSync(e,t)}function KU(e,t){let r=At.statSync(e);return BU(t,r.atime,r.mtime)}function JU(e,t,r,o,n){return t?eF(r,o,n):YU(e.mode,r,o,n)}function YU(e,t,r,o){return At.mkdirSync(r),eF(t,r,o),uy(r,e)}function eF(e,t,r){At.readdirSync(e).forEach(o=>QU(o,e,t,r))}function QU(e,t,r,o){let n=za.join(t,e),s=za.join(r,e);if(o.filter&&!o.filter(n,s))return;let{destStat:i}=Ga.checkPathsSync(n,s,"copy",o);return ZR(i,n,s,o)}function ZU(e,t,r,o){let n=At.readlinkSync(t);if(o.dereference&&(n=za.resolve(process.cwd(),n)),e){let s;try{s=At.readlinkSync(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return At.symlinkSync(n,r);throw i}if(o.dereference&&(s=za.resolve(process.cwd(),s)),Ga.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Ga.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return XU(n,r)}else return At.symlinkSync(n,r)}function XU(e,t){return At.unlinkSync(t),At.symlinkSync(e,t)}tF.exports=UU});var yf=H((fee,oF)=>{"use strict";u();var ej=at().fromPromise;oF.exports={copy:ej(QR()),copySync:rF()}});var $a=H((hee,sF)=>{"use strict";u();var nF=nc(),tj=at().fromCallback;function rj(e,t){nF.rm(e,{recursive:!0,force:!0},t)}function oj(e){nF.rmSync(e,{recursive:!0,force:!0})}sF.exports={remove:tj(rj),removeSync:oj}});var mF=H((xee,fF)=>{"use strict";u();var nj=at().fromPromise,aF=Tt(),uF=Ve("path"),lF=Rr(),pF=$a(),iF=nj(async function(t){let r;try{r=await aF.readdir(t)}catch{return lF.mkdirs(t)}return Promise.all(r.map(o=>pF.remove(uF.join(t,o))))});function cF(e){let t;try{t=aF.readdirSync(e)}catch{return lF.mkdirsSync(e)}t.forEach(r=>{r=uF.join(e,r),pF.removeSync(r)})}fF.exports={emptyDirSync:cF,emptydirSync:cF,emptyDir:iF,emptydir:iF}});var gF=H((yee,xF)=>{"use strict";u();var sj=at().fromPromise,hF=Ve("path"),Po=Tt(),dF=Rr();async function ij(e){let t;try{t=await Po.stat(e)}catch{}if(t&&t.isFile())return;let r=hF.dirname(e),o=null;try{o=await Po.stat(r)}catch(n){if(n.code==="ENOENT"){await dF.mkdirs(r),await Po.writeFile(e,"");return}else throw n}o.isDirectory()?await Po.writeFile(e,""):await Po.readdir(r)}function cj(e){let t;try{t=Po.statSync(e)}catch{}if(t&&t.isFile())return;let r=hF.dirname(e);try{Po.statSync(r).isDirectory()||Po.readdirSync(r)}catch(o){if(o&&o.code==="ENOENT")dF.mkdirsSync(r);else throw o}Po.writeFileSync(e,"")}xF.exports={createFile:sj(ij),createFileSync:cj}});var EF=H((See,_F)=>{"use strict";u();var aj=at().fromPromise,yF=Ve("path"),Mn=Tt(),bF=Rr(),{pathExists:uj}=wn(),{areIdentical:SF}=js();async function lj(e,t){let r;try{r=await Mn.lstat(t)}catch{}let o;try{o=await Mn.lstat(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}if(r&&SF(o,r))return;let n=yF.dirname(t);await uj(n)||await bF.mkdirs(n),await Mn.link(e,t)}function pj(e,t){let r;try{r=Mn.lstatSync(t)}catch{}try{let s=Mn.lstatSync(e);if(r&&SF(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let o=yF.dirname(t);return Mn.existsSync(o)||bF.mkdirsSync(o),Mn.linkSync(e,t)}_F.exports={createLink:aj(lj),createLinkSync:pj}});var vF=H((Eee,OF)=>{"use strict";u();var Rn=Ve("path"),Va=Tt(),{pathExists:fj}=wn(),mj=at().fromPromise;async function hj(e,t){if(Rn.isAbsolute(e)){try{await Va.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let r=Rn.dirname(t),o=Rn.join(r,e);if(await fj(o))return{toCwd:o,toDst:e};try{await Va.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:Rn.relative(r,e)}}function dj(e,t){if(Rn.isAbsolute(e)){if(!Va.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=Rn.dirname(t),o=Rn.join(r,e);if(Va.existsSync(o))return{toCwd:o,toDst:e};if(!Va.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Rn.relative(r,e)}}OF.exports={symlinkPaths:mj(hj),symlinkPathsSync:dj}});var wF=H((vee,kF)=>{"use strict";u();var CF=Tt(),xj=at().fromPromise;async function gj(e,t){if(t)return t;let r;try{r=await CF.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function yj(e,t){if(t)return t;let r;try{r=CF.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}kF.exports={symlinkType:xj(gj),symlinkTypeSync:yj}});var TF=H((kee,FF)=>{"use strict";u();var bj=at().fromPromise,MF=Ve("path"),ro=Tt(),{mkdirs:Sj,mkdirsSync:_j}=Rr(),{symlinkPaths:Ej,symlinkPathsSync:Oj}=vF(),{symlinkType:vj,symlinkTypeSync:Cj}=wF(),{pathExists:kj}=wn(),{areIdentical:RF}=js();async function wj(e,t,r){let o;try{o=await ro.lstat(t)}catch{}if(o&&o.isSymbolicLink()){let[c,a]=await Promise.all([ro.stat(e),ro.stat(t)]);if(RF(c,a))return}let n=await Ej(e,t);e=n.toDst;let s=await vj(n.toCwd,r),i=MF.dirname(t);return await kj(i)||await Sj(i),ro.symlink(e,t,s)}function Mj(e,t,r){let o;try{o=ro.lstatSync(t)}catch{}if(o&&o.isSymbolicLink()){let c=ro.statSync(e),a=ro.statSync(t);if(RF(c,a))return}let n=Oj(e,t);e=n.toDst,r=Cj(n.toCwd,r);let s=MF.dirname(t);return ro.existsSync(s)||_j(s),ro.symlinkSync(e,t,r)}FF.exports={createSymlink:bj(wj),createSymlinkSync:Mj}});var HF=H((Mee,qF)=>{"use strict";u();var{createFile:AF,createFileSync:IF}=gF(),{createLink:PF,createLinkSync:NF}=EF(),{createSymlink:LF,createSymlinkSync:DF}=TF();qF.exports={createFile:AF,createFileSync:IF,ensureFile:AF,ensureFileSync:IF,createLink:PF,createLinkSync:NF,ensureLink:PF,ensureLinkSync:NF,createSymlink:LF,createSymlinkSync:DF,ensureSymlink:LF,ensureSymlinkSync:DF}});var bf=H((Fee,WF)=>{u();function Rj(e,{EOL:t=`
`,finalEOL:r=!0,replacer:o=null,spaces:n}={}){let s=r?t:"";return JSON.stringify(e,o,n).replace(/\n/g,t)+s}function Fj(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}WF.exports={stringify:Rj,stripBom:Fj}});var zF=H((Aee,jF)=>{u();var cc;try{cc=nc()}catch{cc=Ve("fs")}var Sf=at(),{stringify:BF,stripBom:UF}=bf();async function Tj(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||cc,o="throws"in t?t.throws:!0,n=await Sf.fromCallback(r.readFile)(e,t);n=UF(n);let s;try{s=JSON.parse(n,t?t.reviver:null)}catch(i){if(o)throw i.message=`${e}: ${i.message}`,i;return null}return s}var Aj=Sf.fromPromise(Tj);function Ij(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||cc,o="throws"in t?t.throws:!0;try{let n=r.readFileSync(e,t);return n=UF(n),JSON.parse(n,t.reviver)}catch(n){if(o)throw n.message=`${e}: ${n.message}`,n;return null}}async function Pj(e,t,r={}){let o=r.fs||cc,n=BF(t,r);await Sf.fromCallback(o.writeFile)(e,n,r)}var Nj=Sf.fromPromise(Pj);function Lj(e,t,r={}){let o=r.fs||cc,n=BF(t,r);return o.writeFileSync(e,n,r)}var Dj={readFile:Aj,readFileSync:Ij,writeFile:Nj,writeFileSync:Lj};jF.exports=Dj});var $F=H((Pee,GF)=>{"use strict";u();var _f=zF();GF.exports={readJson:_f.readFile,readJsonSync:_f.readFileSync,writeJson:_f.writeFile,writeJsonSync:_f.writeFileSync}});var Ef=H((Lee,JF)=>{"use strict";u();var qj=at().fromPromise,ly=Tt(),VF=Ve("path"),KF=Rr(),Hj=wn().pathExists;async function Wj(e,t,r="utf-8"){let o=VF.dirname(e);return await Hj(o)||await KF.mkdirs(o),ly.writeFile(e,t,r)}function Bj(e,...t){let r=VF.dirname(e);ly.existsSync(r)||KF.mkdirsSync(r),ly.writeFileSync(e,...t)}JF.exports={outputFile:qj(Wj),outputFileSync:Bj}});var QF=H((qee,YF)=>{"use strict";u();var{stringify:Uj}=bf(),{outputFile:jj}=Ef();async function zj(e,t,r={}){let o=Uj(t,r);await jj(e,o,r)}YF.exports=zj});var XF=H((Wee,ZF)=>{"use strict";u();var{stringify:Gj}=bf(),{outputFileSync:$j}=Ef();function Vj(e,t,r){let o=Gj(t,r);$j(e,o,r)}ZF.exports=Vj});var t2=H((Uee,e2)=>{"use strict";u();var Kj=at().fromPromise,It=$F();It.outputJson=Kj(QF());It.outputJsonSync=XF();It.outputJSON=It.outputJson;It.outputJSONSync=It.outputJsonSync;It.writeJSON=It.writeJson;It.writeJSONSync=It.writeJsonSync;It.readJSON=It.readJson;It.readJSONSync=It.readJsonSync;e2.exports=It});var i2=H((zee,s2)=>{"use strict";u();var Jj=Tt(),r2=Ve("path"),{copy:Yj}=yf(),{remove:n2}=$a(),{mkdirp:Qj}=Rr(),{pathExists:Zj}=wn(),o2=js();async function Xj(e,t,r={}){let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await o2.checkPaths(e,t,"move",r);await o2.checkParentPaths(e,n,t,"move");let i=r2.dirname(t);return r2.parse(i).root!==i&&await Qj(i),ez(e,t,o,s)}async function ez(e,t,r,o){if(!o){if(r)await n2(t);else if(await Zj(t))throw new Error("dest already exists.")}try{await Jj.rename(e,t)}catch(n){if(n.code!=="EXDEV")throw n;await tz(e,t,r)}}async function tz(e,t,r){return await Yj(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),n2(e)}s2.exports=Xj});var p2=H(($ee,l2)=>{"use strict";u();var a2=nc(),fy=Ve("path"),rz=yf().copySync,u2=$a().removeSync,oz=Rr().mkdirpSync,c2=js();function nz(e,t,r){r=r||{};let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=c2.checkPathsSync(e,t,"move",r);return c2.checkParentPathsSync(e,n,t,"move"),sz(t)||oz(fy.dirname(t)),iz(e,t,o,s)}function sz(e){let t=fy.dirname(e);return fy.parse(t).root===t}function iz(e,t,r,o){if(o)return py(e,t,r);if(r)return u2(t),py(e,t,r);if(a2.existsSync(t))throw new Error("dest already exists.");return py(e,t,r)}function py(e,t,r){try{a2.renameSync(e,t)}catch(o){if(o.code!=="EXDEV")throw o;return cz(e,t,r)}}function cz(e,t,r){return rz(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),u2(e)}l2.exports=nz});var m2=H((Kee,f2)=>{"use strict";u();var az=at().fromPromise;f2.exports={move:az(i2()),moveSync:p2()}});var my=H((Yee,h2)=>{"use strict";u();h2.exports={...Tt(),...yf(),...mF(),...HF(),...t2(),...Rr(),...m2(),...Ef(),...wn(),...$a()}});var b2=H((ute,y2)=>{"use strict";u();y2.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var hy=H((pte,_2)=>{u();var Ka=b2(),S2={};for(let e of Object.keys(Ka))S2[Ka[e]]=e;var P={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};_2.exports=P;for(let e of Object.keys(P)){if(!("channels"in P[e]))throw new Error("missing channels property: "+e);if(!("labels"in P[e]))throw new Error("missing channel labels property: "+e);if(P[e].labels.length!==P[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=P[e];delete P[e].channels,delete P[e].labels,Object.defineProperty(P[e],"channels",{value:t}),Object.defineProperty(P[e],"labels",{value:r})}P.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,c,a;s===n?c=0:t===s?c=(r-o)/i:r===s?c=2+(o-t)/i:o===s&&(c=4+(t-r)/i),c=Math.min(c*60,360),c<0&&(c+=360);let p=(n+s)/2;return s===n?a=0:p<=.5?a=i/(s+n):a=i/(2-s-n),[c,a*100,p*100]};P.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,c=e[1]/255,a=e[2]/255,p=Math.max(i,c,a),f=p-Math.min(i,c,a),h=function(d){return(p-d)/6/f+1/2};return f===0?(n=0,s=0):(s=f/p,t=h(i),r=h(c),o=h(a),i===p?n=o-r:c===p?n=1/3+t-o:a===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};P.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=P.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};P.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,c=(1-o-n)/(1-n)||0;return[s*100,i*100,c*100,n*100]};function lz(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}P.rgb.keyword=function(e){let t=S2[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(Ka)){let s=Ka[n],i=lz(e,s);i<r&&(r=i,o=n)}return o};P.keyword.rgb=function(e){return Ka[e]};P.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};P.rgb.lab=function(e){let t=P.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),c=200*(o-n);return[s,i,c]};P.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let c=2*o-n,a=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=c+(n-c)*6*s:2*s<1?i=n:3*s<2?i=c+(n-c)*(2/3-s)*6:i=c,a[p]=i*255;return a};P.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,c=o===0?2*n/(s+n):2*r/(o+r);return[t,c*100,i*100]};P.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),c=255*o*(1-r*s),a=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,a,i];case 1:return[c,o,i];case 2:return[i,o,a];case 3:return[i,c,o];case 4:return[a,i,o];case 5:return[o,i,c]}};P.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let c=(2-r)*n;return s=r*n,s/=c<=1?c:2-c,s=s||0,i/=2,[t,s*100,i*100]};P.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),c=1-o;s=6*t-i,i&1&&(s=1-s);let a=r+s*(c-r),p,f,h;switch(i){default:case 6:case 0:p=c,f=a,h=r;break;case 1:p=a,f=c,h=r;break;case 2:p=r,f=c,h=a;break;case 3:p=r,f=a,h=c;break;case 4:p=a,f=r,h=c;break;case 5:p=c,f=r,h=a;break}return[p*255,f*255,h*255]};P.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),c=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,c*255]};P.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};P.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};P.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let c=s**3,a=n**3,p=i**3;return s=c>.008856?c:(s-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};P.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};P.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};P.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?P.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};P.hsv.ansi16=function(e){return P.rgb.ansi16(P.hsv.rgb(e),e[2])};P.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};P.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};P.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};P.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};P.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(c=>c+c).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};P.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,c,a;return i<1?c=s/(1-i):c=0,i<=0?a=0:n===t?a=(r-o)/i%6:n===r?a=2+(o-t)/i:a=4+(t-r)/i,a/=6,a%=1,[a*360,i*100,c*100]};P.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};P.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};P.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,c=1-i,a=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=c,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=c,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=c}return a=(1-r)*o,[(r*n[0]+a)*255,(r*n[1]+a)*255,(r*n[2]+a)*255]};P.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};P.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};P.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};P.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};P.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};P.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};P.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};P.gray.hsl=function(e){return[0,0,e[0]]};P.gray.hsv=P.gray.hsl;P.gray.hwb=function(e){return[0,100,e[0]]};P.gray.cmyk=function(e){return[0,0,0,e[0]]};P.gray.lab=function(e){return[e[0],0,0]};P.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};P.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var O2=H((mte,E2)=>{u();var Cf=hy();function pz(){let e={},t=Object.keys(Cf);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function fz(e){let t=pz(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(Cf[o]);for(let s=n.length,i=0;i<s;i++){let c=n[i],a=t[c];a.distance===-1&&(a.distance=t[o].distance+1,a.parent=o,r.unshift(c))}}return t}function mz(e,t){return function(r){return t(e(r))}}function hz(e,t){let r=[t[e].parent,e],o=Cf[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=mz(Cf[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}E2.exports=function(e){let t=fz(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=hz(i,t))}return r}});var C2=H((dte,v2)=>{u();var dy=hy(),dz=O2(),uc={},xz=Object.keys(dy);function gz(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function yz(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}xz.forEach(e=>{uc[e]={},Object.defineProperty(uc[e],"channels",{value:dy[e].channels}),Object.defineProperty(uc[e],"labels",{value:dy[e].labels});let t=dz(e);Object.keys(t).forEach(o=>{let n=t[o];uc[e][o]=yz(n),uc[e][o].raw=gz(n)})});v2.exports=uc});var T2=H((gte,F2)=>{"use strict";u();var k2=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,w2=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},M2=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},kf=e=>e,R2=(e,t,r)=>[e,t,r],lc=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},xy,pc=(e,t,r,o)=>{xy===void 0&&(xy=C2());let n=o?10:0,s={};for(let[i,c]of Object.entries(xy)){let a=i==="ansi16"?"ansi":i;i===t?s[a]=e(r,n):typeof c=="object"&&(s[a]=e(c[t],n))}return s};function bz(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",lc(t.color,"ansi",()=>pc(k2,"ansi16",kf,!1)),lc(t.color,"ansi256",()=>pc(w2,"ansi256",kf,!1)),lc(t.color,"ansi16m",()=>pc(M2,"rgb",R2,!1)),lc(t.bgColor,"ansi",()=>pc(k2,"ansi16",kf,!0)),lc(t.bgColor,"ansi256",()=>pc(w2,"ansi256",kf,!0)),lc(t.bgColor,"ansi16m",()=>pc(M2,"rgb",R2,!0)),t}Object.defineProperty(F2,"exports",{enumerable:!0,get:bz})});var I2=H((bte,A2)=>{"use strict";u();A2.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}});var L2=H((_te,N2)=>{"use strict";u();var Sz=Ve("os"),P2=Ve("tty"),hr=I2(),{env:lt}=process,Fn;hr("no-color")||hr("no-colors")||hr("color=false")||hr("color=never")?Fn=0:(hr("color")||hr("colors")||hr("color=true")||hr("color=always"))&&(Fn=1);"FORCE_COLOR"in lt&&(lt.FORCE_COLOR==="true"?Fn=1:lt.FORCE_COLOR==="false"?Fn=0:Fn=lt.FORCE_COLOR.length===0?1:Math.min(parseInt(lt.FORCE_COLOR,10),3));function gy(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function yy(e,t){if(Fn===0)return 0;if(hr("color=16m")||hr("color=full")||hr("color=truecolor"))return 3;if(hr("color=256"))return 2;if(e&&!t&&Fn===void 0)return 0;let r=Fn||0;if(lt.TERM==="dumb")return r;if(process.platform==="win32"){let o=Sz.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in lt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in lt)||lt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in lt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(lt.TEAMCITY_VERSION)?1:0;if(lt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in lt){let o=parseInt((lt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(lt.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(lt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(lt.TERM)||"COLORTERM"in lt?1:r}function _z(e){let t=yy(e,e&&e.isTTY);return gy(t)}N2.exports={supportsColor:_z,stdout:gy(yy(!0,P2.isatty(1))),stderr:gy(yy(!0,P2.isatty(2)))}});var q2=H((Ote,D2)=>{"use strict";u();var Ez=(e,t,r)=>{let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.substr(s,o-s)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.substr(s),i},Oz=(e,t,r,o)=>{let n=0,s="";do{let i=e[o-1]==="\r";s+=e.substr(n,(i?o-1:o)-n)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.substr(n),s};D2.exports={stringReplaceAll:Ez,stringEncaseCRLFWithFirstIndex:Oz}});var j2=H((Cte,U2)=>{"use strict";u();var vz=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,H2=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Cz=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,kz=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,wz=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function B2(e){let t=e[0]==="u",r=e[1]==="{";return t&&!r&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):wz.get(e)||e}function Mz(e,t){let r=[],o=t.trim().split(/\s*,\s*/g),n;for(let s of o){let i=Number(s);if(!Number.isNaN(i))r.push(i);else if(n=s.match(Cz))r.push(n[2].replace(kz,(c,a,p)=>a?B2(a):p));else throw new Error(`Invalid Chalk template style argument: ${s} (in style '${e}')`)}return r}function Rz(e){H2.lastIndex=0;let t=[],r;for(;(r=H2.exec(e))!==null;){let o=r[1];if(r[2]){let n=Mz(o,r[2]);t.push([o].concat(n))}else t.push([o])}return t}function W2(e,t){let r={};for(let n of t)for(let s of n.styles)r[s[0]]=n.inverse?null:s.slice(1);let o=e;for(let[n,s]of Object.entries(r))if(Array.isArray(s)){if(!(n in o))throw new Error(`Unknown Chalk style: ${n}`);o=s.length>0?o[n](...s):o[n]}return o}U2.exports=(e,t)=>{let r=[],o=[],n=[];if(t.replace(vz,(s,i,c,a,p,f)=>{if(i)n.push(B2(i));else if(a){let h=n.join("");n=[],o.push(r.length===0?h:W2(e,r)(h)),r.push({inverse:c,styles:Rz(a)})}else if(p){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");o.push(W2(e,r)(n.join(""))),n=[],r.pop()}else n.push(f)}),o.push(n.join("")),r.length>0){let s=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(s)}return o.join("")}});var Y2=H((wte,J2)=>{"use strict";u();var Ja=T2(),{stdout:Sy,stderr:_y}=L2(),{stringReplaceAll:Fz,stringEncaseCRLFWithFirstIndex:Tz}=q2(),{isArray:wf}=Array,G2=["ansi","ansi","ansi256","ansi16m"],fc=Object.create(null),Az=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=Sy?Sy.level:0;e.level=t.level===void 0?r:t.level},Ey=class{constructor(t){return $2(t)}},$2=e=>{let t={};return Az(t,e),t.template=(...r)=>K2(t.template,...r),Object.setPrototypeOf(t,Mf.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=Ey,t.template};function Mf(e){return $2(e)}for(let[e,t]of Object.entries(Ja))fc[e]={get(){let r=Rf(this,Oy(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};fc.visible={get(){let e=Rf(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};var V2=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let e of V2)fc[e]={get(){let{level:t}=this;return function(...r){let o=Oy(Ja.color[G2[t]][e](...r),Ja.color.close,this._styler);return Rf(this,o,this._isEmpty)}}};for(let e of V2){let t="bg"+e[0].toUpperCase()+e.slice(1);fc[t]={get(){let{level:r}=this;return function(...o){let n=Oy(Ja.bgColor[G2[r]][e](...o),Ja.bgColor.close,this._styler);return Rf(this,n,this._isEmpty)}}}}var Iz=Object.defineProperties(()=>{},{...fc,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),Oy=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},Rf=(e,t,r)=>{let o=(...n)=>wf(n[0])&&wf(n[0].raw)?z2(o,K2(o,...n)):z2(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Iz),o._generator=e,o._styler=t,o._isEmpty=r,o},z2=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.indexOf("\x1B")!==-1)for(;r!==void 0;)t=Fz(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=Tz(t,n,o,s)),o+t+n},by,K2=(e,...t)=>{let[r]=t;if(!wf(r)||!wf(r.raw))return t.join(" ");let o=t.slice(1),n=[r.raw[0]];for(let s=1;s<r.length;s++)n.push(String(o[s-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[s]));return by===void 0&&(by=j2()),by(e,n.join(""))};Object.defineProperties(Mf.prototype,fc);var Ff=Mf();Ff.supportsColor=Sy;Ff.stderr=Mf({level:_y?_y.level:0});Ff.stderr.supportsColor=_y;J2.exports=Ff});var Z2=H(vy=>{u();var Q2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");vy.encode=function(e){if(0<=e&&e<Q2.length)return Q2[e];throw new TypeError("Must be between 0 and 63: "+e)};vy.decode=function(e){var t=65,r=90,o=97,n=122,s=48,i=57,c=43,a=47,p=26,f=52;return t<=e&&e<=r?e-t:o<=e&&e<=n?e-o+p:s<=e&&e<=i?e-s+f:e==c?62:e==a?63:-1}});var wy=H(ky=>{u();var X2=Z2(),Cy=5,eT=1<<Cy,tT=eT-1,rT=eT;function Pz(e){return e<0?(-e<<1)+1:(e<<1)+0}function Nz(e){var t=(e&1)===1,r=e>>1;return t?-r:r}ky.encode=function(t){var r="",o,n=Pz(t);do o=n&tT,n>>>=Cy,n>0&&(o|=rT),r+=X2.encode(o);while(n>0);return r};ky.decode=function(t,r,o){var n=t.length,s=0,i=0,c,a;do{if(r>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(a=X2.decode(t.charCodeAt(r++)),a===-1)throw new Error("Invalid base64 digit: "+t.charAt(r-1));c=!!(a&rT),a&=tT,s=s+(a<<i),i+=Cy}while(c);o.value=Nz(s),o.rest=r}});var hc=H(pt=>{u();function Lz(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}pt.getArg=Lz;var oT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Dz=/^data:.+\,.+$/;function Ya(e){var t=e.match(oT);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}pt.urlParse=Ya;function mc(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}pt.urlGenerate=mc;var qz=32;function Hz(e){var t=[];return function(r){for(var o=0;o<t.length;o++)if(t[o].input===r){var n=t[0];return t[0]=t[o],t[o]=n,t[0].result}var s=e(r);return t.unshift({input:r,result:s}),t.length>qz&&t.pop(),s}}var My=Hz(function(t){var r=t,o=Ya(t);if(o){if(!o.path)return t;r=o.path}for(var n=pt.isAbsolute(r),s=[],i=0,c=0;;)if(i=c,c=r.indexOf("/",i),c===-1){s.push(r.slice(i));break}else for(s.push(r.slice(i,c));c<r.length&&r[c]==="/";)c++;for(var a,p=0,c=s.length-1;c>=0;c--)a=s[c],a==="."?s.splice(c,1):a===".."?p++:p>0&&(a===""?(s.splice(c+1,p),p=0):(s.splice(c,2),p--));return r=s.join("/"),r===""&&(r=n?"/":"."),o?(o.path=r,mc(o)):r});pt.normalize=My;function nT(e,t){e===""&&(e="."),t===""&&(t=".");var r=Ya(t),o=Ya(e);if(o&&(e=o.path||"/"),r&&!r.scheme)return o&&(r.scheme=o.scheme),mc(r);if(r||t.match(Dz))return t;if(o&&!o.host&&!o.path)return o.host=t,mc(o);var n=t.charAt(0)==="/"?t:My(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=n,mc(o)):n}pt.join=nT;pt.isAbsolute=function(e){return e.charAt(0)==="/"||oT.test(e)};function Wz(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var r=0;t.indexOf(e+"/")!==0;){var o=e.lastIndexOf("/");if(o<0||(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/)))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}pt.relative=Wz;var sT=function(){var e=Object.create(null);return!("__proto__"in e)}();function iT(e){return e}function Bz(e){return cT(e)?"$"+e:e}pt.toSetString=sT?iT:Bz;function Uz(e){return cT(e)?e.slice(1):e}pt.fromSetString=sT?iT:Uz;function cT(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}function jz(e,t,r){var o=No(e.source,t.source);return o!==0||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:No(e.name,t.name)}pt.compareByOriginalPositions=jz;function zz(e,t,r){var o;return o=e.originalLine-t.originalLine,o!==0||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:No(e.name,t.name)}pt.compareByOriginalPositionsNoSource=zz;function Gz(e,t,r){var o=e.generatedLine-t.generatedLine;return o!==0||(o=e.generatedColumn-t.generatedColumn,o!==0||r)||(o=No(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:No(e.name,t.name)}pt.compareByGeneratedPositionsDeflated=Gz;function $z(e,t,r){var o=e.generatedColumn-t.generatedColumn;return o!==0||r||(o=No(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:No(e.name,t.name)}pt.compareByGeneratedPositionsDeflatedNoLine=$z;function No(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}function Vz(e,t){var r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=No(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:No(e.name,t.name)}pt.compareByGeneratedPositionsInflated=Vz;function Kz(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}pt.parseSourceMapInput=Kz;function Jz(e,t,r){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),r){var o=Ya(r);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var n=o.path.lastIndexOf("/");n>=0&&(o.path=o.path.substring(0,n+1))}t=nT(mc(o),t)}return My(t)}pt.computeSourceURL=Jz});var Ty=H(aT=>{u();var Ry=hc(),Fy=Object.prototype.hasOwnProperty,zs=typeof Map<"u";function Lo(){this._array=[],this._set=zs?new Map:Object.create(null)}Lo.fromArray=function(t,r){for(var o=new Lo,n=0,s=t.length;n<s;n++)o.add(t[n],r);return o};Lo.prototype.size=function(){return zs?this._set.size:Object.getOwnPropertyNames(this._set).length};Lo.prototype.add=function(t,r){var o=zs?t:Ry.toSetString(t),n=zs?this.has(t):Fy.call(this._set,o),s=this._array.length;(!n||r)&&this._array.push(t),n||(zs?this._set.set(t,s):this._set[o]=s)};Lo.prototype.has=function(t){if(zs)return this._set.has(t);var r=Ry.toSetString(t);return Fy.call(this._set,r)};Lo.prototype.indexOf=function(t){if(zs){var r=this._set.get(t);if(r>=0)return r}else{var o=Ry.toSetString(t);if(Fy.call(this._set,o))return this._set[o]}throw new Error('"'+t+'" is not in the set.')};Lo.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};Lo.prototype.toArray=function(){return this._array.slice()};aT.ArraySet=Lo});var pT=H(lT=>{u();var uT=hc();function Yz(e,t){var r=e.generatedLine,o=t.generatedLine,n=e.generatedColumn,s=t.generatedColumn;return o>r||o==r&&s>=n||uT.compareByGeneratedPositionsInflated(e,t)<=0}function Tf(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Tf.prototype.unsortedForEach=function(t,r){this._array.forEach(t,r)};Tf.prototype.add=function(t){Yz(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};Tf.prototype.toArray=function(){return this._sorted||(this._array.sort(uT.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};lT.MappingList=Tf});var Ay=H(fT=>{u();var Qa=wy(),$e=hc(),Af=Ty().ArraySet,Qz=pT().MappingList;function dr(e){e||(e={}),this._file=$e.getArg(e,"file",null),this._sourceRoot=$e.getArg(e,"sourceRoot",null),this._skipValidation=$e.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=$e.getArg(e,"ignoreInvalidMapping",!1),this._sources=new Af,this._names=new Af,this._mappings=new Qz,this._sourcesContents=null}dr.prototype._version=3;dr.fromSourceMap=function(t,r){var o=t.sourceRoot,n=new dr(Object.assign(r||{},{file:t.file,sourceRoot:o}));return t.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,o!=null&&(i.source=$e.relative(o,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),t.sources.forEach(function(s){var i=s;o!==null&&(i=$e.relative(o,s)),n._sources.has(i)||n._sources.add(i);var c=t.sourceContentFor(s);c!=null&&n.setSourceContent(s,c)}),n};dr.prototype.addMapping=function(t){var r=$e.getArg(t,"generated"),o=$e.getArg(t,"original",null),n=$e.getArg(t,"source",null),s=$e.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(r,o,n,s)===!1||(n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:n,name:s}))};dr.prototype.setSourceContent=function(t,r){var o=t;this._sourceRoot!=null&&(o=$e.relative(this._sourceRoot,o)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[$e.toSetString(o)]=r):this._sourcesContents&&(delete this._sourcesContents[$e.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};dr.prototype.applySourceMap=function(t,r,o){var n=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=t.file}var s=this._sourceRoot;s!=null&&(n=$e.relative(s,n));var i=new Af,c=new Af;this._mappings.unsortedForEach(function(a){if(a.source===n&&a.originalLine!=null){var p=t.originalPositionFor({line:a.originalLine,column:a.originalColumn});p.source!=null&&(a.source=p.source,o!=null&&(a.source=$e.join(o,a.source)),s!=null&&(a.source=$e.relative(s,a.source)),a.originalLine=p.line,a.originalColumn=p.column,p.name!=null&&(a.name=p.name))}var f=a.source;f!=null&&!i.has(f)&&i.add(f);var h=a.name;h!=null&&!c.has(h)&&c.add(h)},this),this._sources=i,this._names=c,t.sources.forEach(function(a){var p=t.sourceContentFor(a);p!=null&&(o!=null&&(a=$e.join(o,a)),s!=null&&(a=$e.relative(s,a)),this.setSourceContent(a,p))},this)};dr.prototype._validateMapping=function(t,r,o,n){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!o&&!n)){if(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&o)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:o,original:r,name:n});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};dr.prototype._serializeMappings=function(){for(var t=0,r=1,o=0,n=0,s=0,i=0,c="",a,p,f,h,d=this._mappings.toArray(),g=0,b=d.length;g<b;g++){if(p=d[g],a="",p.generatedLine!==r)for(t=0;p.generatedLine!==r;)a+=";",r++;else if(g>0){if(!$e.compareByGeneratedPositionsInflated(p,d[g-1]))continue;a+=","}a+=Qa.encode(p.generatedColumn-t),t=p.generatedColumn,p.source!=null&&(h=this._sources.indexOf(p.source),a+=Qa.encode(h-i),i=h,a+=Qa.encode(p.originalLine-1-n),n=p.originalLine-1,a+=Qa.encode(p.originalColumn-o),o=p.originalColumn,p.name!=null&&(f=this._names.indexOf(p.name),a+=Qa.encode(f-s),s=f)),c+=a}return c};dr.prototype._generateSourcesContent=function(t,r){return t.map(function(o){if(!this._sourcesContents)return null;r!=null&&(o=$e.relative(r,o));var n=$e.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};dr.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};dr.prototype.toString=function(){return JSON.stringify(this.toJSON())};fT.SourceMapGenerator=dr});var mT=H(Gs=>{u();Gs.GREATEST_LOWER_BOUND=1;Gs.LEAST_UPPER_BOUND=2;function Iy(e,t,r,o,n,s){var i=Math.floor((t-e)/2)+e,c=n(r,o[i],!0);return c===0?i:c>0?t-i>1?Iy(i,t,r,o,n,s):s==Gs.LEAST_UPPER_BOUND?t<o.length?t:-1:i:i-e>1?Iy(e,i,r,o,n,s):s==Gs.LEAST_UPPER_BOUND?i:e<0?-1:e}Gs.search=function(t,r,o,n){if(r.length===0)return-1;var s=Iy(-1,r.length,t,r,o,n||Gs.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&o(r[s],r[s-1],!0)===0;)--s;return s}});var xT=H(dT=>{u();function Zz(e){function t(n,s,i){var c=n[s];n[s]=n[i],n[i]=c}function r(n,s){return Math.round(n+Math.random()*(s-n))}function o(n,s,i,c){if(i<c){var a=r(i,c),p=i-1;t(n,a,c);for(var f=n[c],h=i;h<c;h++)s(n[h],f,!1)<=0&&(p+=1,t(n,p,h));t(n,p+1,h);var d=p+1;o(n,s,i,d-1),o(n,s,d+1,c)}}return o}function Xz(e){let t=Zz.toString();return new Function(`return ${t}`)()(e)}var hT=new WeakMap;dT.quickSort=function(e,t,r=0){let o=hT.get(t);o===void 0&&(o=Xz(t),hT.set(t,o)),o(e,t,r,e.length-1)}});var bT=H(If=>{u();var A=hc(),Ny=mT(),dc=Ty().ArraySet,eG=wy(),Za=xT().quickSort;function Ce(e,t){var r=e;return typeof e=="string"&&(r=A.parseSourceMapInput(e)),r.sections!=null?new Fr(r,t):new gt(r,t)}Ce.fromSourceMap=function(e,t){return gt.fromSourceMap(e,t)};Ce.prototype._version=3;Ce.prototype.__generatedMappings=null;Object.defineProperty(Ce.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Ce.prototype.__originalMappings=null;Object.defineProperty(Ce.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Ce.prototype._charIsMappingSeparator=function(t,r){var o=t.charAt(r);return o===";"||o===","};Ce.prototype._parseMappings=function(t,r){throw new Error("Subclasses must implement _parseMappings")};Ce.GENERATED_ORDER=1;Ce.ORIGINAL_ORDER=2;Ce.GREATEST_LOWER_BOUND=1;Ce.LEAST_UPPER_BOUND=2;Ce.prototype.eachMapping=function(t,r,o){var n=r||null,s=o||Ce.GENERATED_ORDER,i;switch(s){case Ce.GENERATED_ORDER:i=this._generatedMappings;break;case Ce.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var c=this.sourceRoot,a=t.bind(n),p=this._names,f=this._sources,h=this._sourceMapURL,d=0,g=i.length;d<g;d++){var b=i[d],M=b.source===null?null:f.at(b.source);M=A.computeSourceURL(c,M,h),a({source:M,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:p.at(b.name)})}};Ce.prototype.allGeneratedPositionsFor=function(t){var r=A.getArg(t,"line"),o={source:A.getArg(t,"source"),originalLine:r,originalColumn:A.getArg(t,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var n=[],s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,Ny.LEAST_UPPER_BOUND);if(s>=0){var i=this._originalMappings[s];if(t.column===void 0)for(var c=i.originalLine;i&&i.originalLine===c;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s];else for(var a=i.originalColumn;i&&i.originalLine===r&&i.originalColumn==a;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s]}return n};If.SourceMapConsumer=Ce;function gt(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sources"),s=A.getArg(r,"names",[]),i=A.getArg(r,"sourceRoot",null),c=A.getArg(r,"sourcesContent",null),a=A.getArg(r,"mappings"),p=A.getArg(r,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i&&(i=A.normalize(i)),n=n.map(String).map(A.normalize).map(function(f){return i&&A.isAbsolute(i)&&A.isAbsolute(f)?A.relative(i,f):f}),this._names=dc.fromArray(s.map(String),!0),this._sources=dc.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(f){return A.computeSourceURL(i,f,t)}),this.sourceRoot=i,this.sourcesContent=c,this._mappings=a,this._sourceMapURL=t,this.file=p}gt.prototype=Object.create(Ce.prototype);gt.prototype.consumer=Ce;gt.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=A.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1};gt.fromSourceMap=function(t,r){var o=Object.create(gt.prototype),n=o._names=dc.fromArray(t._names.toArray(),!0),s=o._sources=dc.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(g){return A.computeSourceURL(o.sourceRoot,g,r)});for(var i=t._mappings.toArray().slice(),c=o.__generatedMappings=[],a=o.__originalMappings=[],p=0,f=i.length;p<f;p++){var h=i[p],d=new yT;d.generatedLine=h.generatedLine,d.generatedColumn=h.generatedColumn,h.source&&(d.source=s.indexOf(h.source),d.originalLine=h.originalLine,d.originalColumn=h.originalColumn,h.name&&(d.name=n.indexOf(h.name)),a.push(d)),c.push(d)}return Za(o.__originalMappings,A.compareByOriginalPositions),o};gt.prototype._version=3;Object.defineProperty(gt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function yT(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var Py=A.compareByGeneratedPositionsDeflatedNoLine;function gT(e,t){let r=e.length,o=e.length-t;if(!(o<=1))if(o==2){let n=e[t],s=e[t+1];Py(n,s)>0&&(e[t]=s,e[t+1]=n)}else if(o<20)for(let n=t;n<r;n++)for(let s=n;s>t;s--){let i=e[s-1],c=e[s];if(Py(i,c)<=0)break;e[s-1]=c,e[s]=i}else Za(e,Py,t)}gt.prototype._parseMappings=function(t,r){var o=1,n=0,s=0,i=0,c=0,a=0,p=t.length,f=0,h={},d={},g=[],b=[],M,T,L,J,ue;let Ee=0;for(;f<p;)if(t.charAt(f)===";")o++,f++,n=0,gT(b,Ee),Ee=b.length;else if(t.charAt(f)===",")f++;else{for(M=new yT,M.generatedLine=o,J=f;J<p&&!this._charIsMappingSeparator(t,J);J++);for(T=t.slice(f,J),L=[];f<J;)eG.decode(t,f,d),ue=d.value,f=d.rest,L.push(ue);if(L.length===2)throw new Error("Found a source, but no line and column");if(L.length===3)throw new Error("Found a source and line, but no column");if(M.generatedColumn=n+L[0],n=M.generatedColumn,L.length>1&&(M.source=c+L[1],c+=L[1],M.originalLine=s+L[2],s=M.originalLine,M.originalLine+=1,M.originalColumn=i+L[3],i=M.originalColumn,L.length>4&&(M.name=a+L[4],a+=L[4])),b.push(M),typeof M.originalLine=="number"){let er=M.source;for(;g.length<=er;)g.push(null);g[er]===null&&(g[er]=[]),g[er].push(M)}}gT(b,Ee),this.__generatedMappings=b;for(var ft=0;ft<g.length;ft++)g[ft]!=null&&Za(g[ft],A.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...g)};gt.prototype._findMapping=function(t,r,o,n,s,i){if(t[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[o]);if(t[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[n]);return Ny.search(t,r,s,i)};gt.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var r=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var o=this._generatedMappings[t+1];if(r.generatedLine===o.generatedLine){r.lastGeneratedColumn=o.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};gt.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",A.compareByGeneratedPositionsDeflated,A.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(o>=0){var n=this._generatedMappings[o];if(n.generatedLine===r.generatedLine){var s=A.getArg(n,"source",null);s!==null&&(s=this._sources.at(s),s=A.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var i=A.getArg(n,"name",null);return i!==null&&(i=this._names.at(i)),{source:s,line:A.getArg(n,"originalLine",null),column:A.getArg(n,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}};gt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1};gt.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;var o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];var n=t;this.sourceRoot!=null&&(n=A.relative(this.sourceRoot,n));var s;if(this.sourceRoot!=null&&(s=A.urlParse(this.sourceRoot))){var i=n.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!s.path||s.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(r)return null;throw new Error('"'+n+'" is not in the SourceMap.')};gt.prototype.generatedPositionFor=function(t){var r=A.getArg(t,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var o={source:r,originalLine:A.getArg(t,"line"),originalColumn:A.getArg(t,"column")},n=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,A.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(n>=0){var s=this._originalMappings[n];if(s.source===o.source)return{line:A.getArg(s,"generatedLine",null),column:A.getArg(s,"generatedColumn",null),lastColumn:A.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};If.BasicSourceMapConsumer=gt;function Fr(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new dc,this._names=new dc;var s={line:-1,column:0};this._sections=n.map(function(i){if(i.url)throw new Error("Support for url field in sections not implemented.");var c=A.getArg(i,"offset"),a=A.getArg(c,"line"),p=A.getArg(c,"column");if(a<s.line||a===s.line&&p<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=c,{generatedOffset:{generatedLine:a+1,generatedColumn:p+1},consumer:new Ce(A.getArg(i,"map"),t)}})}Fr.prototype=Object.create(Ce.prototype);Fr.prototype.constructor=Ce;Fr.prototype._version=3;Object.defineProperty(Fr.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}});Fr.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=Ny.search(r,this._sections,function(s,i){var c=s.generatedLine-i.generatedOffset.generatedLine;return c||s.generatedColumn-i.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:r.generatedLine-(n.generatedOffset.generatedLine-1),column:r.generatedColumn-(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}};Fr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})};Fr.prototype.sourceContentFor=function(t,r){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],s=n.consumer.sourceContentFor(t,!0);if(s||s==="")return s}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')};Fr.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var o=this._sections[r];if(o.consumer._findSourceIndex(A.getArg(t,"source"))!==-1){var n=o.consumer.generatedPositionFor(t);if(n){var s={line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}};Fr.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],s=n.consumer._generatedMappings,i=0;i<s.length;i++){var c=s[i],a=n.consumer._sources.at(c.source);a=A.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var p=null;c.name&&(p=n.consumer._names.at(c.name),this._names.add(p),p=this._names.indexOf(p));var f={source:a,generatedLine:c.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(n.generatedOffset.generatedLine===c.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:p};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}Za(this.__generatedMappings,A.compareByGeneratedPositionsDeflated),Za(this.__originalMappings,A.compareByOriginalPositions)};If.IndexedSourceMapConsumer=Fr});var _T=H(ST=>{u();var tG=Ay().SourceMapGenerator,Pf=hc(),rG=/(\r?\n)/,oG=10,xc="$$$isSourceNode$$$";function Xt(e,t,r,o,n){this.children=[],this.sourceContents={},this.line=e??null,this.column=t??null,this.source=r??null,this.name=n??null,this[xc]=!0,o!=null&&this.add(o)}Xt.fromStringWithSourceMap=function(t,r,o){var n=new Xt,s=t.split(rG),i=0,c=function(){var d=b(),g=b()||"";return d+g;function b(){return i<s.length?s[i++]:void 0}},a=1,p=0,f=null;return r.eachMapping(function(d){if(f!==null)if(a<d.generatedLine)h(f,c()),a++,p=0;else{var g=s[i]||"",b=g.substr(0,d.generatedColumn-p);s[i]=g.substr(d.generatedColumn-p),p=d.generatedColumn,h(f,b),f=d;return}for(;a<d.generatedLine;)n.add(c()),a++;if(p<d.generatedColumn){var g=s[i]||"";n.add(g.substr(0,d.generatedColumn)),s[i]=g.substr(d.generatedColumn),p=d.generatedColumn}f=d},this),i<s.length&&(f&&h(f,c()),n.add(s.splice(i).join(""))),r.sources.forEach(function(d){var g=r.sourceContentFor(d);g!=null&&(o!=null&&(d=Pf.join(o,d)),n.setSourceContent(d,g))}),n;function h(d,g){if(d===null||d.source===void 0)n.add(g);else{var b=o?Pf.join(o,d.source):d.source;n.add(new Xt(d.originalLine,d.originalColumn,b,g,d.name))}}};Xt.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[xc]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Xt.prototype.prepend=function(t){if(Array.isArray(t))for(var r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[xc]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Xt.prototype.walk=function(t){for(var r,o=0,n=this.children.length;o<n;o++)r=this.children[o],r[xc]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Xt.prototype.join=function(t){var r,o,n=this.children.length;if(n>0){for(r=[],o=0;o<n-1;o++)r.push(this.children[o]),r.push(t);r.push(this.children[o]),this.children=r}return this};Xt.prototype.replaceRight=function(t,r){var o=this.children[this.children.length-1];return o[xc]?o.replaceRight(t,r):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,r):this.children.push("".replace(t,r)),this};Xt.prototype.setSourceContent=function(t,r){this.sourceContents[Pf.toSetString(t)]=r};Xt.prototype.walkSourceContents=function(t){for(var r=0,o=this.children.length;r<o;r++)this.children[r][xc]&&this.children[r].walkSourceContents(t);for(var n=Object.keys(this.sourceContents),r=0,o=n.length;r<o;r++)t(Pf.fromSetString(n[r]),this.sourceContents[n[r]])};Xt.prototype.toString=function(){var t="";return this.walk(function(r){t+=r}),t};Xt.prototype.toStringWithSourceMap=function(t){var r={code:"",line:1,column:0},o=new tG(t),n=!1,s=null,i=null,c=null,a=null;return this.walk(function(p,f){r.code+=p,f.source!==null&&f.line!==null&&f.column!==null?((s!==f.source||i!==f.line||c!==f.column||a!==f.name)&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),s=f.source,i=f.line,c=f.column,a=f.name,n=!0):n&&(o.addMapping({generated:{line:r.line,column:r.column}}),s=null,n=!1);for(var h=0,d=p.length;h<d;h++)p.charCodeAt(h)===oG?(r.line++,r.column=0,h+1===d?(s=null,n=!1):n&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(p,f){o.setSourceContent(p,f)}),{code:r.code,map:o}};ST.SourceNode=Xt});var ET=H(Nf=>{u();Nf.SourceMapGenerator=Ay().SourceMapGenerator;Nf.SourceMapConsumer=bT().SourceMapConsumer;Nf.SourceNode=_T().SourceNode});u();u();u();var Vs=e=>typeof e=="function",l=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(c){return t(c,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var z=e=>e;var Ks=e=>()=>e,qo=Ks(!0),oo=Ks(!1),qf=Ks(null),tu=Ks(void 0),Ho=tu;function m(e,t,r,o,n,s,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return c(i(s(n(o(r(t(e)))))));case 9:return a(c(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let f=1;f<arguments.length;f++)p=arguments[f](p);return p}}}u();u();u();var Js=e=>(t,r)=>t===r||e(t,r);var qy=l(2,(e,t)=>Js((r,o)=>e(t(r),t(o))));var Hy=e=>Js((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});u();var ru=e=>l(3,(t,r,o)=>e(t,n=>Object.assign({},n,{[r]:o(n)}))),ou=e=>l(2,(t,r)=>e(t,o=>({[r]:o}))),nu=(e,t)=>l(3,(r,o,n)=>t(r,s=>e(n(s),i=>Object.assign({},s,{[o]:i}))));u();u();u();u();u();var jT="3.6.0",Tn=()=>jT;var Bf=Symbol.for(`effect/GlobalValue/globalStoreId/${Tn()}`);Bf in globalThis||(globalThis[Bf]=new Map);var Wf=globalThis[Bf],W=(e,t)=>(Wf.has(e)||Wf.set(e,t()),Wf.get(e));u();var su=e=>typeof e=="string",yc=e=>typeof e=="number";var By=e=>typeof e=="bigint";var Wo=Vs;var GT=e=>typeof e=="object"&&e!==null,An=e=>GT(e)||Wo(e),k=l(2,(e,t)=>An(e)&&t in e),In=l(2,(e,t)=>k(e,"_tag")&&e._tag===t),Pn=e=>e==null;var xr=e=>k(e,Symbol.iterator);var Uf=e=>k(e,"then")&&Wo(e.then);u();u();var Nn=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var jf=Symbol.for("effect/Gen/GenKind"),$f=e=>An(e)&&jf in e,zf=class{value;constructor(t){this.value=t}get _F(){return z}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[jf]=jf;[Symbol.iterator](){return new bc(this)}},bc=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var jy=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new zf(e)},$T=335903614,VT=4150755663,KT=1481765933,JT=1284865837,YT=9007199254740992,QT=134217728,cu=class{_state;constructor(t,r,o,n){return Pn(r)&&Pn(t)?(r=Math.random()*4294967295>>>0,t=0):Pn(r)&&(r=t,t=0),Pn(n)&&Pn(o)?(n=this._state?this._state[3]:VT,o=this._state?this._state[2]:$T):Pn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),Uy(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*QT+r)/YT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;ZT(this._state,t,r,KT,JT),Uy(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(s>>>i|s<<c)>>>0}};function ZT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,c=(r&65535)*(n&65535)>>>0,a=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),s=s<<16>>>0,c=c+s>>>0,c>>>0<s>>>0&&(a=a+1>>>0),a=a+Math.imul(r,o)>>>0,a=a+Math.imul(t,n)>>>0,e[0]=a,e[1]=c}function Uy(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var Gf=Symbol.for("effect/Utils/YieldWrap"),Tr=class{#e;constructor(t){this.#e=t}[Gf](){return this.#e}};function Ys(e){if(typeof e=="object"&&e!==null&&Gf in e)return e[Gf]();throw new Error(Nn("yieldWrapGet"))}var Pt=W("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var XT=e=>{let t={[e](r){return r()}};return function(r){return t[e](r)}},Ne=XT("effect_internal_function");var Kf=W(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),F=Symbol.for("effect/Hash"),w=e=>{if(Pt.enabled===!0)return 0;switch(typeof e){case"number":return uu(e);case"bigint":return ae(e.toString(10));case"boolean":return ae(String(e));case"symbol":return ae(String(e));case"string":return ae(e);case"undefined":return ae("undefined");case"function":case"object":return e===null?ae("null"):e instanceof Date?w(e.toISOString()):eA(e)?e[F]():Qs(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Qs=e=>(Kf.has(e)||Kf.set(e,uu(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Kf.get(e)),D=e=>t=>t*53^e,au=e=>e&3221225471|e>>>1&1073741824,eA=e=>k(e,F),uu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return au(t)},ae=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return au(t)},tA=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=m(ae(t[o]),D(w(e[t[o]])));return au(r)},lu=e=>tA(e,Object.keys(e)),Nt=e=>{let t=6151;for(let r=0;r<e.length;r++)t=m(t,D(w(e[r])));return au(t)},K=function(){if(arguments.length===1){let r=arguments[0];return function(o){return Object.defineProperty(r,F,{value(){return o},enumerable:!1}),o}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,F,{value(){return t},enumerable:!1}),t};var R=Symbol.for("effect/Equal");function C(){return arguments.length===1?e=>pu(e,arguments[0]):pu(arguments[0],arguments[1])}function pu(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(Zs(e)&&Zs(t))return w(e)===w(t)&&e[R](t)?!0:Pt.enabled&&Pt.tester?Pt.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(Pt.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((o,n)=>pu(o,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let o=Object.keys(e),n=Object.keys(t);if(o.length===n.length){for(let s of o)if(!(s in t&&pu(e[s],t[s])))return Pt.tester?Pt.tester(e,t):!1;return!0}}return Pt.tester?Pt.tester(e,t):!1}}return Pt.enabled&&Pt.tester?Pt.tester(e,t):!1}var Zs=e=>k(e,R),Sc=()=>C;u();var G=Symbol.for("nodejs.util.inspect.custom"),Y=e=>k(e,"toJSON")&&Wo(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(Y):e,re=e=>JSON.stringify(e,null,2),BG={toJSON(){return Y(this)},[G](){return this.toJSON()},toString(){return re(this.toJSON())}},zy=class{[G](){return this.toJSON()}toString(){return re(this.toJSON())}},Bo=(e,t=2)=>{try{return typeof e=="object"?Gy(e,t):String(e)}catch{return String(e)}},Gy=(e,t)=>{let r=[],o=JSON.stringify(e,(n,s)=>typeof s=="object"&&s!==null?r.includes(s)?void 0:r.push(s)&&s:s,t);return r=void 0,o};u();u();var O=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};u();var Ln="Async",Xs="Commit",Le="Failure",ei="OnFailure",ti="OnSuccess",ri="OnSuccessAndFailure",De="Success",mu="Sync",$y="Tag",so="UpdateRuntimeFlags",oi="While",hu="WithRuntime",ni="Yield",_c="RevertFlags";var Jf=Symbol.for("effect/Effect"),Vy=Symbol.for("effect/Stream"),Ky=Symbol.for("effect/Sink"),Jy=Symbol.for("effect/Channel"),Uo={_R:e=>e,_E:e=>e,_A:e=>e,_V:Tn()},oA={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},nA={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},io={[Jf]:Uo,[Vy]:Uo,[Ky]:oA,[Jy]:nA,[R](e){return this===e},[F](){return K(this,Qs(this))},[Symbol.iterator](){return new bc(new Tr(this))},pipe(){return O(this,arguments)}},si={[F](){return K(this,lu(this))},[R](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let o of t)if(!(o in e&&C(this[o],e[o])))return!1;return!0}},Yy={...io,_op:Xs},Yf={...Yy,...si};u();var Qy=Symbol.for("effect/Option"),Zy={...io,[Qy]:{_A:e=>e},[G](){return this.toJSON()},toString(){return re(this.toJSON())}},iA=Object.assign(Object.create(Zy),{_tag:"Some",_op:"Some",[R](e){return du(e)&&Qf(e)&&C(this.value,e.value)},[F](){return K(this,D(w(this._tag))(w(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Y(this.value)}}}),cA=w("None"),aA=Object.assign(Object.create(Zy),{_tag:"None",_op:"None",[R](e){return du(e)&&xu(e)},[F](){return cA},toJSON(){return{_id:"Option",_tag:this._tag}}}),du=e=>k(e,Qy),xu=e=>e._tag==="None",Qf=e=>e._tag==="Some",jo=Object.create(aA),zo=e=>{let t=Object.create(iA);return t.value=e,t};var Xf=Symbol.for("effect/Either"),Xy={...io,[Xf]:{_R:e=>e},[G](){return this.toJSON()},toString(){return re(this.toJSON())}},uA=Object.assign(Object.create(Xy),{_tag:"Right",_op:"Right",[R](e){return em(e)&&gu(e)&&C(this.right,e.right)},[F](){return D(w(this._tag))(w(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Y(this.right)}}}),lA=Object.assign(Object.create(Xy),{_tag:"Left",_op:"Left",[R](e){return em(e)&&ii(e)&&C(this.left,e.left)},[F](){return D(w(this._tag))(w(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Y(this.left)}}}),em=e=>k(e,Xf),ii=e=>e._tag==="Left",gu=e=>e._tag==="Right",yu=e=>{let t=Object.create(lA);return t.left=e,t},bu=e=>{let t=Object.create(uA);return t.right=e,t},tm=e=>gu(e)?jo:zo(e.left),rm=e=>ii(e)?jo:zo(e.right);var Ke=bu,Et=yu;var co=ii,ci=gu;var pA=l(2,(e,{onLeft:t,onRight:r})=>co(e)?t(e.left):r(e.right));var Su=pA({onLeft:z,onRight:z});var tb=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(co(o))return o;r.push(o.right)}return Ke(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(co(o))return o;t[r]=o.right}return Ke(t)};u();var om=e=>e.length>0;var xe={};Dy(xe,{Do:()=>$A,TypeId:()=>mA,all:()=>ub,andThen:()=>kA,ap:()=>IA,as:()=>ib,asVoid:()=>vA,bind:()=>GA,bindTo:()=>jA,composeK:()=>FA,contains:()=>cm,containsWith:()=>fb,exists:()=>UA,filter:()=>LA,filterMap:()=>pb,firstSomeOf:()=>SA,flatMap:()=>tr,flatMapNullable:()=>wA,flatten:()=>MA,fromIterable:()=>dA,fromNullable:()=>gr,gen:()=>KA,getEquivalence:()=>DA,getLeft:()=>gA,getOrElse:()=>qe,getOrNull:()=>EA,getOrThrow:()=>Oc,getOrThrowWith:()=>sb,getOrUndefined:()=>mt,getOrder:()=>qA,getRight:()=>xA,isNone:()=>$,isOption:()=>nb,isSome:()=>U,let:()=>zA,lift2:()=>HA,liftNullable:()=>_A,liftPredicate:()=>WA,liftThrowable:()=>OA,map:()=>Re,match:()=>Je,none:()=>S,orElse:()=>yA,orElseEither:()=>bA,orElseSome:()=>sm,partitionMap:()=>NA,product:()=>ab,productMany:()=>AA,reduceCompact:()=>PA,some:()=>_,tap:()=>cb,toArray:()=>lb,toRefinement:()=>hA,void:()=>CA,zipLeft:()=>TA,zipRight:()=>RA,zipWith:()=>im});u();u();var _u=e=>(t,r)=>t===r?0:e(t,r);var rb=_u((e,t)=>e<t?-1:1);var ob=l(2,(e,t)=>_u((r,o)=>e(t(r),t(o))));var nm=e=>l(2,(t,r)=>e(t,r)===1);var mA=Symbol.for("effect/Option"),S=()=>jo,_=zo,nb=du,$=xu,U=Qf,Je=l(2,(e,{onNone:t,onSome:r})=>$(e)?t():r(e.value)),hA=e=>t=>U(e(t)),dA=e=>{for(let t of e)return _(t);return S()},xA=rm,gA=tm,qe=l(2,(e,t)=>$(e)?t():e.value),yA=l(2,(e,t)=>$(e)?t():e),sm=l(2,(e,t)=>$(e)?_(t()):e),bA=l(2,(e,t)=>$(e)?Re(t(),bu):Re(e,yu)),SA=e=>{let t=S();for(t of e)if(U(t))return t;return t},gr=e=>e==null?S():_(e),_A=e=>(...t)=>gr(e(...t)),EA=qe(qf),mt=qe(tu),OA=e=>(...t)=>{try{return _(e(...t))}catch{return S()}},sb=l(2,(e,t)=>{if(U(e))return e.value;throw t()}),Oc=sb(()=>new Error("getOrThrow called on a None")),Re=l(2,(e,t)=>$(e)?S():_(t(e.value))),ib=l(2,(e,t)=>Re(e,()=>t)),vA=ib(void 0),CA=_(void 0);var tr=l(2,(e,t)=>$(e)?S():t(e.value)),kA=l(2,(e,t)=>tr(e,r=>{let o=Vs(t)?t(r):t;return nb(o)?o:_(o)})),wA=l(2,(e,t)=>$(e)?S():gr(t(e.value))),MA=tr(z),RA=l(2,(e,t)=>tr(e,()=>t)),FA=l(2,(e,t)=>r=>tr(e(r),t)),TA=l(2,(e,t)=>cb(e,()=>t)),cb=l(2,(e,t)=>tr(e,r=>Re(t(r),()=>r))),ab=(e,t)=>U(e)&&U(t)?_([e.value,t.value]):S(),AA=(e,t)=>{if($(e))return S();let r=[e.value];for(let o of t){if($(o))return S();r.push(o.value)}return _(r)},ub=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if($(o))return S();r.push(o.value)}return _(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if($(o))return S();t[r]=o.value}return _(t)},im=l(3,(e,t,r)=>Re(ab(e,t),([o,n])=>r(o,n))),IA=l(2,(e,t)=>im(e,t,(r,o)=>r(o))),PA=l(3,(e,t,r)=>{let o=t;for(let n of e)U(n)&&(o=r(o,n.value));return o}),lb=e=>$(e)?[]:[e.value],NA=l(2,(e,t)=>{if($(e))return[S(),S()];let r=t(e.value);return ii(r)?[_(r.left),S()]:[S(),_(r.right)]}),pb=l(2,(e,t)=>$(e)?S():t(e.value)),LA=l(2,(e,t)=>pb(e,r=>t(r)?zo(r):jo)),DA=e=>Js((t,r)=>$(t)?$(r):$(r)?!1:e(t.value,r.value)),qA=e=>_u((t,r)=>U(t)?U(r)?e(t.value,r.value):1:-1),HA=e=>l(2,(t,r)=>im(t,r,e)),WA=l(2,(e,t)=>t(e)?_(e):S()),fb=e=>l(2,(t,r)=>$(t)?!1:e(t.value,r)),BA=Sc(),cm=fb(BA),UA=l(2,(e,t)=>$(e)?!1:t(e.value)),jA=ou(Re),zA=ru(Re);var GA=nu(Re,tr),$A=_({}),VA=jy(),KA=(...e)=>{let t;e.length===1?t=e[0]:t=e[1].bind(e[0]);let r=t(VA),o=r.next();if(o.done)return _(o.value);{let n=o.value;if($f(n)?n=n.value:n=Ys(n),$(n))return n;for(;!o.done;)if(o=r.next(n.value),!o.done&&(n=o.value,$f(n)?n=n.value:n=Ys(n),$(n)))return n;return _(o.value)}};u();var mb=(...e)=>e;var vc=e=>new Array(e),am=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=new Array(r);for(let n=0;n<r;n++)o[n]=t(n);return o};var te=e=>Array.isArray(e)?e:Array.from(e),db=e=>Array.isArray(e)?e:[e];var ai=l(2,(e,t)=>[t,...e]);var xb=l(2,(e,t)=>[...e,t]),um=l(2,(e,t)=>te(e).concat(te(t)));var JA=Array.isArray,YA=e=>e.length===0,gb=YA,yb=om,yt=om;var bb=(e,t)=>e<0||e>=t.length,QA=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),ZA=l(2,(e,t)=>{let r=Math.floor(t);return bb(r,e)?S():_(e[r])}),lm=l(2,(e,t)=>{let r=Math.floor(t);if(bb(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var Go=ZA(0),bt=lm(0),Ou=e=>yt(e)?_(pm(e)):S(),pm=e=>e[e.length-1];var Ar=e=>e.slice(1);var XA=(e,t)=>{let r=0;for(let o of e){if(!t(o,r))break;r++}return r},Sb=l(2,(e,t)=>tI(e,XA(e,t))),_b=l(2,(e,t)=>{let r=te(e);return r.slice(QA(t,r),r.length)});var fm=e=>Array.from(e).reverse(),qn=l(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var mm=l(2,(e,t)=>Eb(e,t,mb)),Eb=l(3,(e,t,r)=>{let o=te(e),n=te(t);if(yt(o)&&yt(n)){let s=[r(bt(o),bt(n))],i=Math.min(o.length,n.length);for(let c=1;c<i;c++)s[c]=r(o[c],n[c]);return s}return[]});var eI=Sc();var tI=l(2,(e,t)=>{let r=Array.from(e),o=Math.floor(t);return yt(r)?o>=1?rI(r,o):[[],r]:[r,[]]}),rI=l(2,(e,t)=>{let r=Math.max(1,Math.floor(t));return r>=e.length?[oI(e),[]]:[ai(e.slice(1,r),bt(e)),e.slice(r)]});var oI=e=>e.slice();var nI=l(3,(e,t,r)=>{let o=te(e),n=te(t);return yt(o)?yt(n)?Cb(r)(um(o,n)):o:n}),Ir=l(2,(e,t)=>nI(e,t,eI));var jt=()=>[],Ot=e=>[e],Pr=l(2,(e,t)=>e.map(t)),Ob=l(2,(e,t)=>{if(gb(e))return[];let r=[];for(let o=0;o<e.length;o++){let n=t(e[o],o);for(let s=0;s<n.length;s++)r.push(n[s])}return r}),vu=Ob(z),ui=l(2,(e,t)=>{let r=te(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);U(s)&&o.push(s.value)}return o});var vb=ui(z);var rr=l(3,(e,t,r)=>te(e).reduce((o,n,s)=>r(o,n,s),t)),Cu=l(3,(e,t,r)=>te(e).reduceRight((o,n,s)=>r(o,n,s),t));var hm=(e,t)=>{let r=[],o=e,n;for(;U(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var li=Hy;var Cb=l(2,(e,t)=>{let r=te(e);if(yt(r)){let o=[bt(r)],n=Ar(r);for(let s of n)o.every(i=>!t(s,i))&&o.push(s);return o}return[]}),dm=e=>Cb(e,Sc());var ao=l(2,(e,t)=>te(e).join(t));u();var kb=e=>!e;u();u();u();var Mb=Symbol.for("effect/Context/Tag"),sI="effect/STM",iI=Symbol.for(sI),xm={...io,_tag:"Tag",_op:"Tag",[iI]:Uo,[Mb]:{_Service:e=>e,_Identifier:e=>e},toString(){return re(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[G](){return this.toJSON()},of(e){return e},context(e){return bm(this,e)}},Rb=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;let o=Object.create(xm);return Object.defineProperty(o,"stack",{get(){return r.stack}}),o.key=e,o};var gm=Symbol.for("effect/Context"),cI={[gm]:{_Services:e=>e},[R](e){if(ym(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!C(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[F](){return K(this,uu(this.unsafeMap.size))},pipe(){return O(this,arguments)},toString(){return re(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Y)}},[G](){return this.toJSON()}},$o=e=>{let t=Object.create(cI);return t.unsafeMap=e,t},aI=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[2].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},ym=e=>k(e,gm);var uI=$o(new Map),Fb=()=>uI,bm=(e,t)=>$o(new Map([[e.key,t]])),Tb=l(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t.key,r),$o(o)}),Sm=l(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw aI(t);return e.unsafeMap.get(t.key)}),Ab=Sm,Ib=l(2,(e,t)=>e.unsafeMap.has(t.key)?zo(e.unsafeMap.get(t.key)):jo),Pb=l(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return $o(r)});var vt=Rb;var Nb=ym;var Ct=Fb,_m=bm,ke=Tb,Ue=Ab,pi=Sm,yr=Ib,Hn=Pb;u();u();u();var Lb=Symbol.for("effect/Chunk");function pI(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var Db=[],fI=e=>Js((t,r)=>t.length===r.length&&or(t).every((o,n)=>e(o,Wn(r,n)))),mI=fI(C),hI={[Lb]:{_A:e=>e},toString(){return re(this.toJSON())},toJSON(){return{_id:"Chunk",values:or(this).map(Y)}},[G](){return this.toJSON()},[R](e){return qb(e)&&mI(this,e)},[F](){return K(this,Nt(or(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Db[Symbol.iterator]();default:return or(this)[Symbol.iterator]()}},pipe(){return O(this,arguments)}},Qe=e=>{let t=Object.create(hI);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Nr,t.right=Nr;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Nr,t.right=Nr;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Nr,t.right=Nr;break}}return t},qb=e=>k(e,Lb),Nr=Qe({_tag:"IEmpty"}),Lt=()=>Nr,Cc=(...e)=>e.length===1?Fe(e[0]):yI(e),Fe=e=>Qe({_tag:"ISingleton",a:e}),Dr=e=>qb(e)?e:Qe({_tag:"IArray",array:te(e)}),Em=(e,t,r)=>{switch(e.backing._tag){case"IArray":{pI(e.backing.array,0,t,r,e.length);break}case"IConcat":{Em(e.left,t,r),Em(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Wn(e,o),o+=1,n+=1;break}}};var dI=e=>{switch(e.backing._tag){case"IEmpty":return Db;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return Em(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Nr,e.right=Nr,e.depth=0,t}}},or=dI,xI=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return Qe({_tag:"IArray",array:fm(e.backing.array)});case"IConcat":return Qe({_tag:"IConcat",left:Lr(e.backing.right),right:Lr(e.backing.left)});case"ISlice":return fi(fm(or(e)))}},Lr=xI,gI=l(2,(e,t)=>t<0||t>=e.length?S():_(Wn(e,t))),fi=e=>Qe({_tag:"IArray",array:e}),yI=e=>fi(e),Wn=l(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Wn(e.left,t):Wn(e.right,t-e.left.length);case"ISlice":return Wn(e.backing.chunk,t+e.backing.offset)}}),ku=l(2,(e,t)=>zt(e,Fe(t))),Ze=l(2,(e,t)=>zt(Fe(t),e));var Om=l(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Nr;switch(e.backing._tag){case"ISlice":return Qe({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Om(e.right,t-e.left.length):Qe({_tag:"IConcat",left:Om(e.left,t),right:e.right});default:return Qe({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var zt=l(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return Qe({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=zt(e.right,t);return Qe({_tag:"IConcat",left:e.left,right:o})}else{let o=zt(e.right.right,t);if(o.depth===e.depth-3){let n=Qe({_tag:"IConcat",left:e.right.left,right:o});return Qe({_tag:"IConcat",left:e.left,right:n})}else{let n=Qe({_tag:"IConcat",left:e.left,right:e.right.left});return Qe({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=zt(e,t.left);return Qe({_tag:"IConcat",left:o,right:t.right})}else{let o=zt(e,t.left.left);if(o.depth===t.depth-3){let n=Qe({_tag:"IConcat",left:o,right:t.left.right});return Qe({_tag:"IConcat",left:n,right:t.right})}else{let n=Qe({_tag:"IConcat",left:t.left.right,right:t.right});return Qe({_tag:"IConcat",left:o,right:n})}}});var vm=e=>e.length===0,rt=e=>e.length>0,wu=gI(0),Cm=e=>Wn(e,0),Xe=Cm;var nt=e=>Om(e,1);u();var Mm=Symbol.for("effect/Duration"),hi=BigInt(0),km=BigInt(24),mi=BigInt(60),Mu=BigInt(1e3),wm=BigInt(1e6),Rm=BigInt(1e9),Hb=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,st=e=>{if(Bb(e))return e;if(yc(e))return di(e);if(By(e))return kc(e);if(Array.isArray(e)){if(e.length===2&&yc(e[0])&&yc(e[1]))return kc(BigInt(e[0])*Rm+BigInt(e[1]))}else if(su(e)){Hb.lastIndex=0;let t=Hb.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nano":case"nanos":return kc(BigInt(o));case"micro":case"micros":return _I(BigInt(o));case"milli":case"millis":return di(s);case"second":case"seconds":return Tm(s);case"minute":case"minutes":return EI(s);case"hour":case"hours":return OI(s);case"day":case"days":return vI(s);case"week":case"weeks":return CI(s)}}}throw new Error("Invalid DurationInput")};var Wb={_tag:"Millis",millis:0},bI={_tag:"Infinity"},SI={[Mm]:Mm,[F](){return K(this,lu(this.value))},[R](e){return Bb(e)&&RI(this,e)},toString(){return`Duration(${Im(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:wI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},uo=e=>{let t=Object.create(SI);return yc(e)?isNaN(e)||e<=0?t.value=Wb:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=bI:e<=hi?t.value=Wb:t.value={_tag:"Nanos",nanos:e},t},Bb=e=>k(e,Mm);var Fm=uo(0);var kc=e=>uo(e),_I=e=>uo(e*Mu),di=e=>uo(e),Tm=e=>uo(e*1e3),EI=e=>uo(e*6e4),OI=e=>uo(e*36e5),vI=e=>uo(e*864e5),CI=e=>uo(e*6048e5),qr=e=>{let t=st(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var kI=e=>{let t=st(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},wI=e=>{let t=st(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Rm),Number(t.value.nanos%Rm)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var Ub=l(3,(e,t,r)=>{let o=st(e),n=st(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(qr(o),qr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var MI=(e,t)=>Ub(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Am=l(2,(e,t)=>Ub(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),RI=l(2,(e,t)=>MI(st(e),st(t))),Im=e=>{let t=st(e),r=[];if(t.value._tag==="Infinity")return"Infinity";let o=kI(t);o%wm&&r.push(`${o%wm}ns`);let n=o/wm;n%Mu!==hi&&r.push(`${n%Mu}ms`);let s=n/Mu;s%mi!==hi&&r.push(`${s%mi}s`);let i=s/mi;i%mi!==hi&&r.push(`${i%mi}m`);let c=i/mi;c%km!==hi&&r.push(`${c%km}h`);let a=c/km;return a!==hi&&r.push(`${a}d`),r.reverse().join(" ")};u();u();u();u();u();u();u();var Pm=Math.pow(2,5),jb=Pm-1,zb=Pm/2,Gb=Pm/4;function FI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Vo(e,t){return t>>>e&jb}function Ko(e){return 1<<e}function Ru(e,t){return FI(e&t-1)}u();u();var $b=(e,t)=>({value:e,previous:t});u();function Bn(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function Nm(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function Vb(e,t,r,o){let n=o.length;if(e){let a=n;for(;a>=t;)o[a--]=o[a];return o[t]=r,o}let s=0,i=0,c=new Array(n+1);for(;s<t;)c[i++]=o[s++];for(c[t]=r;s<n;)c[++i]=o[s++];return c}var po=class e{_tag="EmptyNode";modify(t,r,o,n,s,i){let c=o(S());return $(c)?new e:(++i.value,new xi(t,n,s,c))}};function nr(e){return In(e,"EmptyNode")}function AI(e){return nr(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Fu(e,t){return nr(e)?!1:t===e.edit}var xi=class e{edit;hash;key;value;_tag="LeafNode";constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n}modify(t,r,o,n,s,i){if(C(s,this.key)){let a=o(this.value);return a===this.value?this:$(a)?(--i.value,new po):Fu(this,t)?(this.value=a,this):new e(t,n,s,a)}let c=o(S());return $(c)?this:(++i.value,Kb(t,r,this.hash,this,n,new e(t,n,s,c)))}},Lm=class e{edit;hash;children;_tag="CollisionNode";constructor(t,r,o){this.edit=t,this.hash=r,this.children=o}modify(t,r,o,n,s,i){if(n===this.hash){let a=Fu(this,t),p=this.updateCollisionList(a,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let c=o(S());return $(c)?this:(++i.value,Kb(t,r,this.hash,this,n,new xi(t,n,s,c)))}updateCollisionList(t,r,o,n,s,i,c){let a=n.length;for(let f=0;f<a;++f){let h=n[f];if("key"in h&&C(i,h.key)){let d=h.value,g=s(d);return g===d?n:$(g)?(--c.value,Nm(t,f,n)):Bn(t,f,new xi(r,o,i,g),n)}}let p=s(S());return $(p)?n:(++c.value,Bn(t,a,new xi(r,o,i,p),n))}},wc=class e{edit;mask;children;_tag="IndexedNode";constructor(t,r,o){this.edit=t,this.mask=r,this.children=o}modify(t,r,o,n,s,i){let c=this.mask,a=this.children,p=Vo(r,n),f=Ko(p),h=Ru(c,f),d=c&f,g=Fu(this,t);if(!d){let J=new po().modify(t,r+5,o,n,s,i);return J?a.length>=zb?PI(t,p,J,c,a):new e(t,c|f,Vb(g,h,J,a)):this}let b=a[h],M=b.modify(t,r+5,o,n,s,i);if(b===M)return this;let T=c,L;if(nr(M)){if(T&=~f,!T)return new po;if(a.length<=2&&AI(a[h^1]))return a[h^1];L=Nm(g,h,a)}else L=Bn(g,h,M,a);return g?(this.mask=T,this.children=L,this):new e(t,T,L)}},Dm=class e{edit;size;children;_tag="ArrayNode";constructor(t,r,o){this.edit=t,this.size=r,this.children=o}modify(t,r,o,n,s,i){let c=this.size,a=this.children,p=Vo(r,n),f=a[p],h=(f||new po).modify(t,r+5,o,n,s,i);if(f===h)return this;let d=Fu(this,t),g;if(nr(f)&&!nr(h))++c,g=Bn(d,p,h,a);else if(!nr(f)&&nr(h)){if(--c,c<=Gb)return II(t,c,p,a);g=Bn(d,p,new po,a)}else g=Bn(d,p,h,a);return d?(this.size=c,this.children=g,this):new e(t,c,g)}};function II(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let c=0,a=o.length;c<a;++c)if(c!==r){let p=o[c];p&&!nr(p)&&(n[s++]=p,i|=1<<c)}return new wc(e,i,n)}function PI(e,t,r,o,n){let s=[],i=o,c=0;for(let a=0;i;++a)i&1&&(s[a]=n[c++]),i>>>=1;return s[t]=r,new Dm(e,c+1,s)}function NI(e,t,r,o,n,s){if(r===n)return new Lm(e,r,[s,o]);let i=Vo(t,r),c=Vo(t,n);if(i===c)return a=>new wc(e,Ko(i)|Ko(c),[a]);{let a=i<c?[o,s]:[s,o];return new wc(e,Ko(i)|Ko(c),a)}}function Kb(e,t,r,o,n,s){let i,c=t;for(;;){let a=NI(e,c,r,o,n,s);if(typeof a=="function")i=$b(a,i),c=c+5;else{let p=a;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var Jb="effect/HashMap",Tu=Symbol.for(Jb),DI={[Tu]:Tu,[Symbol.iterator](){return new Au(this,(e,t)=>[e,t])},[F](){let e=w(Jb);for(let t of this)e^=m(w(t[0]),D(w(t[1])));return K(this,e)},[R](e){if(Xb(e)){if(e._size!==this._size)return!1;for(let t of this){let r=m(e,Pu(t[0],w(t[0])));if($(r))return!1;if(!C(t[1],r.value))return!1}return!0}return!1},toString(){return re(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},qm=(e,t,r,o)=>{let n=Object.create(DI);return n._editable=e,n._edit=t,n._root=r,n._size=o,n},Au=class e{map;f;v;constructor(t,r){this.map=t,this.f=r,this.v=Yb(this.map._root,this.f,void 0)}next(){if($(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Iu(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},Iu=e=>e?Qb(e[0],e[1],e[2],e[3],e[4]):S(),Yb=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return U(e.value)?_({value:t(e.key,e.value.value),cont:r}):Iu(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return Qb(o.length,o,0,t,r)}default:return Iu(r)}},Qb=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!nr(s))return Yb(s,o,[e,t,r,o,n])}return Iu(n)},qI=qm(!1,0,new po,0),yi=()=>qI;var Zb=e=>{let t=Mc(yi());for(let r of e)Un(t,r[0],r[1]);return Wm(t)},Xb=e=>k(e,Tu),eS=e=>e&&nr(e._root),tS=l(2,(e,t)=>Pu(e,t,w(t))),Pu=l(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return C(t,o.key)?o.value:S();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,c=s.length;i<c;++i){let a=s[i];if("key"in a&&C(t,a.key))return a.value}}return S()}case"IndexedNode":{let s=Vo(n,r),i=Ko(s);if(o.mask&i){o=o.children[Ru(o.mask,i)],n+=5;break}return S()}case"ArrayNode":{if(o=o.children[Vo(n,r)],o){n+=5;break}return S()}default:return S()}});var Hm=l(2,(e,t)=>U(Pu(e,t,w(t))));var Un=l(3,(e,t,r)=>Lu(e,t,()=>_(r))),HI=l(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:qm(e._editable,e._edit,t,r)),Nu=e=>new Au(e,t=>t);var bi=e=>e._size,Mc=e=>qm(!0,e._edit+1,e._root,e._size),Wm=e=>(e._editable=!1,e),rS=l(2,(e,t)=>{let r=Mc(e);return t(r),Wm(r)}),Lu=l(3,(e,t,r)=>oS(e,t,w(t),r)),oS=l(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return m(e,HI(s,n.value))});var Du=l(2,(e,t)=>Lu(e,t,S));var nS=l(2,(e,t)=>Si(e,yi(),(r,o,n)=>Un(r,n,t(o,n))));var qu=l(2,(e,t)=>Si(e,void 0,(r,o,n)=>t(o,n))),Si=l(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return U(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,c=s.length;i<c;){let a=s[i++];a&&!nr(a)&&(a._tag==="LeafNode"?U(a.value)&&(t=r(t,a.value.value,a.key)):n.push(a.children))}return t});var iS="effect/HashSet",Hu=Symbol.for(iS),WI={[Hu]:Hu,[Symbol.iterator](){return Nu(this._keyMap)},[F](){return K(this,D(w(this._keyMap))(w(iS)))},[R](e){return cS(e)?bi(this._keyMap)===bi(e._keyMap)&&C(this._keyMap,e._keyMap):!1},toString(){return re(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},Wu=e=>{let t=Object.create(WI);return t._keyMap=e,t},cS=e=>k(e,Hu),BI=Wu(yi()),Rc=()=>BI,aS=e=>{let t=Bu(Rc());for(let r of e)_i(t,r);return Uu(t)},uS=(...e)=>{let t=Bu(Rc());for(let r of e)_i(t,r);return Uu(t)},lS=l(2,(e,t)=>Hm(e._keyMap,t));var pS=e=>bi(e._keyMap),Bu=e=>Wu(Mc(e._keyMap)),Uu=e=>(e._keyMap._editable=!1,e),Bm=l(2,(e,t)=>{let r=Bu(e);return t(r),Uu(r)}),_i=l(2,(e,t)=>e._keyMap._editable?(Un(t,!0)(e._keyMap),e):Wu(Un(t,!0)(e._keyMap))),Um=l(2,(e,t)=>e._keyMap._editable?(Du(t)(e._keyMap),e):Wu(Du(t)(e._keyMap))),fS=l(2,(e,t)=>Bm(e,r=>{for(let o of t)Um(r,o)}));var mS=l(2,(e,t)=>Bm(Rc(),r=>{hS(e,o=>_i(r,o));for(let o of t)_i(r,o)}));var hS=l(2,(e,t)=>qu(e._keyMap,(r,o)=>t(o))),dS=l(3,(e,t,r)=>Si(e._keyMap,t,(o,n,s)=>r(o,s)));var Hr=Rc,ju=aS,jn=uS,xS=lS;var zn=pS;var Gn=_i,jm=Um,zm=fS;var fo=mS;var $n=dS;u();var gS=Symbol.for("effect/MutableRef"),jI={[gS]:gS,toString(){return re(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Y(this.current)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},Wr=e=>{let t=Object.create(jI);return t.current=e,t},zu=l(3,(e,t,r)=>C(t,e.current)?(e.current=r,!0):!1);var Dt=e=>e.current;var sr=l(2,(e,t)=>(e.current=t,e));var $u="effect/FiberId",Jo=Symbol.for($u),Ei="None",Gm="Runtime",$m="Composite",zI=ae(`${$u}-${Ei}`),Vm=class{[Jo]=Jo;_tag=Ei;id=-1;startTimeMillis=-1;[F](){return zI}[R](t){return Ku(t)&&t._tag===Ei}toString(){return re(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[G](){return this.toJSON()}},Km=class{id;startTimeMillis;[Jo]=Jo;_tag=Gm;constructor(t,r){this.id=t,this.startTimeMillis=r}[F](){return K(this,ae(`${$u}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[R](t){return Ku(t)&&t._tag===Gm&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return re(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[G](){return this.toJSON()}},Jm=class{left;right;[Jo]=Jo;_tag=$m;constructor(t,r){this.left=t,this.right=r}_hash;[F](){return m(ae(`${$u}-${this._tag}`),D(w(this.left)),D(w(this.right)),K(this))}[R](t){return Ku(t)&&t._tag===$m&&C(this.left,t.left)&&C(this.right,t.right)}toString(){return re(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Y(this.left),right:Y(this.right)}}[G](){return this.toJSON()}},Vu=new Vm;var Ku=e=>k(e,Jo);var bS=l(2,(e,t)=>e._tag===Ei?t:t._tag===Ei?e:new Jm(e,t));var Gu=e=>{switch(e._tag){case Ei:return Hr();case Gm:return jn(e.id);case $m:return m(Gu(e.left),fo(Gu(e.right)))}},yS=W(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Wr(0));var Ju=e=>Array.from(Gu(e)).map(r=>`#${r}`).join(",");var SS=()=>{let e=Dt(yS);return m(yS,sr(e+1)),new Km(e,Date.now())};var $t=Vu;var Ym=bS;var ES=Ju;var Yu=SS;u();var Kn=yi;var OS=Zb,vS=eS,Qm=tS;var br=Un,Zm=Nu;var CS=bi;var kS=rS,wS=Lu;var Qu=nS;var MS=qu,Xm=Si;u();var Fc=Symbol.for("effect/List"),eh=e=>te(e),$I=e=>qy(li(e),eh),VI=$I(C),KI={[Fc]:Fc,_tag:"Cons",toString(){return re(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:eh(this).map(Y)}},[G](){return this.toJSON()},[R](e){return FS(e)&&this._tag===e._tag&&VI(this,e)},[F](){return K(this,Nt(eh(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();let r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return O(this,arguments)}},Zu=(e,t)=>{let r=Object.create(KI);return r.head=e,r.tail=t,r},JI=ae("Nil"),YI={[Fc]:Fc,_tag:"Nil",toString(){return re(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[G](){return this.toJSON()},[F](){return JI},[R](e){return FS(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return O(this,arguments)}},RS=Object.create(YI),FS=e=>k(e,Fc),Br=e=>e._tag==="Nil",Tc=e=>e._tag==="Cons";var QI=()=>RS,ho=(e,t)=>Zu(e,t),Ur=QI,Ac=e=>Zu(e,RS);var TS=l(2,(e,t)=>ZI(t,e)),Xu=l(2,(e,t)=>ho(t,e)),ZI=l(2,(e,t)=>{if(Br(e))return t;if(Br(t))return e;{let r=Zu(t.head,e),o=r,n=t.tail;for(;!Br(n);){let s=Zu(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var AS=l(3,(e,t,r)=>{let o=t,n=e;for(;!Br(n);)o=r(o,n.head),n=n.tail;return o});var IS=e=>{let t=Ur(),r=e;for(;!Br(r);)t=Xu(t,r.head),r=r.tail;return t};u();u();u();u();var EV=Object.assign(Object.create(Array.prototype),{[F](){return K(this,Nt(this))},[R](e){return Array.isArray(e)&&this.length===e.length?this.every((t,r)=>C(t,e[r])):!1}}),Ci=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=si,e}(),el=e=>Object.assign(Object.create(si),e);u();var XI=Symbol.for("effect/DifferContextPatch");function NS(e){return e}var Pc={...Ci.prototype,[XI]:{_Value:NS,_Patch:NS}},e1=Object.assign(Object.create(Pc),{_tag:"Empty"}),t1=Object.create(e1),th=()=>t1,r1=Object.assign(Object.create(Pc),{_tag:"AndThen"}),o1=(e,t)=>{let r=Object.create(r1);return r.first=e,r.second=t,r},n1=Object.assign(Object.create(Pc),{_tag:"AddService"}),s1=(e,t)=>{let r=Object.create(n1);return r.key=e,r.service=t,r},i1=Object.assign(Object.create(Pc),{_tag:"RemoveService"}),c1=e=>{let t=Object.create(i1);return t.key=e,t},a1=Object.assign(Object.create(Pc),{_tag:"UpdateService"}),u1=(e,t)=>{let r=Object.create(a1);return r.key=e,r.update=t,r},LS=(e,t)=>{let r=new Map(e.unsafeMap),o=th();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),C(i,s)||(o=Ic(u1(n,()=>s))(o))}else r.delete(n),o=Ic(s1(n,s))(o);for(let[n]of r.entries())o=Ic(c1(n))(o);return o},Ic=l(2,(e,t)=>o1(e,t)),DS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,o=Fe(e),n=new Map(t.unsafeMap);for(;rt(o);){let i=Xe(o),c=nt(o);switch(i._tag){case"Empty":{o=c;break}case"AddService":{n.set(i.key,i.service),o=c;break}case"AndThen":{o=Ze(Ze(c,i.second),i.first);break}case"RemoveService":{n.delete(i.key),o=c;break}case"UpdateService":{n.set(i.key,i.update(n.get(i.key))),r=!0,o=c;break}}}if(!r)return $o(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,c]of n)s.set(i,c);return $o(s)});u();var p1=Symbol.for("effect/DifferHashSetPatch");function rh(e){return e}var rl={...Ci.prototype,[p1]:{_Value:rh,_Key:rh,_Patch:rh}},f1=Object.assign(Object.create(rl),{_tag:"Empty"}),m1=Object.create(f1),oh=()=>m1,h1=Object.assign(Object.create(rl),{_tag:"AndThen"}),d1=(e,t)=>{let r=Object.create(h1);return r.first=e,r.second=t,r},x1=Object.assign(Object.create(rl),{_tag:"Add"}),g1=e=>{let t=Object.create(x1);return t.value=e,t},y1=Object.assign(Object.create(rl),{_tag:"Remove"}),b1=e=>{let t=Object.create(y1);return t.value=e,t},qS=(e,t)=>{let[r,o]=$n([e,oh()],([n,s],i)=>xS(i)(n)?[jm(i)(n),s]:[n,tl(g1(i))(s)])(t);return $n(o,(n,s)=>tl(b1(s))(n))(r)},tl=l(2,(e,t)=>d1(e,t)),HS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,o=Fe(e);for(;rt(o);){let n=Xe(o),s=nt(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Ze(n.first)(Ze(n.second)(s));break}case"Add":{r=Gn(n.value)(r),o=s;break}case"Remove":r=jm(n.value)(r),o=s}}return r});u();var _1=Symbol.for("effect/DifferReadonlyArrayPatch");function WS(e){return e}var Lc={...Ci.prototype,[_1]:{_Value:WS,_Patch:WS}},E1=Object.assign(Object.create(Lc),{_tag:"Empty"}),O1=Object.create(E1),nh=()=>O1,v1=Object.assign(Object.create(Lc),{_tag:"AndThen"}),C1=(e,t)=>{let r=Object.create(v1);return r.first=e,r.second=t,r},k1=Object.assign(Object.create(Lc),{_tag:"Append"}),w1=e=>{let t=Object.create(k1);return t.values=e,t},M1=Object.assign(Object.create(Lc),{_tag:"Slice"}),R1=(e,t)=>{let r=Object.create(M1);return r.from=e,r.until=t,r},F1=Object.assign(Object.create(Lc),{_tag:"Update"}),T1=(e,t)=>{let r=Object.create(F1);return r.index=e,r.patch=t,r},BS=e=>{let t=0,r=nh();for(;t<e.oldValue.length&&t<e.newValue.length;){let o=e.oldValue[t],n=e.newValue[t],s=e.differ.diff(o,n);C(s,e.differ.empty)||(r=Nc(r,T1(t,s))),t=t+1}return t<e.oldValue.length&&(r=Nc(r,R1(0,t))),t<e.newValue.length&&(r=Nc(r,w1(_b(t)(e.newValue)))),r},Nc=l(2,(e,t)=>C1(e,t)),US=l(3,(e,t,r)=>{if(e._tag==="Empty")return t;let o=t.slice(),n=Ot(e);for(;yb(n);){let s=bt(n),i=Ar(n);switch(s._tag){case"Empty":{n=i;break}case"AndThen":{i.unshift(s.first,s.second),n=i;break}case"Append":{for(let c of s.values)o.push(c);n=i;break}case"Slice":{o=o.slice(s.from,s.until),n=i;break}case"Update":{o[s.index]=r.patch(s.patch,o[s.index]),n=i;break}}}return o});var jS=Symbol.for("effect/Differ"),I1={[jS]:{_P:z,_V:z}},Yo=e=>{let t=Object.create(I1);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},sh=()=>Yo({empty:th(),combine:(e,t)=>Ic(t)(e),diff:(e,t)=>LS(e,t),patch:(e,t)=>DS(t)(e)});var ih=()=>Yo({empty:oh(),combine:(e,t)=>tl(t)(e),diff:(e,t)=>qS(e,t),patch:(e,t)=>HS(t)(e)});var ch=e=>Yo({empty:nh(),combine:(t,r)=>Nc(t,r),diff:(t,r)=>BS({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>US(t,r,e)});var ol=()=>zS((e,t)=>t),zS=e=>Yo({empty:z,combine:(t,r)=>t===z?r:r===z?t:o=>r(t(o)),diff:(t,r)=>C(t,r)?z:Ks(r),patch:(t,r)=>e(r,t(r))});u();var Dc=255,GS=8,nl=e=>e&Dc,sl=e=>e>>GS&Dc,Yn=(e,t)=>(e&Dc)+((t&e&Dc)<<GS),il=Yn(0,0),$S=e=>Yn(e,e),VS=e=>Yn(e,0);var KS=l(2,(e,t)=>Yn(nl(e)&~t,sl(e)));var uh=l(2,(e,t)=>e|t);var JS=e=>~e>>>0&Dc;var P1=0,jr=1,QS=2,lh=4,cl=16,ph=32;var ZS=e=>al(e,ph);var fh=l(2,(e,t)=>e|t);var xo=e=>qc(e)&&!N1(e),qc=e=>al(e,jr);var al=l(2,(e,t)=>(e&t)!==0),mh=(...e)=>e.reduce((t,r)=>t|r,0),XS=mh(P1);var hh=e=>al(e,lh);var N1=e=>al(e,cl);var ir=l(2,(e,t)=>Yn(e^t,t)),go=l(2,(e,t)=>e&(JS(nl(t))|sl(t))|nl(t)&sl(t));var dh=Yo({empty:il,diff:(e,t)=>ir(e,t),combine:(e,t)=>uh(t)(e),patch:(e,t)=>go(t,e)});var e_=il;var xh=$S,gh=VS;var yh=KS;u();var t_={_tag:"Empty"},Eh=(e,t)=>({_tag:"Par",left:e,right:t}),ul=(e,t)=>({_tag:"Seq",left:e,right:t}),Oh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var r_=e=>{let t=Ac(e),r=Ur();for(;;){let[o,n]=AS(t,[o_(),Ur()],([s,i],c)=>{let[a,p]=L1(c);return[j1(s,a),TS(i,p)]});if(r=D1(r,o),Br(n))return IS(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},L1=e=>{let t=e,r=o_(),o=Ur(),n=Ur();for(;;)switch(t._tag){case"Empty":{if(Br(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=ho(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let c=s.left,a=s.right;t=Eh(ul(c,i),ul(a,i));break}case"Seq":{let c=s.left,a=s.right;t=ul(c,ul(a,i));break}case"Single":{t=s,n=ho(i,n);break}}break}case"Single":{if(r=U1(r,t),Br(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},D1=(e,t)=>{if(Br(e))return Ac(Sh(t));if(z1(t))return e;let r=Y1(e.head),o=G1(t);return r.length===1&&o.length===1&&C(r[0],o[0])?ho(J1(e.head,Sh(t)),e.tail):ho(Sh(t),e)},q1=Symbol.for("effect/RequestBlock/Entry"),_h=class{request;result;listeners;ownerId;state;[q1]=H1;constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s}},H1={_R:e=>e};var vh=e=>new _h(e.request,e.result,e.listeners,e.ownerId,e.state),W1=Symbol.for("effect/RequestBlock/RequestBlockParallel"),B1={_R:e=>e},Wc=class{map;[W1]=B1;constructor(t){this.map=t}},o_=()=>new Wc(Kn());var U1=(e,t)=>new Wc(wS(e.map,t.dataSource,r=>sm(Re(r,ku(t.blockedRequest)),()=>Fe(t.blockedRequest)))),j1=(e,t)=>new Wc(Xm(e.map,t.map,(r,o,n)=>br(r,n,Je(Qm(r,n),{onNone:()=>o,onSome:s=>zt(o,s)})))),z1=e=>vS(e.map),G1=e=>Array.from(Zm(e.map)),Sh=e=>K1(Qu(e.map,t=>Fe(t))),$1=Symbol.for("effect/RequestBlock/RequestBlockSequential"),V1={_R:e=>e},ll=class{map;[$1]=V1;constructor(t){this.map=t}},K1=e=>new ll(e),J1=(e,t)=>new ll(Xm(t.map,e.map,(r,o,n)=>br(r,n,Je(Qm(r,n),{onNone:()=>Lt(),onSome:s=>zt(s,o)}))));var Y1=e=>Array.from(Zm(e.map)),n_=e=>Array.from(e.map);u();u();var Qn="Die",Zn="Empty",Xn="Fail",es="Interrupt",ts="Parallel",rs="Sequential";var u_="effect/Cause",kh=Symbol.for(u_),Z1={_E:e=>e},ki={[kh]:Z1,[F](){return m(w(u_),D(w(eP(this))),K(this))},[R](e){return fl(e)&&X1(this,e)},pipe(){return O(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Y(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Y(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Y(this.left),right:Y(this.right)}}},toString(){return Xo(this)},[G](){return this.toJSON()}},Sr=(()=>{let e=Object.create(ki);return e._tag=Zn,e})(),Qo=e=>{let t=Object.create(ki);return t._tag=Xn,t.error=e,t},ht=e=>{let t=Object.create(ki);return t._tag=Qn,t.defect=e,t},Vt=e=>{let t=Object.create(ki);return t._tag=es,t.fiberId=e,t},wt=(e,t)=>{let r=Object.create(ki);return r._tag=ts,r.left=e,r.right=t,r},je=(e,t)=>{let r=Object.create(ki);return r._tag=rs,r.left=e,r.right=t,r},fl=e=>k(e,kh);var wi=e=>e._tag===Qn;var ml=e=>e._tag===Zn?!0:os(e,!0,(t,r)=>{switch(r._tag){case Zn:return _(t);case Qn:case Xn:case es:return _(!1);default:return S()}});var hl=e=>U(l_(e)),ns=e=>jc(void 0,rP)(e),Bc=e=>Lr(os(e,Lt(),(t,r)=>r._tag===Xn?_(m(t,Ze(r.error))):S())),dl=e=>Lr(os(e,Lt(),(t,r)=>r._tag===Qn?_(m(t,Ze(r.defect))):S())),Uc=e=>os(e,Hr(),(t,r)=>r._tag===es?_(m(t,Gn(r.fiberId))):S()),wh=e=>Zo(e,t=>t._tag===Xn?_(t.error):S()),zr=e=>{let t=wh(e);switch(t._tag){case"None":return Ke(e);case"Some":return Et(t.value)}};var l_=e=>Zo(e,t=>t._tag===es?_(t.fiberId):S()),Mh=e=>Mi(e,{onEmpty:S(),onFail:()=>S(),onDie:t=>_(ht(t)),onInterrupt:()=>S(),onSequential:(t,r)=>U(t)&&U(r)?_(je(t.value,r.value)):U(t)&&$(r)?_(t.value):$(t)&&U(r)?_(r.value):S(),onParallel:(t,r)=>U(t)&&U(r)?_(wt(t.value,r.value)):U(t)&&$(r)?_(t.value):$(t)&&U(r)?_(r.value):S()}),p_=e=>Mi(e,{onEmpty:S(),onFail:t=>_(ht(t)),onDie:t=>_(ht(t)),onInterrupt:()=>S(),onSequential:(t,r)=>U(t)&&U(r)?_(je(t.value,r.value)):U(t)&&$(r)?_(t.value):$(t)&&U(r)?_(r.value):S(),onParallel:(t,r)=>U(t)&&U(r)?_(wt(t.value,r.value)):U(t)&&$(r)?_(t.value):$(t)&&U(r)?_(r.value):S()});var xl=e=>Mi(e,{onEmpty:Sr,onFail:()=>Sr,onDie:t=>ht(t),onInterrupt:t=>Vt(t),onSequential:je,onParallel:wt}),f_=e=>Mi(e,{onEmpty:Sr,onFail:t=>ht(t),onDie:t=>ht(t),onInterrupt:t=>Vt(t),onSequential:(t,r)=>je(t,r),onParallel:(t,r)=>wt(t,r)});var m_=l(2,(e,t)=>Mi(e,{onEmpty:Sr,onFail:r=>t(r),onDie:r=>ht(r),onInterrupt:r=>Vt(r),onSequential:(r,o)=>je(r,o),onParallel:(r,o)=>wt(r,o)})),Rh=e=>m_(e,z);var X1=(e,t)=>{let r=Fe(e),o=Fe(t);for(;rt(r)&&rt(o);){let[n,s]=m(Xe(r),os([Hr(),Lt()],([a,p],f)=>{let[h,d]=Ch(f);return _([m(a,fo(h)),m(p,zt(d))])})),[i,c]=m(Xe(o),os([Hr(),Lt()],([a,p],f)=>{let[h,d]=Ch(f);return _([m(a,fo(h)),m(p,zt(d))])}));if(!C(n,i))return!1;r=s,o=c}return!0},eP=e=>tP(Fe(e),Lt()),tP=(e,t)=>{for(;;){let[r,o]=m(e,rr([Hr(),Lt()],([s,i],c)=>{let[a,p]=Ch(c);return[m(s,fo(a)),m(i,zt(p))]})),n=zn(r)>0?m(t,Ze(r)):t;if(vm(o))return Lr(n);e=o,t=n}throw new Error(Nn("Cause.flattenCauseLoop"))},Zo=l(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case rs:case ts:{r.push(o.right),r.push(o.left);break}}break}case"Some":return n}}return S()});var Ch=e=>{let t=e,r=[],o=Hr(),n=Lt();for(;t!==void 0;)switch(t._tag){case Zn:{if(r.length===0)return[o,n];t=r.pop();break}case Xn:{if(o=Gn(o,Cc(t._tag,t.error)),r.length===0)return[o,n];t=r.pop();break}case Qn:{if(o=Gn(o,Cc(t._tag,t.defect)),r.length===0)return[o,n];t=r.pop();break}case es:{if(o=Gn(o,Cc(t._tag,t.fiberId)),r.length===0)return[o,n];t=r.pop();break}case rs:{switch(t.left._tag){case Zn:{t=t.right;break}case rs:{t=je(t.left.left,je(t.left.right,t.right));break}case ts:{t=wt(je(t.left.left,t.right),je(t.left.right,t.right));break}default:{n=Ze(n,t.right),t=t.left;break}}break}case ts:{r.push(t.right),t=t.left;break}}throw new Error(Nn("Cause.evaluateCauseLoop"))};var rP={emptyCase:qo,failCase:oo,dieCase:oo,interruptCase:qo,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var i_="SequentialCase",c_="ParallelCase",Mi=l(2,(e,{onDie:t,onEmpty:r,onFail:o,onInterrupt:n,onParallel:s,onSequential:i})=>jc(e,void 0,{emptyCase:()=>r,failCase:(c,a)=>o(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>n(a),sequentialCase:(c,a,p)=>i(a,p),parallelCase:(c,a,p)=>s(a,p)})),os=l(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=U(i)?i.value:o,n._tag){case rs:{s.push(n.right),n=n.left;break}case ts:{s.push(n.right),n=n.left;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),jc=l(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Zn:{n.push(Ke(r.emptyCase(t)));break}case Xn:{n.push(Ke(r.failCase(t,i.error)));break}case Qn:{n.push(Ke(r.dieCase(t,i.defect)));break}case es:{n.push(Ke(r.interruptCase(t,i.fiberId)));break}case rs:{o.push(i.right),o.push(i.left),n.push(Et({_tag:i_}));break}case ts:{o.push(i.right),o.push(i.left),n.push(Et({_tag:c_}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case i_:{let c=s.pop(),a=s.pop(),p=r.sequentialCase(t,c,a);s.push(p);break}case c_:{let c=s.pop(),a=s.pop(),p=r.parallelCase(t,c,a);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),Xo=(e,t)=>ns(e)?"All fibers interrupted without errors.":gl(e).map(function(r){return t?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${h_(r.cause,"  ")}
}`}).join(`
`),h_=(e,t)=>{let r=e.stack.split(`
`),o=`${t}[cause]: ${r[0]}`;for(let n=1,s=r.length;n<s;n++)o+=`
${t}${r[n]}`;return e.cause&&(o+=` {
${h_(e.cause,`${t}  `)}
${t}}`),o},pl=class e extends globalThis.Error{span=void 0;constructor(t){let r=typeof t=="object"&&t!==null,o=Error.stackTraceLimit;Error.stackTraceLimit=1,super(oP(t),r&&"cause"in t&&typeof t.cause<"u"?{cause:new e(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=o,this.name=t instanceof Error?t.name:"Error",r&&(a_ in t&&(this.span=t[a_]),Object.keys(t).forEach(n=>{n in this||(this[n]=t[n])})),this.stack=sP(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}},oP=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(k(e,"toString")&&Wo(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},nP=/\((.*)\)/,zc=W("effect/Tracer/spanToTrace",()=>new WeakMap),sP=(e,t,r)=>{let o=[e],n=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let s=1;s<n.length&&!n[s].includes("Generator.next");s++){if(n[s].includes("effect_internal_function")){o.pop();break}o.push(n[s].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let s=r,i=0;for(;s&&s._tag==="Span"&&i<10;){let c=zc.get(s);if(typeof c=="function"){let a=c();if(typeof a=="string"){let p=a.match(nP),f=p?p[1]:a.replace(/^at /,"");o.push(`    at ${s.name} (${f})`)}else o.push(`    at ${s.name}`)}else o.push(`    at ${s.name}`);s=mt(s.parent),i++}}return o.join(`
`)},a_=Symbol.for("effect/SpanAnnotation"),gl=e=>jc(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[new pl(r)],failCase:(t,r)=>[new pl(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();u();var is="Pending",Gc="Done";var iP="effect/Deferred",x_=Symbol.for(iP),g_={_E:e=>e,_A:e=>e},y_=e=>({_tag:is,joiners:e}),Fh=e=>({_tag:Gc,effect:e});u();var en=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};u();var b_=Symbol.for("effect/Tracer"),aP=e=>({[b_]:b_,...e}),Gr=vt("effect/Tracer"),_r=vt("effect/ParentSpan"),S_=function(){let e="abcdef0123456789",t=e.length;return function(r){let o="";for(let n=0;n<r;n++)o+=e.charAt(Math.floor(Math.random()*t));return o}}(),Th=class{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(t,r,o,n,s,i){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this.kind=i,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:S_(32),this.spanId=S_(16)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,o){this.events.push([t,r,o??{}])}},__=aP({span:(e,t,r,o,n,s)=>new Th(e,t,r,o,n,s),context:e=>e()});var yo=e=>{if(e?.captureStackTrace===!1)return e;if(e?.captureStackTrace!==void 0&&typeof e.captureStackTrace!="boolean")return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=t;let o=!1;return{...e,captureStackTrace:()=>{if(o!==!1)return o;if(r.stack!==void 0){let n=r.stack.split(`
`);if(n[3]!==void 0)return o=n[3].trim(),o}}}};var pP="effect/EffectError",Ah=Symbol.for(pP),F_=e=>k(e,Ah),T_=e=>({[Ah]:Ah,_tag:"EffectError",cause:e}),bo=(e,t)=>{let r=new ze("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},vl=e=>{let t=new ze("RunBlocked");return t.effect_instruction_i0=e,t},Ri=Symbol.for("effect/Effect"),Sl=class{patch;op;_op=_c;constructor(t,r){this.patch=t,this.op=r}},ze=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ri]=Uo;constructor(t){this._op=t}[R](t){return this===t}[F](){return K(this,Qs(this))}pipe(){return O(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Y(this.effect_instruction_i0),effect_instruction_i1:Y(this.effect_instruction_i1),effect_instruction_i2:Y(this.effect_instruction_i2)}}toString(){return re(this.toJSON())}[G](){return this.toJSON()}[Symbol.iterator](){return new en(new Tr(this))}},_l=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ri]=Uo;constructor(t){this._op=t,this._tag=t}[R](t){return Xc(t)&&t._op==="Failure"&&C(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ae(this._tag),D(w(this.effect_instruction_i0)),K(this))}get cause(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return re(this.toJSON())}[G](){return this.toJSON()}[Symbol.iterator](){return new en(new Tr(this))}},El=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ri]=Uo;constructor(t){this._op=t,this._tag=t}[R](t){return Xc(t)&&t._op==="Success"&&C(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ae(this._tag),D(w(this.effect_instruction_i0)),K(this))}get value(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Y(this.value)}}toString(){return re(this.toJSON())}[G](){return this.toJSON()}[Symbol.iterator](){return new en(new Tr(this))}},le=e=>k(e,Ri),oe=e=>{let t=new ze(hu);return t.effect_instruction_i0=e,t},tn=l(3,(e,t,r)=>Te(o=>x(e,n=>x(we(I(()=>o(t(n)))),s=>I(()=>r(n,s)).pipe(_e({onFailure:i=>{switch(s._tag){case Le:return Q(wt(s.effect_instruction_i0,i));case De:return Q(i)}},onSuccess:()=>s})))))),pe=l(2,(e,t)=>x(e,()=>y(t))),Oe=e=>pe(e,void 0),Vc=function(){let e=new ze(Xs);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Nn("you're not supposed to end up here"))}return e},A_=(e,t=$t)=>{let r=new ze(Ln),o;return r.effect_instruction_i0=n=>{o=e(n)},r.effect_instruction_i1=t,o!==void 0?vr(r,n=>o):r},He=(e,t=$t)=>Vc(e,function(){let r,o;function n(a){r?r(a):o===void 0&&(o=a)}let s=new ze(Ln);s.effect_instruction_i0=a=>{r=a,o&&a(o)},s.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Ne(()=>this.effect_instruction_i0(n,c.signal))):i=Ne(()=>this.effect_instruction_i0(n)),i||c?vr(s,a=>(c&&c.abort(),i??B)):s}),$r=l(2,(e,t)=>{let r=new ze(ei);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Er=l(2,(e,t)=>et(e,{onFailure:t,onSuccess:y})),Kc=l(3,(e,t,r)=>$r(e,o=>{let n=zr(o);switch(n._tag){case"Left":return t(n.left)?r(n.left):Q(o);case"Right":return Q(n.right)}})),I_=l(2,(e,t)=>$r(e,r=>{let o=zr(r);switch(o._tag){case"Left":return m(t(o.left),qe(()=>Q(r)));case"Right":return Q(o.right)}})),P_=e=>oe((t,r)=>e(qc(r.runtimeFlags))),Ol=Symbol.for("effect/SpanAnnotation"),E_=Symbol.for("effect/OriginalAnnotation");var N_=(e,t)=>U(t)?new Proxy(e,{has(r,o){return o===Ol||o===E_||o in r},get(r,o){return o===Ol?t.value:o===E_?e:r[o]}}):e,So=e=>An(e)&&!(Ol in e)?oe(t=>Q(ht(N_(e,uE(t))))):Q(ht(e)),rn=e=>nn(()=>ht(new SP(e))),on=e=>x(E(e),So),Vr=e=>et(e,{onFailure:t=>y(Et(t)),onSuccess:t=>y(Ke(t))}),we=e=>Jc(e,{onFailure:ce,onSuccess:ge}),V=e=>An(e)&&!(Ol in e)?oe(t=>Q(Qo(N_(e,uE(t))))):Q(Qo(e)),Or=e=>x(E(e),V),Q=e=>{let t=new _l(Le);return t.effect_instruction_i0=e,t},nn=e=>x(E(e),Q),sn=oe(e=>y(e.id())),qt=e=>oe(t=>e(t.id())),x=l(2,(e,t)=>{let r=new ze(ti);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),as=l(2,(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return le(o)?o:Uf(o)?He(n=>{o.then(s=>n(y(s)),s=>n(V(new fn(s))))}):y(o)})),Cl=e=>{let t=new ze("OnStep");return t.effect_instruction_i0=e,t},Mt=e=>x(e,z),cn=e=>et(e,{onFailure:y,onSuccess:V}),Jc=l(2,(e,t)=>_e(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),_e=l(2,(e,t)=>{let r=new ze(ri);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),et=l(2,(e,t)=>_e(e,{onFailure:r=>{if(dl(r).length>0)return Q(f_(r));let n=Bc(r);return n.length>0?t.onFailure(Cm(n)):Q(r)},onSuccess:t.onSuccess})),it=l(2,(e,t)=>I(()=>{let r=te(e),o=vc(r.length),n=0;return pe(Ai({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),Ht=l(2,(e,t)=>I(()=>{let r=te(e),o=0;return Ai({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),kl=l(e=>typeof e[0]=="boolean"||le(e[0]),(e,t)=>le(e)?x(e,r=>r?t.onTrue():t.onFalse()):e?t.onTrue():t.onFalse()),wl=x(sn,e=>Ml(e)),Ml=e=>Q(Vt(e)),Kr=e=>{let t=new ze(so);return t.effect_instruction_i0=xh(jr),t.effect_instruction_i1=()=>e,t},L_=e=>Vc(e,function(){let t=new ze(so);return t.effect_instruction_i0=xh(jr),t.effect_instruction_i1=r=>qc(r)?Ne(()=>this.effect_instruction_i0(Kr)):Ne(()=>this.effect_instruction_i0(_o)),t}),Jr=l(2,(e,t)=>Te(r=>x(we(r(e)),o=>Gh(t,o)))),v=l(2,(e,t)=>x(e,r=>E(()=>t(r)))),Yc=l(2,(e,t)=>et(e,{onFailure:r=>Or(()=>t.onFailure(r)),onSuccess:r=>E(()=>t.onSuccess(r))})),an=l(2,(e,t)=>_e(e,{onFailure:r=>{let o=zr(r);switch(o._tag){case"Left":return Or(()=>t(o.left));case"Right":return Q(o.right)}},onSuccess:y})),Rl=l(2,(e,t)=>St(e,r=>Bl(r)?B:t(r.effect_instruction_i0))),St=l(2,(e,t)=>Te(r=>_e(r(e),{onFailure:o=>{let n=ce(o);return _e(t(n),{onFailure:s=>ce(je(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=ge(o);return se(t(n),n)}}))),vr=l(2,(e,t)=>St(e,Pi({onFailure:r=>ns(r)?Oe(t(Uc(r))):B,onSuccess:()=>B}))),us=l(2,(e,t)=>fP(e,t,y)),ls=e=>Nh(e,z),Nh=l(2,(e,t)=>et(e,{onFailure:r=>So(t(r)),onSuccess:y})),D_=(e,t)=>te(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[jt(),jt()]),Fi=oe((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new El(De);return t.effect_instruction_i0=e,t},I=e=>x(E(e),z),E=e=>{let t=new ze(mu);return t.effect_instruction_i0=e,t},Kt=l(e=>e.length===3||e.length===2&&!(An(e[1])&&"onlyEffect"in e[1]),(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return le(o)?pe(o,r):Uf(o)?He(n=>{o.then(s=>n(y(r)),s=>n(V(new fn(s))))}):y(r)})),Fl=e=>oe(t=>{let r=t.getFiberRef($c),o=m(r,qe(()=>t.scope()));return e(Be($c,_(o)))}),fP=l(3,(e,t,r)=>_e(e,{onFailure:o=>dl(o).length>0?Q(Oc(p_(o))):t(),onSuccess:r})),_o=e=>{let t=new ze(so);return t.effect_instruction_i0=gh(jr),t.effect_instruction_i1=()=>e,t},Te=e=>Vc(e,function(){let t=new ze(so);return t.effect_instruction_i0=gh(jr),t.effect_instruction_i1=r=>qc(r)?Ne(()=>this.effect_instruction_i0(Kr)):Ne(()=>this.effect_instruction_i0(_o)),t}),B=y(void 0);var un=e=>{let t=new ze(so);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Ti=l(2,(e,t)=>x(t,r=>r?m(e,v(_)):y(S()))),Ai=e=>{let t=new ze(oi);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},q_=l(2,(e,t)=>Be(e,Nl,t)),H_=l(2,(e,t)=>Be(e,Wh,t)),Tl=l(2,(e,t)=>{let r=new ze(so);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r}),W_=l(2,(e,t)=>Be(e,Uh,t)),B_=l(2,(e,t)=>Be(e,Ii,t)),Yr=e=>{let t=new ze(ni);return typeof e?.priority<"u"?Hh(t,e.priority):t},ps=l(2,(e,t)=>x(e,r=>v(t,o=>[r,o])));var fs=l(2,(e,t)=>x(e,r=>pe(t,r))),se=l(2,(e,t)=>x(e,()=>t)),Qr=l(3,(e,t,r)=>x(e,o=>v(t,n=>r(o,n)))),ms=He(()=>{let e=setInterval(()=>{},2147483647);return E(()=>clearInterval(e))}),hs=e=>x(sn,t=>m(e,Wt(t))),Wt=l(2,(e,t)=>x(e.interruptAsFork(t),()=>e.await)),U_={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return O(this,arguments)}},j_={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return O(this,arguments)}},z_={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return O(this,arguments)}},G_={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return O(this,arguments)}},Lh={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return O(this,arguments)}},Dh={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return O(this,arguments)}},$_={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return O(this,arguments)}},V_={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return O(this,arguments)}};var mP="effect/FiberRef",hP=Symbol.for(mP),dP={_A:e=>e},Bt=e=>K_(e,t=>[t,t]);var We=l(2,(e,t)=>x(Bt(e),t)),cs=l(2,(e,t)=>K_(e,()=>[void 0,t]));var K_=l(2,(e,t)=>oe(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var xP="effect/RequestResolver",J_=Symbol.for(xP),gP={_A:e=>e,_R:e=>e},O_=class e{runAll;target;[J_]=gP;constructor(t,r){this.runAll=t,this.target=r}[F](){return K(this,this.target?w(this.target):Qs(this))}[R](t){return this.target?yP(t)&&C(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Dr(t))}pipe(){return O(this,arguments)}},yP=e=>k(e,J_);var Be=l(3,(e,t,r)=>tn(fs(Bt(t),cs(t,r)),()=>e,o=>cs(t,o))),ot=l(3,(e,t,r)=>We(t,o=>Be(e,t,r(o)))),Ae=(e,t)=>ds(e,{differ:ol(),fork:t?.fork??z,join:t?.join}),Y_=e=>{let t=ih();return ds(e,{differ:t,fork:t.empty})},bP=e=>{let t=ch(ol());return ds(e,{differ:t,fork:t.empty})},Al=e=>{let t=sh();return ds(e,{differ:t,fork:t.empty})},ds=(e,t)=>({[hP]:dP,initial:e,diff:(r,o)=>t.differ.diff(r,o),combine:(r,o)=>t.differ.combine(r,o),patch:r=>o=>t.differ.patch(r,o),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return O(this,arguments)}}),Q_=e=>ds(e,{differ:dh,fork:dh.empty}),dt=W(Symbol.for("effect/FiberRef/currentContext"),()=>Al(Ct())),ln=W(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Ae(0)),Il=W(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Ae(2048)),pn=W(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Ae(Kn())),qh=W(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Ae(Lh)),Pl=W(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Ae(Ur())),Hh=l(2,(e,t)=>Be(e,ln,t)),Z_=l(2,(e,t)=>Be(e,Il,t)),Nl=W(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Ae("unbounded")),Wh=W(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Ae(!0)),Bh=W(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Ae(_(Dh))),X_=l(2,(e,t)=>Be(e,Bh,t)),Eo=W(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>bP(jt())),eE=Bt(Eo),$c=W(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Ae(S(),{fork:()=>S(),join:(e,t)=>e})),xs=W(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Ae(Sr,{fork:()=>Sr,join:(e,t)=>e})),Uh=W(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>Ae(!0)),Ii=W(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>Ae(!0)),Qc=W(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>Ae(Kn())),Ll=W(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>Ae(Lt())),Dl=Symbol.for("effect/Scope"),ql=Symbol.for("effect/CloseableScope"),Hl=(e,t)=>e.addFinalizer(()=>Oe(t)),gs=(e,t)=>e.addFinalizer(t),Oo=(e,t)=>e.close(t),ys=(e,t)=>e.fork(t);var Wl=function(){class e extends globalThis.Error{commit(){return V(this)}toJSON(){return{...this}}[G](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Xo(Qo(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Yf),e}(),bs=(e,t)=>{class r extends Wl{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},v_=Symbol.for("effect/Cause/errors/RuntimeException"),SP=bs({[v_]:v_},"RuntimeException");var Ih=Symbol.for("effect/Cause/errors/InterruptedException"),b4=bs({[Ih]:Ih},"InterruptedException"),tE=e=>k(e,Ih),C_=Symbol.for("effect/Cause/errors/IllegalArgument"),Zc=bs({[C_]:C_},"IllegalArgumentException");var Ph=Symbol.for("effect/Cause/errors/NoSuchElement"),Jt=bs({[Ph]:Ph},"NoSuchElementException"),rE=e=>k(e,Ph),k_=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),S4=bs({[k_]:k_},"InvalidPubSubCapacityException"),w_=Symbol.for("effect/Cause/errors/ExceededCapacityException"),_4=bs({[w_]:w_},"ExceededCapacityException");var M_=Symbol.for("effect/Cause/errors/Timeout"),_P=bs({[M_]:M_},"TimeoutException"),oE=e=>new _P(`Operation timed out before the specified duration of '${Im(e)}' elapsed`);var R_=Symbol.for("effect/Cause/errors/UnknownException"),fn=function(){class e extends Wl{cause;_tag="UnknownException";error;constructor(r,o){super(o??"An unknown error occurred",{cause:r}),this.cause=r,this.error=r}}return Object.assign(e.prototype,{[R_]:R_,name:"UnknownException"}),e}();var Xc=e=>le(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),jh=e=>e._tag==="Failure",Bl=e=>e._tag==="Success";var nE=l(2,(e,t)=>{switch(e._tag){case Le:return ce(e.effect_instruction_i0);case De:return ge(t)}}),ea=e=>nE(e,void 0);var mn=(e,t)=>EP(e,t?.parallel?wt:je),Ul=e=>ce(ht(e));var ta=e=>ce(Qo(e)),ce=e=>{let t=new _l(Le);return t.effect_instruction_i0=e,t},sE=l(2,(e,t)=>{switch(e._tag){case Le:return ce(e.effect_instruction_i0);case De:return t(e.effect_instruction_i0)}});var iE=e=>m(e,sE(z));var jl=e=>ce(Vt(e)),bl=l(2,(e,t)=>{switch(e._tag){case Le:return ce(e.effect_instruction_i0);case De:return ge(t(e.effect_instruction_i0))}});var Pi=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Le:return t(e.effect_instruction_i0);case De:return r(e.effect_instruction_i0)}}),Ss=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Le:return t(e.effect_instruction_i0);case De:return r(e.effect_instruction_i0)}}),ge=e=>{let t=new El(De);return t.effect_instruction_i0=e,t},Yt=ge(void 0);var ra=l(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case Le:switch(t._tag){case De:return ce(e.effect_instruction_i0);case Le:return ce(r(e.effect_instruction_i0,t.effect_instruction_i0))}case De:switch(t._tag){case De:return ge(o(e.effect_instruction_i0,t.effect_instruction_i0));case Le:return ce(t.effect_instruction_i0)}}}),EP=(e,t)=>{let r=Dr(e);return rt(r)?m(nt(r),rr(m(Xe(r),bl(Fe)),(o,n)=>m(o,ra(n,{onSuccess:(s,i)=>m(s,Ze(i)),onFailure:t}))),bl(Lr),bl(o=>or(o)),_):S()},oa=e=>({[x_]:g_,state:Wr(y_([])),blockingOn:e,pipe(){return O(this,arguments)}}),Rt=()=>x(sn,e=>cE(e)),cE=e=>E(()=>oa(e)),ct=e=>He(t=>{let r=Dt(e.state);switch(r._tag){case Gc:return t(r.effect);case is:return r.joiners.push(t),OP(e,t)}},e.blockingOn),zh=l(2,(e,t)=>Jr(t,e)),na=l(2,(e,t)=>E(()=>{let r=Dt(e.state);switch(r._tag){case Gc:return!1;case is:{sr(e.state,Fh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t);return!0}}})),Gh=l(2,(e,t)=>na(e,t));var _s=l(2,(e,t)=>na(e,Q(t)));var aE=e=>x(sn,t=>na(e,Ml(t)));var sa=l(2,(e,t)=>na(e,y(t)));var ia=(e,t)=>{let r=Dt(e.state);if(r._tag===is){sr(e.state,Fh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t)}},OP=(e,t)=>E(()=>{let r=Dt(e.state);if(r._tag===is){let o=r.joiners.indexOf(t);o>=0&&r.joiners.splice(o,1)}}),vP=Bt(dt),cr=()=>vP;var ar=e=>x(cr(),e),Cr=l(2,(e,t)=>Be(dt,t)(e)),zl=l(2,(e,t)=>ot(dt,r=>Hn(r,t))(e)),Es=l(2,(e,t)=>ar(r=>Cr(e,t(r)))),uE=e=>{let t=e.getFiberRef(dt).unsafeMap.get(_r.key);return t!==void 0&&t._tag==="Span"?_(t):S()},CP={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:S(),context:Ct(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Yt},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},lE=e=>{let t=Object.create(CP);return t.name=e,t};var Os=ct;var pE=Gh;var fE=aE;var $h=oa;u();var mE=iE;var hE=ge;u();var dE=Symbol.for("effect/MutableHashMap"),kP={[dE]:dE,[Symbol.iterator](){return new Jh(this)},toString(){return re(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},Jh=class e{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let t=this.referentialIterator.next();return t.done?(this.bucketIterator=new Yh(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new e(this.self)}},Yh=class{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}},vs=()=>{let e=Object.create(kP);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e};var Ge=l(2,(e,t)=>{if(Zs(t)===!1)return e.referential.has(t)?_(e.referential.get(t)):S();let r=t[F](),o=e.buckets.get(r);return o===void 0?S():wP(e,o,t)}),wP=(e,t,r,o=!1)=>{for(let n=0,s=t.length;n<s;n++)if(r[R](t[n][0])){let i=t[n][1];return o&&(t.splice(n,1),e.bucketsSize--),_(i)}return S()},kr=l(2,(e,t)=>U(Ge(e,t))),Ut=l(3,(e,t,r)=>{if(Zs(t)===!1)return e.referential.set(t,r),e;let o=t[F](),n=e.buckets.get(o);return n===void 0?(e.buckets.set(o,[[t,r]]),e.bucketsSize++,e):(xE(e,n,t),n.push([t,r]),e.bucketsSize++,e)}),xE=(e,t,r)=>{for(let o=0,n=t.length;o<n;o++)if(r[R](t[o][0])){t.splice(o,1),e.bucketsSize--;return}};var Cs=l(2,(e,t)=>{if(Zs(t)===!1)return e.referential.delete(t),e;let r=t[F](),o=e.buckets.get(r);return o===void 0||(xE(e,o,t),o.length===0&&e.buckets.delete(r)),e});var Gl=e=>e.referential.size+e.bucketsSize;u();u();var gE=Symbol.for("effect/MutableList"),MP={[gE]:gE,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();let r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return re(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},RP=e=>({value:e,removed:!1,prev:void 0,next:void 0}),yE=()=>{let e=Object.create(MP);return e.head=void 0,e.tail=void 0,e._length=0,e};var bE=e=>Qh(e)===0,Qh=e=>e._length;var SE=l(2,(e,t)=>{let r=RP(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),_E=e=>{let t=e.head;if(t!==void 0)return FP(e,t),t.value};var FP=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var OE=Symbol.for("effect/MutableQueue"),Zh=Symbol.for("effect/mutable/MutableQueue/Empty"),TP={[OE]:OE,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return re(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},AP=e=>{let t=Object.create(TP);return t.queue=yE(),t.capacity=e,t};var vE=()=>AP(void 0);var CE=l(2,(e,t)=>{let r=Qh(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(SE(t)(e.queue),!0)});var kE=l(2,(e,t)=>bE(e.queue)?t:_E(e.queue));u();u();u();var IP="effect/Clock",Xh=Symbol.for(IP),Qt=vt("effect/Clock"),PP=2**31-1,ME={unsafeSchedule(e,t){let r=qr(t);if(r>PP)return oo;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},RE=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));let t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),NP=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return RE;let t=RE()-e.bigint();return()=>t+e.bigint()}(),ed=class{[Xh]=Xh;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return NP()}currentTimeMillis=E(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=E(()=>this.unsafeCurrentTimeNanos());scheduler(){return y(ME)}sleep(t){return He(r=>{let o=ME.unsafeSchedule(()=>r(B),t);return Oe(E(o))})}},td=()=>new ed;u();u();u();var hn=rb;u();var FE=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");u();u();var od="And",nd="Or",sd="InvalidData",id="MissingData",cd="SourceUnavailable",ad="Unsupported";var WP="effect/ConfigError",AE=Symbol.for(WP),Ni={_tag:"ConfigError",[AE]:AE},ud=(e,t)=>{let r=Object.create(Ni);return r._op=od,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},ld=(e,t)=>{let r=Object.create(Ni);return r._op=nd,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},BP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ni);return o._op=sd,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o},vo=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ni);return o._op=id,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o},UP=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(Ni);return n._op=cd,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${m(this.path,ao(o.pathDelim))}: "${this.message}")`}}),n},jP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Ni);return o._op=ad,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o};var dn=l(2,(e,t)=>{switch(e._op){case od:return ud(dn(e.left,t),dn(e.right,t));case nd:return ld(dn(e.left,t),dn(e.right,t));case sd:return BP([...t,...e.path],e.message);case id:return vo([...t,...e.path],e.message);case cd:return UP([...t,...e.path],e.message,e.cause);case ad:return jP([...t,...e.path],e.message)}});u();var PE={_tag:"Empty"};var Kl=l(2,(e,t)=>{let r=Ac(t),o=e;for(;Tc(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=ho(n.first,ho(n.second,r.tail));break}case"MapName":{o=Pr(o,n.f),r=r.tail;break}case"Nested":{o=ai(o,n.name),r=r.tail;break}case"Unnested":{if(m(Go(o),cm(n.name)))o=Ar(o),r=r.tail;else return Et(vo(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return Ke(o)});u();var NE="Constant",LE="Fail",DE="Fallback",qE="Described",HE="Lazy",WE="MapOrFail",BE="Nested",UE="Primitive",jE="Sequence",zE="HashMap",GE="ZipWith";var Jl=(e,t)=>[...e,...t],$P="effect/ConfigProvider",$E=Symbol.for($P),Li=vt("effect/ConfigProvider"),VP="effect/ConfigProviderFlat",VE=Symbol.for(VP),KP=e=>({[$E]:$E,pipe(){return O(this,arguments)},...e}),JP=e=>({[VE]:VE,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),YP=e=>KP({load:t=>x(ur(e,jt(),t,!1),r=>Je(Go(r),{onNone:()=>V(vo(jt(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),KE=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=a=>m(a,ao(t)),n=a=>a.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return YP(JP({load:(a,p,f=!0)=>{let h=o(a),d=s(),g=h in d?_(d[h]):S();return m(g,an(()=>vo(a,`Expected ${h} to exist in the process context`)),x(b=>tN(b,a,p,r,f)))},enumerateChildren:a=>E(()=>{let p=s(),d=Object.keys(p).map(g=>n(g.toUpperCase())).filter(g=>{for(let b=0;b<a.length;b++){let M=m(a,lm(b)),T=g[b];if(T===void 0||M!==T)return!1}return!0}).flatMap(g=>g.slice(a.length,a.length+1));return ju(d)}),patch:PE}))};var QP=(e,t,r,o)=>{let n=hm(r.length,a=>a>=o.length?S():_([e(a),a+1])),s=hm(o.length,a=>a>=r.length?S():_([t(a),a+1])),i=Jl(r,n),c=Jl(o,s);return[i,c]},ZP=(e,t)=>{let r=t;if(r._tag==="Nested"){let o=e.slice();for(;r._tag==="Nested";)o.push(r.name),r=r.config;return o}return e},ur=(e,t,r,o)=>{let n=r;switch(n._tag){case NE:return y(Ot(n.value));case qE:return I(()=>ur(e,t,n.config,o));case LE:return V(vo(t,n.message));case DE:return m(I(()=>ur(e,t,n.first,o)),Er(s=>n.condition(s)?m(ur(e,t,n.second,o),Er(i=>V(ld(s,i)))):V(s)));case HE:return I(()=>ur(e,t,n.config(),o));case WE:return I(()=>m(ur(e,t,n.original,o),x(it(s=>m(n.mapOrFail(s),an(dn(ZP(t,n.original))))))));case BE:return I(()=>ur(e,Jl(t,Ot(n.name)),n.config,o));case UE:return m(Kl(t,e.patch),x(s=>m(e.load(s,n,o),x(i=>{if(i.length===0){let c=m(Ou(s),qe(()=>"<n/a>"));return V(vo([],`Expected ${n.description} with name ${c}`))}return y(i)}))));case jE:return m(Kl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(oN),x(i=>i.length===0?I(()=>v(ur(e,s,n.config,!0),Ot)):m(it(i,c=>ur(e,xb(t,`[${c}]`),n.config,!0)),v(c=>{let a=vu(c);return a.length===0?Ot(jt()):Ot(a)}))))));case zE:return I(()=>m(Kl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(i=>m(i,it(c=>ur(e,Jl(s,Ot(c)),n.valueConfig,o)),v(c=>c.length===0?Ot(Kn()):m(rN(c),Pr(a=>OS(mm(te(i),a)))))))))));case GE:return I(()=>m(ur(e,t,n.left,o),Vr,x(s=>m(ur(e,t,n.right,o),Vr,x(i=>{if(co(s)&&co(i))return V(ud(s.left,i.left));if(co(s)&&ci(i))return V(s.left);if(ci(s)&&co(i))return V(i.left);if(ci(s)&&ci(i)){let c=m(t,ao(".")),a=XP(t,c),[p,f]=QP(a,a,m(s.right,Pr(Ke)),m(i.right,Pr(Ke)));return m(p,mm(f),it(([h,d])=>m(ps(h,d),v(([g,b])=>n.zip(g,b)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},XP=(e,t)=>r=>Et(vo(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var eN=(e,t)=>e.split(new RegExp(`\\s*${FE(t)}\\s*`)),tN=(e,t,r,o,n)=>n?m(eN(e,o),it(s=>r.parse(s.trim())),an(dn(t))):m(r.parse(e),Yc({onFailure:dn(t),onSuccess:Ot})),rN=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),oN=e=>m(it(e,sN),Yc({onFailure:()=>jt(),onSuccess:qn(hn)}),Vr,v(Su));var nN=/^(\[(\d+)\])$/,sN=e=>{let t=e.match(nN);if(t!==null){let r=t[2];return m(r!==void 0&&r.length>0?_(r):S(),tr(iN))}return S()};var iN=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?S():_(t)};u();var JE=Symbol.for("effect/Console"),Co=vt("effect/Console"),YE={[JE]:JE,assert(e,...t){return E(()=>{console.assert(e,...t)})},clear:E(()=>{console.clear()}),count(e){return E(()=>{console.count(e)})},countReset(e){return E(()=>{console.countReset(e)})},debug(...e){return E(()=>{console.debug(...e)})},dir(e,t){return E(()=>{console.dir(e,t)})},dirxml(...e){return E(()=>{console.dirxml(...e)})},error(...e){return E(()=>{console.error(...e)})},group(e){return e?.collapsed?E(()=>console.groupCollapsed(e?.label)):E(()=>console.group(e?.label))},groupEnd:E(()=>{console.groupEnd()}),info(...e){return E(()=>{console.info(...e)})},log(...e){return E(()=>{console.log(...e)})},table(e,t){return E(()=>{console.table(e,t)})},time(e){return E(()=>console.time(e))},timeEnd(e){return E(()=>console.timeEnd(e))},timeLog(e,...t){return E(()=>{console.timeLog(e,...t)})},trace(...e){return E(()=>{console.trace(...e)})},warn(...e){return E(()=>{console.warn(...e)})},unsafe:console};u();var aN="effect/Random",ZE=Symbol.for(aN),Di=vt("effect/Random"),pd=class{seed;[ZE]=ZE;PRNG;constructor(t){this.seed=t,this.PRNG=new cu(t)}get next(){return E(()=>this.PRNG.number())}get nextBoolean(){return v(this.next,t=>t>.5)}get nextInt(){return E(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return v(this.next,o=>(r-t)*o+t)}nextIntBetween(t,r){return E(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return uN(t,r=>this.nextIntBetween(0,r))}},uN=(e,t)=>I(()=>m(E(()=>Array.from(e)),x(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return m(o,Ht(n=>m(t(n),v(s=>lN(r,n-1,s)))),pe(Dr(r)))}))),lN=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},XE=e=>new pd(w(e));var fN=m(Ct(),ke(Qt,td()),ke(Co,YE),ke(Di,XE(Math.random())),ke(Li,KE()),ke(Gr,__)),be=W(Symbol.for("effect/DefaultServices/currentServices"),()=>Al(fN)),eO=e=>{let t=st(e);return ca(r=>r.sleep(t))},ca=e=>We(be,t=>e(Ue(t,Qt))),tO=ca(e=>e.currentTimeMillis),rO=ca(e=>e.currentTimeNanos),oO=l(2,(e,t)=>ot(be,ke(Qt,t))(e)),nO=l(2,(e,t)=>ot(be,ke(Li,t))(e)),sO=e=>We(be,t=>e(Ue(t,Li)));var Yl=e=>We(be,t=>e(Ue(t,Di))),iO=l(2,(e,t)=>ot(be,ke(Di,t))(e));var Ql=e=>We(be,t=>e(Ue(t,Gr))),cO=l(2,(e,t)=>ot(be,ke(Gr,t))(e));var fd=eO,Zl=tO,aO=rO,uO=ca,lO=Qt;u();u();function pO(e){return new Zr(e)}function fO(){return pO(new Map)}var hd=Symbol.for("effect/FiberRefs"),Zr=class{locals;[hd]=hd;constructor(t){this.locals=t}pipe(){return O(this,arguments)}},mN=(e,t,r,o=!1)=>{let n=e,s=t,i=r,c=o,a;for(;a===void 0;)if(yt(s)&&yt(i)){let p=bt(s)[0],f=Ar(s),h=bt(i)[0],d=bt(i)[1],g=Ar(i);p.startTimeMillis<h.startTimeMillis?(i=g,c=!0):p.startTimeMillis>h.startTimeMillis?s=f:p.id<h.id?(i=g,c=!0):p.id>h.id?s=f:a=[d,c]}else a=[n.initial,!0];return a},Xl=l(3,(e,t,r)=>{let o=new Map(e.locals);return r.locals.forEach((n,s)=>{let i=n[0][1];if(!n[0][0][R](t)){if(!o.has(s)){if(C(i,s.initial))return;o.set(s,[[t,s.join(s.initial,i)]]);return}let c=o.get(s),[a,p]=mN(s,c,n);if(p){let f=s.diff(a,i),h=c[0][1],d=s.join(h,s.patch(f)(h));if(!C(h,d)){let g,b=c[0][0];b[R](t)?g=[[b,d],...c.slice(1)]:g=[[t,d],...c],o.set(s,g)}}}}),new Zr(o)}),xd=l(2,(e,t)=>{let r=new Map;return mO(e,r,t),new Zr(r)}),mO=(e,t,r)=>{e.locals.forEach((o,n)=>{let s=o[0][1],i=n.patch(n.fork)(s);C(s,i)?t.set(n,o):t.set(n,[[r,i],...o])})},hO=e=>ju(e.locals.keys()),dO=e=>Ht(hO(e),t=>cs(t,ks(e,t))),aa=l(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new Zr(r)}),Hi=l(2,(e,t)=>e.locals.has(t)?_(bt(e.locals.get(t))[1]):S()),ks=l(2,(e,t)=>m(Hi(e,t),qe(()=>t.initial))),Wi=l(2,(e,{fiberId:t,fiberRef:r,value:o})=>{if(e.locals.size===0)return new Zr(new Map([[r,[[t,o]]]]));let n=new Map(e.locals);return dd(n,t,r,o),new Zr(n)}),dd=(e,t,r,o)=>{let n=e.get(r)??[],s;if(yt(n)){let[i,c]=bt(n);if(i[R](t)){if(C(c,o))return;s=[[t,o],...n.slice(1)]}else s=[[t,o],...n]}else s=[[t,o]];e.set(r,s)},xO=l(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new Zr(new Map(t));let o=new Map(e.locals);return r!==void 0&&mO(e,o,r),t.forEach(([n,s])=>{s.length===1?dd(o,s[0][0],n,s[0][1]):s.forEach(([i,c])=>{dd(o,i,n,c)})}),new Zr(o)});var yd=Hi,gO=ks,yO=Xl,bO=dO;var SO=xO;var _O=fO;u();var hN=U_,bd=j_,Sd=z_,_d=G_,Ed=Lh,Od=Dh,vd=$_,dN=V_;var xN=m(hn,ob(e=>e.ordinal));var EO=nm(xN);var OO=e=>{switch(e){case"All":return hN;case"Debug":return Od;case"Error":return Sd;case"Fatal":return bd;case"Info":return Ed;case"Trace":return vd;case"None":return dN;case"Warning":return _d}};u();u();var vO=(e,t)=>({label:e,startTime:t}),CO=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var kO=vO,wO=CO;u();u();u();var Xr=Symbol.for("effect/Readable");var $K={[Xr]:Xr,pipe(){return O(this,arguments)}};var tp=Symbol.for("effect/Ref"),Rd={_A:e=>e},Md=class{ref;[tp]=Rd;[Xr];constructor(t){this.ref=t,this[Xr]=Xr,this.get=E(()=>Dt(this.ref))}get;modify(t){return E(()=>{let r=Dt(this.ref),[o,n]=t(r);return r!==n&&sr(n)(this.ref),o})}pipe(){return O(this,arguments)}},rp=e=>new Md(Wr(e)),ws=e=>E(()=>rp(e)),lr=e=>e.get,ko=l(2,(e,t)=>e.modify(()=>[void 0,t])),MO=l(2,(e,t)=>e.modify(r=>[r,t]));var op=l(2,(e,t)=>e.modify(t));var ua=l(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var la=ws,sp=lr,RO=MO;var FO=op;var TO=ua;u();var AO=Ql;u();var PO="Empty",NO="Add",LO="Remove",DO="Update",qO="AndThen",HO={_tag:PO},pa=(e,t)=>{let r=new Map(e.locals),o=HO;for(let[n,s]of t.locals.entries()){let i=bt(s)[1],c=r.get(n);if(c!==void 0){let a=bt(c)[1];C(a,i)||(o=ip({_tag:DO,fiberRef:n,patch:n.diff(a,i)})(o))}else o=ip({_tag:NO,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=ip({_tag:LO,fiberRef:n})(o);return o},ip=l(2,(e,t)=>({_tag:qO,first:e,second:t})),cp=l(3,(e,t,r)=>{let o=r,n=Ot(e);for(;yt(n);){let s=bt(n),i=Ar(n);switch(s._tag){case PO:{n=i;break}case NO:{o=Wi(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case LO:{o=aa(o,s.fiberRef),n=i;break}case DO:{let c=ks(o,s.fiberRef);o=Wi(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(c)}),n=i;break}case qO:{n=ai(s.first)(ai(s.second)(i));break}}}return o});u();var BO="effect/MetricLabel",Td=Symbol.for(BO),Ad=class{key;value;[Td]=Td;_hash;constructor(t,r){this.key=t,this.value=r,this._hash=ae(BO+this.key+this.value)}[F](){return this._hash}[R](t){return yN(t)&&this.key===t.key&&this.value===t.value}pipe(){return O(this,arguments)}},Ms=(e,t)=>new Ad(e,t),yN=e=>k(e,Td);var UO=l(e=>le(e[0]),function(){let e=arguments;return ot(e[0],pn,typeof e[1]=="string"?br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>br(r,o,n),t))}),lp=e=>v(e,_),jO=e=>an(e,_),Pd=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),E(()=>{try{return t()}catch(o){throw T_(Qo(r?r(o):new fn(o)))}})},zO=l(3,(e,t,r)=>Er(e,o=>k(o,t)&&o[t]===r.failure?r.onFailure(o):V(o))),GO=l(2,(e,t)=>$r(e,r=>{let o=Zo(r,n=>wi(n)?_(n):S());switch(o._tag){case"None":return Q(r);case"Some":return t(o.value.defect)}})),$O=l(2,(e,t)=>_e(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return Q(r);case"Some":return o.value}},onSuccess:y})),VO=l(2,(e,t)=>$r(e,r=>{let o=Zo(r,n=>wi(n)?_(n):S());switch(o._tag){case"None":return Q(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:Q(r)}}})),KO=l(3,(e,t,r)=>Kc(e,In(t),r)),JO=l(2,(e,t)=>{let r;return Kc(e,o=>(r??=Object.keys(t),k(o,"_tag")&&su(o._tag)&&r.includes(o._tag)),o=>t[o._tag](o))}),YO=e=>Jc(e,{onFailure:z,onSuccess:()=>Sr}),eo=uO,QO=eo(y),ZO=l(2,(e,t)=>se(fd(t),e)),pp=e=>oe((t,r)=>e({id:t.id(),status:r,interruptors:Uc(t.getFiberRef(xs))})),XO=pp(e=>zn(e.interruptors)>0?wl:B),e0=pp(y),Bi=e=>da(e,fp,pa),bN=e=>da(e,ps(fp,Fi),([t,r],[o,n])=>[pa(t,o),ir(r,n)]),t0=y({}),r0=nu(v,x),o0=ou(v),n0=ru(v),s0=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?(o.push(c),y(!0)):t(c,a))}return v(s,()=>o)})),i0=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>v(p?t(c,a):y(!1),f=>(f||o.push(c),f)))}return v(s,()=>o)})),c0=e=>v(cr(),e),Nd=e=>us(e,()=>x(Yr(),()=>Nd(e))),a0=l(2,(e,t)=>v(it(e,z),ui(t))),u0=l(3,(e,t,r)=>fa(e,t,o=>on(()=>r(o)))),l0=l(3,(e,t,r)=>fa(e,t,()=>rn(r))),fa=l(3,(e,t,r)=>x(e,o=>t(o)?y(o):r(o))),p0=l(3,(e,t,r)=>I(()=>t(e)?y(e):V(r(e)))),f0=l(e=>le(e[0]),(e,t,r)=>fa(e,t,o=>r===void 0?V(new Jt):Or(()=>r(o)))),m0=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(S()):h0(r,0,t,o.value)})),h0=(e,t,r,o)=>x(r(o,t),n=>{if(n)return y(_(o));let s=e.next();return s.done?y(S()):h0(e,t+1,r,s.value)}),d0=e=>I(()=>{let t=Dr(e);return rt(t)?m(nt(t),rr(Xe(t),(r,o)=>us(r,()=>o))):on(()=>new Zc("Received an empty collection of effects"))}),x0=l(2,(e,t)=>cn(t(cn(e)))),ma=l(2,(e,t)=>et(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),g0=l(2,(e,t)=>I(()=>y0(e[Symbol.iterator](),0,t))),y0=(e,t,r)=>{let o=e.next();return o.done?y(!0):x(r(o.value,t),n=>n?y0(e,t+1,r):y(n))},Ld=e=>{let t=x(x(e,()=>Yr()),()=>t);return t},b0=function(){let e;return arguments.length===1?e=arguments[0]:e=arguments[1].bind(arguments[0]),I(()=>{let t=e(m),r=Ne(()=>t.next()),o=n=>n.done?y(n.value):x(Ys(n.value),s=>o(Ne(()=>t.next(s))));return o(r)})},fp=oe(e=>y(e.getFiberRefs())),S0=e=>x(e,t=>{let o=t[Symbol.iterator]().next();return o.done?V(new Jt):y(o.value)}),Dd=e=>ma(e,{onFailure:Ho,onSuccess:Ho}),_0=e=>_e(e,{onFailure:t=>Hd(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>B}),E0=e=>hp((t,r)=>yO(r,t,e)),O0=e=>ma(e,{onFailure:qo,onSuccess:oo}),v0=e=>ma(e,{onFailure:oo,onSuccess:qo}),qd=(e,t)=>I(()=>t.while(e)?x(t.body(e),r=>qd(r,t)):y(e)),wo=e=>(...t)=>{let r=gr(e),o;for(let n=0,s=t.length;n<s;n++){let i=t[n];fl(i)&&(o!==void 0?o=je(o,i):o=i,t=[...t.slice(0,n),...t.slice(n+1)],n--)}return o===void 0&&(o=Sr),oe(n=>(n.log(t,o,r),B))},C0=wo(),k0=wo(vd),Hd=wo(Od),w0=wo(Ed),M0=wo(_d),R0=wo(Sd),F0=wo(bd),T0=l(2,(e,t)=>x(Zl,r=>ot(e,Pl,Xu(kO(t,r))))),A0=Bt(pn),I0=(e,t)=>t.discard?N0(e,t.while,t.step,t.body):v(P0(e,t.while,t.step,t.body),te),P0=(e,t,r,o)=>I(()=>t(e)?x(o(e),n=>v(P0(r(e),t,r,o),Xu(n))):E(()=>Ur())),N0=(e,t,r,o)=>I(()=>t(e)?x(o(e),()=>N0(r(e),t,r,o)):B),L0=l(3,(e,t,r)=>I(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,c=0;for(;!(i=o.next()).done;){let a=c++,p=i.value;s=x(s,f=>v(r(f,p,a),([h,d])=>(n.push(d),h)))}return v(s,a=>[a,n])})),Ui=l(2,(e,t)=>_e(e,{onFailure:r=>nn(()=>t(r)),onSuccess:y})),Wd=e=>m(Rt(),x(t=>m(bN(e),Jr(t),Bd,v(r=>se(r,m(ct(t),x(([o,n])=>pe(ps(Rs(o[0]),un(o[1])),n)))))))),D0=e=>et(e,{onFailure:t=>y(t),onSuccess:y}),mp=e=>v(e,t=>!t),q0=e=>x(e,t=>{switch(t._tag){case"None":return B;case"Some":return V(new Jt)}}),Bd=e=>v(la(!0),t=>Oe(Ti(e,RO(t,!1)))),H0=e=>et(e,{onFailure:()=>y(S()),onSuccess:t=>y(_(t))}),W0=l(2,(e,t)=>us(e,()=>Or(t))),B0=l(2,(e,t)=>us(e,()=>E(t))),U0=e=>_e(e,{onFailure:t=>{let r=te(Bc(t));return r.length===0?Q(t):V(r)},onSuccess:y}),Rs=e=>hp((t,r)=>m(e,cp(t,r))),j0=e=>e.length>=1?He((t,r)=>{e(r).then(o=>t(ge(o)),o=>t(Ul(o)))}):He(t=>{e().then(r=>t(ge(r)),r=>t(Ul(r)))}),ji=l(3,(e,t,r)=>ar(o=>Cr(e,ke(o,t,r)))),z0=l(3,(e,t,r)=>ar(o=>x(r,n=>Cr(e,m(o,ke(t,n)))))),G0=Yl(y),$0=l(3,(e,t,r)=>te(e).reduce((o,n,s)=>x(o,i=>r(i,n,s)),y(t))),V0=l(3,(e,t,r)=>te(e).reduceRight((o,n,s)=>x(o,i=>r(n,i,s)),y(t))),K0=l(3,(e,t,r)=>x(E(()=>e[Symbol.iterator]()),o=>J0(o,0,t,r.while,r.body))),J0=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?x(n(r,s.value,t),i=>J0(e,t+1,i,o,n)):y(r)},Y0=l(2,(e,t)=>I(()=>Q0(e,t))),Q0=(e,t)=>x(e,r=>t<=0?y(r):se(Yr(),Q0(e,t-1))),Z0=e=>_e(e,{onFailure:V,onSuccess:y}),X0=e=>I(()=>bO(e)),Fs=fd,ha=y(S()),ev=e=>y(_(e)),da=l(3,(e,t,r)=>x(t,o=>x(e,n=>v(t,s=>[r(o,s),n])))),tv=l(e=>le(e[0]),function(){return Ud(arguments[0],typeof arguments[1]=="string"?[Ms(arguments[1],arguments[2])]:Object.entries(arguments[1]).map(([e,t])=>Ms(e,t)))}),Ud=l(2,(e,t)=>ot(e,Eo,r=>Ir(r,t))),rv=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?y(!0):(o.push(c),t(c,a)))}return v(s,()=>o)})),ov=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>m(p?t(c,a):y(!1),v(f=>(f&&o.push(c),f))))}return v(s,()=>o)})),nv=l(2,(e,{onFailure:t,onSuccess:r})=>_e(e,{onFailure:o=>{let n=zr(o);switch(n._tag){case"Left":return se(t(n.left),Q(o));case"Right":return Q(o)}},onSuccess:o=>pe(r(o),o)})),sv=l(2,(e,t)=>$r(e,r=>Je(Mh(r),{onNone:()=>Q(r),onSome:o=>se(t(o),Q(r))}))),jd=l(2,(e,t)=>_e(e,{onFailure:r=>{let o=zr(r);switch(o._tag){case"Left":return se(t(o.left),Q(r));case"Right":return Q(r)}},onSuccess:y})),iv=l(3,(e,t,r)=>jd(e,o=>In(o,t)?r(o):B)),cv=l(2,(e,t)=>_e(e,{onFailure:r=>se(t(r),Q(r)),onSuccess:y})),av=e=>zd(e,aO),zd=l(2,(e,t)=>da(e,t,(r,o)=>kc(o-r))),SN=AO,uv=SN(y),Gd=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?He((o,n)=>{try{t(n).then(s=>o(ge(s)),s=>o(V(r?r(s):new fn(s))))}catch(s){o(V(r?r(s):new fn(s)))}}):He(o=>{try{t().then(n=>o(ge(n)),n=>o(V(r?r(n):new fn(n))))}catch(n){o(V(r?r(n):new fn(n)))}})},lv=l(2,(e,t)=>x(e,r=>Pd({try:()=>t.try(r),catch:t.catch}))),pv=l(2,(e,t)=>x(e,r=>Gd({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),fv=l(2,(e,t)=>I(()=>t()?ha:lp(e))),mv=l(2,(e,t)=>x(t,r=>r?ha:lp(e))),hv=e=>Ui(e,Rh),hp=e=>oe(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),B)),dv=l(3,(e,t,r)=>Es(e,o=>ke(o,t,r(pi(o,t))))),dp=l(2,(e,t)=>I(()=>t()?v(e,_):y(S()))),xv=l(3,(e,t,r)=>x(Bt(t),o=>r(o)?v(e,n=>[o,_(n)]):y([o,S()]))),gv=l(3,(e,t,r)=>x(sp(t),o=>r(o)?v(e,n=>[o,_(n)]):y([o,S()]))),yv=l(2,(e,t)=>t(e)),bv=(e,t)=>(...r)=>x(e,o=>t(o)(...r)),Sv=(e,t)=>(...r)=>v(e,o=>t(o)(...r)),$d=e=>new Proxy({},{get(t,r,o){return(...n)=>x(e,s=>s[r](...n))}}),Vd=e=>new Proxy({},{get(t,r,o){return x(e,n=>le(n[r])?n[r]:y(n[r]))}}),_v=e=>({functions:$d(e),constants:Vd(e)}),Ev=e=>v(cr(),yr(e)),Kd=e=>x(cr(),yr(e)),Ov=function(){let e=arguments;return Dd(x(Jd,t=>E(()=>{if(typeof e[0]=="string")t.attribute(e[0],e[1]);else for(let r in e[0])t.attribute(r,e[0][r])})))},vv=l(e=>le(e[0]),function(){let e=arguments;return ot(e[0],Qc,typeof e[1]=="string"?br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>br(r,o,n),t))}),Cv=Kd(_r),Jd=x(cr(),e=>{let t=e.unsafeMap.get(_r.key);return t!==void 0&&t._tag==="Span"?y(t):V(new Jt)}),kv=l(e=>le(e[0]),(e,t,r)=>ot(e,Ll,ku({_tag:"SpanLink",span:t,attributes:r??{}}))),wv=BigInt(0),xp=(e,t,r)=>{if(e.getFiberRef(Uh)===!1)return lE(t);let n=e.getFiberRef(dt),s=e.getFiberRef(be),i=Ue(s,Gr),c=Ue(s,lO),a=e.getFiberRef(Ii),p=e.getFiberRefs(),f=yd(p,Qc),h=yd(p,Ll),d=r.parent?_(r.parent):r.root?S():yr(n,_r),g=h._tag==="Some"?r.links!==void 0?[...or(h.value),...r.links??[]]:or(h.value):r.links??jt(),b=i.span(t,d,r.context??Ct(),g,a?c.unsafeCurrentTimeNanos():wv,r.kind??"internal");return typeof r.captureStackTrace=="function"&&zc.set(b,r.captureStackTrace),f._tag==="Some"&&MS(f.value,(M,T)=>b.attribute(T,M)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([M,T])=>b.attribute(M,T)),b},Mv=(e,t)=>(t=yo(t),oe(r=>y(xp(r,e,t)))),Rv=Bt(Qc),Fv=Bt(Ll),Yd=(e,t,r,o)=>E(()=>{e.status._tag!=="Ended"&&(jh(t)&&zc.has(e)&&e.attribute("code.stacktrace",zc.get(e)()),e.end(o?r.unsafeCurrentTimeNanos():wv,t))}),ap=(e,...t)=>{let r=yo(t.length===1?void 0:t[0]),o=t[t.length-1];return oe(n=>{let s=xp(n,e,r),i=n.getFiberRef(Ii),c=Ue(n.getFiberRef(be),Qt);return St(o(s),a=>Yd(s,a,c,i))})},up=l(2,(e,t)=>ji(e,_r,t)),Qd=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=yo(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return ap(t,r,n=>up(o,n))}return o=>ap(t,r,n=>up(o,n))},Tv=e=>function(){let t=e.captureStackTrace??!1;if(e.captureStackTrace!==!1){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let o=new Error;Error.stackTraceLimit=r;let n=!1;t=()=>{if(n!==!1)return n;if(o.stack)return n=o.stack.trim().split(`
`).slice(2).join(`
`).trim(),n}}return I(()=>{let r=typeof e.options=="function"?e.options.apply(null,arguments):e.options;return Qd(I(()=>Ne(()=>e.body.apply(this,arguments))),r.name,{...r,captureStackTrace:t})})},Av=e=>e==null?V(new Jt):y(e),Iv=e=>Er(v(e,_),t=>rE(t)?ha:V(t));u();u();var Zd=Jf;var Pv=io;u();u();var Lv="Sequential",Dv="Parallel",_N="ParallelN",to={_tag:Lv},qv={_tag:Dv},Hv=e=>({_tag:_N,parallelism:e}),Xd=e=>e._tag===Lv,ex=e=>e._tag===Dv;var yp=to,bp=qv,Sp=Hv;u();var Ts=pa;var As=cp;u();u();var Ep="effect/FiberStatus",xn=Symbol.for(Ep),_p="Done",Bv="Running",Uv="Suspended",EN=ae(`${Ep}-${_p}`),rx=class{[xn]=xn;_tag=_p;[F](){return EN}[R](t){return Op(t)&&t._tag===_p}},ox=class{runtimeFlags;[xn]=xn;_tag=Bv;constructor(t){this.runtimeFlags=t}[F](){return m(w(Ep),D(w(this._tag)),D(w(this.runtimeFlags)),K(this))}[R](t){return Op(t)&&t._tag===Bv&&this.runtimeFlags===t.runtimeFlags}},nx=class{runtimeFlags;blockingOn;[xn]=xn;_tag=Uv;constructor(t,r){this.runtimeFlags=t,this.blockingOn=r}[F](){return m(w(Ep),D(w(this._tag)),D(w(this.runtimeFlags)),D(w(this.blockingOn)),K(this))}[R](t){return Op(t)&&t._tag===Uv&&this.runtimeFlags===t.runtimeFlags&&C(this.blockingOn,t.blockingOn)}},jv=new rx,zv=e=>new ox(e),Gv=(e,t)=>new nx(e,t),Op=e=>k(e,xn),$v=e=>e._tag===_p;var Vv=jv,sx=zv,Kv=Gv;var Jv=$v;u();var oC=Symbol.for("effect/Micro"),Zt=Symbol.for("effect/Micro/runSymbol"),Qv=e=>typeof e=="object"&&e!==null&&oC in e,Zv=Symbol.for("effect/Micro/MicroCause"),vN={_E:z},vp=class extends globalThis.Error{_tag;traces;[Zv];constructor(t,r,o){let n=`MicroCause.${t}`,s,i,c;if(r instanceof globalThis.Error){s=`(${n}) ${r.name}`,i=r.message;let a=i.split(`
`).length;c=r.stack?`(${n}) ${r.stack.split(`
`).slice(0,a+3).join(`
`)}`:`${s}: ${i}`}else s=n,i=Bo(r,0),c=`${s}: ${i}`;o.length>0&&(c+=`
    ${o.join(`
    `)}`),super(i),this._tag=t,this.traces=o,this[Zv]=vN,this.name=s,this.stack=c}pipe(){return O(this,arguments)}toString(){return this.stack}[G](){return this.stack}};var ax=class extends vp{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},CN=(e,t=[])=>new ax(e,t),ux=class extends vp{constructor(t=[]){super("Interrupt","interrupted",t)}},kN=(e=[])=>new ux(e);var Cp=Et(kN()),ga=Ke;var nC=e=>Et(CN(e));var wN=Symbol.for("effect/Micro/Env"),Xv=Symbol.for("effect/Micro/EnvRef"),MN={[wN]:{_R:z},pipe(){return O(this,arguments)}},fx=e=>{let t=Object.create(MN);return t.refs=e,t},sC=()=>{let e=new AbortController,t=Object.create(null);return t[Mp.key]=e,t[Is.key]=e.signal,t[pC.key]=new kp,fx(t)},Ps=l(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),iC=l(3,(e,t,r)=>{let o=Object.assign(Object.create(null),e.refs);return o[t.key]=r,fx(o)}),cC=l(2,(e,t)=>fx(t(Object.assign(Object.create(null),e.refs))));var RN="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),kp=class{tasks=[];running=!1;scheduleTask(t,r){this.tasks.push(t),this.running||(this.running=!0,RN(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let t=this.tasks;this.tasks=[];for(let r=0,o=t.length;r<o;r++)t[r]()}shouldYield(t){return!1}flush(){for(;this.tasks.length>0;)this.runTasks()}},FN={[Xv]:Xv},Ns=(e,t)=>W(e,()=>{let r=Object.create(FN);return r.key=e,r.initial=t(),r}),Mp=Ns("effect/Micro/currentAbortController",()=>{}),Is=Ns("effect/Micro/currentAbortSignal",()=>{}),aC=Ns("effect/Micro/currentContext",()=>Ct()),TN=Ns("effect/Micro/currentConcurrency",()=>"unbounded"),uC=Ns("effect/Micro/currentMaxDepthBeforeYield",()=>2048),lC=Ns("effect/Micro/currentInterruptible",()=>!0),pC=Ns("effect/Micro/currentScheduler",()=>new kp);var AN={...Pv,_op:"Micro",[oC]:{_A:z,_E:z,_R:z},[Symbol.iterator](){return new en(new Tr(this))}},Gi=W("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:uC.initial})),IN=e=>{let t=Object.create(AN);return t[Zt]=e,t},fC=(e,t)=>IN(function r(o,n){if(t&&o.refs[lC.key]!==!1&&o.refs[Is.key].aborted)return n(Cp);Gi.depth++,Gi.depth===1&&(Gi.maxDepthBeforeYield=Ps(o,uC));let s=o.refs[pC.key];if(Gi.depth>=Gi.maxDepthBeforeYield||s.shouldYield(o))s.scheduleTask(()=>r(o,n),0);else try{e(o,n)}catch(i){n(nC(i))}Gi.depth--}),Mo=e=>fC(e,!0),xa=e=>Mo(function(t,r){r(e)});var lx=e=>xa(ga(e));var px=e=>Mo(function(t,r){r(ga(e()))});var wp=e=>Mo(function(t,r){e()[Zt](t,r)}),eC=lx(void 0);var PN=e=>Mo(function(t,r){let o=!1,n=e.length>1?new AbortController:void 0,s=Ps(t,Is),i;function c(){a(i?WN(LN(i,xa(Cp))):xa(Cp)),n!==void 0&&n.abort()}function a(p){o||(o=!0,s.removeEventListener("abort",c),p[Zt](t,r))}i=n===void 0?e(a):e(a,n.signal),!o&&s.addEventListener("abort",c)});var NN=l(2,(e,t)=>Mo(function(r,o){e[Zt](r,function(n){o(n._tag==="Left"?n:ga(t(n.right)))})}));var mC=l(2,(e,t)=>Mo(function(r,o){e[Zt](r,function(n){if(n._tag==="Left")return o(n);t(n.right)[Zt](r,o)})}));var LN=l(2,(e,t)=>Mo(function(r,o){e[Zt](r,function(n){if(n._tag==="Left")return o(n);if(Ps(r,Is).aborted)return o(Cp);let s=Qv(t)?t:typeof t=="function"?t(n.right):t;Qv(s)?s[Zt](r,o):o(ga(s))})}));var DN=e=>NN(e,t=>{}),qN=e=>Mo(function(t,r){e[Zt](t,function(o){r(ga(o))})});function HN(e){let t=new AbortController,r=Ps(e,Is);function o(){t.abort(),r.removeEventListener("abort",o)}return r.addEventListener("abort",o),[cC(e,function(s){return s[Mp.key]=t,s[Is.key]=t.signal,s}),o]}var ix=Symbol.for("effect/Micro/MicroScope");var tC=class e{[ix];state={_tag:"Open",finalizers:new Set};constructor(){this[ix]=ix}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return wp(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),eC):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return wp(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},mC(BN(r,o=>qN(o(t))),o=>DN(xa(tb(o))))}return eC})}get fork(){return px(()=>{let t=new e;if(this.state._tag==="Closed")return t.state=this.state,t;function r(o){return t.close(o)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(o=>px(()=>this.unsafeRemoveFinalizer(r))),t})}};var WN=e=>fC(function(t,r){let o=cC(t,function(n){return n[lC.key]=!1,n[Is.key]=new AbortController().signal,n});e[Zt](o,r)},!1);var BN=(e,t,r)=>Mo(function(o,n){let s=r?.concurrency==="inherit"?Ps(o,TN):r?.concurrency??1,i=s==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,s),[c,a]=HN(o),p,f=Array.from(e),h=f.length,d=r?.discard?void 0:new Array(h),g=0,b=0,M=0,T=!1;function L(){for(T=!0;b<i&&g<h;){let J=g,ue=f[J];g++,b++;try{t(ue,J)[Zt](c,function(Ee){Ee._tag==="Left"?p===void 0&&(p=Ee,h=g,a()):d!==void 0&&(d[J]=Ee.right),M++,b--,M===h?n(p??Ke(d)):!T&&b<i&&L()})}catch(Ee){p=nC(Ee),h=g,a()}}T=!1}L()});var cx=Symbol.for("effect/Micro/Handle");var rC=class{parentSignal;[cx];observers=new Set;_exit=void 0;_controller;isRoot;constructor(t,r){this.parentSignal=t,this[cx]=cx,this.isRoot=r!==void 0,this._controller=r??new AbortController,this.isRoot||t.addEventListener("abort",this.unsafeInterrupt)}unsafePoll(){return this._exit??null}unsafeInterrupt=()=>{this._controller.abort()};emit(t){this._exit||(this._exit=t,this.isRoot||this.parentSignal.removeEventListener("abort",this.unsafeInterrupt),this.observers.forEach(r=>r(t)),this.observers.clear())}addObserver(t){if(this._exit)return t(this._exit);this.observers.add(t)}removeObserver(t){this.observers.delete(t)}get await(){return wp(()=>this._exit?lx(this._exit):PN(t=>{function r(o){t(lx(o))}return this.addObserver(r),px(()=>{this.removeObserver(r)})}))}get join(){return mC(this.await,xa)}get interrupt(){return wp(()=>(this.unsafeInterrupt(),this.await))}};u();var Rp=class{buckets=[];scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},mx=class{maxNextTickBeforeTimer;running=!1;tasks=new Rp;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Il)?t.getFiberRef(ln):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},dC=W(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new mx(2048)),Fp=class{tasks=new Rp;deferred=!1;scheduleTask(t,r){this.deferred?dC.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Il)?t.getFiberRef(ln):!1}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var gn=W(Symbol.for("effect/FiberRef/currentScheduler"),()=>Ae(dC)),xC=l(2,(e,t)=>Be(e,gn,t));u();var Tp=W(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Ae(new Map));u();var dx=(e,t,r,o)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return We(Nl,n=>n==="unbounded"?r():n>1?o(n):t());default:return e>1?o(e):t()}},ya=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return We(Nl,o=>o==="unbounded"||o>1?r():t());default:return e>1?r():t()}};u();u();u();var Ap="InterruptSignal",Ip="Stateful",Pp="Resume",Np="YieldNow",Lp=e=>({_tag:Ap,cause:e}),$i=e=>({_tag:Ip,onFiber:e}),Ls=e=>({_tag:Pp,effect:e}),gC=()=>({_tag:Np});var zN="effect/FiberScope",Dp=Symbol.for(zN),xx=class{[Dp]=Dp;fiberId=$t;roots=new Set;add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},gx=class{fiberId;parent;[Dp]=Dp;constructor(t,r){this.fiberId=t,this.parent=r}add(t,r){this.parent.tell($i(o=>{o.addChild(r),r.addObserver(()=>{o.removeChild(r)})}))}},bC=e=>new gx(e.id(),e),yn=W(Symbol.for("effect/FiberScope/Global"),()=>new xx);var GN="effect/Fiber",ba=Symbol.for(GN),Sa={_E:e=>e,_A:e=>e},$N={[ba]:Sa,pipe(){return O(this,arguments)}},VN="effect/Fiber",_C=Symbol.for(VN);var yx=e=>e.await;var EC=e=>e.inheritAll;var OC=l(2,(e,t)=>e.interruptAsFork(t)),bn=e=>fs(Mt(e.await),e.inheritAll);var Q8={...$N,id:()=>$t,await:ms,children:y([]),inheritAll:ms,poll:y(S()),interruptAsFork:()=>ms};var Sn="effect/FiberCurrent";u();var KN="effect/Logger",CC=Symbol.for(KN),kC={_Message:e=>e,_Output:e=>e},qp=e=>({[CC]:kC,log:e,pipe(){return O(this,arguments)}});var tJ={[CC]:kC,log:Ho,pipe(){return O(this,arguments)}};var wC=qp(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let c=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${Ju(o)}`].join(" "),f=db(s);for(let h=0;h<f.length;h++){let d=Bo(f[h]);d.length>0&&(p=p+" message=",p=bx(d,p))}if(t!=null&&t._tag!=="Empty"&&(p=p+" cause=",p=bx(Xo(t,{renderErrorCause:!0}),p)),Tc(i)){p=p+" ";let h=!0;for(let d of i)h?h=!1:p=p+" ",p=p+m(d,wO(c))}if(CS(e)>0){p=p+" ";let h=!0;for(let[d,g]of e)h?h=!1:p=p+" ",p=p+QN(d),p=p+"=",p=bx(Bo(g),p)}return p}),JN=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,YN=/^[^\s"=]+$/,bx=(e,t)=>t+(e.match(YN)?e:JN(e));var QN=e=>e.replace(/[\s="]/g,"_");var Ds={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},rJ={None:[],All:[],Trace:[Ds.gray],Debug:[Ds.blue],Info:[Ds.green],Warning:[Ds.yellow],Error:[Ds.red],Fatal:[Ds.bgBrightRed,Ds.black]};var oJ=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null&&process.stdout.isTTY===!0;var nJ=typeof self=="object"&&self!==null&&typeof self.constructor=="function"&&self.constructor.name.includes("Worker");u();u();var MC="effect/MetricBoundaries",Sx=Symbol.for(MC),_x=class{values;[Sx]=Sx;constructor(t){this.values=t,this._hash=m(ae(MC),D(Nt(this.values)))}_hash;[F](){return this._hash}[R](t){return XN(t)&&C(this.values,t.values)}pipe(){return O(this,arguments)}},XN=e=>k(e,Sx),eL=e=>{let t=m(e,um(Fe(Number.POSITIVE_INFINITY)),dm);return new _x(t)};var RC=e=>m(am(e.count-1,t=>e.start*Math.pow(e.factor,t)),fi,eL);u();u();var rL="effect/MetricKeyType",_a=Symbol.for(rL),IC="effect/MetricKeyType/Counter",Ex=Symbol.for(IC),PC="effect/MetricKeyType/Frequency",Ox=Symbol.for(PC),NC="effect/MetricKeyType/Gauge",vx=Symbol.for(NC),LC="effect/MetricKeyType/Histogram",Cx=Symbol.for(LC),DC="effect/MetricKeyType/Summary",kx=Symbol.for(DC),Ea={_In:e=>e,_Out:e=>e},wx=class{incremental;bigint;[_a]=Ea;[Ex]=Ex;constructor(t,r){this.incremental=t,this.bigint=r,this._hash=ae(IC)}_hash;[F](){return this._hash}[R](t){return Rx(t)}pipe(){return O(this,arguments)}},oL=ae(PC),FC=class{preregisteredWords;[_a]=Ea;[Ox]=Ox;constructor(t){this.preregisteredWords=t}[F](){return oL}[R](t){return Fx(t)}pipe(){return O(this,arguments)}},nL=ae(NC),TC=class{bigint;[_a]=Ea;[vx]=vx;constructor(t){this.bigint=t}[F](){return nL}[R](t){return Tx(t)}pipe(){return O(this,arguments)}},Mx=class{boundaries;[_a]=Ea;[Cx]=Cx;constructor(t){this.boundaries=t,this._hash=m(ae(LC),D(w(this.boundaries)))}_hash;[F](){return this._hash}[R](t){return Ax(t)&&C(this.boundaries,t.boundaries)}pipe(){return O(this,arguments)}},AC=class{maxAge;maxSize;error;quantiles;[_a]=Ea;[kx]=kx;constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this._hash=m(ae(DC),D(w(this.maxAge)),D(w(this.maxSize)),D(w(this.error)),D(Nt(this.quantiles)))}_hash;[F](){return this._hash}[R](t){return Ix(t)&&C(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&C(this.quantiles,t.quantiles)}pipe(){return O(this,arguments)}},qC=e=>new wx(e?.incremental??!1,e?.bigint??!1);var HC=e=>new Mx(e);var Rx=e=>k(e,Ex),Fx=e=>k(e,Ox),Tx=e=>k(e,vx),Ax=e=>k(e,Cx),Ix=e=>k(e,kx);var sL="effect/MetricKey",BC=Symbol.for(sL),iL={_Type:e=>e},cL=li(C),Oa=class{name;keyType;description;tags;[BC]=iL;constructor(t,r,o,n=[]){this.name=t,this.keyType=r,this.description=o,this.tags=n,this._hash=m(ae(this.name+this.description),D(w(this.keyType)),D(Nt(this.tags)))}_hash;[F](){return this._hash}[R](t){return aL(t)&&this.name===t.name&&C(this.keyType,t.keyType)&&C(this.description,t.description)&&cL(this.tags,t.tags)}pipe(){return O(this,arguments)}},aL=e=>k(e,BC),UC=(e,t)=>new Oa(e,qC(t),gr(t?.description));var jC=(e,t,r)=>new Oa(e,HC(t),gr(r));var zC=l(2,(e,t)=>t.length===0?e:new Oa(e.name,e.keyType,e.description,Ir(e.tags,t)));u();u();u();var lL="effect/MetricState",va=Symbol.for(lL),GC="effect/MetricState/Counter",Px=Symbol.for(GC),$C="effect/MetricState/Frequency",Nx=Symbol.for($C),VC="effect/MetricState/Gauge",Lx=Symbol.for(VC),KC="effect/MetricState/Histogram",Dx=Symbol.for(KC),JC="effect/MetricState/Summary",qx=Symbol.for(JC),Ca={_A:e=>e},Hx=class{count;[va]=Ca;[Px]=Px;constructor(t){this.count=t}[F](){return m(w(GC),D(w(this.count)),K(this))}[R](t){return fL(t)&&this.count===t.count}pipe(){return O(this,arguments)}},pL=li(C),Wx=class{occurrences;[va]=Ca;[Nx]=Nx;constructor(t){this.occurrences=t}_hash;[F](){return m(ae($C),D(Nt(te(this.occurrences.entries()))),K(this))}[R](t){return mL(t)&&pL(te(this.occurrences.entries()),te(t.occurrences.entries()))}pipe(){return O(this,arguments)}},Bx=class{value;[va]=Ca;[Lx]=Lx;constructor(t){this.value=t}[F](){return m(w(VC),D(w(this.value)),K(this))}[R](t){return hL(t)&&this.value===t.value}pipe(){return O(this,arguments)}},Ux=class{buckets;count;min;max;sum;[va]=Ca;[Dx]=Dx;constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s}[F](){return m(w(KC),D(w(this.buckets)),D(w(this.count)),D(w(this.min)),D(w(this.max)),D(w(this.sum)),K(this))}[R](t){return dL(t)&&C(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},jx=class{error;quantiles;count;min;max;sum;[va]=Ca;[qx]=qx;constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i}[F](){return m(w(JC),D(w(this.error)),D(w(this.quantiles)),D(w(this.count)),D(w(this.min)),D(w(this.max)),D(w(this.sum)),K(this))}[R](t){return xL(t)&&this.error===t.error&&C(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},YC=e=>new Hx(e),QC=e=>new Wx(e),ZC=e=>new Bx(e),XC=e=>new Ux(e.buckets,e.count,e.min,e.max,e.sum),ek=e=>new jx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var fL=e=>k(e,Px),mL=e=>k(e,Nx),hL=e=>k(e,Lx),dL=e=>k(e,Dx),xL=e=>k(e,qx);var yL="effect/MetricHook",bL=Symbol.for(yL),SL={_In:e=>e,_Out:e=>e},ka=e=>({[bL]:SL,pipe(){return O(this,arguments)},...e});var tk=BigInt(0),ok=e=>{let t=e.keyType.bigint?tk:0,r=e.keyType.incremental?e.keyType.bigint?o=>o>=tk:o=>o>=0:o=>!0;return ka({get:()=>YC(t),update:o=>{r(o)&&(t=t+o)}})},nk=e=>{let t=new Map;for(let o of e.keyType.preregisteredWords)t.set(o,0);return ka({get:()=>QC(t),update:o=>{let n=t.get(o)??0;t.set(o,n+1)}})},sk=(e,t)=>{let r=t;return ka({get:()=>ZC(r),update:o=>{r=o}})},ik=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;m(t,qn(hn),Pr((h,d)=>{n[d]=h}));let p=h=>{let d=0,g=r;for(;d!==g;){let b=Math.floor(d+(g-d)/2),M=n[b];h<=M?g=b:d=b,g===d+1&&(h<=n[d]?g=d:d=g)}o[d]=o[d]+1,s=s+1,i=i+h,h<c&&(c=h),h>a&&(a=h)},f=()=>{let h=vc(r),d=0;for(let g=0;g<r;g++){let b=n[g],M=o[g];d=d+M,h[g]=[b,d]}return h};return ka({get:()=>XC({buckets:f(),count:s,min:c,max:a,sum:i}),update:p})},ck=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=m(n,qn(hn)),i=vc(o),c=0,a=0,p=0,f=Number.MAX_VALUE,h=Number.MIN_VALUE,d=b=>{let M=[],T=0;for(;T!==o-1;){let L=i[T];if(L!=null){let[J,ue]=L,Ee=di(b-J);Am(Ee,Fm)&&Ee<=r&&M.push(ue)}T=T+1}return _L(t,s,qn(M,hn))},g=(b,M)=>{if(o>0){c=c+1;let T=c%o;i[T]=[M,b]}a=a+1,p=p+b,b<f&&(f=b),b>h&&(h=b)};return ka({get:()=>ek({error:t,quantiles:d(Date.now()),count:a,min:f,max:h,sum:p}),update:([b,M])=>g(b,M)})},_L=(e,t,r)=>{let o=r.length;if(!yt(t))return jt();let n=t[0],s=t.slice(1),i=rk(e,o,S(),0,n,r),c=Ot(i);return s.forEach(a=>{c.push(rk(e,o,i.value,i.consumed,a,i.rest))}),Pr(c,a=>[a.quantile,a.value])},rk=(e,t,r,o,n,s)=>{let i=e,c=t,a=r,p=o,f=n,h=s,d=e,g=t,b=r,M=o,T=n,L=s;for(;;){if(!yt(h))return{quantile:f,value:S(),consumed:p,rest:[]};if(f===1)return{quantile:f,value:_(pm(h)),consumed:p+h.length,rest:[]};let J=Sb(h,Do=>Do<=h[0]),ue=f*c,Ee=i/2*ue,ft=p+J[0].length,er=Math.abs(ft-ue);if(ft<ue-Ee){d=i,g=c,b=Go(h),M=ft,T=f,L=J[1],i=d,c=g,a=b,p=M,f=T,h=L;continue}if(ft>ue+Ee)return{quantile:f,value:a,consumed:p,rest:h};switch(a._tag){case"None":{d=i,g=c,b=Go(h),M=ft,T=f,L=J[1],i=d,c=g,a=b,p=M,f=T,h=L;continue}case"Some":{let Do=Math.abs(ue-a.value);if(er<Do){d=i,g=c,b=Go(h),M=ft,T=f,L=J[1],i=d,c=g,a=b,p=M,f=T,h=L;continue}return{quantile:f,value:_(a.value),consumed:p,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};u();var OL="effect/MetricPair",vL=Symbol.for(OL),CL={_Type:e=>e};var ak=(e,t)=>({[vL]:CL,metricKey:e,metricState:t,pipe(){return O(this,arguments)}});var wL="effect/MetricRegistry",uk=Symbol.for(wL),zx=class{[uk]=uk;map=vs();snapshot(){let t=[];for(let[r,o]of this.map)t.push(ak(r,o.get()));return t}get(t){let r=m(this.map,Ge(t),mt);if(r==null){if(Rx(t.keyType))return this.getCounter(t);if(Tx(t.keyType))return this.getGauge(t);if(Fx(t.keyType))return this.getFrequency(t);if(Ax(t.keyType))return this.getHistogram(t);if(Ix(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=m(this.map,Ge(t),mt);if(r==null){let o=ok(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getFrequency(t){let r=m(this.map,Ge(t),mt);if(r==null){let o=nk(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getGauge(t){let r=m(this.map,Ge(t),mt);if(r==null){let o=sk(t,t.keyType.bigint?BigInt(0):0);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getHistogram(t){let r=m(this.map,Ge(t),mt);if(r==null){let o=ik(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getSummary(t){let r=m(this.map,Ge(t),mt);if(r==null){let o=ck(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}},lk=()=>new zx;var RL="effect/Metric",FL=Symbol.for(RL),TL={_Type:e=>e,_In:e=>e,_Out:e=>e},pk=W(Symbol.for("effect/Metric/globalMetricRegistry"),()=>lk()),fk=function(e,t,r){let o=Object.assign(n=>Kt(n,s=>IL(o,s)),{[FL]:TL,keyType:e,unsafeUpdate:t,unsafeValue:r,register(){return this.unsafeValue([]),this},pipe(){return O(this,arguments)}});return o};var wa=(e,t)=>mk(UC(e,t));var mk=e=>{let t,r=new WeakMap,o=n=>{if(n.length===0)return t!==void 0||(t=pk.get(e)),t;let s=r.get(n);return s!==void 0||(s=pk.get(zC(e,n)),r.set(n,s)),s};return fk(e.keyType,(n,s)=>o(s).update(n),n=>o(n).get())};var hk=(e,t,r)=>mk(jC(e,t,r));var dk=l(3,(e,t,r)=>AL(e,[Ms(t,r)]));var AL=l(2,(e,t)=>fk(e.keyType,(r,o)=>e.unsafeUpdate(r,Ir(t,o)),r=>e.unsafeValue(Ir(t,r))));var IL=l(2,(e,t)=>We(Eo,r=>E(()=>e.unsafeUpdate(t,r))));u();var NL="effect/Request",Gx=Symbol.for(NL),LL={_E:e=>e,_A:e=>e},UJ={...si,[Gx]:LL},xk=e=>k(e,Gx);var $x=l(2,(e,t)=>We(Tp,r=>E(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,ia(o.result,t))}})));var Vi=class{count=0;observers=new Set;interrupted=!1;addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};u();u();u();u();u();var _n={Forward:0,Backward:1},Hp=class e{self;stack;direction;count=0;constructor(t,r,o){this.self=t,this.stack=r,this.direction=o}clone(){return new e(this.self,this.stack.slice(),this.direction)}reversed(){return new e(this.self,this.stack.slice(),this.direction===_n.Forward?_n.Backward:_n.Forward)}next(){let t=this.entry;switch(this.count++,this.direction===_n.Forward?this.moveNext():this.movePrev(),t._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:t.value}}}get key(){return this.stack.length>0?_(this.stack[this.stack.length-1].key):S()}get value(){return this.stack.length>0?_(this.stack[this.stack.length-1].value):S()}get entry(){return Re(Ou(this.stack),t=>[t.key,t.value])}get index(){let t=0,r=this.stack;if(r.length===0){let o=this.self._root;return o!=null?o.count:0}else r[r.length-1].left!=null&&(t=r[r.length-1].left.count);for(let o=r.length-2;o>=0;--o)r[o+1]===r[o].right&&(++t,r[o].left!=null&&(t+=r[o].left.count));return t}moveNext(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r.right!=null)for(r=r.right;r!=null;)t.push(r),r=r.left;else for(t.pop();t.length>0&&t[t.length-1].right===r;)r=t[t.length-1],t.pop()}get hasNext(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].right!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].left===t[r])return!0;return!1}movePrev(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)t.push(r),r=r.right;else for(t.pop();t.length>0&&t[t.length-1].left===r;)r=t[t.length-1],t.pop()}get hasPrev(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].left!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].right===t[r])return!0;return!1}};u();var N={Red:0,Black:1},wr=({color:e,count:t,key:r,left:o,right:n,value:s})=>({color:e,key:r,value:s,left:o,right:n,count:t});function Vx(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}var Ro=({count:e,key:t,left:r,right:o,value:n},s)=>({color:s,key:t,value:n,left:r,right:o,count:e}),ve=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var gk="effect/RedBlackTree",Kx=Symbol.for(gk),HL={_Key:e=>e,_Value:e=>e},WL={[Kx]:HL,[F](){let e=w(gk);for(let t of this)e^=m(w(t[0]),D(w(t[1])));return K(this,e)},[R](e){if(yk(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;let t=Array.from(e);return Array.from(this).every((r,o)=>{let n=t[o];return C(r[0],n[0])&&C(r[1],n[1])})}return!1},[Symbol.iterator](){let e=[],t=this._root;for(;t!=null;)e.push(t),t=t.left;return new Hp(this,e,_n.Forward)},toString(){return re(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},Ma=(e,t)=>{let r=Object.create(WL);return r._ord=e,r._root=t,r},yk=e=>k(e,Kx);var bk=l(2,(e,t)=>{let r=e._ord,o=e._root;for(;o!==void 0;){let n=r(t,o.key);if(C(t,o.key))return _(o.value);n<=0?o=o.left:o=o.right}return S()});var Jx=l(2,(e,t)=>U(bk(e,t))),Sk=l(3,(e,t,r)=>{let o=e._ord,n=e._root,s=[],i=[];for(;n!=null;){let c=o(t,n.key);s.push(n),i.push(c),c<=0?n=n.left:n=n.right}s.push({color:N.Red,key:t,value:r,left:void 0,right:void 0,count:1});for(let c=s.length-2;c>=0;--c){let a=s[c];i[c]<=0?s[c]={color:a.color,key:a.key,value:a.value,left:s[c+1],right:a.right,count:a.count+1}:s[c]={color:a.color,key:a.key,value:a.value,left:a.left,right:s[c+1],count:a.count+1}}for(let c=s.length-1;c>1;--c){let a=s[c-1],p=s[c];if(a.color===N.Black||p.color===N.Black)break;let f=s[c-2];if(f.left===a)if(a.left===p){let h=f.right;if(h&&h.color===N.Red)a.color=N.Black,f.right=Ro(h,N.Black),f.color=N.Red,c-=1;else{if(f.color=N.Red,f.left=a.right,a.color=N.Black,a.right=f,s[c-2]=a,s[c-1]=p,ve(f),ve(a),c>=3){let d=s[c-3];d.left===f?d.left=a:d.right=a}break}}else{let h=f.right;if(h&&h.color===N.Red)a.color=N.Black,f.right=Ro(h,N.Black),f.color=N.Red,c-=1;else{if(a.right=p.left,f.color=N.Red,f.left=p.right,p.color=N.Black,p.left=a,p.right=f,s[c-2]=p,s[c-1]=a,ve(f),ve(a),ve(p),c>=3){let d=s[c-3];d.left===f?d.left=p:d.right=p}break}}else if(a.right===p){let h=f.left;if(h&&h.color===N.Red)a.color=N.Black,f.left=Ro(h,N.Black),f.color=N.Red,c-=1;else{if(f.color=N.Red,f.right=a.left,a.color=N.Black,a.left=f,s[c-2]=a,s[c-1]=p,ve(f),ve(a),c>=3){let d=s[c-3];d.right===f?d.right=a:d.left=a}break}}else{let h=f.left;if(h&&h.color===N.Red)a.color=N.Black,f.left=Ro(h,N.Black),f.color=N.Red,c-=1;else{if(a.left=p.right,f.color=N.Red,f.right=p.left,p.color=N.Black,p.right=a,p.left=f,s[c-2]=p,s[c-1]=a,ve(f),ve(a),ve(p),c>=3){let d=s[c-3];d.right===f?d.right=p:d.left=p}break}}}return s[0].color=N.Black,Ma(e._ord,s[0])}),_k=e=>Ek(e,_n.Forward);var Ek=(e,t)=>{let r=e[Symbol.iterator](),o=0;return{[Symbol.iterator]:()=>Ek(e,t),next:()=>{o++;let n=r.key;switch(t===_n.Forward?r.moveNext():r.movePrev(),n._tag){case"None":return{done:!0,value:o};case"Some":return{done:!1,value:n.value}}}}};var Ok=l(2,(e,t)=>{if(!Jx(e,t))return e;let r=e._ord,o=r,n=e._root,s=[];for(;n!==void 0;){let a=o(t,n.key);s.push(n),C(t,n.key)?n=void 0:a<=0?n=n.left:n=n.right}if(s.length===0)return e;let i=new Array(s.length),c=s[s.length-1];i[i.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let a=s.length-2;a>=0;--a)c=s[a],c.left===s[a+1]?i[a]={color:c.color,key:c.key,value:c.value,left:i[a+1],right:c.right,count:c.count}:i[a]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[a+1],count:c.count};if(c=i[i.length-1],c.left!==void 0&&c.right!==void 0){let a=i.length;for(c=c.left;c.right!=null;)i.push(c),c=c.right;let p=i[a-1];i.push({color:c.color,key:p.key,value:p.value,left:c.left,right:c.right,count:c.count}),i[a-1].key=c.key,i[a-1].value=c.value;for(let f=i.length-2;f>=a;--f)c=i[f],i[f]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[f+1],count:c.count};i[a-1].left=i[a]}if(c=i[i.length-1],c.color===N.Red){let a=i[i.length-2];a.left===c?a.left=void 0:a.right===c&&(a.right=void 0),i.pop();for(let p=0;p<i.length;++p)i[p].count--;return Ma(r,i[0])}else if(c.left!==void 0||c.right!==void 0){c.left!==void 0?Vx(c,c.left):c.right!==void 0&&Vx(c,c.right),c.color=N.Black;for(let a=0;a<i.length-1;++a)i[a].count--;return Ma(r,i[0])}else{if(i.length===1)return Ma(r,void 0);{for(let p=0;p<i.length;++p)i[p].count--;let a=i[i.length-2];BL(i),a.left===c?a.left=void 0:a.right=void 0}}return Ma(r,i[0])});var BL=e=>{let t,r,o,n;for(let s=e.length-1;s>=0;--s){if(t=e[s],s===0){t.color=N.Black;return}if(r=e[s-1],r.left===t){if(o=r.right,o!==void 0&&o.right!==void 0&&o.right.color===N.Red){if(o=r.right=wr(o),n=o.right=wr(o.right),r.right=o.left,o.left=r,o.right=n,o.color=r.color,t.color=N.Black,r.color=N.Black,n.color=N.Black,ve(r),ve(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o;return}else if(o!==void 0&&o.left!==void 0&&o.left.color===N.Red){if(o=r.right=wr(o),n=o.left=wr(o.left),r.right=n.left,o.left=n.right,n.left=r,n.right=o,n.color=r.color,r.color=N.Black,o.color=N.Black,t.color=N.Black,ve(r),ve(o),ve(n),s>1){let i=e[s-2];i.left===r?i.left=n:i.right=n}e[s-1]=n;return}if(o!==void 0&&o.color===N.Black)if(r.color===N.Red){r.color=N.Black,r.right=Ro(o,N.Red);return}else{r.right=Ro(o,N.Red);continue}else if(o!==void 0){if(o=wr(o),r.right=o.left,o.left=r,o.color=r.color,r.color=N.Red,ve(r),ve(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}else{if(o=r.left,o!==void 0&&o.left!==void 0&&o.left.color===N.Red){if(o=r.left=wr(o),n=o.left=wr(o.left),r.left=o.right,o.right=r,o.left=n,o.color=r.color,t.color=N.Black,r.color=N.Black,n.color=N.Black,ve(r),ve(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o;return}else if(o!==void 0&&o.right!==void 0&&o.right.color===N.Red){if(o=r.left=wr(o),n=o.right=wr(o.right),r.left=n.right,o.right=n.left,n.right=r,n.left=o,n.color=r.color,r.color=N.Black,o.color=N.Black,t.color=N.Black,ve(r),ve(o),ve(n),s>1){let i=e[s-2];i.right===r?i.right=n:i.left=n}e[s-1]=n;return}if(o!==void 0&&o.color===N.Black)if(r.color===N.Red){r.color=N.Black,r.left=Ro(o,N.Red);return}else{r.left=Ro(o,N.Red);continue}else if(o!==void 0){if(o=wr(o),r.left=o.right,o.right=r,o.color=r.color,r.color=N.Red,ve(r),ve(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}}};var vk=Jx,Ck=Sk,kk=_k;var wk=Ok;var Yx=Symbol.for("effect/SortedSet"),jL={[Yx]:{_A:e=>e},[F](){return m(w(this.keyTree),D(w(Yx)),K(this))},[R](e){return zL(e)&&C(this.keyTree,e.keyTree)},[Symbol.iterator](){return kk(this.keyTree)},toString(){return re(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(Y)}},[G](){return this.toJSON()},pipe(){return O(this,arguments)}},Rk=e=>{let t=Object.create(jL);return t.keyTree=e,t},zL=e=>k(e,Yx);var Fk=l(2,(e,t)=>vk(e.keyTree,t)?e:Rk(Ck(e.keyTree,t,!0)));var Tk=l(2,(e,t)=>Rk(wk(e.keyTree,t)));var GL="effect/Supervisor",Yi=Symbol.for(GL),Ra={_T:e=>e},Ki=class e{underlying;value0;[Yi]=Ra;constructor(t,r){this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,m(this.value,v(t)))}zip(t){return new Ji(this,t)}},Ji=class e{left;right;_tag="Zip";[Yi]=Ra;constructor(t,r){this.left=t,this.right=r}get value(){return ps(this.left.value,this.right.value)}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Ki(this,m(this.value,v(t)))}zip(t){return new e(this,t)}},Xx=e=>k(e,Yi)&&In(e,"Zip"),Qx=class{[Yi]=Ra;fibers=new Set;get value(){return E(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ki(this,m(this.value,v(t)))}zip(t){return new Ji(this,t)}onRun(t,r){return t()}},Zx=class{effect;[Yi]=Ra;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ki(this,m(this.value,v(t)))}zip(t){return new Ji(this,t)}onRun(t,r){return t()}},Ik=class{ref;[Yi]=Ra;constructor(t){this.ref=t}get value(){return E(()=>Dt(this.ref))}onStart(t,r,o,n){m(this.ref,sr(m(Dt(this.ref),Fk(n))))}onEnd(t,r){m(this.ref,sr(m(Dt(this.ref),Tk(r))))}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ki(this,m(this.value,v(t)))}zip(t){return new Ji(this,t)}onRun(t,r){return t()}},$L=()=>new Qx,Pk=E($L),VL=e=>new Zx(e),qs=W("effect/Supervisor/none",()=>VL(B));u();u();var Nk=Yo;var Dk="Empty",qk="AddSupervisor",Hk="RemoveSupervisor",Wk="AndThen",Qi={_tag:Dk},Bp=(e,t)=>({_tag:Wk,first:e,second:t}),KL=(e,t)=>JL(t,Fe(e)),JL=(e,t)=>{let r=e,o=t;for(;rt(o);){let n=Xe(o);switch(n._tag){case Dk:{o=nt(o);break}case qk:{r=r.zip(n.supervisor),o=nt(o);break}case Hk:{r=eg(r,n.supervisor),o=nt(o);break}case Wk:{o=Ze(n.first)(Ze(n.second)(nt(o)));break}}}return r},eg=(e,t)=>C(e,t)?qs:Xx(e)?eg(e.left,t).zip(eg(e.right,t)):e,Up=e=>C(e,qs)?Hr():Xx(e)?m(Up(e.left),fo(Up(e.right))):jn(e),YL=(e,t)=>{if(C(e,t))return Qi;let r=Up(e),o=Up(t),n=m(o,zm(r),$n(Qi,(i,c)=>Bp(i,{_tag:qk,supervisor:c}))),s=m(r,zm(o),$n(Qi,(i,c)=>Bp(i,{_tag:Hk,supervisor:c})));return Bp(n,s)},Bk=Nk({empty:Qi,patch:KL,combine:Bp,diff:YL});var ZL=wa("effect_fiber_started",{incremental:!0}),Uk=wa("effect_fiber_active"),XL=wa("effect_fiber_successes",{incremental:!0}),eD=wa("effect_fiber_failures",{incremental:!0}),tD=dk(hk("effect_fiber_lifetimes",RC({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Fa="Continue",rD="Done",jk="Yield",oD={_E:e=>e,_A:e=>e},Ta=e=>{throw new Error(`BUG: FiberRuntime - ${Bo(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},En=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Fo=W("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),jp={[ti]:(e,t,r)=>Ne(()=>t.effect_instruction_i1(r)),OnStep:(e,t,r)=>ge(ge(r)),[ri]:(e,t,r)=>Ne(()=>t.effect_instruction_i2(r)),[_c]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),xo(e._runtimeFlags)&&e.isInterrupted()?ce(e.getInterruptedCause()):ge(r)),[oi]:(e,t,r)=>(Ne(()=>t.effect_instruction_i2(r)),Ne(()=>t.effect_instruction_i0())?(e.pushStack(t),Ne(()=>t.effect_instruction_i1())):B)},nD={[Ap]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),xo(t)?ce(o.cause):r),[Pp]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Ip]:(e,t,r,o)=>(o.onFiber(e,sx(t)),r),[Np]:(e,t,r,o)=>x(Yr(),()=>r)},sD=e=>Ht(r_(e),t=>Hs(n_(t),([r,o])=>{let n=new Map,s=[];for(let c of o){s.push(or(c));for(let a of c)n.set(a.request,a)}let i=s.flat();return Be(_D(r.runAll(s),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),Tp,n)},!1,!1)),Aa=class{[ba]=Sa;[_C]=oD;pipe(){return O(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(t,r,o){if(this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Kp),this._scheduler=this.getFiberRef(gn),hh(o)){let n=this.getFiberRef(Eo);ZL.unsafeUpdate(1,n),Uk.unsafeUpdate(1,n)}this._tracer=Ue(this.getFiberRef(be),Gr)}id(){return this._fiberId}resume(t){this.tell(Ls(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>Jv(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return bC(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(xs)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return I(()=>{let r=oa(this._fiberId);return this.tell($i((o,n)=>{ia(r,E(()=>t(o,n)))})),ct(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return He(t=>{let r=o=>t(y(o));return this.tell($i((o,n)=>{o._exitValue!==null?r(this._exitValue):o.addObserver(r)})),E(()=>this.tell($i((o,n)=>{o.removeObserver(r)})))},this.id())}get inheritAll(){return oe((t,r)=>{let o=t.id(),n=t.getFiberRefs(),s=r.runtimeFlags,i=this.getFiberRefs(),c=Xl(n,o,i);t.setFiberRefs(c);let a=t.getFiberRef($k),p=m(ir(s,a),yh(jr),yh(cl));return un(p)})}get poll(){return E(()=>gr(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return E(()=>this.tell(Lp(Vt(t))))}unsafeInterruptAsFork(t){this.tell(Lp(Vt(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef($k,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=aa(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=Wi(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this._tracer=Ue(this.getFiberRef(be),Gr),this._supervisor=this.getFiberRef(Kp),this._scheduler=this.getFiberRef(gn)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Fa,o=globalThis[Sn];globalThis[Sn]=this;try{for(;r===Fa;)r=this._queue.length===0?rD:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Sn]=o}this._queue.length>0&&!this._running?(this._running=!0,r===jk?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(ln))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=nD[n._tag](this,t,o,n)}return o}isInterrupted(){return!ml(this.getFiberRef(xs))}addInterruptedCause(t){let r=this.getFiberRef(xs);this.setFiberRef(xs,je(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(Lp(Vt(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Ai({while:()=>!r,body:()=>{let n=t.next();return n.done?E(()=>{r=!0}):Oe(n.value.await)},step:()=>{}})}return null}reportExitValue(t){if(hh(this._runtimeFlags)){let r=this.getFiberRef(Eo),o=this.id().startTimeMillis,n=Date.now();switch(tD.unsafeUpdate(n-o,r),Uk.unsafeUpdate(-1,r),t._tag){case De:{XL.unsafeUpdate(1,r);break}case Le:{eD.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(Bh);!ns(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(lD)}log(t,r,o){let n=U(o)?o.value:this.getFiberRef(qh),s=this.getFiberRef(iD);if(EO(s,n))return;let i=this.getFiberRef(Pl),c=this.getFiberRef(pn),a=this.getLoggers(),p=this.getFiberRefs();if(zn(a)>0){let f=Ue(this.getFiberRef(be),Qt),h=new Date(f.unsafeCurrentTimeMillis());for(let d of a)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:c,date:h})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Np:return jk;case Ap:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ce(t.cause)),this._asyncInterruptor=null),Fa;case Pp:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Fa;case Ip:return t.onFiber(this,this._exitValue!==null?Vv:Kv(this._runtimeFlags,this._asyncBlockingOn)),Fa;default:return Ta(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=xo(this._runtimeFlags)&&this.isInterrupted()?ce(this.getInterruptedCause()):t;for(;r!==null;){let o=r,n=this.runLoop(o);if(n===En){let s=Fo.currentOp;Fo.currentOp=null,s._op===ni?ZS(this._runtimeFlags)?(this.tell(gC()),this.tell(Ls(Yt)),r=null):r=Yt:s._op===Ln&&(r=null)}else{this._runtimeFlags=m(this._runtimeFlags,fh(cl));let s=this.interruptAllChildren();s!==null?r=x(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(Ls(n)),r=null)}}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Ls(t));else{this._running=!0;let r=globalThis[Sn];globalThis[Sn]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[Sn]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Ls(t))}patchRuntimeFlags(t,r){let o=go(t,r);return globalThis[Sn]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(Ls(s)))};xo(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(Q(ht(s)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==ei)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==ti&&t._op!==oi)return t;t=this.popStack()}}[$y](t){return v(Bt(dt),r=>pi(r,t))}Left(t){return V(t.left)}None(t){return V(new Jt)}Right(t){return ge(t.right)}Some(t){return ge(t.value)}Micro(t){return A_(r=>{let o=sC().pipe(iC(aC,this.getFiberRef(dt))),n=r;return t[Zt](o,s=>{if(s._tag==="Right")return n(ge(s.right));switch(s.left._tag){case"Interrupt":return n(ce(Vt($t)));case"Fail":return n(V(s.left.error));case"Die":return n(So(s.left.defect))}}),He(s=>{n=i=>{s(B)},Ps(o,Mp).abort()})})}[mu](t){let r=Ne(()=>t.effect_instruction_i0()),o=this.getNextSuccessCont();return o!==void 0?(o._op in jp||Ta(o),jp[o._op](this,o,r)):(Fo.currentOp=ge(r),En)}[De](t){let r=t,o=this.getNextSuccessCont();return o!==void 0?(o._op in jp||Ta(o),jp[o._op](this,o,r.effect_instruction_i0)):(Fo.currentOp=r,En)}[Le](t){let r=t.effect_instruction_i0,o=this.getNextFailCont();if(o!==void 0)switch(o._op){case ei:case ri:return xo(this._runtimeFlags)&&this.isInterrupted()?ce(xl(r)):Ne(()=>o.effect_instruction_i1(r));case"OnStep":return xo(this._runtimeFlags)&&this.isInterrupted()?ce(xl(r)):ge(ce(r));case _c:return this.patchRuntimeFlags(this._runtimeFlags,o.patch),xo(this._runtimeFlags)&&this.isInterrupted()?ce(je(r,this.getInterruptedCause())):ce(r);default:Ta(o)}else return Fo.currentOp=ce(r),En}[hu](t){return Ne(()=>t.effect_instruction_i0(this,sx(this._runtimeFlags)))}Blocked(t){let r=this.getFiberRefs(),o=this._runtimeFlags;if(this._steps.length>0){let n=[],s=this._steps[this._steps.length-1],i=this.popStack();for(;i&&i._op!=="OnStep";)n.push(i),i=this.popStack();this.setFiberRefs(s.refs),this._runtimeFlags=s.flags;let c=Ts(s.refs,r),a=ir(s.flags,o);return ge(bo(t.effect_instruction_i0,oe(p=>{for(;n.length>0;)p.pushStack(n.pop());return p.setFiberRefs(As(p.id(),p.getFiberRefs())(c)),p._runtimeFlags=go(a)(p._runtimeFlags),t.effect_instruction_i1})))}return Te(n=>x(Ws(vl(t.effect_instruction_i0)),()=>n(t.effect_instruction_i1)))}RunBlocked(t){return sD(t.effect_instruction_i0)}[so](t){let r=t.effect_instruction_i0,o=this._runtimeFlags,n=go(o,r);if(xo(n)&&this.isInterrupted())return ce(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.effect_instruction_i1){let s=ir(n,o);return this.pushStack(new Sl(s,t)),Ne(()=>t.effect_instruction_i1(o))}else return Yt}[ti](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[ei](t){return this.pushStack(t),t.effect_instruction_i0}[ri](t){return this.pushStack(t),t.effect_instruction_i0}[Ln](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,t.effect_instruction_i0),Fo.currentOp=t,En}[ni](t){return this.isYielding=!1,Fo.currentOp=t,En}[oi](t){let r=t.effect_instruction_i0,o=t.effect_instruction_i1;return r()?(this.pushStack(t),o()):Yt}[Xs](t){return Ne(()=>t.commit())}runLoop(t){let r=t;for(this.currentOpCount=0;;){if(this._runtimeFlags&QS&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),!this.isYielding){this.currentOpCount+=1;let o=this._scheduler.shouldYield(this);if(o!==!1){this.isYielding=!0,this.currentOpCount=0;let n=r;r=x(Yr({priority:o}),()=>n)}}try{if((!("_op"in r)||!(r._op in this))&&Ta(r),r=this._tracer.context(()=>Tn()!==r[Zd]._V?rn(`Cannot execute an Effect versioned ${r[Zd]._V} with a Runtime of version ${Tn()}`):this[r._op](r),this),r===En){let o=Fo.currentOp;return o._op===ni||o._op===Ln?En:(Fo.currentOp=null,o._op===De||o._op===Le?o:ce(ht(o)))}}catch(o){F_(o)?r=ce(o.cause):tE(o)?r=ce(je(ht(o),Vt($t))):r=So(o)}}}run=()=>{this.drainQueueOnCurrentThread()}},iD=W("effect/FiberRef/currentMinimumLogLevel",()=>Ae(OO("Info"))),cD=e=>qp(t=>{let r=gO(t.context,be);Ue(r,Co).unsafe.log(e.log(t))});var aD=W(Symbol.for("effect/Logger/defaultLogger"),()=>cD(wC));var uD=W(Symbol.for("effect/Logger/tracerLogger"),()=>qp(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=tr(Hi(r,dt),yr(_r)),c=Re(Hi(r,be),p=>Ue(p,Qt));if(i._tag==="None"||i.value._tag==="ExternalSpan"||c._tag==="None")return;let a=Object.fromEntries(Qu(e,Bo));a["effect.fiberId"]=ES(o),a["effect.logLevel"]=n.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=Xo(t)),i.value.event(String(s),c.value.unsafeCurrentTimeNanos(),a)}));var lD=W(Symbol.for("effect/FiberRef/currentLoggers"),()=>Y_(jn(aD,uD)));var Kk=function(){if(typeof arguments[0]=="string")return mr(pn,br(arguments[0],arguments[1]));let e=Object.entries(arguments[0]);return mr(pn,kS(t=>{for(let r=0;r<e.length;r++){let[o,n]=e[r];br(t,o,n)}return t}))},Pa=l(e=>le(e[0]),(e,t)=>_o(Kt(e,r=>Zi(o=>t(r,o))))),Jk=l(e=>le(e[0]),(e,t)=>Mr(e,Zi(r=>t(r)))),Zi=e=>oe(t=>{let r=t.getFiberRefs(),o=t._runtimeFlags;return x(ag,n=>gs(n,s=>oe(i=>{let c=i.getFiberRefs(),a=i._runtimeFlags,p=Ts(c,r),f=ir(a,o),h=Ts(r,c);return i.setFiberRefs(As(p,i.id(),r)),Mr(Tl(e(s),f),E(()=>{i.setFiberRefs(As(h,i.id(),i.getFiberRefs()))}))})))}),Yk=e=>Be($c,_(yn))(e),zk=Symbol.for("effect/Effect/existsPar/found"),Qk=l(e=>xr(e[0])&&!le(e[0]),(e,t,r)=>ya(r?.concurrency,()=>I(()=>Zk(e[Symbol.iterator](),0,t)),()=>et(fr(e,(o,n)=>kl(t(o,n),{onTrue:()=>V(zk),onFalse:()=>B}),r),{onFailure:o=>o===zk?y(!0):V(o),onSuccess:()=>y(!1)}))),Zk=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(x(r(o.value,t),n=>n?y(n):Zk(e,t+1,r)))},Xk=l(e=>xr(e[0])&&!le(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>v(t(n,s),kb):t;return ya(r?.concurrency,()=>I(()=>te(e).reduceRight((n,s,i)=>Qr(n,I(()=>o(s,i)),(c,a)=>a?[s,...c]:c),E(()=>new Array))),()=>v(fr(e,(n,s)=>v(o(n,s),i=>i?_(n):S()),r),vb))}),pD=e=>{if(Array.isArray(e)||xr(e))return[e,S()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),_(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},fD=(e,t,r)=>{let o=[];for(let n of e)o.push(Vr(n));return x(fr(o,z,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=S(),i=n.length,c=new Array(i),a=new Array(i),p=!1;for(let f=0;f<i;f++){let h=n[f];h._tag==="Left"?(c[f]=_(h.left),p=!0):(a[f]=h.right,c[f]=s)}return p?t._tag==="Some"?V(t.value(c)):V(c):r?.discard?B:t._tag==="Some"?y(t.value(a)):y(a)})},mD=(e,t,r)=>{let o=[];for(let n of e)o.push(Vr(n));return r?.discard?fr(o,z,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):v(fr(o,z,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},Xi=(e,t)=>{let[r,o]=pD(e);return t?.mode==="validate"?fD(r,o,t):t?.mode==="either"?mD(r,o,t):t?.discard!==!0&&o._tag==="Some"?v(fr(r,z,t),o.value):fr(r,z,t)},ew=e=>t=>Xi(t,e),tw=(e,t)=>v(Xi(te(e).map(we),t),ui(r=>Bl(r)?_(r.effect_instruction_i0):S())),rg=l(2,(e,t)=>Array.from({length:t},()=>e)),rw=l(e=>le(e[0]),(e,t,r)=>Xi(rg(e,t),r)),fr=l(e=>xr(e[0]),(e,t,r)=>oe(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(Wh);return r?.discard?dx(r.concurrency,()=>On(yp)(s=>n?Hs(e,(i,c)=>s(t(i,c)),!0,!1,1):Ht(e,(i,c)=>s(t(i,c)))),()=>On(bp)(s=>Hs(e,(i,c)=>s(t(i,c)),n,!1)),s=>On(Sp(s))(i=>Hs(e,(c,a)=>i(t(c,a)),n,!1,s))):dx(r?.concurrency,()=>On(yp)(s=>n?tg(e,1,(i,c)=>s(t(i,c)),!0):it(e,(i,c)=>s(t(i,c)))),()=>On(bp)(s=>zp(e,(i,c)=>s(t(i,c)),n)),s=>On(Sp(s))(i=>tg(e,s,(c,a)=>i(t(c,a)),n)))})),zp=(e,t,r)=>I(()=>{let o=te(e),n=new Array(o.length);return se(Hs(o,(i,c)=>x(t(i,c),a=>E(()=>n[c]=a)),r,!1),y(n))}),Hs=(e,t,r,o,n)=>Te(s=>Fl(i=>oe(c=>{let a=Array.from(e).reverse(),p=a.length;if(p===0)return B;let f=0,h=!1,d=n?Math.min(a.length,n):a.length,g=new Set,b=new Array,M=()=>g.forEach(tt=>{tt._scheduler.scheduleTask(()=>{tt.unsafeInterruptAsFork(c.id())},0)}),T=new Array,L=new Array,J=new Array,ue=()=>{let tt=b.filter(({exit:q})=>q._tag==="Failure").sort((q,Z)=>q.index<Z.index?-1:q.index===Z.index?0:1).map(({exit:q})=>q);return tt.length===0&&tt.push(Yt),tt},Ee=(tt,q=!1)=>{let Z=_o(i(tt)),j=hD(Z,c,c._runtimeFlags,yn);return c._scheduler.scheduleTask(()=>{q&&j.unsafeInterruptAsFork(c.id()),j.resume(Z)},0),j},ft=()=>{o||(p-=a.length,a=[]),h=!0,M()},er=r?Cl:we,Do=Ee(He(tt=>{let q=(j,me)=>{j._op==="Blocked"?J.push(j):(b.push({index:me,exit:j}),j._op==="Failure"&&!h&&ft())},Z=()=>{if(a.length>0){let j=a.pop(),me=f++,Pe=()=>{let X=a.pop();return me=f++,x(Yr(),()=>x(er(s(t(X,me))),Se))},Se=X=>a.length>0&&(q(X,me),a.length>0)?Pe():y(X),he=x(er(s(t(j,me))),Se),ie=Ee(he);T.push(ie),g.add(ie),h&&ie._scheduler.scheduleTask(()=>{ie.unsafeInterruptAsFork(c.id())},0),ie.addObserver(X=>{let Me;if(X._op==="Failure"?Me=X:Me=X.effect_instruction_i0,L.push(ie),g.delete(ie),q(Me,me),b.length===p)tt(y(qe(mn(ue(),{parallel:!0}),()=>Yt)));else if(J.length+b.length===p){let de=J.map($s=>$s.effect_instruction_i0).reduce(Eh);tt(y(bo(de,Hs([qe(mn(ue(),{parallel:!0}),()=>Yt),...J.map($s=>$s.effect_instruction_i1)],$s=>$s,r,!0,n))))}else Z()})}};for(let j=0;j<d;j++)Z()}));return Oe(St(Mt(s(bn(Do))),Pi({onFailure:()=>{ft();let tt=J.length+1,q=Math.min(typeof n=="number"?n:J.length,J.length),Z=Array.from(J);return He(j=>{let me=[],Pe=0,Se=0,he=(X,Me)=>de=>{me[X]=de,Pe++,Pe===tt&&j(Oc(mn(me,{parallel:!0}))),Z.length>0&&Me&&ie()},ie=()=>{Ee(Z.pop(),!0).addObserver(he(Se,!0)),Se++};Do.addObserver(he(Se,!1)),Se++;for(let X=0;X<q;X++)ie()})},onSuccess:()=>it(L,tt=>tt.inheritAll)})))}))),tg=(e,t,r,o)=>I(()=>{let n=te(e),s=new Array(n.length);return se(Hs(n,(c,a)=>v(r(c,a),p=>s[a]=p),o,!1,t),y(s))}),pr=e=>oe((t,r)=>y(nw(e,t,r.runtimeFlags))),Ws=e=>dD(e,yn),ow=l(2,(e,t)=>pr(Rl(e,r=>{let o=zr(r);switch(o._tag){case"Left":return t(o.left);case"Right":return Q(o.right)}}))),nw=(e,t,r,o=null)=>{let n=Gp(e,t,r,o);return n.resume(e),n},hD=(e,t,r,o=null)=>Gp(e,t,r,o),Gp=(e,t,r,o=null)=>{let n=Yu(),s=t.getFiberRefs(),i=xd(s,n),c=new Aa(n,i,r),a=ks(i,dt),p=c._supervisor;return p.onStart(a,e,_(t),c),c.addObserver(h=>p.onEnd(h,c)),(o!==null?o:m(t.getFiberRef($c),qe(()=>t.scope()))).add(r,c),c},dD=(e,t)=>oe((r,o)=>y(nw(e,r,o.runtimeFlags,t))),og=l(e=>Wo(e[2]),(e,t,r,o)=>ya(o?.concurrency,()=>te(e).reduce((n,s,i)=>Qr(n,s,(c,a)=>r(c,a,i)),y(t)),()=>x(la(t),n=>x(fr(e,(s,i)=>x(s,c=>TO(n,a=>r(a,c,i))),o),()=>sp(n))))),ng=l(e=>xr(e[0]),(e,t,r)=>m(fr(e,(o,n)=>Vr(t(o,n)),r),v(o=>D_(o,z)))),sw=l(e=>xr(e[0]),(e,t,r)=>x(ng(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?B:y(n):V(o))),iw=e=>{let t=Dr(e);if(!rt(t))return on(()=>new Zc("Received an empty collection of effects"));let r=Xe(t),o=nt(t),n=s=>m(EC(s[1]),pe(s[0]));return m(Rt(),x(s=>m(la(o.length),x(i=>Te(c=>m(pr(Kr(r)),x(a=>m(o,it(p=>pr(Kr(p))),v(p=>fi(p)),v(p=>m(p,Ze(a))),Kt(p=>m(p,rr(B,(f,h)=>m(f,se(m(yx(h),x(xD(p,h,s,i)),pr,Oe)))))),x(p=>m(c(m(Os(s),x(n))),vr(()=>m(p,rr(B,(f,h)=>m(f,fs(hs(h))))))))))))))))},xD=(e,t,r,o)=>n=>Ss(n,{onFailure:s=>m(FO(o,i=>[i===0?m(_s(r,s),Oe):B,i-1]),Mt),onSuccess:s=>m(sa(r,[s,t]),x(i=>i?m(Dr(e),rr(B,(c,a)=>a===t?c:m(c,fs(hs(a))))):B))}),cw=l(e=>xr(e[0])&&!le(e[0]),(e,t,r,o)=>ya(o?.concurrency,()=>te(e).reduce((n,s,i)=>Qr(n,s,(c,a)=>r(c,a,i)),t),()=>I(()=>m(og([t,...e],S(),(n,s,i)=>{switch(n._tag){case"None":return _(s);case"Some":return _(r(n.value,s,i))}},o),v(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return n.value}}))))),$p=e=>ar(t=>Je(yr(t,vn),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return x(ys(r,bp),o=>Cn(e,o))}}})),Gk=e=>t=>ar(r=>Je(yr(r,vn),{onNone:()=>t,onSome:o=>o.strategy._tag==="ParallelN"&&o.strategy.parallelism===e?t:x(ys(o,Sp(e)),n=>Cn(t,n))})),On=e=>t=>ar(r=>Je(yr(r,vn),{onNone:()=>t(z),onSome:o=>{let n=e._tag==="Parallel"?$p:e._tag==="Sequential"?Vp:Gk(e.parallelism);switch(o.strategy._tag){case"Parallel":return n(t($p));case"Sequential":return n(t(Vp));case"ParallelN":return n(t(Gk(o.strategy.parallelism)))}}})),Bs=e=>x(vn,e),sg=e=>x(Na(),t=>bD(e,t)),Vp=e=>ar(t=>Je(yr(t,vn),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return x(ys(r,yp),o=>Cn(e,o))}}})),aw=(e,t)=>ig([Ms(e,t)]),ig=e=>mr(Eo,t=>Ir(t,e)),uw=l(2,(e,t)=>tn(Na(),r=>x(Cn(e,r),t),(r,o)=>Oo(r,o))),lw=l(e=>le(e[1]),(e,t,r)=>cg(e,t,(o,n)=>[o,n],r)),cg=l(e=>le(e[1]),(e,t,r,o)=>Mt(To(we(e),we(t),(n,s)=>ra(n,s,{onSuccess:r,onFailure:(i,c)=>o?.concurrent?wt(i,c):je(i,c)}),o)));var pw=l(e=>xr(e[0]),(e,t,r)=>cn(fr(e,(o,n)=>cn(t(o,n)),r))),fw=e=>mr(be,ke(Qt,e)),mw=e=>mr(be,ke(Di,e)),hw=e=>mr(be,ke(Li,e)),dw=e=>Bs(t=>x(ys(t,to),r=>m(e,Cn(r),v(o=>[qt(n=>Oo(r,jl(n))),o])))),xw=l(e=>le(e[1]),(e,t,r)=>To(e,t,(o,n)=>[o,n],r)),gw=l(e=>le(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?fs(e,t):To(e,t,(o,n)=>o,r)),yw=l(e=>le(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?se(e,t):To(e,t,(o,n)=>n,r)),To=l(e=>le(e[1]),(e,t,r,o)=>v(Xi([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),bw=e=>e===e_?B:m(Fi,x(t=>{let r=go(t,e),o=ir(r,t);return m(un(e),se(Zi(()=>un(o))),Oe)}),_o),vn=vt("effect/Scope"),ag=vn,gD=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.add(t)},yD={[Dl]:Dl,[ql]:ql,pipe(){return O(this,arguments)},fork(e){return E(()=>{let t=Sw(e);if(this.state._tag==="Closed")return t.state=this.state,t;let r=o=>t.close(o);return this.state.finalizers.add(r),gD(t,o=>E(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return I(()=>{if(this.state._tag==="Closed")return B;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?B:Xd(this.strategy)?m(it(t,r=>we(r(e))),x(r=>m(mn(r),Re(ea),qe(()=>Yt)))):ex(this.strategy)?m(zp(t,r=>we(r(e)),!1),x(r=>m(mn(r,{parallel:!0}),Re(ea),qe(()=>Yt)))):m(tg(t,this.strategy.parallelism,r=>we(r(e)),!1),x(r=>m(mn(r,{parallel:!0}),Re(ea),qe(()=>Yt))))})},addFinalizer(e){return I(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.add(e),B))}},Sw=(e=to)=>{let t=Object.create(yD);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Na=(e=to)=>E(()=>Sw(e)),Cn=l(2,(e,t)=>Es(e,Hn(_m(vn,t)))),bD=l(2,(e,t)=>m(e,Cn(t),St(r=>t.close(r)))),SD=e=>ds(e,{differ:Bk,fork:Qi}),Jp=l(2,(e,t)=>Oe(Pa(x(Bt(e),r=>pe(cs(e,t),r)),r=>cs(e,r)))),mr=l(2,(e,t)=>We(e,r=>Jp(e,t(r))));var $k=Q_(XS),Kp=SD(qs),_w=e=>Oe(yx(Yp(e))),Yp=e=>({[ba]:Sa,id:()=>te(e).reduce((t,r)=>Ym(t,r.id()),$t),await:we(zp(e,t=>Mt(t.await),!1)),children:v(zp(e,t=>t.children,!1),vu),inheritAll:Ht(e,t=>t.inheritAll),poll:v(it(e,t=>t.poll),Cu(_(ge(new Array)),(t,r)=>{switch(r._tag){case"None":return S();case"Some":switch(t._tag){case"None":return S();case"Some":return _(ra(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:wt}))}}})),interruptAsFork:t=>Ht(e,r=>r.interruptAsFork(t)),pipe(){return O(this,arguments)}});var ug=l(3,(e,t,r)=>lg(e,t,{onSelfWin:(o,n)=>x(o.await,s=>{switch(s._tag){case De:return x(o.inheritAll,()=>r.onSelfDone(s,n));case Le:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>x(o.await,s=>{switch(s._tag){case De:return x(o.inheritAll,()=>r.onOtherDone(s,n));case Le:return r.onOtherDone(s,n)}})})),Ew=e=>Te(t=>qt(r=>x(Ws(t(e)),o=>m(t(bn(o)),vr(()=>m(o,OC(r))))))),Qp=l(2,(e,t)=>qt(r=>ug(e,t,{onSelfDone:(o,n)=>Ss(o,{onFailure:s=>m(bn(n),Ui(i=>wt(s,i))),onSuccess:s=>m(n,Wt(r),pe(s))}),onOtherDone:(o,n)=>Ss(o,{onFailure:s=>m(bn(n),Ui(i=>wt(i,s))),onSuccess:s=>m(n,Wt(r),pe(s))})}))),lg=l(3,(e,t,r)=>oe((o,n)=>{let s=n.runtimeFlags,i=Wr(!0),c=Gp(e,o,s,r.selfScope),a=Gp(t,o,s,r.otherScope);return He(p=>{c.addObserver(()=>Vk(c,a,r.onSelfWin,i,p)),a.addObserver(()=>Vk(a,c,r.onOtherWin,i,p)),c.startFork(e),a.startFork(t)},Ym(c.id(),a.id()))})),Vk=(e,t,r,o,n)=>{zu(!0,!1)(o)&&n(r(e,t))},Mr=l(2,(e,t)=>Te(r=>_e(r(e),{onFailure:o=>_e(t,{onFailure:n=>Q(je(o,n)),onSuccess:()=>Q(o)}),onSuccess:o=>pe(t,o)}))),_D=(e,t,r)=>qt(o=>x(x(Ws(Kr(e)),n=>He(s=>{let i=t.map(p=>p.listeners.count),c=()=>{i.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&Xc(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&hl(p.result.state.current.effect.cause)))&&(a.forEach(p=>p()),r?.(),s(hs(n)))};n.addObserver(p=>{a.forEach(f=>f()),s(p)});let a=t.map((p,f)=>{let h=d=>{i[f]=d,c()};return p.listeners.addObserver(h),()=>p.listeners.removeObserver(h)});return c(),E(()=>{a.forEach(p=>p())})})),()=>I(()=>{let n=t.flatMap(s=>s.state.completed?[]:[s]);return Ht(n,s=>$x(s.request,jl(o)))})));var Ia=(e,t)=>(t=yo(t),_o(oe(r=>{let o=pi(r.getFiberRef(dt),vn),n=xp(r,e,t),s=r.getFiberRef(Ii),i=Ue(r.getFiberRef(be),Qt);return pe(gs(o,c=>Yd(n,c,i,s)),n)}))),Ow=e=>mr(be,ke(Gr,e)),vw=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=yo(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return x(Ia(t,yo(r)),n=>ji(o,_r,n))}return o=>x(Ia(t,yo(r)),n=>ji(o,_r,n))};var Cw=(e,t,r,o)=>el({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),kw=(e,t)=>el({_tag:"Pending",key:e,deferred:t}),ED=(e,t)=>el({_tag:"Refreshing",deferred:e,complete:t}),pg=Symbol.for("effect/Cache/MapKey"),fg=class{current;[pg]=pg;previous=void 0;next=void 0;constructor(t){this.current=t}[F](){return m(w(this.current),D(w(this.previous)),D(w(this.next)),K(this))}[R](t){return this===t?!0:OD(t)&&C(this.current,t.current)&&C(this.previous,t.previous)&&C(this.next,t.next)}},ec=e=>new fg(e),OD=e=>k(e,pg),mg=class{head=void 0;tail=void 0;add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},vD=()=>new mg,CD=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),kD=()=>CD(vs(),vD(),vE(),Wr(!1),0,0),wD="effect/Cache",MD=Symbol.for(wD),RD={_Key:e=>e,_Error:e=>e,_Value:e=>e},FD=e=>e,Zp=e=>({loadedMillis:e}),hg=class{capacity;context;fiberId;lookup;timeToLive;[MD]=RD;cacheState;constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this.cacheState=kD()}get(t){return v(this.getEither(t),Su)}get cacheStats(){return E(()=>FD({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Gl(this.cacheState.map)}))}getOption(t){return I(()=>Je(Ge(this.cacheState.map,t),{onNone:()=>{let r=ec(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return I(()=>Je(Ge(this.cacheState.map,t),{onNone:()=>{let r=ec(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return E(()=>kr(this.cacheState.map,t))}entryStats(t){return E(()=>{let r=Ge(this.cacheState.map,t);if(U(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return _(Zp(o))}case"Pending":return S();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return _(Zp(o))}}return S()})}getEither(t){return I(()=>{let r=t,o,n,s=mt(Ge(this.cacheState.map,r));return s===void 0&&(n=$h(this.fiberId),o=ec(r),kr(this.cacheState.map,r)?s=mt(Ge(this.cacheState.map,r)):Ut(this.cacheState.map,r,kw(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),v(this.lookupValueOf(t,n),Ke)):x(this.resolveMapValue(s),Je({onNone:()=>this.getEither(t),onSome:i=>y(Et(i))}))})}invalidate(t){return E(()=>{Cs(this.cacheState.map,t)})}invalidateWhen(t,r){return E(()=>{let o=Ge(this.cacheState.map,t);U(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&Cs(this.cacheState.map,t)})}get invalidateAll(){return E(()=>{this.cacheState.map=vs()})}refresh(t){return eo(r=>I(()=>{let o=t,n=$h(this.fiberId),s=mt(Ge(this.cacheState.map,o));if(s===void 0&&(kr(this.cacheState.map,o)?s=mt(Ge(this.cacheState.map,o)):Ut(this.cacheState.map,o,kw(ec(o),n))),s===void 0)return Oe(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=mt(Ge(this.cacheState.map,o));return C(i,s)&&Cs(this.cacheState.map,o),Oe(this.get(t))}return m(this.lookupValueOf(t,n),dp(()=>{let i=mt(Ge(this.cacheState.map,o));if(C(i,s)){let c=ED(n,s);return Ut(this.cacheState.map,o,c),!0}return!1}),Oe)}case"Pending":return Os(s.deferred);case"Refreshing":return Os(s.deferred)}}))}set(t,r){return eo(o=>E(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=hE(r),c=Cw(ec(s),i,Zp(n),n+qr(st(this.timeToLive(i))));Ut(this.cacheState.map,s,c)}))}get size(){return E(()=>Gl(this.cacheState.map))}get values(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}get entries(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}get keys(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return eo(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.hasExpired(o,t.timeToLiveMillis)?(Cs(this.cacheState.map,t.key.current),y(S())):(this.trackHit(),v(t.exit,_));case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(S()):v(Os(t.deferred),_);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(S()):v(Os(t.deferred),_):v(t.complete.exit,_)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(CE(this.cacheState.accesses,t),zu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=kE(this.cacheState.accesses,Zh);n===Zh?r=!1:this.cacheState.keys.add(n)}let o=Gl(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?kr(this.cacheState.map,n.current)&&(Cs(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}sr(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return eo(o=>I(()=>{let n=t;return m(this.lookup(t),Cr(this.context),we,x(s=>{let i=o.unsafeCurrentTimeMillis(),c=Zp(i),a=Cw(ec(n),s,c,i+qr(st(this.timeToLive(s))));return Ut(this.cacheState.map,n,a),se(pE(r,s),s)}),vr(()=>se(fE(r),E(()=>{Cs(this.cacheState.map,n)}))))}))}};var ww=(e,t,r)=>new hg(e,Ct(),Vu,t,o=>st(r(o)));u();var Mw=ns;var Rw=jc;var ee={};Dy(ee,{Do:()=>AW,EffectTypeId:()=>Sq,Tag:()=>sU,acquireRelease:()=>m5,acquireReleaseInterruptible:()=>h5,acquireUseRelease:()=>d5,addFinalizer:()=>x5,all:()=>wq,allSuccesses:()=>Rq,allWith:()=>Mq,allowInterrupt:()=>jH,andThen:()=>ZW,annotateCurrentSpan:()=>zB,annotateLogs:()=>G3,annotateLogsScoped:()=>$3,annotateSpans:()=>jB,ap:()=>MB,as:()=>e5,asSome:()=>t5,asSomeError:()=>r5,asVoid:()=>o5,async:()=>Zq,asyncEffect:()=>Xq,awaitAllChildren:()=>M5,bind:()=>IW,bindTo:()=>PW,blocked:()=>RB,cacheRequestResult:()=>IB,cached:()=>vq,cachedFunction:()=>Cq,cachedInvalidateWithTTL:()=>Oq,cachedWithTTL:()=>Eq,catch:()=>SH,catchAll:()=>_H,catchAllCause:()=>EH,catchAllDefect:()=>OH,catchIf:()=>vH,catchSome:()=>CH,catchSomeCause:()=>kH,catchSomeDefect:()=>wH,catchTag:()=>MH,catchTags:()=>RH,cause:()=>FH,checkInterruptible:()=>zH,clock:()=>Q5,clockWith:()=>Z5,configProviderWith:()=>hW,console:()=>tW,consoleWith:()=>rW,context:()=>gW,contextWith:()=>yW,contextWithEffect:()=>bW,currentParentSpan:()=>$B,currentSpan:()=>GB,custom:()=>eH,daemonChildren:()=>R5,delay:()=>sW,descriptor:()=>F5,descriptorWith:()=>T5,die:()=>iH,dieMessage:()=>cH,dieSync:()=>aH,diffFiberRefs:()=>A5,disconnect:()=>GH,dropUntil:()=>Fq,dropWhile:()=>Tq,either:()=>LW,ensuring:()=>g5,ensuringChild:()=>I5,ensuringChildren:()=>P5,eventually:()=>TH,every:()=>Aq,exists:()=>Iq,exit:()=>DW,fail:()=>rH,failCause:()=>nH,failCauseSync:()=>sH,failSync:()=>oH,fiberId:()=>N5,fiberIdWith:()=>L5,filter:()=>Pq,filterMap:()=>Nq,filterOrDie:()=>BW,filterOrDieMessage:()=>UW,filterOrElse:()=>jW,filterOrFail:()=>zW,finalizersMask:()=>_5,findFirst:()=>Lq,firstSuccessOf:()=>Dq,flatMap:()=>QW,flatten:()=>XW,flip:()=>n5,flipWith:()=>s5,forEach:()=>qq,forever:()=>p3,fork:()=>D5,forkAll:()=>H5,forkDaemon:()=>q5,forkIn:()=>W5,forkScoped:()=>B5,forkWithErrorHandler:()=>U5,fromFiber:()=>j5,fromFiberEffect:()=>z5,fromNullable:()=>oU,functionWithSpan:()=>eU,gen:()=>uH,getFiberRefs:()=>_3,getRuntimeFlags:()=>sB,head:()=>Hq,if:()=>WW,ignore:()=>AH,ignoreLogged:()=>IH,inheritFiberRefs:()=>E3,interrupt:()=>$H,interruptWith:()=>VH,interruptible:()=>KH,interruptibleMask:()=>JH,intoDeferred:()=>qW,isEffect:()=>_q,isFailure:()=>F3,isSuccess:()=>T3,iterate:()=>f3,labelMetrics:()=>lB,labelMetricsScoped:()=>fB,let:()=>NW,liftPredicate:()=>XH,linkSpans:()=>JB,locally:()=>O3,locallyScoped:()=>C3,locallyScopedWith:()=>k3,locallyWith:()=>v3,log:()=>L3,logAnnotations:()=>V3,logDebug:()=>H3,logError:()=>U3,logFatal:()=>j3,logInfo:()=>W3,logTrace:()=>q3,logWarning:()=>B3,logWithLevel:()=>D3,loop:()=>m3,makeSemaphore:()=>xB,makeSpan:()=>YB,makeSpanScoped:()=>QB,map:()=>i5,mapAccum:()=>c5,mapBoth:()=>a5,mapError:()=>u5,mapErrorCause:()=>l5,mapInputContext:()=>SW,match:()=>A3,matchCause:()=>I3,matchCauseEffect:()=>P3,matchEffect:()=>N3,merge:()=>p5,mergeAll:()=>Wq,metricLabels:()=>mB,negate:()=>f5,never:()=>lH,none:()=>pH,onError:()=>y5,onExit:()=>b5,onInterrupt:()=>YH,once:()=>kq,option:()=>HW,optionFromOptional:()=>nU,orDie:()=>J3,orDieWith:()=>Y3,orElse:()=>Q3,orElseFail:()=>Z3,orElseSucceed:()=>X3,parallelErrors:()=>PH,parallelFinalizers:()=>S5,partition:()=>Bq,patchFiberRefs:()=>w3,patchRuntimeFlags:()=>iB,promise:()=>fH,provide:()=>_W,provideService:()=>EW,provideServiceEffect:()=>OW,race:()=>t3,raceAll:()=>e3,raceFirst:()=>r3,raceWith:()=>o3,random:()=>eB,randomWith:()=>tB,reduce:()=>Uq,reduceEffect:()=>jq,reduceRight:()=>zq,reduceWhile:()=>Gq,repeat:()=>h3,repeatN:()=>d3,repeatOrElse:()=>x3,replicate:()=>$q,replicateEffect:()=>Vq,request:()=>AB,retry:()=>LH,retryOrElse:()=>DH,runCallback:()=>yB,runFork:()=>gB,runPromise:()=>bB,runPromiseExit:()=>SB,runRequestBlock:()=>FB,runSync:()=>_B,runSyncExit:()=>EB,runtime:()=>nB,sandbox:()=>NH,schedule:()=>g3,scheduleForked:()=>y3,scheduleFrom:()=>b3,scope:()=>O5,scopeWith:()=>v5,scoped:()=>C5,sequentialFinalizers:()=>E5,serviceConstants:()=>wW,serviceFunction:()=>vW,serviceFunctionEffect:()=>CW,serviceFunctions:()=>kW,serviceMembers:()=>MW,serviceOption:()=>RW,serviceOptional:()=>FW,setFiberRefs:()=>M3,sleep:()=>iW,spanAnnotations:()=>VB,spanLinks:()=>KB,step:()=>TB,succeed:()=>mH,succeedNone:()=>hH,succeedSome:()=>dH,summarized:()=>n3,supervised:()=>G5,suspend:()=>xH,sync:()=>gH,tagMetrics:()=>uB,tagMetricsScoped:()=>pB,takeUntil:()=>Kq,takeWhile:()=>Jq,tap:()=>s3,tapBoth:()=>i3,tapDefect:()=>c3,tapError:()=>a3,tapErrorCause:()=>l3,tapErrorTag:()=>u3,timed:()=>cW,timedWith:()=>aW,timeout:()=>uW,timeoutFail:()=>pW,timeoutFailCause:()=>fW,timeoutOption:()=>lW,timeoutTo:()=>mW,tracer:()=>DB,tracerWith:()=>qB,transplant:()=>$5,try:()=>qH,tryMap:()=>HH,tryMapPromise:()=>WH,tryPromise:()=>BH,uninterruptible:()=>QH,uninterruptibleMask:()=>ZH,unless:()=>GW,unlessEffect:()=>$W,unsafeMakeSemaphore:()=>dB,unsandbox:()=>UH,updateFiberRefs:()=>R3,updateService:()=>TW,useSpan:()=>ZB,using:()=>k5,validate:()=>OB,validateAll:()=>Yq,validateFirst:()=>Qq,validateWith:()=>vB,void:()=>yH,when:()=>VW,whenEffect:()=>KW,whenFiberRef:()=>JW,whenRef:()=>YW,whileLoop:()=>S3,withClock:()=>eW,withClockScoped:()=>X5,withConcurrency:()=>V5,withConfigProvider:()=>dW,withConfigProviderScoped:()=>xW,withConsole:()=>nW,withConsoleScoped:()=>oW,withEarlyRelease:()=>w5,withFiberRuntime:()=>tH,withLogSpan:()=>z3,withMaxOpsBeforeYield:()=>Y5,withMetric:()=>hB,withParentSpan:()=>rU,withRandom:()=>rB,withRandomScoped:()=>oB,withRequestBatching:()=>PB,withRequestCache:()=>LB,withRequestCaching:()=>NB,withRuntimeFlagsPatch:()=>cB,withRuntimeFlagsPatchScoped:()=>aB,withScheduler:()=>K5,withSchedulingPriority:()=>J5,withSpan:()=>XB,withSpanScoped:()=>tU,withTracer:()=>HB,withTracerEnabled:()=>BB,withTracerScoped:()=>WB,withTracerTiming:()=>UB,withUnhandledErrorLogLevel:()=>K3,yieldNow:()=>bH,zip:()=>CB,zipLeft:()=>kB,zipRight:()=>wB,zipWith:()=>mR});u();u();u();u();u();u();u();u();u();var AD="effect/ScheduleInterval",Da=Symbol.for(AD),dg={[Da]:Da,startMillis:0,endMillis:0},xg=(e,t)=>e>t?dg:{[Da]:Da,startMillis:e,endMillis:t},Fw=l(2,(e,t)=>Tw(e,t)===e),Tw=l(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t);var Aw=e=>e.startMillis>=e.endMillis;var Iw=l(2,(e,t)=>{let r=Math.max(e.startMillis,t.startMillis),o=Math.min(e.endMillis,t.endMillis);return xg(r,o)});var Pw=e=>xg(e,Number.POSITIVE_INFINITY);var gg=dg,Nw=Fw;var Lw=Aw;var Dw=Iw;var qw=Pw;var ND="effect/ScheduleIntervals",bg=Symbol.for(ND),Sg=e=>({[bg]:bg,intervals:e});var Hw=l(2,(e,t)=>LD(e.intervals,t.intervals,Lt())),LD=(e,t,r)=>{let o=e,n=t,s=r;for(;rt(o)&&rt(n);){let i=m(Xe(o),Dw(Xe(n))),c=Lw(i)?s:m(s,Ze(i));m(Xe(o),Nw(Xe(n)))?o=nt(o):n=nt(n),s=c}return Sg(Lr(s))},Xp=e=>m(e.intervals,wu,qe(()=>gg)).startMillis,Ww=e=>m(e.intervals,wu,qe(()=>gg)).endMillis,Bw=l(2,(e,t)=>Xp(e)<Xp(t)),Uw=e=>rt(e.intervals);var jw=Sg;var zw=Hw,Gw=Xp,_g=Ww,$w=Bw,Vw=Uw;var Og="Continue",Kw="Done",Jw=e=>({_tag:Og,intervals:e}),Yw=e=>({_tag:Og,intervals:jw(Fe(e))}),Qw={_tag:Kw},Zw=e=>e._tag===Og,Xw=e=>e._tag===Kw;var eM=Jw;var tM=Yw,tc=Qw,vg=Zw,qa=Xw;u();var oM=Oo;var nM=ys;u();u();var HD="effect/Schedule",aM=Symbol.for(HD),uM=e=>k(e,aM),WD="effect/ScheduleDriver",BD=Symbol.for(WD),UD={_Out:e=>e,_In:e=>e,_R:e=>e},jD={_Out:e=>e,_In:e=>e,_R:e=>e},Cg=class{initial;step;[aM]=UD;constructor(t,r){this.initial=t,this.step=r}pipe(){return O(this,arguments)}},kg=class{schedule;ref;[BD]=jD;constructor(t,r){this.schedule=t,this.ref=r}get state(){return v(lr(this.ref),t=>t[1])}get last(){return x(lr(this.ref),([t,r])=>{switch(t._tag){case"None":return Or(()=>new Jt);case"Some":return y(t.value)}})}get reset(){return ko(this.ref,[S(),this.schedule.initial])}next(t){return m(v(lr(this.ref),r=>r[1]),x(r=>m(Zl,x(o=>m(I(()=>this.schedule.step(o,t,r)),x(([n,s,i])=>{let c=ko(this.ref,[_(s),n]);if(qa(i))return se(c,V(S()));let a=Gw(i.intervals)-o;return a<=0?pe(c,s):m(c,se(Fs(di(a))),pe(s))}))))))}},rf=(e,t)=>new Cg(e,t);var zD=l(2,(e,t)=>Rg(e,(r,o)=>E(()=>t(r,o)))),Rg=l(2,(e,t)=>rf(e.initial,(r,o,n)=>x(e.step(r,o,n),([s,i,c])=>qa(c)?y([s,i,tc]):v(t(o,i),a=>a?[s,i,c]:[s,i,tc]))));var Fg=e=>m(ws([S(),e.initial]),v(t=>new kg(e,t)));var lM=l(2,(e,t)=>GD(e,t,zw)),GD=l(3,(e,t,r)=>rf([e.initial,t.initial],(o,n,s)=>m(Qr(e.step(o,n,s[0]),t.step(o,n,s[1]),(i,c)=>[i,c]),x(([[i,c,a],[p,f,h]])=>vg(a)&&vg(h)?wg(e,t,n,i,c,a.intervals,p,f,h.intervals,r):y([[i,p],[c,f],tc]))))),wg=(e,t,r,o,n,s,i,c,a,p)=>{let f=p(s,a);return Vw(f)?y([[o,i],[n,c],eM(f)]):m(s,$w(a))?x(e.step(_g(s),r,o),([h,d,g])=>qa(g)?y([[h,i],[d,c],tc]):wg(e,t,r,h,d,g.intervals,i,c,a,p)):x(t.step(_g(a),r,i),([h,d,g])=>qa(g)?y([[o,h],[n,d],tc]):wg(e,t,r,o,n,s,h,d,g.intervals,p))};var $D=e=>rf(e.initial,(t,r,o)=>m(e.step(t,r,o),v(([n,s,i])=>[n,r,i])));var pM=e=>KD(Pg,t=>t<e);var VD=(e,t)=>rf(e,(r,o,n)=>E(()=>[t(n),n,tM(qw(r))]));var fM=l(2,(e,t)=>Rg(e,(r,o)=>mp(t(r))));var mM=l(2,(e,t)=>Rg(e,(r,o)=>t(r))),KD=l(2,(e,t)=>zD(e,(r,o)=>t(o)));var ef=Symbol.for("effect/Schedule/ScheduleDefect"),Mg=class{error;[ef];constructor(t){this.error=t,this[ef]=ef}},JD=e=>k(e,ef),tf=e=>Er(e,t=>So(new Mg(t))),hM=e=>$r(e,t=>Je(Zo(t,r=>wi(r)&&JD(r.defect)?_(r.defect):S()),{onNone:()=>Q(t),onSome:r=>V(r.error)})),iM=l(2,(e,t)=>Tg(e,t,(r,o)=>V(r))),dM=l(2,(e,t)=>{if(uM(t))return iM(e,t);let r=t.schedule??$D(Pg),o=t.while?mM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):tf(c)}):r,n=t.until?fM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):tf(c)}):o,s=t.times?lM(n,pM(t.times)):n;return hM(iM(e,s))}),Tg=l(3,(e,t,r)=>x(Fg(t),o=>et(e,{onFailure:n=>r(n,S()),onSuccess:n=>xM(e,o,r,n)}))),xM=(e,t,r,o)=>et(t.next(o),{onFailure:()=>ls(t.last),onSuccess:n=>et(e,{onFailure:s=>r(s,_(n)),onSuccess:s=>xM(e,t,r,s)})}),cM=l(2,(e,t)=>Ag(e,t,(r,o)=>V(r))),gM=l(2,(e,t)=>{if(uM(t))return cM(e,t);let r=t.schedule??Pg,o=t.while?mM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):tf(c)}):r,n=t.until?fM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):tf(c)}):o,s=t.times?lM(n,pM(t.times)):n;return hM(cM(e,s))}),Ag=l(3,(e,t,r)=>x(Fg(t),o=>yM(e,o,r))),yM=(e,t,r)=>Er(e,o=>et(t.next(o),{onFailure:()=>m(t.last,ls,x(n=>r(o,n))),onSuccess:()=>yM(e,t,r)})),of=l(2,(e,t)=>Ig(e,void 0,t)),Ig=l(3,(e,t,r)=>x(Fg(r),o=>bM(e,t,o))),bM=(e,t,r)=>et(r.next(t),{onFailure:()=>ls(r.last),onSuccess:()=>x(e,o=>bM(e,o,r))});var Pg=VD(0,e=>e+1);var Lg=class{permits;waiters=new Set;taken=0;constructor(t){this.permits=t}get free(){return this.permits-this.taken}take=t=>He(r=>{if(this.free<t){let o=()=>{this.free<t||(this.waiters.delete(o),this.taken+=t,r(y(t)))};return this.waiters.add(o),E(()=>{this.waiters.delete(o)})}return this.taken+=t,r(y(t))});updateTaken=t=>oe(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(gn).scheduleTask(()=>{let o=this.waiters.values(),n=o.next();for(;n.done===!1&&this.free>0;)n.value(),n=o.next()},r.getFiberRef(ln)),y(this.free)));release=t=>this.updateTaken(r=>r-t);releaseAll=this.updateTaken(t=>0);withPermits=t=>r=>Te(o=>x(o(this.take(t)),n=>Mr(o(r),this.release(n))))},sf=e=>new Lg(e),EM=e=>E(()=>sf(e)),OM=e=>cf(e,_w),vM=l(2,(e,t)=>v(qg(e,t),r=>r[0])),qg=l(2,(e,t)=>{let r=st(t);return x(cr(),o=>v(af(S()),n=>[Cr(YD(e,r,n),o),QD(n)]))}),_M=(e,t,r)=>{let o=qr(st(t));return m(Rt(),Kt(n=>Jr(e,n)),v(n=>_([r+o,n])))},YD=(e,t,r)=>Te(o=>m(eo(n=>n.currentTimeMillis),x(n=>tq(r,s=>{switch(s._tag){case"None":return _(_M(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?_(_M(e,t,n)):S()}}})),x(n=>$(n)?rn("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):o(ct(n.value[1]))))),QD=e=>ko(e,S()),CM=l(2,(e,t)=>cf(e,r=>t(Yp(r)))),cf=l(2,(e,t)=>x(Pk,r=>m(Bg(e,r),Mr(x(r.value,t))))),kM=l(e=>xr(e[0]),(e,t)=>t?.discard?Ht(e,pr):v(it(e,pr),Yp)),Hg=l(2,(e,t)=>Te(r=>x(t.fork(to),o=>m(r(e),St(n=>o.close(n)),Ws,Kt(n=>o.addFinalizer(()=>qt(s=>C(s,n.id())?B:Oe(hs(n))))))))),Wg=e=>Bs(t=>Hg(e,t)),wM=e=>bn(e),MM=e=>I(()=>x(e,bn)),Ng=Symbol.for("effect/Effect/memoizeFunction.key"),nf=class{a;eq;[Ng]=Ng;constructor(t,r){this.a=t,this.eq=r}[R](t){return k(t,Ng)?this.eq?this.eq(this.a,t.a):C(this.a,t.a):!1}[F](){return this.eq?0:K(this,w(this.a))}},RM=(e,t)=>m(E(()=>vs()),x(af),v(r=>o=>m(r.modifyEffect(n=>{let s=m(n,Ge(new nf(o,t)));return $(s)?m(Rt(),Kt(i=>m(Bi(e(o)),Jr(i),pr)),v(i=>[i,m(n,Ut(new nf(o,t),i))])):y([s.value,n])}),x(ct),x(([n,s])=>m(Rs(n),pe(s)))))),FM=l(2,(e,t)=>m(we(e),Qp(we(t)),r=>Mt(r))),TM=l(2,(e,t)=>m(e,of(t),Wg)),Bg=l(2,(e,t)=>ot(Kp,o=>o.zip(t))(e)),AM=l(2,(e,t)=>Ug(e,{onTimeout:()=>oE(t),duration:t})),Ug=l(2,(e,{duration:t,onTimeout:r})=>Mt(Ha(e,{onTimeout:()=>Or(r),onSuccess:y,duration:t}))),IM=l(2,(e,{duration:t,onTimeout:r})=>Mt(Ha(e,{onTimeout:()=>nn(r),onSuccess:y,duration:t}))),PM=l(2,(e,t)=>Ha(e,{duration:t,onSuccess:_,onTimeout:S})),Ha=l(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>qt(n=>lg(e,Kr(Fs(t)),{onSelfWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>pe(Wt(i,n),r(c.value))):x(Wt(i,n),()=>ce(c.cause))),onOtherWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>pe(Wt(i,n),o())):x(Wt(i,n),()=>ce(c.cause))),otherScope:yn}))),ZD="effect/Ref/SynchronizedRef",XD=Symbol.for(ZD),eq={_A:e=>e},Dg=class{ref;withLock;[XD]=eq;[tp]=Rd;[Xr];constructor(t,r){this.ref=t,this.withLock=r,this[Xr]=Xr,this.get=lr(this.ref)}get;modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(x(lr(this.ref),t),x(([r,o])=>pe(ko(this.ref,o),r))))}pipe(){return O(this,arguments)}},af=e=>E(()=>NM(e)),NM=e=>{let t=rp(e),r=sf(1);return new Dg(t,r.withPermits(1))},tq=l(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return v(o.value,n=>[n,n])}}));u();var DM="Fresh";u();u();var qM=Wt;var lf=e=>(t,r)=>{let o=Yu(),n=[[dt,[[o,e.context]]]];r?.scheduler&&n.push([gn,[[o,r.scheduler]]]);let s=SO(e.fiberRefs,{entries:n,forkAs:o});r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Aa(o,s,e.runtimeFlags),c=t;r?.scope&&(c=x(nM(r.scope,to),p=>se(Hl(p,qt(f=>C(f,i.id())?B:Wt(i,f))),St(t,f=>oM(p,f)))));let a=i._supervisor;return a!==qs&&(a.onStart(e.context,c,S(),i),i.addObserver(p=>a.onEnd(p,i))),yn.add(e.runtimeFlags,i),r?.immediate===!1?i.resume(c):i.start(c),i},Vg=e=>(t,r={})=>{let o=lf(e)(t,r);return r.onExit&&o.addObserver(n=>{r.onExit(n)}),(n,s)=>Vg(e)(m(o,qM(n??$t)),{...s,onExit:s?.onExit?i=>s.onExit(mE(i)):void 0})},oq=e=>t=>{let r=UM(e)(t);if(r._tag==="Failure")throw WM(r.effect_instruction_i0);return r.effect_instruction_i0},Gg=class extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}},nq=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Gg(e);return Error.stackTraceLimit=t,r};var jg=Symbol.for("effect/Runtime/FiberFailure"),zg=Symbol.for("effect/Runtime/FiberFailure/Cause"),$g=class extends Error{[jg];[zg];constructor(t){super(),this[jg]=jg,this[zg]=t;let r=gl(t);if(r.length>0){let o=r[0];this.name=o.name,this.message=o.message,this.stack=o.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[zg].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[G](){return this.toString()}},WM=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new $g(e);return Error.stackTraceLimit=t,r};var BM=e=>{let t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return ta(t.left);case"Right":return ge(t.right);case"Some":return ge(t.value);case"None":return ta(Jt())}},UM=e=>t=>{let r=BM(t);if(r)return r;let o=new Fp,n=lf(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw nq(n)},sq=e=>(t,r)=>jM(e)(t,r).then(o=>{switch(o._tag){case De:return o.effect_instruction_i0;case Le:throw WM(o.effect_instruction_i0)}}),jM=e=>(t,r)=>new Promise(o=>{let n=BM(t);n&&o(n);let s=lf(e)(t);s.addObserver(i=>{o(i)}),r?.signal!==void 0&&(r.signal.aborted?s.unsafeInterruptAsFork(s.id()):r.signal.addEventListener("abort",()=>{s.unsafeInterruptAsFork(s.id())},{once:!0}))}),uf=class{context;runtimeFlags;fiberRefs;constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return O(this,arguments)}},iq=e=>new uf(e.context,e.runtimeFlags,e.fiberRefs),pf=()=>oe((e,t)=>y(new uf(e.getFiberRef(dt),t.runtimeFlags,e.getFiberRefs()))),cq=mh(jr,ph,lh),Ao=iq({context:Ct(),runtimeFlags:cq,fiberRefs:_O()});var zM=Vg(Ao),GM=lf(Ao),$M=sq(Ao),VM=jM(Ao),KM=oq(Ao),JM=UM(Ao),YM=e=>I(()=>{let t;return x(Rt(),r=>x(pf(),o=>Te(n=>se(pr(n(_e(e(s=>Vg(o)(Jr(s,r))),{onFailure:s=>_s(r,s),onSuccess:s=>(t=s,B)}))),n(vr(ct(r),()=>t??B))))))});u();var ZM=l(2,(e,t)=>e.modifyEffect(t));var uq="effect/Layer",XM=Symbol.for(uq),lq={_RIn:e=>e,_E:e=>e,_ROut:e=>e},WY={[XM]:lq,pipe(){return O(this,arguments)}},pq="effect/Layer/MemoMap",Kg=Symbol.for(pq),fq=e=>k(e,XM),mq=e=>e._tag===DM,Jg=class{ref;[Kg];constructor(t){this.ref=t,this[Kg]=Kg}getOrElseMemoize(t,r){return m(ZM(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,c=m(s,x(([a,p])=>m(Rs(a),pe(p))),St(Pi({onFailure:()=>B,onSuccess:()=>gs(r,i)})));return y([c,o])}return m(ws(0),x(s=>m(Rt(),x(i=>m(ws(()=>B),v(c=>{let a=Te(f=>m(Na(),x(h=>m(f(x(tR(t,h,!0),d=>Bi(d(this)))),we,x(d=>{switch(d._tag){case Le:return m(_s(i,d.effect_instruction_i0),se(Oo(h,d)),se(Q(d.effect_instruction_i0)));case De:return m(ko(c,g=>m(Oo(h,g),Ti(op(s,b=>[b===1,b-1])),Oe)),se(ua(s,g=>g+1)),se(gs(r,g=>m(E(()=>o.delete(t)),se(lr(c)),x(b=>b(g))))),se(sa(i,d.effect_instruction_i0)),pe(d.effect_instruction_i0[1]))}}))))),p=[m(ct(i),St(Ss({onFailure:()=>B,onSuccess:()=>ua(s,f=>f+1)}))),f=>m(lr(c),x(h=>h(f)))];return[a,mq(t)?o:o.set(t,p)]}))))))}),Mt)}},hq=I(()=>v(af(new Map),e=>new Jg(e)));var eR=l(2,(e,t)=>x(hq,r=>x(tR(e,t),o=>o(r))));var tR=(e,t,r=!1)=>{let o=e;switch(o._tag){case"Locally":return E(()=>n=>o.f(n.getOrElseMemoize(o.self,t)));case"ExtendScope":return E(()=>n=>Bs(s=>n.getOrElseMemoize(o.layer,s)));case"Fold":return E(()=>n=>m(n.getOrElseMemoize(o.layer,t),_e({onFailure:s=>n.getOrElseMemoize(o.failureK(s),t),onSuccess:s=>n.getOrElseMemoize(o.successK(s),t)})));case"Fresh":return E(()=>n=>m(o.layer,eR(t)));case"FromEffect":return r?E(()=>n=>o.effect):E(()=>n=>n.getOrElseMemoize(e,t));case"Provide":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),x(s=>m(n.getOrElseMemoize(o.second,t),Cr(s)))));case"Scoped":return r?E(()=>n=>Cn(o.effect,t)):E(()=>n=>n.getOrElseMemoize(e,t));case"Suspend":return E(()=>n=>n.getOrElseMemoize(o.evaluate(),t));case"ProvideMerge":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),Qr(n.getOrElseMemoize(o.second,t),o.zipK)));case"ZipWith":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),To(n.getOrElseMemoize(o.second,t),o.zipK,{concurrent:!0})))}};var dq=l(2,(e,t)=>tn(Na(),r=>x(eR(t,r),o=>zl(e,o)),(r,o)=>Oo(r,o))),xq=l(2,(e,t)=>{let r=Ts(Ao.fiberRefs,t.fiberRefs),o=ir(Ao.runtimeFlags,t.runtimeFlags);return Te(n=>oe(s=>{let i=s.getFiberRef(dt),c=s.getFiberRefs(),a=As(s.id(),c)(r),p=s._runtimeFlags,f=go(o)(p),h=Ts(a,c),d=ir(f,p);return s.setFiberRefs(a),s._runtimeFlags=f,Mr(zl(n(e),Hn(i,t.context)),oe(g=>(g.setFiberRefs(As(g.id(),g.getFiberRefs())(h)),g._runtimeFlags=go(d)(g._runtimeFlags),B)))}))}),rR=l(2,(e,t)=>fq(t)?dq(e,t):Nb(t)?zl(e,t):xq(e,t));var oR=v(Bt(be),Ue(Co)),nR=e=>We(be,t=>e(Ue(t,Co))),sR=l(2,(e,t)=>ot(e,be,ke(Co,t))),iR=e=>mr(be,ke(Co,e));u();var Yg=W(Symbol.for("effect/FiberRef/currentCache"),()=>Ae(ww(65536,()=>v(Rt(),e=>({listeners:new Vi,handle:e})),()=>Tm(60)))),Qg=W(Symbol.for("effect/FiberRef/currentCacheEnabled"),()=>Ae(!1)),cR=(e,t)=>x(le(t)?t:y(t),r=>qt(o=>{let n=new Proxy(e,{});return We(Qg,s=>{if(s){let c=We(Yg,a=>x(a.getEither(n),p=>{switch(p._tag){case"Left":return p.left.listeners.interrupted?x(a.invalidateWhen(n,f=>f.handle===p.left.handle),()=>c):(p.left.listeners.increment(),Te(f=>x(we(bo(t_,f(ct(p.left.handle)))),h=>(p.left.listeners.decrement(),h))));case"Right":return p.right.listeners.increment(),Te(f=>x(we(bo(Oh(r,vh({request:n,result:p.right.handle,listeners:p.right.listeners,ownerId:o,state:{completed:!1}})),f(ct(p.right.handle)))),()=>(p.right.listeners.decrement(),ct(p.right.handle))))}}));return c}let i=new Vi;return i.increment(),x(Rt(),c=>Mr(bo(Oh(r,vh({request:n,result:c,listeners:i,ownerId:o,state:{completed:!1}})),ct(c)),E(()=>i.decrement())))})})),aR=(e,t)=>We(Qg,r=>r?We(Yg,o=>x(o.getEither(e),n=>{switch(n._tag){case"Left":return B;case"Right":return zh(n.right.handle,t)}})):B),uR=l(2,(e,t)=>Be(e,Qg,t)),lR=l(2,(e,t)=>Be(e,Yg,t));u();var pR=xk;var Sq=Ri,_q=le,Eq=vM,Oq=qg,vq=Wd,Cq=RM,kq=Bd,wq=Xi,Mq=ew,Rq=tw,Fq=s0,Tq=i0,Aq=g0,Iq=Qk,Pq=Xk,Nq=a0,Lq=m0,Dq=d0,qq=fr,Hq=S0,Wq=og,Bq=ng,Uq=$0,jq=cw,zq=V0,Gq=K0,$q=rg,Vq=rw,Kq=rv,Jq=ov,Yq=sw,Qq=pw,Zq=He,Xq=YM,eH=Vc,tH=oe,rH=V,oH=Or,nH=Q,sH=nn,iH=So,cH=rn,aH=on,uH=b0,lH=ms,pH=q0,fH=j0,mH=y,hH=ha,dH=ev,xH=I,gH=E,yH=B;var bH=Yr,SH=zO;var _H=Er,EH=$r,OH=GO,vH=Kc,CH=I_,kH=$O,wH=VO,MH=KO,RH=JO,FH=YO,TH=Nd,AH=Dd,IH=_0,PH=U0,NH=Z0,LH=gM,DH=Ag,qH=Pd;var HH=lv,WH=pv,BH=Gd,UH=hv,jH=XO,zH=P_,GH=Ew,$H=wl,VH=Ml,KH=Kr,JH=L_,YH=vr,QH=_o,ZH=Te,XH=p0,e5=pe,t5=lp,r5=jO,o5=Oe,n5=cn,s5=x0,i5=v,c5=L0,a5=Yc,u5=an,l5=Ui,p5=D0,f5=mp,m5=Pa,h5=Jk,d5=tn,x5=Zi,g5=Mr,y5=Rl,b5=St,S5=$p,_5=On,E5=Vp,O5=ag,v5=Bs,C5=sg,k5=uw,w5=dw,M5=OM,R5=Yk,F5=e0,T5=pp,A5=Bi,I5=CM,P5=cf,N5=sn,L5=qt,D5=pr,q5=Ws,H5=kM,W5=Hg,B5=Wg,U5=ow,j5=wM,z5=MM,G5=Bg,$5=Fl,V5=q_,K5=xC,J5=Hh,Y5=Z_,Q5=QO,Z5=eo,X5=fw,eW=oO,tW=oR,rW=nR,oW=iR,nW=sR,sW=ZO,iW=Fs,cW=av,aW=zd,uW=AM,lW=PM,pW=Ug,fW=IM,mW=Ha,hW=sO,dW=nO,xW=hw,gW=cr,yW=c0,bW=ar,SW=Es,_W=rR,EW=ji,OW=z0,vW=Sv,CW=bv,kW=$d,wW=Vd,MW=_v,RW=Ev,FW=Kd,TW=dv,AW=t0,IW=r0,PW=o0,NW=n0;var LW=Vr,DW=we,qW=Jr,HW=H0,WW=kl;var BW=u0,UW=l0,jW=fa,zW=f0,GW=fv,$W=mv,VW=dp,KW=Ti,JW=xv,YW=gv,QW=x,ZW=as,XW=Mt,e3=iw,t3=Qp,r3=FM,o3=ug,n3=da,s3=Kt,i3=nv,c3=sv,a3=jd,u3=iv,l3=cv,p3=Ld,f3=qd,m3=I0,h3=dM,d3=Y0,x3=Tg,g3=of,y3=TM,b3=Ig,S3=Ai,_3=fp,E3=E0,O3=Be,v3=ot,C3=Jp,k3=mr,w3=Rs,M3=X0,R3=hp,F3=O0,T3=v0,A3=ma,I3=Jc,P3=_e,N3=et,L3=C0,D3=(e,...t)=>wo(e)(...t),q3=k0,H3=Hd,W3=w0,B3=M0,U3=R0,j3=F0,z3=T0,G3=UO,$3=Kk,V3=A0,K3=X_,J3=ls,Y3=Nh,Q3=us,Z3=W0,X3=B0,eB=G0,tB=Yl,rB=iO,oB=mw,nB=pf,sB=Fi,iB=un,cB=Tl,aB=bw,uB=tv,lB=Ud,pB=aw,fB=ig,mB=eE,hB=yv,dB=sf,xB=EM,gB=GM,yB=zM,bB=$M,SB=VM,_B=KM,EB=JM,OB=lw,vB=cg,CB=xw,kB=gw,wB=yw,mR=To,MB=l(2,(e,t)=>mR(e,t,(r,o)=>r(o))),RB=bo,FB=vl,TB=Cl,AB=l(e=>pR(e[0]),cR),IB=aR,PB=H_,NB=uR,LB=lR,DB=uv,qB=Ql,HB=cO,WB=Ow,BB=W_,UB=B_,jB=vv,zB=Ov,GB=Jd,$B=Cv,VB=Rv,KB=Fv,JB=kv,YB=Mv,QB=Ia,ZB=ap,XB=Qd,eU=Tv,tU=vw,rU=up,oU=Av,nU=Iv,sU=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function o(){}Object.setPrototypeOf(o,xm),o.key=e,Object.defineProperty(o,"stack",{get(){return r.stack}});let n=new Map;return new Proxy(o,{get(i,c,a){if(c==="use")return h=>as(o,h);if(c in o)return o[c];if(n.has(c))return n.get(c);let p=(...h)=>as(o,d=>typeof d[c]=="function"?(n.set(c,(...g)=>as(o,b=>b[c](...g))),d[c](...h)):(n.set(c,as(o,g=>g[c])),d[c])),f=as(o,h=>h[c]);return Object.assign(p,f),Object.setPrototypeOf(p,Object.getPrototypeOf(f)),n.set(c,p),p}})};u();var iU=function(){let e=Symbol.for("effect/Data/Error/plainArgs");return class extends Wl{constructor(r){super(r?.message,r?.cause?{cause:r.cause}:void 0),r&&(Object.assign(this,r),Object.defineProperty(this,e,{value:r,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),rc=e=>{class t extends iU{_tag=e}return t.prototype.name=e,t};u();u();u();u();var Wa=class{constructor(t,r,o,n,s){this.message=t;this.stack=r;this.span=o;this.isPlainString=n;this.errorType=s}};u();var hR=e=>{if(typeof e=="string")return{isPlainString:!0,message:e};if(e instanceof Error&&k(e,"cause")&&k(e,"_tag"))return{isPlainString:!1,type:e._tag,message:e.cause};if(e instanceof Error&&k(e,"error"))return{isPlainString:!1,type:e.name,message:e.error};if(k(e,"_tag")&&k(e,"message"))return{isPlainString:!1,type:e._tag,message:e.message};if(k(e,"toString")&&Vs(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==Array.prototype.toString){let t=e.toString(),r=t.split(": ");if(r.length>1){let[o,...n]=r;return{isPlainString:!1,type:o,message:n}}return{message:t,isPlainString:!1}}return{message:`Error: ${JSON.stringify(e)}`,isPlainString:!1}};var dR=Symbol.for("effect/SpanAnnotation"),Zg=e=>{let t=k(e,dR)?e[dR]:void 0,{message:r,type:o,isPlainString:n}=hR(e);return e instanceof Error?new Wa(r,e.stack?.split(`
`).filter(s=>/at (.*)/.exec(s)).join(`\r
`),t,!1,o):new Wa(r,void 0,t,n,o)};var xR=e=>Rw(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[Zg(r)],failCase:(t,r)=>[Zg(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();u();var gR=e=>Array.from(e.entries()).reduce((t,[r,o])=>r==="code.stacktrace"?{attributes:t.attributes,stacktrace:[...t.stacktrace,o]}:{attributes:new Map([...t.attributes,[r,o]]),stacktrace:t.stacktrace},{stacktrace:[],attributes:new Map});u();var ff=/ {4}at /g,yR=/^(file:\/\/)?(.*.([jt])s)(\?.*)?:(\d*):(\d*)$/;u();var bR=global.process!==void 0?new RegExp(global.process.cwd(),"g"):null,SR=e=>bR===null?e:e.replace(bR,".");u();u();u();var _R=e=>{let t=yR.exec(e);if(t===null||t.length!==7)return;let r=t[2],o=+t[5],n=+t[6];return{filePath:r,line:o,column:n}};u();u();var Of=eu(my(),1);u();var ac=class extends rc("fs-error"){};var d2=e=>m(ee.tryPromise({try:async()=>await Of.default.readFile(e,{encoding:"utf8"}),catch:t=>new ac({cause:t})}),ee.withSpan("readFile",{attributes:{path:e}})),x2=e=>m(ee.tryPromise({try:async()=>await Of.default.exists(e),catch:t=>new ac({cause:t})}),ee.withSpan("exists",{attributes:{path:e}})),g2=e=>m(ee.tryPromise({try:async()=>await Of.default.readJson(e),catch:t=>new ac({cause:t})}),ee.withSpan("readJson",{attributes:{path:e}}));var uz=7,vf=({filePath:e,line:t,column:r},o=!1)=>ee.gen(function*(){let n=t>=4?t-4:0;return(yield*d2(e)).split(`
`).splice(n,uz).map((i,c)=>{let a=c+n+1,p=o?r+1:r;return{line:a,code:i,column:a===t?p:void 0}})});u();var Ly=eu(Y2(),1);import nG from"path";var OT=eu(ET(),1);var vT=e=>ee.gen(function*(){if(!(yield*x2(`${e.filePath}.map`))){let c=Ly.default.yellow(`${e.filePath}.map does not exist: unable to retrieve spans sourcemaps.`);console.warn(`${Ly.default.blueBright.underline("effect-errors")}: ${c}`);return}let r=yield*g2(`${e.filePath}.map`);if(r.version===void 0||r.sources===void 0)return;let n=new OT.SourceMapConsumer(r).originalPositionFor({column:e.column,line:e.line});if(n.source===null||n.line===null||n.column===null)return;let s=nG.resolve(e.filePath.substring(0,e.filePath.lastIndexOf("/")),n.source),i=yield*vf({filePath:s,line:n.line,column:n.column},!0);return{runPath:`${e.filePath}:${e.line}:${e.column}`,sourcesPath:`${s}:${n.line}:${n.column+1}`,source:i}});var CT=e=>ee.gen(function*(){let t=_R(e);if(t===void 0)return;let{filePath:r,line:o,column:n}=t;if(r.endsWith(".ts")){let i=yield*vf(t);return{runPath:`${r}:${o}:${n}`,sourcesPath:void 0,source:i}}return yield*vT(t)});var kT=e=>ee.forEach(e,t=>ee.gen(function*(){let r=t.split(" "),o=r.length===2?r[1]:r[r.length-1].slice(1,-1),n=yield*CT(o);return n===void 0?{runPath:t.replaceAll(ff,"at "),source:void 0,sourcesPath:void 0}:{runPath:n.runPath,sourcesPath:n.sourcesPath,source:n.source}}));var wT=({reverseSpans:e,stripCwd:t})=>({message:r,stack:o,span:n,errorType:s,isPlainString:i})=>ee.gen(function*(){let c=[],a=[];if(n!==void 0){let f=n;for(;f!==void 0&&f._tag==="Span";){let{name:h,attributes:d,status:g}=f,{attributes:b,stacktrace:M}=gR(d),T=yield*kT(M);c.push(...T),a.push({name:h,attributes:b,status:g}),f=xe.getOrUndefined(f.parent)}}let p;return o!==void 0&&(p=t===!0?SR(o):o),{errorType:s,message:r,stack:p?.replaceAll(ff,"at ").split(`\r
`),sources:c.length>0?c:void 0,spans:e===!0?a.toReversed():a,isPlainString:i}});var MT=(e,t={reverseSpans:!0,stripCwd:!0})=>ee.gen(function*(){if(Mw(e))return{interrupted:!0,errors:[]};let r=xR(e);return{interrupted:!1,errors:yield*ee.forEach(r,wT(t))}});u();var RT=(e,t)=>typeof t=="bigint"?{type:"bigint",value:t.toString()}:t;u();import{fileURLToPath as iG}from"node:url";var TT=eu(my(),1);u();var Xa=class extends rc("FetchError"){};u();var Lf=class extends rc("FileError"){};u();var sG=new RegExp(process.cwd(),"g"),FT=e=>ee.sync(()=>{console.info(`\r
\u{1F4C1} ${e.replace(sG,".")}`)});var cG=iG(import.meta.url),aG=ee.withSpan("readUser")(ee.tryPromise({try:async()=>await TT.default.readJson("./src/examples/data/user.json"),catch:e=>new Lf({cause:e})})),uG=e=>ee.withSpan("fetchUser",{attributes:{userId:e}})(ee.tryPromise({try:async()=>await fetch(`https://yolo-bro-oh-no.org/users/${e}`),catch:t=>new Xa({cause:t})})),lG=e=>ee.withSpan("unwrapFetchUserResponse")(ee.tryPromise({try:async()=>await e.json(),catch:t=>new Xa({cause:t})})),pG=ee.withSpan("fromPromiseTask")(ee.gen(function*(){yield*FT(cG);let{id:e}=yield*aG,t=yield*uG(e);return yield*lG(t)})),AT=pG;ee.runPromise(m(AT,ee.sandbox,ee.catchAll(e=>ee.gen(function*(){let t=yield*MT(e);return yield*ee.fail(JSON.stringify(t,RT,2))})))).catch(console.error);
