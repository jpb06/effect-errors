var IT=Object.create;var Lf=Object.defineProperty;var PT=Object.getOwnPropertyDescriptor;var NT=Object.getOwnPropertyNames;var LT=Object.getPrototypeOf,DT=Object.prototype.hasOwnProperty;var $e=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var qT=(e,t)=>()=>(e&&(t=e(e=0)),t);var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dy=(e,t)=>{for(var r in t)Lf(e,r,{get:t[r],enumerable:!0})},HT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NT(t))!DT.call(e,n)&&n!==r&&Lf(e,n,{get:()=>t[n],enumerable:!(o=PT(t,n))||o.enumerable});return e};var xc=(e,t,r)=>(r=e!=null?IT(LT(e)):{},HT(t||!e||!e.__esModule?Lf(r,"default",{value:e,enumerable:!0}):r,e));import{createRequire as WT}from"node:module";import BT from"node:path";import UT from"node:url";var u=qT(()=>{"use strict";globalThis.require=WT(import.meta.url);globalThis.__filename=UT.fileURLToPath(import.meta.url);globalThis.__dirname=BT.dirname(__filename)});var at=H(Xg=>{"use strict";u();Xg.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,o)=>{t.push((n,s)=>n!=null?o(n):r(s)),e.apply(this,t)})},"name",{value:e.name})};Xg.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(o=>r(null,o),r)},"name",{value:e.name})}});var kR=H(($X,CR)=>{u();var wn=$e("constants"),mU=process.cwd,ff=null,hU=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ff||(ff=mU.call(process)),ff};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ey=process.chdir,process.chdir=function(e){ff=null,ey.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ey));var ey;CR.exports=dU;function dU(e){wn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=o(e.chmod),e.fchmod=o(e.fchmod),e.lchmod=o(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,d,g){g&&process.nextTick(g)},e.lchownSync=function(){}),hU==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(d,g,b){var M=Date.now(),T=0;f(d,g,function N(z){if(z&&(z.code==="EACCES"||z.code==="EPERM"||z.code==="EBUSY")&&Date.now()-M<6e4){setTimeout(function(){e.stat(g,function(ae,_e){ae&&ae.code==="ENOENT"?f(d,g,N):b(z)})},T),T<100&&(T+=10);return}b&&b(z)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(d,g,b,M,T,N){var z;if(N&&typeof N=="function"){var ae=0;z=function(_e,ft,Xt){if(_e&&_e.code==="EAGAIN"&&ae<10)return ae++,f.call(e,d,g,b,M,T,z);N.apply(this,arguments)}}return f.call(e,d,g,b,M,T,z)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,d,g,b,M){for(var T=0;;)try{return f.call(e,h,d,g,b,M)}catch(N){if(N.code==="EAGAIN"&&T<10){T++;continue}throw N}}}(e.readSync);function t(f){f.lchmod=function(h,d,g){f.open(h,wn.O_WRONLY|wn.O_SYMLINK,d,function(b,M){if(b){g&&g(b);return}f.fchmod(M,d,function(T){f.close(M,function(N){g&&g(T||N)})})})},f.lchmodSync=function(h,d){var g=f.openSync(h,wn.O_WRONLY|wn.O_SYMLINK,d),b=!0,M;try{M=f.fchmodSync(g,d),b=!1}finally{if(b)try{f.closeSync(g)}catch{}else f.closeSync(g)}return M}}function r(f){wn.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,d,g,b){f.open(h,wn.O_SYMLINK,function(M,T){if(M){b&&b(M);return}f.futimes(T,d,g,function(N){f.close(T,function(z){b&&b(N||z)})})})},f.lutimesSync=function(h,d,g){var b=f.openSync(h,wn.O_SYMLINK),M,T=!0;try{M=f.futimesSync(b,d,g),T=!1}finally{if(T)try{f.closeSync(b)}catch{}else f.closeSync(b)}return M}):f.futimes&&(f.lutimes=function(h,d,g,b){b&&process.nextTick(b)},f.lutimesSync=function(){})}function o(f){return f&&function(h,d,g){return f.call(e,h,d,function(b){p(b)&&(b=null),g&&g.apply(this,arguments)})}}function n(f){return f&&function(h,d){try{return f.call(e,h,d)}catch(g){if(!p(g))throw g}}}function s(f){return f&&function(h,d,g,b){return f.call(e,h,d,g,function(M){p(M)&&(M=null),b&&b.apply(this,arguments)})}}function i(f){return f&&function(h,d,g){try{return f.call(e,h,d,g)}catch(b){if(!p(b))throw b}}}function c(f){return f&&function(h,d,g){typeof d=="function"&&(g=d,d=null);function b(M,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),g&&g.apply(this,arguments)}return d?f.call(e,h,d,b):f.call(e,h,b)}}function a(f){return f&&function(h,d){var g=d?f.call(e,h,d):f.call(e,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var RR=H((KX,MR)=>{u();var wR=$e("stream").Stream;MR.exports=xU;function xU(e){return{ReadStream:t,WriteStream:r};function t(o,n){if(!(this instanceof t))return new t(o,n);wR.call(this);var s=this;this.path=o,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var i=Object.keys(n),c=0,a=i.length;c<a;c++){var p=i[c];this[p]=n[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){s.emit("error",f),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function r(o,n){if(!(this instanceof r))return new r(o,n);wR.call(this),this.path=o,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),i=0,c=s.length;i<c;i++){var a=s[i];this[a]=n[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var TR=H((YX,FR)=>{"use strict";u();FR.exports=yU;var gU=Object.getPrototypeOf||function(e){return e.__proto__};function yU(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:gU(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var nc=H((ZX,oy)=>{u();var Ae=$e("fs"),bU=kR(),SU=RR(),_U=TR(),mf=$e("util"),xt,df;typeof Symbol=="function"&&typeof Symbol.for=="function"?(xt=Symbol.for("graceful-fs.queue"),df=Symbol.for("graceful-fs.previous")):(xt="___graceful-fs.queue",df="___graceful-fs.previous");function EU(){}function PR(e,t){Object.defineProperty(e,xt,{get:function(){return t}})}var Bs=EU;mf.debuglog?Bs=mf.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Bs=function(){var e=mf.format.apply(mf,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});Ae[xt]||(AR=global[xt]||[],PR(Ae,AR),Ae.close=function(e){function t(r,o){return e.call(Ae,r,function(n){n||IR(),typeof o=="function"&&o.apply(this,arguments)})}return Object.defineProperty(t,df,{value:e}),t}(Ae.close),Ae.closeSync=function(e){function t(r){e.apply(Ae,arguments),IR()}return Object.defineProperty(t,df,{value:e}),t}(Ae.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Bs(Ae[xt]),$e("assert").equal(Ae[xt].length,0)}));var AR;global[xt]||PR(global,Ae[xt]);oy.exports=ty(_U(Ae));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ae.__patched&&(oy.exports=ty(Ae),Ae.__patched=!0);function ty(e){bU(e),e.gracefulify=ty,e.createReadStream=ft,e.createWriteStream=Xt;var t=e.readFile;e.readFile=r;function r(q,Z,G){return typeof Z=="function"&&(G=Z,Z=null),fe(q,Z,G);function fe(Ie,be,me,se){return t(Ie,be,function(X){X&&(X.code==="EMFILE"||X.code==="ENFILE")?oc([fe,[Ie,be,me],X,se||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}var o=e.writeFile;e.writeFile=n;function n(q,Z,G,fe){return typeof G=="function"&&(fe=G,G=null),Ie(q,Z,G,fe);function Ie(be,me,se,X,we){return o(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?oc([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=i);function i(q,Z,G,fe){return typeof G=="function"&&(fe=G,G=null),Ie(q,Z,G,fe);function Ie(be,me,se,X,we){return s(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?oc([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=a);function a(q,Z,G,fe){return typeof G=="function"&&(fe=G,G=0),Ie(q,Z,G,fe);function Ie(be,me,se,X,we){return c(be,me,se,function(he){he&&(he.code==="EMFILE"||he.code==="ENFILE")?oc([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var p=e.readdir;e.readdir=h;var f=/^v[0-5]\./;function h(q,Z,G){typeof Z=="function"&&(G=Z,Z=null);var fe=f.test(process.version)?function(me,se,X,we){return p(me,Ie(me,se,X,we))}:function(me,se,X,we){return p(me,se,Ie(me,se,X,we))};return fe(q,Z,G);function Ie(be,me,se,X){return function(we,he){we&&(we.code==="EMFILE"||we.code==="ENFILE")?oc([fe,[be,me,se],we,X||Date.now(),Date.now()]):(he&&he.sort&&he.sort(),typeof se=="function"&&se.call(this,we,he))}}}if(process.version.substr(0,4)==="v0.8"){var d=SU(e);N=d.ReadStream,ae=d.WriteStream}var g=e.ReadStream;g&&(N.prototype=Object.create(g.prototype),N.prototype.open=z);var b=e.WriteStream;b&&(ae.prototype=Object.create(b.prototype),ae.prototype.open=_e),Object.defineProperty(e,"ReadStream",{get:function(){return N},set:function(q){N=q},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return ae},set:function(q){ae=q},enumerable:!0,configurable:!0});var M=N;Object.defineProperty(e,"FileReadStream",{get:function(){return M},set:function(q){M=q},enumerable:!0,configurable:!0});var T=ae;Object.defineProperty(e,"FileWriteStream",{get:function(){return T},set:function(q){T=q},enumerable:!0,configurable:!0});function N(q,Z){return this instanceof N?(g.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function z(){var q=this;tt(q.path,q.flags,q.mode,function(Z,G){Z?(q.autoClose&&q.destroy(),q.emit("error",Z)):(q.fd=G,q.emit("open",G),q.read())})}function ae(q,Z){return this instanceof ae?(b.apply(this,arguments),this):ae.apply(Object.create(ae.prototype),arguments)}function _e(){var q=this;tt(q.path,q.flags,q.mode,function(Z,G){Z?(q.destroy(),q.emit("error",Z)):(q.fd=G,q.emit("open",G))})}function ft(q,Z){return new e.ReadStream(q,Z)}function Xt(q,Z){return new e.WriteStream(q,Z)}var Do=e.open;e.open=tt;function tt(q,Z,G,fe){return typeof G=="function"&&(fe=G,G=null),Ie(q,Z,G,fe);function Ie(be,me,se,X,we){return Do(be,me,se,function(he,Gs){he&&(he.code==="EMFILE"||he.code==="ENFILE")?oc([Ie,[be,me,se,X],he,we||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}return e}function oc(e){Bs("ENQUEUE",e[0].name,e[1]),Ae[xt].push(e),ry()}var hf;function IR(){for(var e=Date.now(),t=0;t<Ae[xt].length;++t)Ae[xt][t].length>2&&(Ae[xt][t][3]=e,Ae[xt][t][4]=e);ry()}function ry(){if(clearTimeout(hf),hf=void 0,Ae[xt].length!==0){var e=Ae[xt].shift(),t=e[0],r=e[1],o=e[2],n=e[3],s=e[4];if(n===void 0)Bs("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-n>=6e4){Bs("TIMEOUT",t.name,r);var i=r.pop();typeof i=="function"&&i.call(null,o)}else{var c=Date.now()-s,a=Math.max(s-n,1),p=Math.min(a*1.2,100);c>=p?(Bs("RETRY",t.name,r),t.apply(null,r.concat([n]))):Ae[xt].push(e)}hf===void 0&&(hf=setTimeout(ry,0))}}});var Tt=H(Io=>{"use strict";u();var NR=at().fromCallback,Ft=nc(),OU=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Ft[e]=="function");Object.assign(Io,Ft);OU.forEach(e=>{Io[e]=NR(Ft[e])});Io.exists=function(e,t){return typeof t=="function"?Ft.exists(e,t):new Promise(r=>Ft.exists(e,r))};Io.read=function(e,t,r,o,n,s){return typeof s=="function"?Ft.read(e,t,r,o,n,s):new Promise((i,c)=>{Ft.read(e,t,r,o,n,(a,p,f)=>{if(a)return c(a);i({bytesRead:p,buffer:f})})})};Io.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.write(e,t,...r):new Promise((o,n)=>{Ft.write(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffer:c})})})};Io.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.readv(e,t,...r):new Promise((o,n)=>{Ft.readv(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesRead:i,buffers:c})})})};Io.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Ft.writev(e,t,...r):new Promise((o,n)=>{Ft.writev(e,t,...r,(s,i,c)=>{if(s)return n(s);o({bytesWritten:i,buffers:c})})})};typeof Ft.realpath.native=="function"?Io.realpath.native=NR(Ft.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var DR=H((ree,LR)=>{"use strict";u();var vU=$e("path");LR.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(vU.parse(t).root,""))){let o=new Error(`Path contains invalid characters: ${t}`);throw o.code="EINVAL",o}}});var BR=H((nee,ny)=>{"use strict";u();var qR=Tt(),{checkPath:HR}=DR(),WR=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};ny.exports.makeDir=async(e,t)=>(HR(e),qR.mkdir(e,{mode:WR(t),recursive:!0}));ny.exports.makeDirSync=(e,t)=>(HR(e),qR.mkdirSync(e,{mode:WR(t),recursive:!0}))});var Rr=H((iee,UR)=>{"use strict";u();var CU=at().fromPromise,{makeDir:kU,makeDirSync:sy}=BR(),iy=CU(kU);UR.exports={mkdirs:iy,mkdirsSync:sy,mkdirp:iy,mkdirpSync:sy,ensureDir:iy,ensureDirSync:sy}});var Mn=H((aee,zR)=>{"use strict";u();var wU=at().fromPromise,jR=Tt();function MU(e){return jR.access(e).then(()=>!0).catch(()=>!1)}zR.exports={pathExists:wU(MU),pathExistsSync:jR.existsSync}});var cy=H((lee,GR)=>{"use strict";u();var sc=Tt(),RU=at().fromPromise;async function FU(e,t,r){let o=await sc.open(e,"r+"),n=null;try{await sc.futimes(o,t,r)}finally{try{await sc.close(o)}catch(s){n=s}}if(n)throw n}function TU(e,t,r){let o=sc.openSync(e,"r+");return sc.futimesSync(o,t,r),sc.closeSync(o)}GR.exports={utimesMillis:RU(FU),utimesMillisSync:TU}});var Us=H((fee,JR)=>{"use strict";u();var ic=Tt(),ut=$e("path"),$R=at().fromPromise;function AU(e,t,r){let o=r.dereference?n=>ic.stat(n,{bigint:!0}):n=>ic.lstat(n,{bigint:!0});return Promise.all([o(e),o(t).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function IU(e,t,r){let o,n=r.dereference?i=>ic.statSync(i,{bigint:!0}):i=>ic.lstatSync(i,{bigint:!0}),s=n(e);try{o=n(t)}catch(i){if(i.code==="ENOENT")return{srcStat:s,destStat:null};throw i}return{srcStat:s,destStat:o}}async function PU(e,t,r,o){let{srcStat:n,destStat:s}=await AU(e,t,o);if(s){if(Ua(n,s)){let i=ut.basename(e),c=ut.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&ay(e,t))throw new Error(xf(e,t,r));return{srcStat:n,destStat:s}}function NU(e,t,r,o){let{srcStat:n,destStat:s}=IU(e,t,o);if(s){if(Ua(n,s)){let i=ut.basename(e),c=ut.basename(t);if(r==="move"&&i!==c&&i.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&ay(e,t))throw new Error(xf(e,t,r));return{srcStat:n,destStat:s}}async function VR(e,t,r,o){let n=ut.resolve(ut.dirname(e)),s=ut.resolve(ut.dirname(r));if(s===n||s===ut.parse(s).root)return;let i;try{i=await ic.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ua(t,i))throw new Error(xf(e,r,o));return VR(e,t,s,o)}function KR(e,t,r,o){let n=ut.resolve(ut.dirname(e)),s=ut.resolve(ut.dirname(r));if(s===n||s===ut.parse(s).root)return;let i;try{i=ic.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ua(t,i))throw new Error(xf(e,r,o));return KR(e,t,s,o)}function Ua(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function ay(e,t){let r=ut.resolve(e).split(ut.sep).filter(n=>n),o=ut.resolve(t).split(ut.sep).filter(n=>n);return r.every((n,s)=>o[s]===n)}function xf(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}JR.exports={checkPaths:$R(PU),checkPathsSync:NU,checkParentPaths:$R(VR),checkParentPathsSync:KR,isSrcSubdir:ay,areIdentical:Ua}});var eF=H((hee,XR)=>{"use strict";u();var Et=Tt(),ja=$e("path"),{mkdirs:LU}=Rr(),{pathExists:DU}=Mn(),{utimesMillis:qU}=cy(),za=Us();async function HU(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:o,destStat:n}=await za.checkPaths(e,t,"copy",r);if(await za.checkParentPaths(e,o,t,"copy"),!await QR(e,t,r))return;let i=ja.dirname(t);await DU(i)||await LU(i),await ZR(n,e,t,r)}async function QR(e,t,r){return r.filter?r.filter(e,t):!0}async function ZR(e,t,r,o){let s=await(o.dereference?Et.stat:Et.lstat)(t);if(s.isDirectory())return jU(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return WU(s,e,t,r,o);if(s.isSymbolicLink())return zU(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function WU(e,t,r,o,n){if(!t)return YR(e,r,o,n);if(n.overwrite)return await Et.unlink(o),YR(e,r,o,n);if(n.errorOnExist)throw new Error(`'${o}' already exists`)}async function YR(e,t,r,o){if(await Et.copyFile(t,r),o.preserveTimestamps){BU(e.mode)&&await UU(r,e.mode);let n=await Et.stat(t);await qU(r,n.atime,n.mtime)}return Et.chmod(r,e.mode)}function BU(e){return(e&128)===0}function UU(e,t){return Et.chmod(e,t|128)}async function jU(e,t,r,o,n){t||await Et.mkdir(o);let s=await Et.readdir(r);await Promise.all(s.map(async i=>{let c=ja.join(r,i),a=ja.join(o,i);if(!await QR(c,a,n))return;let{destStat:f}=await za.checkPaths(c,a,"copy",n);return ZR(f,c,a,n)})),t||await Et.chmod(o,e.mode)}async function zU(e,t,r,o){let n=await Et.readlink(t);if(o.dereference&&(n=ja.resolve(process.cwd(),n)),!e)return Et.symlink(n,r);let s=null;try{s=await Et.readlink(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return Et.symlink(n,r);throw i}if(o.dereference&&(s=ja.resolve(process.cwd(),s)),za.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(za.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await Et.unlink(r),Et.symlink(n,r)}XR.exports=HU});var sF=H((xee,nF)=>{"use strict";u();var At=nc(),Ga=$e("path"),GU=Rr().mkdirsSync,$U=cy().utimesMillisSync,$a=Us();function VU(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:o,destStat:n}=$a.checkPathsSync(e,t,"copy",r);if($a.checkParentPathsSync(e,o,t,"copy"),r.filter&&!r.filter(e,t))return;let s=Ga.dirname(t);return At.existsSync(s)||GU(s),tF(n,e,t,r)}function tF(e,t,r,o){let s=(o.dereference?At.statSync:At.lstatSync)(t);if(s.isDirectory())return ej(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return KU(s,e,t,r,o);if(s.isSymbolicLink())return oj(e,t,r,o);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function KU(e,t,r,o,n){return t?JU(e,r,o,n):rF(e,r,o,n)}function JU(e,t,r,o){if(o.overwrite)return At.unlinkSync(r),rF(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}function rF(e,t,r,o){return At.copyFileSync(t,r),o.preserveTimestamps&&YU(e.mode,t,r),uy(r,e.mode)}function YU(e,t,r){return QU(e)&&ZU(r,e),XU(t,r)}function QU(e){return(e&128)===0}function ZU(e,t){return uy(e,t|128)}function uy(e,t){return At.chmodSync(e,t)}function XU(e,t){let r=At.statSync(e);return $U(t,r.atime,r.mtime)}function ej(e,t,r,o,n){return t?oF(r,o,n):tj(e.mode,r,o,n)}function tj(e,t,r,o){return At.mkdirSync(r),oF(t,r,o),uy(r,e)}function oF(e,t,r){At.readdirSync(e).forEach(o=>rj(o,e,t,r))}function rj(e,t,r,o){let n=Ga.join(t,e),s=Ga.join(r,e);if(o.filter&&!o.filter(n,s))return;let{destStat:i}=$a.checkPathsSync(n,s,"copy",o);return tF(i,n,s,o)}function oj(e,t,r,o){let n=At.readlinkSync(t);if(o.dereference&&(n=Ga.resolve(process.cwd(),n)),e){let s;try{s=At.readlinkSync(r)}catch(i){if(i.code==="EINVAL"||i.code==="UNKNOWN")return At.symlinkSync(n,r);throw i}if(o.dereference&&(s=Ga.resolve(process.cwd(),s)),$a.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if($a.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return nj(n,r)}else return At.symlinkSync(n,r)}function nj(e,t){return At.unlinkSync(t),At.symlinkSync(e,t)}nF.exports=VU});var gf=H((yee,iF)=>{"use strict";u();var sj=at().fromPromise;iF.exports={copy:sj(eF()),copySync:sF()}});var Va=H((See,aF)=>{"use strict";u();var cF=nc(),ij=at().fromCallback;function cj(e,t){cF.rm(e,{recursive:!0,force:!0},t)}function aj(e){cF.rmSync(e,{recursive:!0,force:!0})}aF.exports={remove:ij(cj),removeSync:aj}});var xF=H((Eee,dF)=>{"use strict";u();var uj=at().fromPromise,pF=Tt(),fF=$e("path"),mF=Rr(),hF=Va(),uF=uj(async function(t){let r;try{r=await pF.readdir(t)}catch{return mF.mkdirs(t)}return Promise.all(r.map(o=>hF.remove(fF.join(t,o))))});function lF(e){let t;try{t=pF.readdirSync(e)}catch{return mF.mkdirsSync(e)}t.forEach(r=>{r=fF.join(e,r),hF.removeSync(r)})}dF.exports={emptyDirSync:lF,emptydirSync:lF,emptyDir:uF,emptydir:uF}});var SF=H((vee,bF)=>{"use strict";u();var lj=at().fromPromise,gF=$e("path"),Po=Tt(),yF=Rr();async function pj(e){let t;try{t=await Po.stat(e)}catch{}if(t&&t.isFile())return;let r=gF.dirname(e),o=null;try{o=await Po.stat(r)}catch(n){if(n.code==="ENOENT"){await yF.mkdirs(r),await Po.writeFile(e,"");return}else throw n}o.isDirectory()?await Po.writeFile(e,""):await Po.readdir(r)}function fj(e){let t;try{t=Po.statSync(e)}catch{}if(t&&t.isFile())return;let r=gF.dirname(e);try{Po.statSync(r).isDirectory()||Po.readdirSync(r)}catch(o){if(o&&o.code==="ENOENT")yF.mkdirsSync(r);else throw o}Po.writeFileSync(e,"")}bF.exports={createFile:lj(pj),createFileSync:fj}});var CF=H((kee,vF)=>{"use strict";u();var mj=at().fromPromise,_F=$e("path"),Rn=Tt(),EF=Rr(),{pathExists:hj}=Mn(),{areIdentical:OF}=Us();async function dj(e,t){let r;try{r=await Rn.lstat(t)}catch{}let o;try{o=await Rn.lstat(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}if(r&&OF(o,r))return;let n=_F.dirname(t);await hj(n)||await EF.mkdirs(n),await Rn.link(e,t)}function xj(e,t){let r;try{r=Rn.lstatSync(t)}catch{}try{let s=Rn.lstatSync(e);if(r&&OF(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let o=_F.dirname(t);return Rn.existsSync(o)||EF.mkdirsSync(o),Rn.linkSync(e,t)}vF.exports={createLink:mj(dj),createLinkSync:xj}});var wF=H((Mee,kF)=>{"use strict";u();var Fn=$e("path"),Ka=Tt(),{pathExists:gj}=Mn(),yj=at().fromPromise;async function bj(e,t){if(Fn.isAbsolute(e)){try{await Ka.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let r=Fn.dirname(t),o=Fn.join(r,e);if(await gj(o))return{toCwd:o,toDst:e};try{await Ka.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:Fn.relative(r,e)}}function Sj(e,t){if(Fn.isAbsolute(e)){if(!Ka.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=Fn.dirname(t),o=Fn.join(r,e);if(Ka.existsSync(o))return{toCwd:o,toDst:e};if(!Ka.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Fn.relative(r,e)}}kF.exports={symlinkPaths:yj(bj),symlinkPathsSync:Sj}});var FF=H((Fee,RF)=>{"use strict";u();var MF=Tt(),_j=at().fromPromise;async function Ej(e,t){if(t)return t;let r;try{r=await MF.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function Oj(e,t){if(t)return t;let r;try{r=MF.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}RF.exports={symlinkType:_j(Ej),symlinkTypeSync:Oj}});var PF=H((Aee,IF)=>{"use strict";u();var vj=at().fromPromise,TF=$e("path"),ro=Tt(),{mkdirs:Cj,mkdirsSync:kj}=Rr(),{symlinkPaths:wj,symlinkPathsSync:Mj}=wF(),{symlinkType:Rj,symlinkTypeSync:Fj}=FF(),{pathExists:Tj}=Mn(),{areIdentical:AF}=Us();async function Aj(e,t,r){let o;try{o=await ro.lstat(t)}catch{}if(o&&o.isSymbolicLink()){let[c,a]=await Promise.all([ro.stat(e),ro.stat(t)]);if(AF(c,a))return}let n=await wj(e,t);e=n.toDst;let s=await Rj(n.toCwd,r),i=TF.dirname(t);return await Tj(i)||await Cj(i),ro.symlink(e,t,s)}function Ij(e,t,r){let o;try{o=ro.lstatSync(t)}catch{}if(o&&o.isSymbolicLink()){let c=ro.statSync(e),a=ro.statSync(t);if(AF(c,a))return}let n=Mj(e,t);e=n.toDst,r=Fj(n.toCwd,r);let s=TF.dirname(t);return ro.existsSync(s)||kj(s),ro.symlinkSync(e,t,r)}IF.exports={createSymlink:vj(Aj),createSymlinkSync:Ij}});var UF=H((Pee,BF)=>{"use strict";u();var{createFile:NF,createFileSync:LF}=SF(),{createLink:DF,createLinkSync:qF}=CF(),{createSymlink:HF,createSymlinkSync:WF}=PF();BF.exports={createFile:NF,createFileSync:LF,ensureFile:NF,ensureFileSync:LF,createLink:DF,createLinkSync:qF,ensureLink:DF,ensureLinkSync:qF,createSymlink:HF,createSymlinkSync:WF,ensureSymlink:HF,ensureSymlinkSync:WF}});var yf=H((Lee,jF)=>{u();function Pj(e,{EOL:t=`
`,finalEOL:r=!0,replacer:o=null,spaces:n}={}){let s=r?t:"";return JSON.stringify(e,o,n).replace(/\n/g,t)+s}function Nj(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}jF.exports={stringify:Pj,stripBom:Nj}});var VF=H((qee,$F)=>{u();var cc;try{cc=nc()}catch{cc=$e("fs")}var bf=at(),{stringify:zF,stripBom:GF}=yf();async function Lj(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||cc,o="throws"in t?t.throws:!0,n=await bf.fromCallback(r.readFile)(e,t);n=GF(n);let s;try{s=JSON.parse(n,t?t.reviver:null)}catch(i){if(o)throw i.message=`${e}: ${i.message}`,i;return null}return s}var Dj=bf.fromPromise(Lj);function qj(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||cc,o="throws"in t?t.throws:!0;try{let n=r.readFileSync(e,t);return n=GF(n),JSON.parse(n,t.reviver)}catch(n){if(o)throw n.message=`${e}: ${n.message}`,n;return null}}async function Hj(e,t,r={}){let o=r.fs||cc,n=zF(t,r);await bf.fromCallback(o.writeFile)(e,n,r)}var Wj=bf.fromPromise(Hj);function Bj(e,t,r={}){let o=r.fs||cc,n=zF(t,r);return o.writeFileSync(e,n,r)}var Uj={readFile:Dj,readFileSync:qj,writeFile:Wj,writeFileSync:Bj};$F.exports=Uj});var JF=H((Wee,KF)=>{"use strict";u();var Sf=VF();KF.exports={readJson:Sf.readFile,readJsonSync:Sf.readFileSync,writeJson:Sf.writeFile,writeJsonSync:Sf.writeFileSync}});var _f=H((Uee,ZF)=>{"use strict";u();var jj=at().fromPromise,ly=Tt(),YF=$e("path"),QF=Rr(),zj=Mn().pathExists;async function Gj(e,t,r="utf-8"){let o=YF.dirname(e);return await zj(o)||await QF.mkdirs(o),ly.writeFile(e,t,r)}function $j(e,...t){let r=YF.dirname(e);ly.existsSync(r)||QF.mkdirsSync(r),ly.writeFileSync(e,...t)}ZF.exports={outputFile:jj(Gj),outputFileSync:$j}});var e2=H((zee,XF)=>{"use strict";u();var{stringify:Vj}=yf(),{outputFile:Kj}=_f();async function Jj(e,t,r={}){let o=Vj(t,r);await Kj(e,o,r)}XF.exports=Jj});var r2=H(($ee,t2)=>{"use strict";u();var{stringify:Yj}=yf(),{outputFileSync:Qj}=_f();function Zj(e,t,r){let o=Yj(t,r);Qj(e,o,r)}t2.exports=Zj});var n2=H((Kee,o2)=>{"use strict";u();var Xj=at().fromPromise,It=JF();It.outputJson=Xj(e2());It.outputJsonSync=r2();It.outputJSON=It.outputJson;It.outputJSONSync=It.outputJsonSync;It.writeJSON=It.writeJson;It.writeJSONSync=It.writeJsonSync;It.readJSON=It.readJson;It.readJSONSync=It.readJsonSync;o2.exports=It});var u2=H((Yee,a2)=>{"use strict";u();var ez=Tt(),s2=$e("path"),{copy:tz}=gf(),{remove:c2}=Va(),{mkdirp:rz}=Rr(),{pathExists:oz}=Mn(),i2=Us();async function nz(e,t,r={}){let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await i2.checkPaths(e,t,"move",r);await i2.checkParentPaths(e,n,t,"move");let i=s2.dirname(t);return s2.parse(i).root!==i&&await rz(i),sz(e,t,o,s)}async function sz(e,t,r,o){if(!o){if(r)await c2(t);else if(await oz(t))throw new Error("dest already exists.")}try{await ez.rename(e,t)}catch(n){if(n.code!=="EXDEV")throw n;await iz(e,t,r)}}async function iz(e,t,r){return await tz(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),c2(e)}a2.exports=nz});var h2=H((Zee,m2)=>{"use strict";u();var p2=nc(),fy=$e("path"),cz=gf().copySync,f2=Va().removeSync,az=Rr().mkdirpSync,l2=Us();function uz(e,t,r){r=r||{};let o=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=l2.checkPathsSync(e,t,"move",r);return l2.checkParentPathsSync(e,n,t,"move"),lz(t)||az(fy.dirname(t)),pz(e,t,o,s)}function lz(e){let t=fy.dirname(e);return fy.parse(t).root===t}function pz(e,t,r,o){if(o)return py(e,t,r);if(r)return f2(t),py(e,t,r);if(p2.existsSync(t))throw new Error("dest already exists.");return py(e,t,r)}function py(e,t,r){try{p2.renameSync(e,t)}catch(o){if(o.code!=="EXDEV")throw o;return fz(e,t,r)}}function fz(e,t,r){return cz(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),f2(e)}m2.exports=uz});var x2=H((ete,d2)=>{"use strict";u();var mz=at().fromPromise;d2.exports={move:mz(u2()),moveSync:h2()}});var Ef=H((rte,g2)=>{"use strict";u();g2.exports={...Tt(),...gf(),...xF(),...UF(),...n2(),...Rr(),...x2(),..._f(),...Mn(),...Va()}});var S2=H((ite,b2)=>{"use strict";u();b2.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var my=H((ate,E2)=>{u();var Ja=S2(),_2={};for(let e of Object.keys(Ja))_2[Ja[e]]=e;var P={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};E2.exports=P;for(let e of Object.keys(P)){if(!("channels"in P[e]))throw new Error("missing channels property: "+e);if(!("labels"in P[e]))throw new Error("missing channel labels property: "+e);if(P[e].labels.length!==P[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=P[e];delete P[e].channels,delete P[e].labels,Object.defineProperty(P[e],"channels",{value:t}),Object.defineProperty(P[e],"labels",{value:r})}P.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,c,a;s===n?c=0:t===s?c=(r-o)/i:r===s?c=2+(o-t)/i:o===s&&(c=4+(t-r)/i),c=Math.min(c*60,360),c<0&&(c+=360);let p=(n+s)/2;return s===n?a=0:p<=.5?a=i/(s+n):a=i/(2-s-n),[c,a*100,p*100]};P.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,c=e[1]/255,a=e[2]/255,p=Math.max(i,c,a),f=p-Math.min(i,c,a),h=function(d){return(p-d)/6/f+1/2};return f===0?(n=0,s=0):(s=f/p,t=h(i),r=h(c),o=h(a),i===p?n=o-r:c===p?n=1/3+t-o:a===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};P.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=P.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};P.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,c=(1-o-n)/(1-n)||0;return[s*100,i*100,c*100,n*100]};function dz(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}P.rgb.keyword=function(e){let t=_2[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(Ja)){let s=Ja[n],i=dz(e,s);i<r&&(r=i,o=n)}return o};P.keyword.rgb=function(e){return Ja[e]};P.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};P.rgb.lab=function(e){let t=P.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),c=200*(o-n);return[s,i,c]};P.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let c=2*o-n,a=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=c+(n-c)*6*s:2*s<1?i=n:3*s<2?i=c+(n-c)*(2/3-s)*6:i=c,a[p]=i*255;return a};P.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,c=o===0?2*n/(s+n):2*r/(o+r);return[t,c*100,i*100]};P.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),c=255*o*(1-r*s),a=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,a,i];case 1:return[c,o,i];case 2:return[i,o,a];case 3:return[i,c,o];case 4:return[a,i,o];case 5:return[o,i,c]}};P.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let c=(2-r)*n;return s=r*n,s/=c<=1?c:2-c,s=s||0,i/=2,[t,s*100,i*100]};P.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),c=1-o;s=6*t-i,i&1&&(s=1-s);let a=r+s*(c-r),p,f,h;switch(i){default:case 6:case 0:p=c,f=a,h=r;break;case 1:p=a,f=c,h=r;break;case 2:p=r,f=c,h=a;break;case 3:p=r,f=a,h=c;break;case 4:p=a,f=r,h=c;break;case 5:p=c,f=r,h=a;break}return[p*255,f*255,h*255]};P.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),c=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,c*255]};P.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};P.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};P.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let c=s**3,a=n**3,p=i**3;return s=c>.008856?c:(s-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};P.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};P.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};P.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?P.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};P.hsv.ansi16=function(e){return P.rgb.ansi16(P.hsv.rgb(e),e[2])};P.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};P.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};P.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};P.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};P.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(c=>c+c).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};P.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,c,a;return i<1?c=s/(1-i):c=0,i<=0?a=0:n===t?a=(r-o)/i%6:n===r?a=2+(o-t)/i:a=4+(t-r)/i,a/=6,a%=1,[a*360,i*100,c*100]};P.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};P.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};P.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,c=1-i,a=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=c,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=c,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=c}return a=(1-r)*o,[(r*n[0]+a)*255,(r*n[1]+a)*255,(r*n[2]+a)*255]};P.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};P.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};P.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};P.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};P.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};P.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};P.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};P.gray.hsl=function(e){return[0,0,e[0]]};P.gray.hsv=P.gray.hsl;P.gray.hwb=function(e){return[0,100,e[0]]};P.gray.cmyk=function(e){return[0,0,0,e[0]]};P.gray.lab=function(e){return[e[0],0,0]};P.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};P.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var v2=H((lte,O2)=>{u();var vf=my();function xz(){let e={},t=Object.keys(vf);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function gz(e){let t=xz(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(vf[o]);for(let s=n.length,i=0;i<s;i++){let c=n[i],a=t[c];a.distance===-1&&(a.distance=t[o].distance+1,a.parent=o,r.unshift(c))}}return t}function yz(e,t){return function(r){return t(e(r))}}function bz(e,t){let r=[t[e].parent,e],o=vf[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=yz(vf[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}O2.exports=function(e){let t=gz(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=bz(i,t))}return r}});var k2=H((fte,C2)=>{u();var hy=my(),Sz=v2(),ac={},_z=Object.keys(hy);function Ez(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function Oz(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}_z.forEach(e=>{ac[e]={},Object.defineProperty(ac[e],"channels",{value:hy[e].channels}),Object.defineProperty(ac[e],"labels",{value:hy[e].labels});let t=Sz(e);Object.keys(t).forEach(o=>{let n=t[o];ac[e][o]=Oz(n),ac[e][o].raw=Ez(n)})});C2.exports=ac});var A2=H((hte,T2)=>{"use strict";u();var w2=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,M2=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},R2=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},Cf=e=>e,F2=(e,t,r)=>[e,t,r],uc=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},dy,lc=(e,t,r,o)=>{dy===void 0&&(dy=k2());let n=o?10:0,s={};for(let[i,c]of Object.entries(dy)){let a=i==="ansi16"?"ansi":i;i===t?s[a]=e(r,n):typeof c=="object"&&(s[a]=e(c[t],n))}return s};function vz(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",uc(t.color,"ansi",()=>lc(w2,"ansi16",Cf,!1)),uc(t.color,"ansi256",()=>lc(M2,"ansi256",Cf,!1)),uc(t.color,"ansi16m",()=>lc(R2,"rgb",F2,!1)),uc(t.bgColor,"ansi",()=>lc(w2,"ansi16",Cf,!0)),uc(t.bgColor,"ansi256",()=>lc(M2,"ansi256",Cf,!0)),uc(t.bgColor,"ansi16m",()=>lc(R2,"rgb",F2,!0)),t}Object.defineProperty(T2,"exports",{enumerable:!0,get:vz})});var P2=H((xte,I2)=>{"use strict";u();I2.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}});var D2=H((yte,L2)=>{"use strict";u();var Cz=$e("os"),N2=$e("tty"),hr=P2(),{env:lt}=process,Tn;hr("no-color")||hr("no-colors")||hr("color=false")||hr("color=never")?Tn=0:(hr("color")||hr("colors")||hr("color=true")||hr("color=always"))&&(Tn=1);"FORCE_COLOR"in lt&&(lt.FORCE_COLOR==="true"?Tn=1:lt.FORCE_COLOR==="false"?Tn=0:Tn=lt.FORCE_COLOR.length===0?1:Math.min(parseInt(lt.FORCE_COLOR,10),3));function xy(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function gy(e,t){if(Tn===0)return 0;if(hr("color=16m")||hr("color=full")||hr("color=truecolor"))return 3;if(hr("color=256"))return 2;if(e&&!t&&Tn===void 0)return 0;let r=Tn||0;if(lt.TERM==="dumb")return r;if(process.platform==="win32"){let o=Cz.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in lt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in lt)||lt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in lt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(lt.TEAMCITY_VERSION)?1:0;if(lt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in lt){let o=parseInt((lt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(lt.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(lt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(lt.TERM)||"COLORTERM"in lt?1:r}function kz(e){let t=gy(e,e&&e.isTTY);return xy(t)}L2.exports={supportsColor:kz,stdout:xy(gy(!0,N2.isatty(1))),stderr:xy(gy(!0,N2.isatty(2)))}});var H2=H((Ste,q2)=>{"use strict";u();var wz=(e,t,r)=>{let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.substr(s,o-s)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.substr(s),i},Mz=(e,t,r,o)=>{let n=0,s="";do{let i=e[o-1]==="\r";s+=e.substr(n,(i?o-1:o)-n)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.substr(n),s};q2.exports={stringReplaceAll:wz,stringEncaseCRLFWithFirstIndex:Mz}});var z2=H((Ete,j2)=>{"use strict";u();var Rz=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,W2=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Fz=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,Tz=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,Az=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function U2(e){let t=e[0]==="u",r=e[1]==="{";return t&&!r&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):Az.get(e)||e}function Iz(e,t){let r=[],o=t.trim().split(/\s*,\s*/g),n;for(let s of o){let i=Number(s);if(!Number.isNaN(i))r.push(i);else if(n=s.match(Fz))r.push(n[2].replace(Tz,(c,a,p)=>a?U2(a):p));else throw new Error(`Invalid Chalk template style argument: ${s} (in style '${e}')`)}return r}function Pz(e){W2.lastIndex=0;let t=[],r;for(;(r=W2.exec(e))!==null;){let o=r[1];if(r[2]){let n=Iz(o,r[2]);t.push([o].concat(n))}else t.push([o])}return t}function B2(e,t){let r={};for(let n of t)for(let s of n.styles)r[s[0]]=n.inverse?null:s.slice(1);let o=e;for(let[n,s]of Object.entries(r))if(Array.isArray(s)){if(!(n in o))throw new Error(`Unknown Chalk style: ${n}`);o=s.length>0?o[n](...s):o[n]}return o}j2.exports=(e,t)=>{let r=[],o=[],n=[];if(t.replace(Rz,(s,i,c,a,p,f)=>{if(i)n.push(U2(i));else if(a){let h=n.join("");n=[],o.push(r.length===0?h:B2(e,r)(h)),r.push({inverse:c,styles:Pz(a)})}else if(p){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");o.push(B2(e,r)(n.join(""))),n=[],r.pop()}else n.push(f)}),o.push(n.join("")),r.length>0){let s=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(s)}return o.join("")}});var Q2=H((vte,Y2)=>{"use strict";u();var Ya=A2(),{stdout:by,stderr:Sy}=D2(),{stringReplaceAll:Nz,stringEncaseCRLFWithFirstIndex:Lz}=H2(),{isArray:kf}=Array,$2=["ansi","ansi","ansi256","ansi16m"],pc=Object.create(null),Dz=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=by?by.level:0;e.level=t.level===void 0?r:t.level},_y=class{constructor(t){return V2(t)}},V2=e=>{let t={};return Dz(t,e),t.template=(...r)=>J2(t.template,...r),Object.setPrototypeOf(t,wf.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=_y,t.template};function wf(e){return V2(e)}for(let[e,t]of Object.entries(Ya))pc[e]={get(){let r=Mf(this,Ey(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};pc.visible={get(){let e=Mf(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};var K2=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let e of K2)pc[e]={get(){let{level:t}=this;return function(...r){let o=Ey(Ya.color[$2[t]][e](...r),Ya.color.close,this._styler);return Mf(this,o,this._isEmpty)}}};for(let e of K2){let t="bg"+e[0].toUpperCase()+e.slice(1);pc[t]={get(){let{level:r}=this;return function(...o){let n=Ey(Ya.bgColor[$2[r]][e](...o),Ya.bgColor.close,this._styler);return Mf(this,n,this._isEmpty)}}}}var qz=Object.defineProperties(()=>{},{...pc,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),Ey=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},Mf=(e,t,r)=>{let o=(...n)=>kf(n[0])&&kf(n[0].raw)?G2(o,J2(o,...n)):G2(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,qz),o._generator=e,o._styler=t,o._isEmpty=r,o},G2=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.indexOf("\x1B")!==-1)for(;r!==void 0;)t=Nz(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=Lz(t,n,o,s)),o+t+n},yy,J2=(e,...t)=>{let[r]=t;if(!kf(r)||!kf(r.raw))return t.join(" ");let o=t.slice(1),n=[r.raw[0]];for(let s=1;s<r.length;s++)n.push(String(o[s-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[s]));return yy===void 0&&(yy=z2()),yy(e,n.join(""))};Object.defineProperties(wf.prototype,pc);var Rf=wf();Rf.supportsColor=by;Rf.stderr=wf({level:Sy?Sy.level:0});Rf.stderr.supportsColor=Sy;Y2.exports=Rf});var X2=H(Oy=>{u();var Z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Oy.encode=function(e){if(0<=e&&e<Z2.length)return Z2[e];throw new TypeError("Must be between 0 and 63: "+e)};Oy.decode=function(e){var t=65,r=90,o=97,n=122,s=48,i=57,c=43,a=47,p=26,f=52;return t<=e&&e<=r?e-t:o<=e&&e<=n?e-o+p:s<=e&&e<=i?e-s+f:e==c?62:e==a?63:-1}});var ky=H(Cy=>{u();var eT=X2(),vy=5,tT=1<<vy,rT=tT-1,oT=tT;function Hz(e){return e<0?(-e<<1)+1:(e<<1)+0}function Wz(e){var t=(e&1)===1,r=e>>1;return t?-r:r}Cy.encode=function(t){var r="",o,n=Hz(t);do o=n&rT,n>>>=vy,n>0&&(o|=oT),r+=eT.encode(o);while(n>0);return r};Cy.decode=function(t,r,o){var n=t.length,s=0,i=0,c,a;do{if(r>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(a=eT.decode(t.charCodeAt(r++)),a===-1)throw new Error("Invalid base64 digit: "+t.charAt(r-1));c=!!(a&oT),a&=rT,s=s+(a<<i),i+=vy}while(c);o.value=Wz(s),o.rest=r}});var mc=H(pt=>{u();function Bz(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}pt.getArg=Bz;var nT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Uz=/^data:.+\,.+$/;function Qa(e){var t=e.match(nT);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}pt.urlParse=Qa;function fc(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}pt.urlGenerate=fc;var jz=32;function zz(e){var t=[];return function(r){for(var o=0;o<t.length;o++)if(t[o].input===r){var n=t[0];return t[0]=t[o],t[o]=n,t[0].result}var s=e(r);return t.unshift({input:r,result:s}),t.length>jz&&t.pop(),s}}var wy=zz(function(t){var r=t,o=Qa(t);if(o){if(!o.path)return t;r=o.path}for(var n=pt.isAbsolute(r),s=[],i=0,c=0;;)if(i=c,c=r.indexOf("/",i),c===-1){s.push(r.slice(i));break}else for(s.push(r.slice(i,c));c<r.length&&r[c]==="/";)c++;for(var a,p=0,c=s.length-1;c>=0;c--)a=s[c],a==="."?s.splice(c,1):a===".."?p++:p>0&&(a===""?(s.splice(c+1,p),p=0):(s.splice(c,2),p--));return r=s.join("/"),r===""&&(r=n?"/":"."),o?(o.path=r,fc(o)):r});pt.normalize=wy;function sT(e,t){e===""&&(e="."),t===""&&(t=".");var r=Qa(t),o=Qa(e);if(o&&(e=o.path||"/"),r&&!r.scheme)return o&&(r.scheme=o.scheme),fc(r);if(r||t.match(Uz))return t;if(o&&!o.host&&!o.path)return o.host=t,fc(o);var n=t.charAt(0)==="/"?t:wy(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=n,fc(o)):n}pt.join=sT;pt.isAbsolute=function(e){return e.charAt(0)==="/"||nT.test(e)};function Gz(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var r=0;t.indexOf(e+"/")!==0;){var o=e.lastIndexOf("/");if(o<0||(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/)))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}pt.relative=Gz;var iT=function(){var e=Object.create(null);return!("__proto__"in e)}();function cT(e){return e}function $z(e){return aT(e)?"$"+e:e}pt.toSetString=iT?cT:$z;function Vz(e){return aT(e)?e.slice(1):e}pt.fromSetString=iT?cT:Vz;function aT(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}function Kz(e,t,r){var o=No(e.source,t.source);return o!==0||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:No(e.name,t.name)}pt.compareByOriginalPositions=Kz;function Jz(e,t,r){var o;return o=e.originalLine-t.originalLine,o!==0||(o=e.originalColumn-t.originalColumn,o!==0||r)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:No(e.name,t.name)}pt.compareByOriginalPositionsNoSource=Jz;function Yz(e,t,r){var o=e.generatedLine-t.generatedLine;return o!==0||(o=e.generatedColumn-t.generatedColumn,o!==0||r)||(o=No(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:No(e.name,t.name)}pt.compareByGeneratedPositionsDeflated=Yz;function Qz(e,t,r){var o=e.generatedColumn-t.generatedColumn;return o!==0||r||(o=No(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:No(e.name,t.name)}pt.compareByGeneratedPositionsDeflatedNoLine=Qz;function No(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}function Zz(e,t){var r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=No(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:No(e.name,t.name)}pt.compareByGeneratedPositionsInflated=Zz;function Xz(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}pt.parseSourceMapInput=Xz;function eG(e,t,r){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),r){var o=Qa(r);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var n=o.path.lastIndexOf("/");n>=0&&(o.path=o.path.substring(0,n+1))}t=sT(fc(o),t)}return wy(t)}pt.computeSourceURL=eG});var Fy=H(uT=>{u();var My=mc(),Ry=Object.prototype.hasOwnProperty,js=typeof Map<"u";function Lo(){this._array=[],this._set=js?new Map:Object.create(null)}Lo.fromArray=function(t,r){for(var o=new Lo,n=0,s=t.length;n<s;n++)o.add(t[n],r);return o};Lo.prototype.size=function(){return js?this._set.size:Object.getOwnPropertyNames(this._set).length};Lo.prototype.add=function(t,r){var o=js?t:My.toSetString(t),n=js?this.has(t):Ry.call(this._set,o),s=this._array.length;(!n||r)&&this._array.push(t),n||(js?this._set.set(t,s):this._set[o]=s)};Lo.prototype.has=function(t){if(js)return this._set.has(t);var r=My.toSetString(t);return Ry.call(this._set,r)};Lo.prototype.indexOf=function(t){if(js){var r=this._set.get(t);if(r>=0)return r}else{var o=My.toSetString(t);if(Ry.call(this._set,o))return this._set[o]}throw new Error('"'+t+'" is not in the set.')};Lo.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};Lo.prototype.toArray=function(){return this._array.slice()};uT.ArraySet=Lo});var fT=H(pT=>{u();var lT=mc();function tG(e,t){var r=e.generatedLine,o=t.generatedLine,n=e.generatedColumn,s=t.generatedColumn;return o>r||o==r&&s>=n||lT.compareByGeneratedPositionsInflated(e,t)<=0}function Ff(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Ff.prototype.unsortedForEach=function(t,r){this._array.forEach(t,r)};Ff.prototype.add=function(t){tG(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};Ff.prototype.toArray=function(){return this._sorted||(this._array.sort(lT.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};pT.MappingList=Ff});var Ty=H(mT=>{u();var Za=ky(),Ge=mc(),Tf=Fy().ArraySet,rG=fT().MappingList;function dr(e){e||(e={}),this._file=Ge.getArg(e,"file",null),this._sourceRoot=Ge.getArg(e,"sourceRoot",null),this._skipValidation=Ge.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=Ge.getArg(e,"ignoreInvalidMapping",!1),this._sources=new Tf,this._names=new Tf,this._mappings=new rG,this._sourcesContents=null}dr.prototype._version=3;dr.fromSourceMap=function(t,r){var o=t.sourceRoot,n=new dr(Object.assign(r||{},{file:t.file,sourceRoot:o}));return t.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,o!=null&&(i.source=Ge.relative(o,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),t.sources.forEach(function(s){var i=s;o!==null&&(i=Ge.relative(o,s)),n._sources.has(i)||n._sources.add(i);var c=t.sourceContentFor(s);c!=null&&n.setSourceContent(s,c)}),n};dr.prototype.addMapping=function(t){var r=Ge.getArg(t,"generated"),o=Ge.getArg(t,"original",null),n=Ge.getArg(t,"source",null),s=Ge.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(r,o,n,s)===!1||(n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:n,name:s}))};dr.prototype.setSourceContent=function(t,r){var o=t;this._sourceRoot!=null&&(o=Ge.relative(this._sourceRoot,o)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ge.toSetString(o)]=r):this._sourcesContents&&(delete this._sourcesContents[Ge.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};dr.prototype.applySourceMap=function(t,r,o){var n=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=t.file}var s=this._sourceRoot;s!=null&&(n=Ge.relative(s,n));var i=new Tf,c=new Tf;this._mappings.unsortedForEach(function(a){if(a.source===n&&a.originalLine!=null){var p=t.originalPositionFor({line:a.originalLine,column:a.originalColumn});p.source!=null&&(a.source=p.source,o!=null&&(a.source=Ge.join(o,a.source)),s!=null&&(a.source=Ge.relative(s,a.source)),a.originalLine=p.line,a.originalColumn=p.column,p.name!=null&&(a.name=p.name))}var f=a.source;f!=null&&!i.has(f)&&i.add(f);var h=a.name;h!=null&&!c.has(h)&&c.add(h)},this),this._sources=i,this._names=c,t.sources.forEach(function(a){var p=t.sourceContentFor(a);p!=null&&(o!=null&&(a=Ge.join(o,a)),s!=null&&(a=Ge.relative(s,a)),this.setSourceContent(a,p))},this)};dr.prototype._validateMapping=function(t,r,o,n){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!o&&!n)){if(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&o)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:o,original:r,name:n});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};dr.prototype._serializeMappings=function(){for(var t=0,r=1,o=0,n=0,s=0,i=0,c="",a,p,f,h,d=this._mappings.toArray(),g=0,b=d.length;g<b;g++){if(p=d[g],a="",p.generatedLine!==r)for(t=0;p.generatedLine!==r;)a+=";",r++;else if(g>0){if(!Ge.compareByGeneratedPositionsInflated(p,d[g-1]))continue;a+=","}a+=Za.encode(p.generatedColumn-t),t=p.generatedColumn,p.source!=null&&(h=this._sources.indexOf(p.source),a+=Za.encode(h-i),i=h,a+=Za.encode(p.originalLine-1-n),n=p.originalLine-1,a+=Za.encode(p.originalColumn-o),o=p.originalColumn,p.name!=null&&(f=this._names.indexOf(p.name),a+=Za.encode(f-s),s=f)),c+=a}return c};dr.prototype._generateSourcesContent=function(t,r){return t.map(function(o){if(!this._sourcesContents)return null;r!=null&&(o=Ge.relative(r,o));var n=Ge.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};dr.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};dr.prototype.toString=function(){return JSON.stringify(this.toJSON())};mT.SourceMapGenerator=dr});var hT=H(zs=>{u();zs.GREATEST_LOWER_BOUND=1;zs.LEAST_UPPER_BOUND=2;function Ay(e,t,r,o,n,s){var i=Math.floor((t-e)/2)+e,c=n(r,o[i],!0);return c===0?i:c>0?t-i>1?Ay(i,t,r,o,n,s):s==zs.LEAST_UPPER_BOUND?t<o.length?t:-1:i:i-e>1?Ay(e,i,r,o,n,s):s==zs.LEAST_UPPER_BOUND?i:e<0?-1:e}zs.search=function(t,r,o,n){if(r.length===0)return-1;var s=Ay(-1,r.length,t,r,o,n||zs.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&o(r[s],r[s-1],!0)===0;)--s;return s}});var gT=H(xT=>{u();function oG(e){function t(n,s,i){var c=n[s];n[s]=n[i],n[i]=c}function r(n,s){return Math.round(n+Math.random()*(s-n))}function o(n,s,i,c){if(i<c){var a=r(i,c),p=i-1;t(n,a,c);for(var f=n[c],h=i;h<c;h++)s(n[h],f,!1)<=0&&(p+=1,t(n,p,h));t(n,p+1,h);var d=p+1;o(n,s,i,d-1),o(n,s,d+1,c)}}return o}function nG(e){let t=oG.toString();return new Function(`return ${t}`)()(e)}var dT=new WeakMap;xT.quickSort=function(e,t,r=0){let o=dT.get(t);o===void 0&&(o=nG(t),dT.set(t,o)),o(e,t,r,e.length-1)}});var ST=H(Af=>{u();var A=mc(),Py=hT(),hc=Fy().ArraySet,sG=ky(),Xa=gT().quickSort;function ve(e,t){var r=e;return typeof e=="string"&&(r=A.parseSourceMapInput(e)),r.sections!=null?new Fr(r,t):new gt(r,t)}ve.fromSourceMap=function(e,t){return gt.fromSourceMap(e,t)};ve.prototype._version=3;ve.prototype.__generatedMappings=null;Object.defineProperty(ve.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});ve.prototype.__originalMappings=null;Object.defineProperty(ve.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});ve.prototype._charIsMappingSeparator=function(t,r){var o=t.charAt(r);return o===";"||o===","};ve.prototype._parseMappings=function(t,r){throw new Error("Subclasses must implement _parseMappings")};ve.GENERATED_ORDER=1;ve.ORIGINAL_ORDER=2;ve.GREATEST_LOWER_BOUND=1;ve.LEAST_UPPER_BOUND=2;ve.prototype.eachMapping=function(t,r,o){var n=r||null,s=o||ve.GENERATED_ORDER,i;switch(s){case ve.GENERATED_ORDER:i=this._generatedMappings;break;case ve.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var c=this.sourceRoot,a=t.bind(n),p=this._names,f=this._sources,h=this._sourceMapURL,d=0,g=i.length;d<g;d++){var b=i[d],M=b.source===null?null:f.at(b.source);M=A.computeSourceURL(c,M,h),a({source:M,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:p.at(b.name)})}};ve.prototype.allGeneratedPositionsFor=function(t){var r=A.getArg(t,"line"),o={source:A.getArg(t,"source"),originalLine:r,originalColumn:A.getArg(t,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var n=[],s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,Py.LEAST_UPPER_BOUND);if(s>=0){var i=this._originalMappings[s];if(t.column===void 0)for(var c=i.originalLine;i&&i.originalLine===c;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s];else for(var a=i.originalColumn;i&&i.originalLine===r&&i.originalColumn==a;)n.push({line:A.getArg(i,"generatedLine",null),column:A.getArg(i,"generatedColumn",null),lastColumn:A.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++s]}return n};Af.SourceMapConsumer=ve;function gt(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sources"),s=A.getArg(r,"names",[]),i=A.getArg(r,"sourceRoot",null),c=A.getArg(r,"sourcesContent",null),a=A.getArg(r,"mappings"),p=A.getArg(r,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i&&(i=A.normalize(i)),n=n.map(String).map(A.normalize).map(function(f){return i&&A.isAbsolute(i)&&A.isAbsolute(f)?A.relative(i,f):f}),this._names=hc.fromArray(s.map(String),!0),this._sources=hc.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(f){return A.computeSourceURL(i,f,t)}),this.sourceRoot=i,this.sourcesContent=c,this._mappings=a,this._sourceMapURL=t,this.file=p}gt.prototype=Object.create(ve.prototype);gt.prototype.consumer=ve;gt.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=A.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1};gt.fromSourceMap=function(t,r){var o=Object.create(gt.prototype),n=o._names=hc.fromArray(t._names.toArray(),!0),s=o._sources=hc.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(g){return A.computeSourceURL(o.sourceRoot,g,r)});for(var i=t._mappings.toArray().slice(),c=o.__generatedMappings=[],a=o.__originalMappings=[],p=0,f=i.length;p<f;p++){var h=i[p],d=new bT;d.generatedLine=h.generatedLine,d.generatedColumn=h.generatedColumn,h.source&&(d.source=s.indexOf(h.source),d.originalLine=h.originalLine,d.originalColumn=h.originalColumn,h.name&&(d.name=n.indexOf(h.name)),a.push(d)),c.push(d)}return Xa(o.__originalMappings,A.compareByOriginalPositions),o};gt.prototype._version=3;Object.defineProperty(gt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function bT(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var Iy=A.compareByGeneratedPositionsDeflatedNoLine;function yT(e,t){let r=e.length,o=e.length-t;if(!(o<=1))if(o==2){let n=e[t],s=e[t+1];Iy(n,s)>0&&(e[t]=s,e[t+1]=n)}else if(o<20)for(let n=t;n<r;n++)for(let s=n;s>t;s--){let i=e[s-1],c=e[s];if(Iy(i,c)<=0)break;e[s-1]=c,e[s]=i}else Xa(e,Iy,t)}gt.prototype._parseMappings=function(t,r){var o=1,n=0,s=0,i=0,c=0,a=0,p=t.length,f=0,h={},d={},g=[],b=[],M,T,N,z,ae;let _e=0;for(;f<p;)if(t.charAt(f)===";")o++,f++,n=0,yT(b,_e),_e=b.length;else if(t.charAt(f)===",")f++;else{for(M=new bT,M.generatedLine=o,z=f;z<p&&!this._charIsMappingSeparator(t,z);z++);for(T=t.slice(f,z),N=[];f<z;)sG.decode(t,f,d),ae=d.value,f=d.rest,N.push(ae);if(N.length===2)throw new Error("Found a source, but no line and column");if(N.length===3)throw new Error("Found a source and line, but no column");if(M.generatedColumn=n+N[0],n=M.generatedColumn,N.length>1&&(M.source=c+N[1],c+=N[1],M.originalLine=s+N[2],s=M.originalLine,M.originalLine+=1,M.originalColumn=i+N[3],i=M.originalColumn,N.length>4&&(M.name=a+N[4],a+=N[4])),b.push(M),typeof M.originalLine=="number"){let Xt=M.source;for(;g.length<=Xt;)g.push(null);g[Xt]===null&&(g[Xt]=[]),g[Xt].push(M)}}yT(b,_e),this.__generatedMappings=b;for(var ft=0;ft<g.length;ft++)g[ft]!=null&&Xa(g[ft],A.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...g)};gt.prototype._findMapping=function(t,r,o,n,s,i){if(t[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[o]);if(t[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[n]);return Py.search(t,r,s,i)};gt.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var r=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var o=this._generatedMappings[t+1];if(r.generatedLine===o.generatedLine){r.lastGeneratedColumn=o.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};gt.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",A.compareByGeneratedPositionsDeflated,A.getArg(t,"bias",ve.GREATEST_LOWER_BOUND));if(o>=0){var n=this._generatedMappings[o];if(n.generatedLine===r.generatedLine){var s=A.getArg(n,"source",null);s!==null&&(s=this._sources.at(s),s=A.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var i=A.getArg(n,"name",null);return i!==null&&(i=this._names.at(i)),{source:s,line:A.getArg(n,"originalLine",null),column:A.getArg(n,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}};gt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1};gt.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;var o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];var n=t;this.sourceRoot!=null&&(n=A.relative(this.sourceRoot,n));var s;if(this.sourceRoot!=null&&(s=A.urlParse(this.sourceRoot))){var i=n.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!s.path||s.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(r)return null;throw new Error('"'+n+'" is not in the SourceMap.')};gt.prototype.generatedPositionFor=function(t){var r=A.getArg(t,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var o={source:r,originalLine:A.getArg(t,"line"),originalColumn:A.getArg(t,"column")},n=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",A.compareByOriginalPositions,A.getArg(t,"bias",ve.GREATEST_LOWER_BOUND));if(n>=0){var s=this._originalMappings[n];if(s.source===o.source)return{line:A.getArg(s,"generatedLine",null),column:A.getArg(s,"generatedColumn",null),lastColumn:A.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Af.BasicSourceMapConsumer=gt;function Fr(e,t){var r=e;typeof e=="string"&&(r=A.parseSourceMapInput(e));var o=A.getArg(r,"version"),n=A.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new hc,this._names=new hc;var s={line:-1,column:0};this._sections=n.map(function(i){if(i.url)throw new Error("Support for url field in sections not implemented.");var c=A.getArg(i,"offset"),a=A.getArg(c,"line"),p=A.getArg(c,"column");if(a<s.line||a===s.line&&p<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=c,{generatedOffset:{generatedLine:a+1,generatedColumn:p+1},consumer:new ve(A.getArg(i,"map"),t)}})}Fr.prototype=Object.create(ve.prototype);Fr.prototype.constructor=ve;Fr.prototype._version=3;Object.defineProperty(Fr.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}});Fr.prototype.originalPositionFor=function(t){var r={generatedLine:A.getArg(t,"line"),generatedColumn:A.getArg(t,"column")},o=Py.search(r,this._sections,function(s,i){var c=s.generatedLine-i.generatedOffset.generatedLine;return c||s.generatedColumn-i.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:r.generatedLine-(n.generatedOffset.generatedLine-1),column:r.generatedColumn-(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}};Fr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})};Fr.prototype.sourceContentFor=function(t,r){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],s=n.consumer.sourceContentFor(t,!0);if(s||s==="")return s}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')};Fr.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var o=this._sections[r];if(o.consumer._findSourceIndex(A.getArg(t,"source"))!==-1){var n=o.consumer.generatedPositionFor(t);if(n){var s={line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}};Fr.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],s=n.consumer._generatedMappings,i=0;i<s.length;i++){var c=s[i],a=n.consumer._sources.at(c.source);a=A.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var p=null;c.name&&(p=n.consumer._names.at(c.name),this._names.add(p),p=this._names.indexOf(p));var f={source:a,generatedLine:c.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(n.generatedOffset.generatedLine===c.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:p};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}Xa(this.__generatedMappings,A.compareByGeneratedPositionsDeflated),Xa(this.__originalMappings,A.compareByOriginalPositions)};Af.IndexedSourceMapConsumer=Fr});var ET=H(_T=>{u();var iG=Ty().SourceMapGenerator,If=mc(),cG=/(\r?\n)/,aG=10,dc="$$$isSourceNode$$$";function Zt(e,t,r,o,n){this.children=[],this.sourceContents={},this.line=e??null,this.column=t??null,this.source=r??null,this.name=n??null,this[dc]=!0,o!=null&&this.add(o)}Zt.fromStringWithSourceMap=function(t,r,o){var n=new Zt,s=t.split(cG),i=0,c=function(){var d=b(),g=b()||"";return d+g;function b(){return i<s.length?s[i++]:void 0}},a=1,p=0,f=null;return r.eachMapping(function(d){if(f!==null)if(a<d.generatedLine)h(f,c()),a++,p=0;else{var g=s[i]||"",b=g.substr(0,d.generatedColumn-p);s[i]=g.substr(d.generatedColumn-p),p=d.generatedColumn,h(f,b),f=d;return}for(;a<d.generatedLine;)n.add(c()),a++;if(p<d.generatedColumn){var g=s[i]||"";n.add(g.substr(0,d.generatedColumn)),s[i]=g.substr(d.generatedColumn),p=d.generatedColumn}f=d},this),i<s.length&&(f&&h(f,c()),n.add(s.splice(i).join(""))),r.sources.forEach(function(d){var g=r.sourceContentFor(d);g!=null&&(o!=null&&(d=If.join(o,d)),n.setSourceContent(d,g))}),n;function h(d,g){if(d===null||d.source===void 0)n.add(g);else{var b=o?If.join(o,d.source):d.source;n.add(new Zt(d.originalLine,d.originalColumn,b,g,d.name))}}};Zt.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[dc]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Zt.prototype.prepend=function(t){if(Array.isArray(t))for(var r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[dc]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Zt.prototype.walk=function(t){for(var r,o=0,n=this.children.length;o<n;o++)r=this.children[o],r[dc]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Zt.prototype.join=function(t){var r,o,n=this.children.length;if(n>0){for(r=[],o=0;o<n-1;o++)r.push(this.children[o]),r.push(t);r.push(this.children[o]),this.children=r}return this};Zt.prototype.replaceRight=function(t,r){var o=this.children[this.children.length-1];return o[dc]?o.replaceRight(t,r):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,r):this.children.push("".replace(t,r)),this};Zt.prototype.setSourceContent=function(t,r){this.sourceContents[If.toSetString(t)]=r};Zt.prototype.walkSourceContents=function(t){for(var r=0,o=this.children.length;r<o;r++)this.children[r][dc]&&this.children[r].walkSourceContents(t);for(var n=Object.keys(this.sourceContents),r=0,o=n.length;r<o;r++)t(If.fromSetString(n[r]),this.sourceContents[n[r]])};Zt.prototype.toString=function(){var t="";return this.walk(function(r){t+=r}),t};Zt.prototype.toStringWithSourceMap=function(t){var r={code:"",line:1,column:0},o=new iG(t),n=!1,s=null,i=null,c=null,a=null;return this.walk(function(p,f){r.code+=p,f.source!==null&&f.line!==null&&f.column!==null?((s!==f.source||i!==f.line||c!==f.column||a!==f.name)&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),s=f.source,i=f.line,c=f.column,a=f.name,n=!0):n&&(o.addMapping({generated:{line:r.line,column:r.column}}),s=null,n=!1);for(var h=0,d=p.length;h<d;h++)p.charCodeAt(h)===aG?(r.line++,r.column=0,h+1===d?(s=null,n=!1):n&&o.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(p,f){o.setSourceContent(p,f)}),{code:r.code,map:o}};_T.SourceNode=Zt});var OT=H(Pf=>{u();Pf.SourceMapGenerator=Ty().SourceMapGenerator;Pf.SourceMapConsumer=ST().SourceMapConsumer;Pf.SourceNode=ET().SourceNode});u();u();u();var $s=e=>typeof e=="function",l=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(c){return t(c,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var $=e=>e;var Vs=e=>()=>e,qo=Vs(!0),oo=Vs(!1),Df=Vs(null),tu=Vs(void 0),Ho=tu;function m(e,t,r,o,n,s,i,c,a){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return c(i(s(n(o(r(t(e)))))));case 9:return a(c(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let f=1;f<arguments.length;f++)p=arguments[f](p);return p}}}u();u();u();var Ks=e=>(t,r)=>t===r||e(t,r);var qy=l(2,(e,t)=>Ks((r,o)=>e(t(r),t(o))));var Hy=e=>Ks((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});u();var ru=e=>l(3,(t,r,o)=>e(t,n=>Object.assign({},n,{[r]:o(n)}))),ou=e=>l(2,(t,r)=>e(t,o=>({[r]:o}))),nu=(e,t)=>l(3,(r,o,n)=>t(r,s=>e(n(s),i=>Object.assign({},s,{[o]:i}))));u();u();u();u();u();var jT="3.5.6",An=()=>jT;var Wf=Symbol.for(`effect/GlobalValue/globalStoreId/${An()}`);Wf in globalThis||(globalThis[Wf]=new Map);var Hf=globalThis[Wf],W=(e,t)=>(Hf.has(e)||Hf.set(e,t()),Hf.get(e));u();var su=e=>typeof e=="string",yc=e=>typeof e=="number";var By=e=>typeof e=="bigint";var Wo=$s;var GT=e=>typeof e=="object"&&e!==null,Js=e=>GT(e)||Wo(e),k=l(2,(e,t)=>Js(e)&&t in e),In=l(2,(e,t)=>k(e,"_tag")&&e._tag===t),Pn=e=>e==null;var xr=e=>k(e,Symbol.iterator);var Bf=e=>k(e,"then")&&Wo(e.then);u();u();var Nn=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var Uf=Symbol.for("effect/Gen/GenKind"),Gf=e=>Js(e)&&Uf in e,jf=class{value;constructor(t){this.value=t}get _F(){return $}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[Uf]=Uf;[Symbol.iterator](){return new bc(this)}},bc=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var jy=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new jf(e)},$T=335903614,VT=4150755663,KT=1481765933,JT=1284865837,YT=9007199254740992,QT=134217728,cu=class{_state;constructor(t,r,o,n){return Pn(r)&&Pn(t)?(r=Math.random()*4294967295>>>0,t=0):Pn(r)&&(r=t,t=0),Pn(n)&&Pn(o)?(n=this._state?this._state[3]:VT,o=this._state?this._state[2]:$T):Pn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),Uy(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*QT+r)/YT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;ZT(this._state,t,r,KT,JT),Uy(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,c=(-i>>>0&31)>>>0;return(s>>>i|s<<c)>>>0}};function ZT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,c=(r&65535)*(n&65535)>>>0,a=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,c=c+i>>>0,c>>>0<i>>>0&&(a=a+1>>>0),s=s<<16>>>0,c=c+s>>>0,c>>>0<s>>>0&&(a=a+1>>>0),a=a+Math.imul(r,o)>>>0,a=a+Math.imul(t,n)>>>0,e[0]=a,e[1]=c}function Uy(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var zf=Symbol.for("effect/Utils/YieldWrap"),Tr=class{#e;constructor(t){this.#e=t}[zf](){return this.#e}};function Ys(e){if(typeof e=="object"&&e!==null&&zf in e)return e[zf]();throw new Error(Nn("yieldWrapGet"))}var Pt=W("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var XT=e=>{let t={[e](r){return r()}};return function(r){return t[e](r)}},Pe=XT("effect_internal_function");var Vf=W(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),F=Symbol.for("effect/Hash"),w=e=>{if(Pt.enabled===!0)return 0;switch(typeof e){case"number":return uu(e);case"bigint":return ce(e.toString(10));case"boolean":return ce(String(e));case"symbol":return ce(String(e));case"string":return ce(e);case"undefined":return ce("undefined");case"function":case"object":return e===null?ce("null"):e instanceof Date?w(e.toISOString()):eA(e)?e[F]():Qs(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Qs=e=>(Vf.has(e)||Vf.set(e,uu(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Vf.get(e)),D=e=>t=>t*53^e,au=e=>e&3221225471|e>>>1&1073741824,eA=e=>k(e,F),uu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return au(e)},ce=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return au(t)},tA=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=m(ce(t[o]),D(w(e[t[o]])));return au(r)},lu=e=>tA(e,Object.keys(e)),Nt=e=>{let t=6151;for(let r=0;r<e.length;r++)t=m(t,D(w(e[r])));return au(t)},K=function(){if(arguments.length===1){let r=arguments[0];return function(o){return Object.defineProperty(r,F,{value(){return o},enumerable:!1}),o}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,F,{value(){return t},enumerable:!1}),t};var R=Symbol.for("effect/Equal");function C(){return arguments.length===1?e=>pu(e,arguments[0]):pu(arguments[0],arguments[1])}function pu(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(Zs(e)&&Zs(t))return w(e)===w(t)&&e[R](t)?!0:Pt.enabled&&Pt.tester?Pt.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(Pt.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((o,n)=>pu(o,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let o=Object.keys(e),n=Object.keys(t);if(o.length===n.length){for(let s of o)if(!(s in t&&pu(e[s],t[s])))return Pt.tester?Pt.tester(e,t):!1;return!0}}return Pt.tester?Pt.tester(e,t):!1}}return Pt.enabled&&Pt.tester?Pt.tester(e,t):!1}var Zs=e=>k(e,R),Sc=()=>C;u();var U=Symbol.for("nodejs.util.inspect.custom"),Y=e=>k(e,"toJSON")&&Wo(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(Y):e,te=e=>JSON.stringify(e,null,2),$G={toJSON(){return Y(this)},[U](){return this.toJSON()},toString(){return te(this.toJSON())}},zy=class{[U](){return this.toJSON()}toString(){return te(this.toJSON())}},Bo=(e,t=2)=>{try{return typeof e=="object"?Gy(e,t):String(e)}catch{return String(e)}},Gy=(e,t)=>{let r=[],o=JSON.stringify(e,(n,s)=>typeof s=="object"&&s!==null?r.includes(s)?void 0:r.push(s)&&s:s,t);return r=void 0,o};u();u();var O=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};u();var Ln="Async",Xs="Commit",Ne="Failure",ei="OnFailure",ti="OnSuccess",ri="OnSuccessAndFailure",Le="Success",mu="Sync",$y="Tag",so="UpdateRuntimeFlags",oi="While",hu="WithRuntime",ni="Yield",_c="RevertFlags";var Kf=Symbol.for("effect/Effect"),Vy=Symbol.for("effect/Stream"),Ky=Symbol.for("effect/Sink"),Jy=Symbol.for("effect/Channel"),Uo={_R:e=>e,_E:e=>e,_A:e=>e,_V:An()},oA={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},nA={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},io={[Kf]:Uo,[Vy]:Uo,[Ky]:oA,[Jy]:nA,[R](e){return this===e},[F](){return K(this,Qs(this))},[Symbol.iterator](){return new bc(new Tr(this))},pipe(){return O(this,arguments)}},jo={[F](){return K(this,lu(this))},[R](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let o of t)if(!(o in e&&C(this[o],e[o])))return!1;return!0}},Yy={...io,_op:Xs},Jf={...Yy,...jo};u();var Qy=Symbol.for("effect/Option"),Zy={...io,[Qy]:{_A:e=>e},[U](){return this.toJSON()},toString(){return te(this.toJSON())}},iA=Object.assign(Object.create(Zy),{_tag:"Some",_op:"Some",[R](e){return du(e)&&Yf(e)&&C(this.value,e.value)},[F](){return K(this,D(w(this._tag))(w(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Y(this.value)}}}),cA=w("None"),aA=Object.assign(Object.create(Zy),{_tag:"None",_op:"None",[R](e){return du(e)&&xu(e)},[F](){return cA},toJSON(){return{_id:"Option",_tag:this._tag}}}),du=e=>k(e,Qy),xu=e=>e._tag==="None",Yf=e=>e._tag==="Some",zo=Object.create(aA),Go=e=>{let t=Object.create(iA);return t.value=e,t};var Zf=Symbol.for("effect/Either"),Xy={...io,[Zf]:{_R:e=>e},[U](){return this.toJSON()},toString(){return te(this.toJSON())}},uA=Object.assign(Object.create(Xy),{_tag:"Right",_op:"Right",[R](e){return Xf(e)&&gu(e)&&C(this.right,e.right)},[F](){return D(w(this._tag))(w(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Y(this.right)}}}),lA=Object.assign(Object.create(Xy),{_tag:"Left",_op:"Left",[R](e){return Xf(e)&&si(e)&&C(this.left,e.left)},[F](){return D(w(this._tag))(w(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Y(this.left)}}}),Xf=e=>k(e,Zf),si=e=>e._tag==="Left",gu=e=>e._tag==="Right",yu=e=>{let t=Object.create(lA);return t.left=e,t},bu=e=>{let t=Object.create(uA);return t.right=e,t},em=e=>gu(e)?zo:Go(e.left),tm=e=>si(e)?zo:Go(e.right);var Ve=bu,yt=yu;var co=si,ii=gu;var pA=l(2,(e,{onLeft:t,onRight:r})=>co(e)?t(e.left):r(e.right));var Su=pA({onLeft:$,onRight:$});var tb=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(co(o))return o;r.push(o.right)}return Ve(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(co(o))return o;t[r]=o.right}return Ve(t)};u();var rm=e=>e.length>0;var de={};Dy(de,{Do:()=>$A,TypeId:()=>mA,all:()=>ub,andThen:()=>kA,ap:()=>IA,as:()=>ib,asVoid:()=>vA,bind:()=>GA,bindTo:()=>jA,composeK:()=>FA,contains:()=>im,containsWith:()=>fb,exists:()=>UA,filter:()=>LA,filterMap:()=>pb,firstSomeOf:()=>SA,flatMap:()=>er,flatMapNullable:()=>wA,flatten:()=>MA,fromIterable:()=>dA,fromNullable:()=>gr,gen:()=>KA,getEquivalence:()=>DA,getLeft:()=>gA,getOrElse:()=>De,getOrNull:()=>EA,getOrThrow:()=>Oc,getOrThrowWith:()=>sb,getOrUndefined:()=>mt,getOrder:()=>qA,getRight:()=>xA,isNone:()=>V,isOption:()=>nb,isSome:()=>j,let:()=>zA,lift2:()=>HA,liftNullable:()=>_A,liftPredicate:()=>WA,liftThrowable:()=>OA,map:()=>Me,match:()=>Ke,none:()=>S,orElse:()=>yA,orElseEither:()=>bA,orElseSome:()=>nm,partitionMap:()=>NA,product:()=>ab,productMany:()=>AA,reduceCompact:()=>PA,some:()=>_,tap:()=>cb,toArray:()=>lb,toRefinement:()=>hA,void:()=>CA,zipLeft:()=>TA,zipRight:()=>RA,zipWith:()=>sm});u();u();var _u=e=>(t,r)=>t===r?0:e(t,r);var rb=_u((e,t)=>e<t?-1:1);var ob=l(2,(e,t)=>_u((r,o)=>e(t(r),t(o))));var om=e=>l(2,(t,r)=>e(t,r)===1);var mA=Symbol.for("effect/Option"),S=()=>zo,_=Go,nb=du,V=xu,j=Yf,Ke=l(2,(e,{onNone:t,onSome:r})=>V(e)?t():r(e.value)),hA=e=>t=>j(e(t)),dA=e=>{for(let t of e)return _(t);return S()},xA=tm,gA=em,De=l(2,(e,t)=>V(e)?t():e.value),yA=l(2,(e,t)=>V(e)?t():e),nm=l(2,(e,t)=>V(e)?_(t()):e),bA=l(2,(e,t)=>V(e)?Me(t(),bu):Me(e,yu)),SA=e=>{let t=S();for(t of e)if(j(t))return t;return t},gr=e=>e==null?S():_(e),_A=e=>(...t)=>gr(e(...t)),EA=De(Df),mt=De(tu),OA=e=>(...t)=>{try{return _(e(...t))}catch{return S()}},sb=l(2,(e,t)=>{if(j(e))return e.value;throw t()}),Oc=sb(()=>new Error("getOrThrow called on a None")),Me=l(2,(e,t)=>V(e)?S():_(t(e.value))),ib=l(2,(e,t)=>Me(e,()=>t)),vA=ib(void 0),CA=_(void 0);var er=l(2,(e,t)=>V(e)?S():t(e.value)),kA=l(2,(e,t)=>er(e,r=>{let o=$s(t)?t(r):t;return nb(o)?o:_(o)})),wA=l(2,(e,t)=>V(e)?S():gr(t(e.value))),MA=er($),RA=l(2,(e,t)=>er(e,()=>t)),FA=l(2,(e,t)=>r=>er(e(r),t)),TA=l(2,(e,t)=>cb(e,()=>t)),cb=l(2,(e,t)=>er(e,r=>Me(t(r),()=>r))),ab=(e,t)=>j(e)&&j(t)?_([e.value,t.value]):S(),AA=(e,t)=>{if(V(e))return S();let r=[e.value];for(let o of t){if(V(o))return S();r.push(o.value)}return _(r)},ub=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(V(o))return S();r.push(o.value)}return _(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(V(o))return S();t[r]=o.value}return _(t)},sm=l(3,(e,t,r)=>Me(ab(e,t),([o,n])=>r(o,n))),IA=l(2,(e,t)=>sm(e,t,(r,o)=>r(o))),PA=l(3,(e,t,r)=>{let o=t;for(let n of e)j(n)&&(o=r(o,n.value));return o}),lb=e=>V(e)?[]:[e.value],NA=l(2,(e,t)=>{if(V(e))return[S(),S()];let r=t(e.value);return si(r)?[_(r.left),S()]:[S(),_(r.right)]}),pb=l(2,(e,t)=>V(e)?S():t(e.value)),LA=l(2,(e,t)=>pb(e,r=>t(r)?Go(r):zo)),DA=e=>Ks((t,r)=>V(t)?V(r):V(r)?!1:e(t.value,r.value)),qA=e=>_u((t,r)=>j(t)?j(r)?e(t.value,r.value):1:-1),HA=e=>l(2,(t,r)=>sm(t,r,e)),WA=l(2,(e,t)=>t(e)?_(e):S()),fb=e=>l(2,(t,r)=>V(t)?!1:e(t.value,r)),BA=Sc(),im=fb(BA),UA=l(2,(e,t)=>V(e)?!1:t(e.value)),jA=ou(Me),zA=ru(Me);var GA=nu(Me,er),$A=_({}),VA=jy(),KA=(...e)=>{let t;e.length===1?t=e[0]:t=e[1].bind(e[0]);let r=t(VA),o=r.next();if(o.done)return _(o.value);{let n=o.value;if(Gf(n)?n=n.value:n=Ys(n),V(n))return n;for(;!o.done;)if(o=r.next(n.value),!o.done&&(n=o.value,Gf(n)?n=n.value:n=Ys(n),V(n)))return n;return _(o.value)}};u();var mb=(...e)=>e;var vc=e=>new Array(e),cm=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=new Array(r);for(let n=0;n<r;n++)o[n]=t(n);return o};var ee=e=>Array.isArray(e)?e:Array.from(e),db=e=>Array.isArray(e)?e:[e];var ci=l(2,(e,t)=>[t,...e]);var xb=l(2,(e,t)=>[...e,t]),am=l(2,(e,t)=>ee(e).concat(ee(t)));var JA=Array.isArray,YA=e=>e.length===0,gb=YA,yb=rm,bt=rm;var bb=(e,t)=>e<0||e>=t.length,QA=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),ZA=l(2,(e,t)=>{let r=Math.floor(t);return bb(r,e)?S():_(e[r])}),um=l(2,(e,t)=>{let r=Math.floor(t);if(bb(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var $o=ZA(0),St=um(0),Ou=e=>bt(e)?_(lm(e)):S(),lm=e=>e[e.length-1];var Ar=e=>e.slice(1);var XA=(e,t)=>{let r=0;for(let o of e){if(!t(o,r))break;r++}return r},Sb=l(2,(e,t)=>tI(e,XA(e,t))),_b=l(2,(e,t)=>{let r=ee(e);return r.slice(QA(t,r),r.length)});var pm=e=>Array.from(e).reverse(),qn=l(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var fm=l(2,(e,t)=>Eb(e,t,mb)),Eb=l(3,(e,t,r)=>{let o=ee(e),n=ee(t);if(bt(o)&&bt(n)){let s=[r(St(o),St(n))],i=Math.min(o.length,n.length);for(let c=1;c<i;c++)s[c]=r(o[c],n[c]);return s}return[]});var eI=Sc();var tI=l(2,(e,t)=>{let r=Array.from(e),o=Math.floor(t);return bt(r)?o>=1?rI(r,o):[[],r]:[r,[]]}),rI=l(2,(e,t)=>{let r=Math.max(1,Math.floor(t));return r>=e.length?[oI(e),[]]:[ci(e.slice(1,r),St(e)),e.slice(r)]});var oI=e=>e.slice();var nI=l(3,(e,t,r)=>{let o=ee(e),n=ee(t);return bt(o)?bt(n)?Cb(r)(am(o,n)):o:n}),Ir=l(2,(e,t)=>nI(e,t,eI));var zt=()=>[],Ot=e=>[e],Pr=l(2,(e,t)=>e.map(t)),Ob=l(2,(e,t)=>{if(gb(e))return[];let r=[];for(let o=0;o<e.length;o++){let n=t(e[o],o);for(let s=0;s<n.length;s++)r.push(n[s])}return r}),vu=Ob($),ai=l(2,(e,t)=>{let r=ee(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);j(s)&&o.push(s.value)}return o});var vb=ai($);var tr=l(3,(e,t,r)=>ee(e).reduce((o,n,s)=>r(o,n,s),t)),Cu=l(3,(e,t,r)=>ee(e).reduceRight((o,n,s)=>r(o,n,s),t));var mm=(e,t)=>{let r=[],o=e,n;for(;j(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var ui=Hy;var Cb=l(2,(e,t)=>{let r=ee(e);if(bt(r)){let o=[St(r)],n=Ar(r);for(let s of n)o.every(i=>!t(s,i))&&o.push(s);return o}return[]}),hm=e=>Cb(e,Sc());var ao=l(2,(e,t)=>ee(e).join(t));u();var kb=e=>!e;u();u();u();var Mb=Symbol.for("effect/Context/Tag"),sI="effect/STM",iI=Symbol.for(sI),dm={...io,_tag:"Tag",_op:"Tag",[iI]:Uo,[Mb]:{_Service:e=>e,_Identifier:e=>e},toString(){return te(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[U](){return this.toJSON()},of(e){return e},context(e){return ym(this,e)}},Rb=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;let o=Object.create(dm);return Object.defineProperty(o,"stack",{get(){return r.stack}}),o.key=e,o};var xm=Symbol.for("effect/Context"),cI={[xm]:{_Services:e=>e},[R](e){if(gm(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!C(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[F](){return K(this,uu(this.unsafeMap.size))},pipe(){return O(this,arguments)},toString(){return te(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Y)}},[U](){return this.toJSON()}},Vo=e=>{let t=Object.create(cI);return t.unsafeMap=e,t},aI=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[2].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},gm=e=>k(e,xm);var uI=Vo(new Map),Fb=()=>uI,ym=(e,t)=>Vo(new Map([[e.key,t]])),Tb=l(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t.key,r),Vo(o)}),bm=l(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw aI(t);return e.unsafeMap.get(t.key)}),Ab=bm,Ib=l(2,(e,t)=>e.unsafeMap.has(t.key)?Go(e.unsafeMap.get(t.key)):zo),Pb=l(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return Vo(r)});var vt=Rb;var Nb=gm;var Ct=Fb,Sm=ym,Ce=Tb,Be=Ab,li=bm,yr=Ib,Hn=Pb;u();u();u();var Lb=Symbol.for("effect/Chunk");function pI(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var Db=[],fI=e=>Ks((t,r)=>t.length===r.length&&rr(t).every((o,n)=>e(o,Wn(r,n)))),mI=fI(C),hI={[Lb]:{_A:e=>e},toString(){return te(this.toJSON())},toJSON(){return{_id:"Chunk",values:rr(this).map(Y)}},[U](){return this.toJSON()},[R](e){return qb(e)&&mI(this,e)},[F](){return K(this,Nt(rr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Db[Symbol.iterator]();default:return rr(this)[Symbol.iterator]()}},pipe(){return O(this,arguments)}},Ye=e=>{let t=Object.create(hI);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Nr,t.right=Nr;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Nr,t.right=Nr;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Nr,t.right=Nr;break}}return t},qb=e=>k(e,Lb),Nr=Ye({_tag:"IEmpty"}),Lt=()=>Nr,Cc=(...e)=>e.length===1?Re(e[0]):yI(e),Re=e=>Ye({_tag:"ISingleton",a:e}),Dr=e=>qb(e)?e:Ye({_tag:"IArray",array:ee(e)}),_m=(e,t,r)=>{switch(e.backing._tag){case"IArray":{pI(e.backing.array,0,t,r,e.length);break}case"IConcat":{_m(e.left,t,r),_m(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Wn(e,o),o+=1,n+=1;break}}};var dI=e=>{switch(e.backing._tag){case"IEmpty":return Db;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return _m(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Nr,e.right=Nr,e.depth=0,t}}},rr=dI,xI=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return Ye({_tag:"IArray",array:pm(e.backing.array)});case"IConcat":return Ye({_tag:"IConcat",left:Lr(e.backing.right),right:Lr(e.backing.left)});case"ISlice":return pi(pm(rr(e)))}},Lr=xI,gI=l(2,(e,t)=>t<0||t>=e.length?S():_(Wn(e,t))),pi=e=>Ye({_tag:"IArray",array:e}),yI=e=>pi(e),Wn=l(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Wn(e.left,t):Wn(e.right,t-e.left.length);case"ISlice":return Wn(e.backing.chunk,t+e.backing.offset)}}),ku=l(2,(e,t)=>Gt(e,Re(t))),Qe=l(2,(e,t)=>Gt(Re(t),e));var Em=l(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Nr;switch(e.backing._tag){case"ISlice":return Ye({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Em(e.right,t-e.left.length):Ye({_tag:"IConcat",left:Em(e.left,t),right:e.right});default:return Ye({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var Gt=l(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return Ye({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=Gt(e.right,t);return Ye({_tag:"IConcat",left:e.left,right:o})}else{let o=Gt(e.right.right,t);if(o.depth===e.depth-3){let n=Ye({_tag:"IConcat",left:e.right.left,right:o});return Ye({_tag:"IConcat",left:e.left,right:n})}else{let n=Ye({_tag:"IConcat",left:e.left,right:e.right.left});return Ye({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=Gt(e,t.left);return Ye({_tag:"IConcat",left:o,right:t.right})}else{let o=Gt(e,t.left.left);if(o.depth===t.depth-3){let n=Ye({_tag:"IConcat",left:o,right:t.left.right});return Ye({_tag:"IConcat",left:n,right:t.right})}else{let n=Ye({_tag:"IConcat",left:t.left.right,right:t.right});return Ye({_tag:"IConcat",left:o,right:n})}}});var Om=e=>e.length===0,rt=e=>e.length>0,wu=gI(0),vm=e=>Wn(e,0),Ze=vm;var nt=e=>Em(e,1);u();var wm=Symbol.for("effect/Duration"),mi=BigInt(0),Cm=BigInt(24),fi=BigInt(60),Mu=BigInt(1e3),km=BigInt(1e6),Mm=BigInt(1e9),Hb=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,st=e=>{if(Bb(e))return e;if(yc(e))return hi(e);if(By(e))return kc(e);if(Array.isArray(e)){if(e.length===2&&yc(e[0])&&yc(e[1]))return kc(BigInt(e[0])*Mm+BigInt(e[1]))}else if(su(e)){Hb.lastIndex=0;let t=Hb.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nano":case"nanos":return kc(BigInt(o));case"micro":case"micros":return _I(BigInt(o));case"milli":case"millis":return hi(s);case"second":case"seconds":return Fm(s);case"minute":case"minutes":return EI(s);case"hour":case"hours":return OI(s);case"day":case"days":return vI(s);case"week":case"weeks":return CI(s)}}}throw new Error("Invalid DurationInput")};var Wb={_tag:"Millis",millis:0},bI={_tag:"Infinity"},SI={[wm]:wm,[F](){return K(this,lu(this.value))},[R](e){return Bb(e)&&RI(this,e)},toString(){return`Duration(${Am(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:wI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},uo=e=>{let t=Object.create(SI);return yc(e)?isNaN(e)||e<=0?t.value=Wb:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=bI:e<=mi?t.value=Wb:t.value={_tag:"Nanos",nanos:e},t},Bb=e=>k(e,wm);var Rm=uo(0);var kc=e=>uo(e),_I=e=>uo(e*Mu),hi=e=>uo(e),Fm=e=>uo(e*1e3),EI=e=>uo(e*6e4),OI=e=>uo(e*36e5),vI=e=>uo(e*864e5),CI=e=>uo(e*6048e5),qr=e=>{let t=st(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var kI=e=>{let t=st(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},wI=e=>{let t=st(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Mm),Number(t.value.nanos%Mm)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var Ub=l(3,(e,t,r)=>{let o=st(e),n=st(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(qr(o),qr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var MI=(e,t)=>Ub(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Tm=l(2,(e,t)=>Ub(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),RI=l(2,(e,t)=>MI(st(e),st(t))),Am=e=>{let t=st(e),r=[];if(t.value._tag==="Infinity")return"Infinity";let o=kI(t);o%km&&r.push(`${o%km}ns`);let n=o/km;n%Mu!==mi&&r.push(`${n%Mu}ms`);let s=n/Mu;s%fi!==mi&&r.push(`${s%fi}s`);let i=s/fi;i%fi!==mi&&r.push(`${i%fi}m`);let c=i/fi;c%Cm!==mi&&r.push(`${c%Cm}h`);let a=c/Cm;return a!==mi&&r.push(`${a}d`),r.reverse().join(" ")};u();u();u();u();u();u();u();var Im=Math.pow(2,5),jb=Im-1,zb=Im/2,Gb=Im/4;function FI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ko(e,t){return t>>>e&jb}function Jo(e){return 1<<e}function Ru(e,t){return FI(e&t-1)}u();u();var $b=(e,t)=>({value:e,previous:t});u();function Bn(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function Pm(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function Vb(e,t,r,o){let n=o.length;if(e){let a=n;for(;a>=t;)o[a--]=o[a];return o[t]=r,o}let s=0,i=0,c=new Array(n+1);for(;s<t;)c[i++]=o[s++];for(c[t]=r;s<n;)c[++i]=o[s++];return c}var po=class e{_tag="EmptyNode";modify(t,r,o,n,s,i){let c=o(S());return V(c)?new e:(++i.value,new di(t,n,s,c))}};function or(e){return In(e,"EmptyNode")}function AI(e){return or(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Fu(e,t){return or(e)?!1:t===e.edit}var di=class e{edit;hash;key;value;_tag="LeafNode";constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n}modify(t,r,o,n,s,i){if(C(s,this.key)){let a=o(this.value);return a===this.value?this:V(a)?(--i.value,new po):Fu(this,t)?(this.value=a,this):new e(t,n,s,a)}let c=o(S());return V(c)?this:(++i.value,Kb(t,r,this.hash,this,n,new e(t,n,s,c)))}},Nm=class e{edit;hash;children;_tag="CollisionNode";constructor(t,r,o){this.edit=t,this.hash=r,this.children=o}modify(t,r,o,n,s,i){if(n===this.hash){let a=Fu(this,t),p=this.updateCollisionList(a,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let c=o(S());return V(c)?this:(++i.value,Kb(t,r,this.hash,this,n,new di(t,n,s,c)))}updateCollisionList(t,r,o,n,s,i,c){let a=n.length;for(let f=0;f<a;++f){let h=n[f];if("key"in h&&C(i,h.key)){let d=h.value,g=s(d);return g===d?n:V(g)?(--c.value,Pm(t,f,n)):Bn(t,f,new di(r,o,i,g),n)}}let p=s(S());return V(p)?n:(++c.value,Bn(t,a,new di(r,o,i,p),n))}},wc=class e{edit;mask;children;_tag="IndexedNode";constructor(t,r,o){this.edit=t,this.mask=r,this.children=o}modify(t,r,o,n,s,i){let c=this.mask,a=this.children,p=Ko(r,n),f=Jo(p),h=Ru(c,f),d=c&f,g=Fu(this,t);if(!d){let z=new po().modify(t,r+5,o,n,s,i);return z?a.length>=zb?PI(t,p,z,c,a):new e(t,c|f,Vb(g,h,z,a)):this}let b=a[h],M=b.modify(t,r+5,o,n,s,i);if(b===M)return this;let T=c,N;if(or(M)){if(T&=~f,!T)return new po;if(a.length<=2&&AI(a[h^1]))return a[h^1];N=Pm(g,h,a)}else N=Bn(g,h,M,a);return g?(this.mask=T,this.children=N,this):new e(t,T,N)}},Lm=class e{edit;size;children;_tag="ArrayNode";constructor(t,r,o){this.edit=t,this.size=r,this.children=o}modify(t,r,o,n,s,i){let c=this.size,a=this.children,p=Ko(r,n),f=a[p],h=(f||new po).modify(t,r+5,o,n,s,i);if(f===h)return this;let d=Fu(this,t),g;if(or(f)&&!or(h))++c,g=Bn(d,p,h,a);else if(!or(f)&&or(h)){if(--c,c<=Gb)return II(t,c,p,a);g=Bn(d,p,new po,a)}else g=Bn(d,p,h,a);return d?(this.size=c,this.children=g,this):new e(t,c,g)}};function II(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let c=0,a=o.length;c<a;++c)if(c!==r){let p=o[c];p&&!or(p)&&(n[s++]=p,i|=1<<c)}return new wc(e,i,n)}function PI(e,t,r,o,n){let s=[],i=o,c=0;for(let a=0;i;++a)i&1&&(s[a]=n[c++]),i>>>=1;return s[t]=r,new Lm(e,c+1,s)}function NI(e,t,r,o,n,s){if(r===n)return new Nm(e,r,[s,o]);let i=Ko(t,r),c=Ko(t,n);if(i===c)return a=>new wc(e,Jo(i)|Jo(c),[a]);{let a=i<c?[o,s]:[s,o];return new wc(e,Jo(i)|Jo(c),a)}}function Kb(e,t,r,o,n,s){let i,c=t;for(;;){let a=NI(e,c,r,o,n,s);if(typeof a=="function")i=$b(a,i),c=c+5;else{let p=a;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var Jb="effect/HashMap",Tu=Symbol.for(Jb),DI={[Tu]:Tu,[Symbol.iterator](){return new Au(this,(e,t)=>[e,t])},[F](){let e=w(Jb);for(let t of this)e^=m(w(t[0]),D(w(t[1])));return K(this,e)},[R](e){if(Xb(e)){if(e._size!==this._size)return!1;for(let t of this){let r=m(e,Pu(t[0],w(t[0])));if(V(r))return!1;if(!C(t[1],r.value))return!1}return!0}return!1},toString(){return te(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Dm=(e,t,r,o)=>{let n=Object.create(DI);return n._editable=e,n._edit=t,n._root=r,n._size=o,n},Au=class e{map;f;v;constructor(t,r){this.map=t,this.f=r,this.v=Yb(this.map._root,this.f,void 0)}next(){if(V(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Iu(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},Iu=e=>e?Qb(e[0],e[1],e[2],e[3],e[4]):S(),Yb=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return j(e.value)?_({value:t(e.key,e.value.value),cont:r}):Iu(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return Qb(o.length,o,0,t,r)}default:return Iu(r)}},Qb=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!or(s))return Yb(s,o,[e,t,r,o,n])}return Iu(n)},qI=Dm(!1,0,new po,0),gi=()=>qI;var Zb=e=>{let t=Mc(gi());for(let r of e)Un(t,r[0],r[1]);return Hm(t)},Xb=e=>k(e,Tu),eS=e=>e&&or(e._root),tS=l(2,(e,t)=>Pu(e,t,w(t))),Pu=l(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return C(t,o.key)?o.value:S();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,c=s.length;i<c;++i){let a=s[i];if("key"in a&&C(t,a.key))return a.value}}return S()}case"IndexedNode":{let s=Ko(n,r),i=Jo(s);if(o.mask&i){o=o.children[Ru(o.mask,i)],n+=5;break}return S()}case"ArrayNode":{if(o=o.children[Ko(n,r)],o){n+=5;break}return S()}default:return S()}});var qm=l(2,(e,t)=>j(Pu(e,t,w(t))));var Un=l(3,(e,t,r)=>Lu(e,t,()=>_(r))),HI=l(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:Dm(e._editable,e._edit,t,r)),Nu=e=>new Au(e,t=>t);var yi=e=>e._size,Mc=e=>Dm(!0,e._edit+1,e._root,e._size),Hm=e=>(e._editable=!1,e),rS=l(2,(e,t)=>{let r=Mc(e);return t(r),Hm(r)}),Lu=l(3,(e,t,r)=>oS(e,t,w(t),r)),oS=l(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return m(e,HI(s,n.value))});var Du=l(2,(e,t)=>Lu(e,t,S));var nS=l(2,(e,t)=>bi(e,gi(),(r,o,n)=>Un(r,n,t(o,n))));var qu=l(2,(e,t)=>bi(e,void 0,(r,o,n)=>t(o,n))),bi=l(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return j(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,c=s.length;i<c;){let a=s[i++];a&&!or(a)&&(a._tag==="LeafNode"?j(a.value)&&(t=r(t,a.value.value,a.key)):n.push(a.children))}return t});var iS="effect/HashSet",Hu=Symbol.for(iS),WI={[Hu]:Hu,[Symbol.iterator](){return Nu(this._keyMap)},[F](){return K(this,D(w(this._keyMap))(w(iS)))},[R](e){return cS(e)?yi(this._keyMap)===yi(e._keyMap)&&C(this._keyMap,e._keyMap):!1},toString(){return te(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Wu=e=>{let t=Object.create(WI);return t._keyMap=e,t},cS=e=>k(e,Hu),BI=Wu(gi()),Rc=()=>BI,aS=e=>{let t=Bu(Rc());for(let r of e)Si(t,r);return Uu(t)},uS=(...e)=>{let t=Bu(Rc());for(let r of e)Si(t,r);return Uu(t)},lS=l(2,(e,t)=>qm(e._keyMap,t));var pS=e=>yi(e._keyMap),Bu=e=>Wu(Mc(e._keyMap)),Uu=e=>(e._keyMap._editable=!1,e),Wm=l(2,(e,t)=>{let r=Bu(e);return t(r),Uu(r)}),Si=l(2,(e,t)=>e._keyMap._editable?(Un(t,!0)(e._keyMap),e):Wu(Un(t,!0)(e._keyMap))),Bm=l(2,(e,t)=>e._keyMap._editable?(Du(t)(e._keyMap),e):Wu(Du(t)(e._keyMap))),fS=l(2,(e,t)=>Wm(e,r=>{for(let o of t)Bm(r,o)}));var mS=l(2,(e,t)=>Wm(Rc(),r=>{hS(e,o=>Si(r,o));for(let o of t)Si(r,o)}));var hS=l(2,(e,t)=>qu(e._keyMap,(r,o)=>t(o))),dS=l(3,(e,t,r)=>bi(e._keyMap,t,(o,n,s)=>r(o,s)));var Hr=Rc,ju=aS,jn=uS,xS=lS;var zn=pS;var Gn=Si,Um=Bm,jm=fS;var fo=mS;var $n=dS;u();var gS=Symbol.for("effect/MutableRef"),jI={[gS]:gS,toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Y(this.current)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Wr=e=>{let t=Object.create(jI);return t.current=e,t},zu=l(3,(e,t,r)=>C(t,e.current)?(e.current=r,!0):!1);var Dt=e=>e.current;var nr=l(2,(e,t)=>(e.current=t,e));var $u="effect/FiberId",Yo=Symbol.for($u),_i="None",zm="Runtime",Gm="Composite",zI=ce(`${$u}-${_i}`),$m=class{[Yo]=Yo;_tag=_i;id=-1;startTimeMillis=-1;[F](){return zI}[R](t){return Ku(t)&&t._tag===_i}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[U](){return this.toJSON()}},Vm=class{id;startTimeMillis;[Yo]=Yo;_tag=zm;constructor(t,r){this.id=t,this.startTimeMillis=r}[F](){return K(this,ce(`${$u}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[R](t){return Ku(t)&&t._tag===zm&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[U](){return this.toJSON()}},Km=class{left;right;[Yo]=Yo;_tag=Gm;constructor(t,r){this.left=t,this.right=r}_hash;[F](){return m(ce(`${$u}-${this._tag}`),D(w(this.left)),D(w(this.right)),K(this))}[R](t){return Ku(t)&&t._tag===Gm&&C(this.left,t.left)&&C(this.right,t.right)}toString(){return te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Y(this.left),right:Y(this.right)}}[U](){return this.toJSON()}},Vu=new $m;var Ku=e=>k(e,Yo);var bS=l(2,(e,t)=>e._tag===_i?t:t._tag===_i?e:new Km(e,t));var Gu=e=>{switch(e._tag){case _i:return Hr();case zm:return jn(e.id);case Gm:return m(Gu(e.left),fo(Gu(e.right)))}},yS=W(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Wr(0));var Ju=e=>Array.from(Gu(e)).map(r=>`#${r}`).join(",");var SS=()=>{let e=Dt(yS);return m(yS,nr(e+1)),new Vm(e,Date.now())};var Vt=Vu;var Jm=bS;var ES=Ju;var Yu=SS;u();var Kn=gi;var OS=Zb,vS=eS,Ym=tS;var br=Un,Qm=Nu;var CS=yi;var kS=rS,wS=Lu;var Qu=nS;var MS=qu,Zm=bi;u();var Fc=Symbol.for("effect/List"),Xm=e=>ee(e),$I=e=>qy(ui(e),Xm),VI=$I(C),KI={[Fc]:Fc,_tag:"Cons",toString(){return te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Xm(this).map(Y)}},[U](){return this.toJSON()},[R](e){return FS(e)&&this._tag===e._tag&&VI(this,e)},[F](){return K(this,Nt(Xm(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();let r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return O(this,arguments)}},Zu=(e,t)=>{let r=Object.create(KI);return r.head=e,r.tail=t,r},JI=ce("Nil"),YI={[Fc]:Fc,_tag:"Nil",toString(){return te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[U](){return this.toJSON()},[F](){return JI},[R](e){return FS(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return O(this,arguments)}},RS=Object.create(YI),FS=e=>k(e,Fc),Br=e=>e._tag==="Nil",Tc=e=>e._tag==="Cons";var QI=()=>RS,ho=(e,t)=>Zu(e,t),Ur=QI,Ac=e=>Zu(e,RS);var TS=l(2,(e,t)=>ZI(t,e)),Xu=l(2,(e,t)=>ho(t,e)),ZI=l(2,(e,t)=>{if(Br(e))return t;if(Br(t))return e;{let r=Zu(t.head,e),o=r,n=t.tail;for(;!Br(n);){let s=Zu(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var AS=l(3,(e,t,r)=>{let o=t,n=e;for(;!Br(n);)o=r(o,n.head),n=n.tail;return o});var IS=e=>{let t=Ur(),r=e;for(;!Br(r);)t=Xu(t,r.head),r=r.tail;return t};u();u();u();u();var wV=Object.assign(Object.create(Array.prototype),{[F](){return K(this,Nt(this))},[R](e){return Array.isArray(e)&&this.length===e.length?this.every((t,r)=>C(t,e[r])):!1}}),vi=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=jo,e}(),el=e=>Object.assign(Object.create(jo),e);u();var XI=Symbol.for("effect/DifferContextPatch");function NS(e){return e}var Pc={...vi.prototype,[XI]:{_Value:NS,_Patch:NS}},e1=Object.assign(Object.create(Pc),{_tag:"Empty"}),t1=Object.create(e1),eh=()=>t1,r1=Object.assign(Object.create(Pc),{_tag:"AndThen"}),o1=(e,t)=>{let r=Object.create(r1);return r.first=e,r.second=t,r},n1=Object.assign(Object.create(Pc),{_tag:"AddService"}),s1=(e,t)=>{let r=Object.create(n1);return r.key=e,r.service=t,r},i1=Object.assign(Object.create(Pc),{_tag:"RemoveService"}),c1=e=>{let t=Object.create(i1);return t.key=e,t},a1=Object.assign(Object.create(Pc),{_tag:"UpdateService"}),u1=(e,t)=>{let r=Object.create(a1);return r.key=e,r.update=t,r},LS=(e,t)=>{let r=new Map(e.unsafeMap),o=eh();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),C(i,s)||(o=Ic(u1(n,()=>s))(o))}else r.delete(n),o=Ic(s1(n,s))(o);for(let[n]of r.entries())o=Ic(c1(n))(o);return o},Ic=l(2,(e,t)=>o1(e,t)),DS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,o=Re(e),n=new Map(t.unsafeMap);for(;rt(o);){let i=Ze(o),c=nt(o);switch(i._tag){case"Empty":{o=c;break}case"AddService":{n.set(i.key,i.service),o=c;break}case"AndThen":{o=Qe(Qe(c,i.second),i.first);break}case"RemoveService":{n.delete(i.key),o=c;break}case"UpdateService":{n.set(i.key,i.update(n.get(i.key))),r=!0,o=c;break}}}if(!r)return Vo(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,c]of n)s.set(i,c);return Vo(s)});u();var p1=Symbol.for("effect/DifferHashSetPatch");function th(e){return e}var rl={...vi.prototype,[p1]:{_Value:th,_Key:th,_Patch:th}},f1=Object.assign(Object.create(rl),{_tag:"Empty"}),m1=Object.create(f1),rh=()=>m1,h1=Object.assign(Object.create(rl),{_tag:"AndThen"}),d1=(e,t)=>{let r=Object.create(h1);return r.first=e,r.second=t,r},x1=Object.assign(Object.create(rl),{_tag:"Add"}),g1=e=>{let t=Object.create(x1);return t.value=e,t},y1=Object.assign(Object.create(rl),{_tag:"Remove"}),b1=e=>{let t=Object.create(y1);return t.value=e,t},qS=(e,t)=>{let[r,o]=$n([e,rh()],([n,s],i)=>xS(i)(n)?[Um(i)(n),s]:[n,tl(g1(i))(s)])(t);return $n(o,(n,s)=>tl(b1(s))(n))(r)},tl=l(2,(e,t)=>d1(e,t)),HS=l(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,o=Re(e);for(;rt(o);){let n=Ze(o),s=nt(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Qe(n.first)(Qe(n.second)(s));break}case"Add":{r=Gn(n.value)(r),o=s;break}case"Remove":r=Um(n.value)(r),o=s}}return r});u();var _1=Symbol.for("effect/DifferReadonlyArrayPatch");function WS(e){return e}var Lc={...vi.prototype,[_1]:{_Value:WS,_Patch:WS}},E1=Object.assign(Object.create(Lc),{_tag:"Empty"}),O1=Object.create(E1),oh=()=>O1,v1=Object.assign(Object.create(Lc),{_tag:"AndThen"}),C1=(e,t)=>{let r=Object.create(v1);return r.first=e,r.second=t,r},k1=Object.assign(Object.create(Lc),{_tag:"Append"}),w1=e=>{let t=Object.create(k1);return t.values=e,t},M1=Object.assign(Object.create(Lc),{_tag:"Slice"}),R1=(e,t)=>{let r=Object.create(M1);return r.from=e,r.until=t,r},F1=Object.assign(Object.create(Lc),{_tag:"Update"}),T1=(e,t)=>{let r=Object.create(F1);return r.index=e,r.patch=t,r},BS=e=>{let t=0,r=oh();for(;t<e.oldValue.length&&t<e.newValue.length;){let o=e.oldValue[t],n=e.newValue[t],s=e.differ.diff(o,n);C(s,e.differ.empty)||(r=Nc(r,T1(t,s))),t=t+1}return t<e.oldValue.length&&(r=Nc(r,R1(0,t))),t<e.newValue.length&&(r=Nc(r,w1(_b(t)(e.newValue)))),r},Nc=l(2,(e,t)=>C1(e,t)),US=l(3,(e,t,r)=>{if(e._tag==="Empty")return t;let o=t.slice(),n=Ot(e);for(;yb(n);){let s=St(n),i=Ar(n);switch(s._tag){case"Empty":{n=i;break}case"AndThen":{i.unshift(s.first,s.second),n=i;break}case"Append":{for(let c of s.values)o.push(c);n=i;break}case"Slice":{o=o.slice(s.from,s.until),n=i;break}case"Update":{o[s.index]=r.patch(s.patch,o[s.index]),n=i;break}}}return o});var jS=Symbol.for("effect/Differ"),I1={[jS]:{_P:$,_V:$}},Qo=e=>{let t=Object.create(I1);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},nh=()=>Qo({empty:eh(),combine:(e,t)=>Ic(t)(e),diff:(e,t)=>LS(e,t),patch:(e,t)=>DS(t)(e)});var sh=()=>Qo({empty:rh(),combine:(e,t)=>tl(t)(e),diff:(e,t)=>qS(e,t),patch:(e,t)=>HS(t)(e)});var ih=e=>Qo({empty:oh(),combine:(t,r)=>Nc(t,r),diff:(t,r)=>BS({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>US(t,r,e)});var ol=()=>zS((e,t)=>t),zS=e=>Qo({empty:$,combine:(t,r)=>t===$?r:r===$?t:o=>r(t(o)),diff:(t,r)=>C(t,r)?$:Vs(r),patch:(t,r)=>e(r,t(r))});u();var Dc=255,GS=8,nl=e=>e&Dc,sl=e=>e>>GS&Dc,Yn=(e,t)=>(e&Dc)+((t&e&Dc)<<GS),il=Yn(0,0),$S=e=>Yn(e,e),VS=e=>Yn(e,0);var KS=l(2,(e,t)=>Yn(nl(e)&~t,sl(e)));var ah=l(2,(e,t)=>e|t);var JS=e=>~e>>>0&Dc;var P1=0,jr=1,QS=2,uh=4,cl=16,lh=32;var ZS=e=>al(e,lh);var ph=l(2,(e,t)=>e|t);var xo=e=>qc(e)&&!N1(e),qc=e=>al(e,jr);var al=l(2,(e,t)=>(e&t)!==0),fh=(...e)=>e.reduce((t,r)=>t|r,0),XS=fh(P1);var mh=e=>al(e,uh);var N1=e=>al(e,cl);var sr=l(2,(e,t)=>Yn(e^t,t)),go=l(2,(e,t)=>e&(JS(nl(t))|sl(t))|nl(t)&sl(t));var hh=Qo({empty:il,diff:(e,t)=>sr(e,t),combine:(e,t)=>ah(t)(e),patch:(e,t)=>go(t,e)});var e_=il;var dh=$S,xh=VS;var gh=KS;u();var t_={_tag:"Empty"},_h=(e,t)=>({_tag:"Par",left:e,right:t}),ul=(e,t)=>({_tag:"Seq",left:e,right:t}),Eh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var r_=e=>{let t=Ac(e),r=Ur();for(;;){let[o,n]=AS(t,[o_(),Ur()],([s,i],c)=>{let[a,p]=L1(c);return[j1(s,a),TS(i,p)]});if(r=D1(r,o),Br(n))return IS(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},L1=e=>{let t=e,r=o_(),o=Ur(),n=Ur();for(;;)switch(t._tag){case"Empty":{if(Br(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=ho(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let c=s.left,a=s.right;t=_h(ul(c,i),ul(a,i));break}case"Seq":{let c=s.left,a=s.right;t=ul(c,ul(a,i));break}case"Single":{t=s,n=ho(i,n);break}}break}case"Single":{if(r=U1(r,t),Br(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},D1=(e,t)=>{if(Br(e))return Ac(bh(t));if(z1(t))return e;let r=Y1(e.head),o=G1(t);return r.length===1&&o.length===1&&C(r[0],o[0])?ho(J1(e.head,bh(t)),e.tail):ho(bh(t),e)},q1=Symbol.for("effect/RequestBlock/Entry"),Sh=class{request;result;listeners;ownerId;state;[q1]=H1;constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s}},H1={_R:e=>e};var Oh=e=>new Sh(e.request,e.result,e.listeners,e.ownerId,e.state),W1=Symbol.for("effect/RequestBlock/RequestBlockParallel"),B1={_R:e=>e},Wc=class{map;[W1]=B1;constructor(t){this.map=t}},o_=()=>new Wc(Kn());var U1=(e,t)=>new Wc(wS(e.map,t.dataSource,r=>nm(Me(r,ku(t.blockedRequest)),()=>Re(t.blockedRequest)))),j1=(e,t)=>new Wc(Zm(e.map,t.map,(r,o,n)=>br(r,n,Ke(Ym(r,n),{onNone:()=>o,onSome:s=>Gt(o,s)})))),z1=e=>vS(e.map),G1=e=>Array.from(Qm(e.map)),bh=e=>K1(Qu(e.map,t=>Re(t))),$1=Symbol.for("effect/RequestBlock/RequestBlockSequential"),V1={_R:e=>e},ll=class{map;[$1]=V1;constructor(t){this.map=t}},K1=e=>new ll(e),J1=(e,t)=>new ll(Zm(t.map,e.map,(r,o,n)=>br(r,n,Ke(Ym(r,n),{onNone:()=>Lt(),onSome:s=>Gt(s,o)}))));var Y1=e=>Array.from(Qm(e.map)),n_=e=>Array.from(e.map);u();u();var Qn="Die",Zn="Empty",Xn="Fail",es="Interrupt",ts="Parallel",rs="Sequential";var u_="effect/Cause",Ch=Symbol.for(u_),Z1={_E:e=>e},Ci={[Ch]:Z1,[F](){return m(w(u_),D(w(eP(this))),K(this))},[R](e){return fl(e)&&X1(this,e)},pipe(){return O(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Y(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Y(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Y(this.left),right:Y(this.right)}}},toString(){return en(this)},[U](){return this.toJSON()}},Sr=(()=>{let e=Object.create(Ci);return e._tag=Zn,e})(),Zo=e=>{let t=Object.create(Ci);return t._tag=Xn,t.error=e,t},ht=e=>{let t=Object.create(Ci);return t._tag=Qn,t.defect=e,t},Kt=e=>{let t=Object.create(Ci);return t._tag=es,t.fiberId=e,t},wt=(e,t)=>{let r=Object.create(Ci);return r._tag=ts,r.left=e,r.right=t,r},Ue=(e,t)=>{let r=Object.create(Ci);return r._tag=rs,r.left=e,r.right=t,r},fl=e=>k(e,Ch);var ki=e=>e._tag===Qn;var ml=e=>e._tag===Zn?!0:os(e,!0,(t,r)=>{switch(r._tag){case Zn:return _(t);case Qn:case Xn:case es:return _(!1);default:return S()}});var hl=e=>j(l_(e)),ns=e=>jc(void 0,rP)(e),Bc=e=>Lr(os(e,Lt(),(t,r)=>r._tag===Xn?_(m(t,Qe(r.error))):S())),dl=e=>Lr(os(e,Lt(),(t,r)=>r._tag===Qn?_(m(t,Qe(r.defect))):S())),Uc=e=>os(e,Hr(),(t,r)=>r._tag===es?_(m(t,Gn(r.fiberId))):S()),kh=e=>Xo(e,t=>t._tag===Xn?_(t.error):S()),zr=e=>{let t=kh(e);switch(t._tag){case"None":return Ve(e);case"Some":return yt(t.value)}};var l_=e=>Xo(e,t=>t._tag===es?_(t.fiberId):S()),wh=e=>wi(e,{onEmpty:S(),onFail:()=>S(),onDie:t=>_(ht(t)),onInterrupt:()=>S(),onSequential:(t,r)=>j(t)&&j(r)?_(Ue(t.value,r.value)):j(t)&&V(r)?_(t.value):V(t)&&j(r)?_(r.value):S(),onParallel:(t,r)=>j(t)&&j(r)?_(wt(t.value,r.value)):j(t)&&V(r)?_(t.value):V(t)&&j(r)?_(r.value):S()}),p_=e=>wi(e,{onEmpty:S(),onFail:t=>_(ht(t)),onDie:t=>_(ht(t)),onInterrupt:()=>S(),onSequential:(t,r)=>j(t)&&j(r)?_(Ue(t.value,r.value)):j(t)&&V(r)?_(t.value):V(t)&&j(r)?_(r.value):S(),onParallel:(t,r)=>j(t)&&j(r)?_(wt(t.value,r.value)):j(t)&&V(r)?_(t.value):V(t)&&j(r)?_(r.value):S()});var xl=e=>wi(e,{onEmpty:Sr,onFail:()=>Sr,onDie:t=>ht(t),onInterrupt:t=>Kt(t),onSequential:Ue,onParallel:wt}),f_=e=>wi(e,{onEmpty:Sr,onFail:t=>ht(t),onDie:t=>ht(t),onInterrupt:t=>Kt(t),onSequential:(t,r)=>Ue(t,r),onParallel:(t,r)=>wt(t,r)});var m_=l(2,(e,t)=>wi(e,{onEmpty:Sr,onFail:r=>t(r),onDie:r=>ht(r),onInterrupt:r=>Kt(r),onSequential:(r,o)=>Ue(r,o),onParallel:(r,o)=>wt(r,o)})),Mh=e=>m_(e,$);var X1=(e,t)=>{let r=Re(e),o=Re(t);for(;rt(r)&&rt(o);){let[n,s]=m(Ze(r),os([Hr(),Lt()],([a,p],f)=>{let[h,d]=vh(f);return _([m(a,fo(h)),m(p,Gt(d))])})),[i,c]=m(Ze(o),os([Hr(),Lt()],([a,p],f)=>{let[h,d]=vh(f);return _([m(a,fo(h)),m(p,Gt(d))])}));if(!C(n,i))return!1;r=s,o=c}return!0},eP=e=>tP(Re(e),Lt()),tP=(e,t)=>{for(;;){let[r,o]=m(e,tr([Hr(),Lt()],([s,i],c)=>{let[a,p]=vh(c);return[m(s,fo(a)),m(i,Gt(p))]})),n=zn(r)>0?m(t,Qe(r)):t;if(Om(o))return Lr(n);e=o,t=n}throw new Error(Nn("Cause.flattenCauseLoop"))},Xo=l(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case rs:case ts:{r.push(o.right),r.push(o.left);break}}break}case"Some":return n}}return S()});var vh=e=>{let t=e,r=[],o=Hr(),n=Lt();for(;t!==void 0;)switch(t._tag){case Zn:{if(r.length===0)return[o,n];t=r.pop();break}case Xn:{if(o=Gn(o,Cc(t._tag,t.error)),r.length===0)return[o,n];t=r.pop();break}case Qn:{if(o=Gn(o,Cc(t._tag,t.defect)),r.length===0)return[o,n];t=r.pop();break}case es:{if(o=Gn(o,Cc(t._tag,t.fiberId)),r.length===0)return[o,n];t=r.pop();break}case rs:{switch(t.left._tag){case Zn:{t=t.right;break}case rs:{t=Ue(t.left.left,Ue(t.left.right,t.right));break}case ts:{t=wt(Ue(t.left.left,t.right),Ue(t.left.right,t.right));break}default:{n=Qe(n,t.right),t=t.left;break}}break}case ts:{r.push(t.right),t=t.left;break}}throw new Error(Nn("Cause.evaluateCauseLoop"))};var rP={emptyCase:qo,failCase:oo,dieCase:oo,interruptCase:qo,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var i_="SequentialCase",c_="ParallelCase",wi=l(2,(e,{onDie:t,onEmpty:r,onFail:o,onInterrupt:n,onParallel:s,onSequential:i})=>jc(e,void 0,{emptyCase:()=>r,failCase:(c,a)=>o(a),dieCase:(c,a)=>t(a),interruptCase:(c,a)=>n(a),sequentialCase:(c,a,p)=>i(a,p),parallelCase:(c,a,p)=>s(a,p)})),os=l(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=j(i)?i.value:o,n._tag){case rs:{s.push(n.right),n=n.left;break}case ts:{s.push(n.right),n=n.left;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),jc=l(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Zn:{n.push(Ve(r.emptyCase(t)));break}case Xn:{n.push(Ve(r.failCase(t,i.error)));break}case Qn:{n.push(Ve(r.dieCase(t,i.defect)));break}case es:{n.push(Ve(r.interruptCase(t,i.fiberId)));break}case rs:{o.push(i.right),o.push(i.left),n.push(yt({_tag:i_}));break}case ts:{o.push(i.right),o.push(i.left),n.push(yt({_tag:c_}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case i_:{let c=s.pop(),a=s.pop(),p=r.sequentialCase(t,c,a);s.push(p);break}case c_:{let c=s.pop(),a=s.pop(),p=r.parallelCase(t,c,a);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),en=(e,t)=>ns(e)?"All fibers interrupted without errors.":gl(e).map(function(r){return t?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${h_(r.cause,"  ")}
}`}).join(`
`),h_=(e,t)=>{let r=e.stack.split(`
`),o=`${t}[cause]: ${r[0]}`;for(let n=1,s=r.length;n<s;n++)o+=`
${t}${r[n]}`;return e.cause&&(o+=` {
${h_(e.cause,`${t}  `)}
${t}}`),o},pl=class e extends globalThis.Error{span=void 0;constructor(t){let r=typeof t=="object"&&t!==null,o=Error.stackTraceLimit;Error.stackTraceLimit=1,super(oP(t),r&&"cause"in t&&typeof t.cause<"u"?{cause:new e(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=o,this.name=t instanceof Error?t.name:"Error",r&&(a_ in t&&(this.span=t[a_]),Object.keys(t).forEach(n=>{n in this||(this[n]=t[n])})),this.stack=sP(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}},oP=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(k(e,"toString")&&Wo(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},nP=/\((.*)\)/,zc=W("effect/Tracer/spanToTrace",()=>new WeakMap),sP=(e,t,r)=>{let o=[e],n=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let s=1;s<n.length&&!n[s].includes("Generator.next");s++){if(n[s].includes("effect_internal_function")){o.pop();break}o.push(n[s].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let s=r,i=0;for(;s&&s._tag==="Span"&&i<10;){let c=zc.get(s);if(typeof c=="function"){let a=c();if(typeof a=="string"){let p=a.match(nP),f=p?p[1]:a.replace(/^at /,"");o.push(`    at ${s.name} (${f})`)}else o.push(`    at ${s.name}`)}else o.push(`    at ${s.name}`);s=mt(s.parent),i++}}return o.join(`
`)},a_=Symbol.for("effect/SpanAnnotation"),gl=e=>jc(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[new pl(r)],failCase:(t,r)=>[new pl(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();u();var is="Pending",Gc="Done";var iP="effect/Deferred",x_=Symbol.for(iP),g_={_E:e=>e,_A:e=>e},y_=e=>({_tag:is,joiners:e}),Rh=e=>({_tag:Gc,effect:e});u();var tn=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};u();var b_=Symbol.for("effect/Tracer"),aP=e=>({[b_]:b_,...e}),Gr=vt("effect/Tracer"),_r=vt("effect/ParentSpan"),S_=function(){let e="abcdef0123456789",t=e.length;return function(r){let o="";for(let n=0;n<r;n++)o+=e.charAt(Math.floor(Math.random()*t));return o}}(),Fh=class{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(t,r,o,n,s,i){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this.kind=i,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:S_(32),this.spanId=S_(16)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,o){this.events.push([t,r,o??{}])}},__=aP({span:(e,t,r,o,n,s)=>new Fh(e,t,r,o,n,s),context:e=>e()});var yo=e=>{if(e?.captureStackTrace===!1)return e;if(e?.captureStackTrace!==void 0&&typeof e.captureStackTrace!="boolean")return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=t;let o=!1;return{...e,captureStackTrace:()=>{if(o!==!1)return o;if(r.stack!==void 0){let n=r.stack.split(`
`);if(n[3]!==void 0)return o=n[3].trim(),o}}}};var pP="effect/EffectError",Th=Symbol.for(pP),F_=e=>k(e,Th),T_=e=>({[Th]:Th,_tag:"EffectError",cause:e}),bo=(e,t)=>{let r=new je("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},vl=e=>{let t=new je("RunBlocked");return t.effect_instruction_i0=e,t},Mi=Symbol.for("effect/Effect"),Sl=class{patch;op;_op=_c;constructor(t,r){this.patch=t,this.op=r}},je=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Mi]=Uo;constructor(t){this._op=t}[R](t){return this===t}[F](){return K(this,Qs(this))}pipe(){return O(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Y(this.effect_instruction_i0),effect_instruction_i1:Y(this.effect_instruction_i1),effect_instruction_i2:Y(this.effect_instruction_i2)}}toString(){return te(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new tn(new Tr(this))}},_l=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Mi]=Uo;constructor(t){this._op=t,this._tag=t}[R](t){return Xc(t)&&t._op==="Failure"&&C(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ce(this._tag),D(w(this.effect_instruction_i0)),K(this))}get cause(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return te(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new tn(new Tr(this))}},El=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Mi]=Uo;constructor(t){this._op=t,this._tag=t}[R](t){return Xc(t)&&t._op==="Success"&&C(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return m(ce(this._tag),D(w(this.effect_instruction_i0)),K(this))}get value(){return this.effect_instruction_i0}pipe(){return O(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Y(this.value)}}toString(){return te(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new tn(new Tr(this))}},ue=e=>k(e,Mi),re=e=>{let t=new je(hu);return t.effect_instruction_i0=e,t},rn=l(3,(e,t,r)=>Fe(o=>x(e,n=>x(ke(I(()=>o(t(n)))),s=>I(()=>r(n,s)).pipe(Se({onFailure:i=>{switch(s._tag){case Ne:return Q(wt(s.effect_instruction_i0,i));case Le:return Q(i)}},onSuccess:()=>s})))))),le=l(2,(e,t)=>x(e,()=>y(t))),Ee=e=>le(e,void 0),Vc=function(){let e=new je(Xs);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Nn("you're not supposed to end up here"))}return e},A_=(e,t=Vt)=>{let r=new je(Ln),o;return r.effect_instruction_i0=n=>{o=e(n)},r.effect_instruction_i1=t,o!==void 0?vr(r,n=>o):r},qe=(e,t=Vt)=>Vc(e,function(){let r,o;function n(a){r?r(a):o===void 0&&(o=a)}let s=new je(Ln);s.effect_instruction_i0=a=>{r=a,o&&a(o)},s.effect_instruction_i1=t;let i,c;return this.effect_instruction_i0.length!==1?(c=new AbortController,i=Pe(()=>this.effect_instruction_i0(n,c.signal))):i=Pe(()=>this.effect_instruction_i0(n)),i||c?vr(s,a=>(c&&c.abort(),i??B)):s}),$r=l(2,(e,t)=>{let r=new je(ei);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Er=l(2,(e,t)=>Xe(e,{onFailure:t,onSuccess:y})),Kc=l(3,(e,t,r)=>$r(e,o=>{let n=zr(o);switch(n._tag){case"Left":return t(n.left)?r(n.left):Q(o);case"Right":return Q(n.right)}})),I_=l(2,(e,t)=>$r(e,r=>{let o=zr(r);switch(o._tag){case"Left":return m(t(o.left),De(()=>Q(r)));case"Right":return Q(o.right)}})),P_=e=>re((t,r)=>e(qc(r.runtimeFlags))),Ol=Symbol.for("effect/SpanAnnotation"),E_=Symbol.for("effect/OriginalAnnotation");var N_=(e,t)=>j(t)?new Proxy(e,{has(r,o){return o===Ol||o===E_||o in r},get(r,o){return o===Ol?t.value:o===E_?e:r[o]}}):e,So=e=>Js(e)&&!(Ol in e)?re(t=>Q(ht(N_(e,uE(t))))):Q(ht(e)),on=e=>sn(()=>ht(new SP(e))),nn=e=>x(E(e),So),Vr=e=>Xe(e,{onFailure:t=>y(yt(t)),onSuccess:t=>y(Ve(t))}),ke=e=>Jc(e,{onFailure:ie,onSuccess:xe}),J=e=>Js(e)&&!(Ol in e)?re(t=>Q(Zo(N_(e,uE(t))))):Q(Zo(e)),Or=e=>x(E(e),J),Q=e=>{let t=new _l(Ne);return t.effect_instruction_i0=e,t},sn=e=>x(E(e),Q),cn=re(e=>y(e.id())),qt=e=>re(t=>e(t.id())),x=l(2,(e,t)=>{let r=new je(ti);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),as=l(2,(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return ue(o)?o:Bf(o)?qe(n=>{o.then(s=>n(y(s)),s=>n(J(new mn(s))))}):y(o)})),Cl=e=>{let t=new je("OnStep");return t.effect_instruction_i0=e,t},Mt=e=>x(e,$),an=e=>Xe(e,{onFailure:y,onSuccess:J}),Jc=l(2,(e,t)=>Se(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),Se=l(2,(e,t)=>{let r=new je(ri);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),Xe=l(2,(e,t)=>Se(e,{onFailure:r=>{if(dl(r).length>0)return Q(f_(r));let n=Bc(r);return n.length>0?t.onFailure(vm(n)):Q(r)},onSuccess:t.onSuccess})),it=l(2,(e,t)=>I(()=>{let r=ee(e),o=vc(r.length),n=0;return le(Ti({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),Ht=l(2,(e,t)=>I(()=>{let r=ee(e),o=0;return Ti({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),kl=l(e=>typeof e[0]=="boolean"||ue(e[0]),(e,t)=>ue(e)?x(e,r=>r?t.onTrue():t.onFalse()):e?t.onTrue():t.onFalse()),wl=x(cn,e=>Ml(e)),Ml=e=>Q(Kt(e)),Kr=e=>{let t=new je(so);return t.effect_instruction_i0=dh(jr),t.effect_instruction_i1=()=>e,t},L_=e=>Vc(e,function(){let t=new je(so);return t.effect_instruction_i0=dh(jr),t.effect_instruction_i1=r=>qc(r)?Pe(()=>this.effect_instruction_i0(Kr)):Pe(()=>this.effect_instruction_i0(_o)),t}),Jr=l(2,(e,t)=>Fe(r=>x(ke(r(e)),o=>zh(t,o)))),v=l(2,(e,t)=>x(e,r=>E(()=>t(r)))),Yc=l(2,(e,t)=>Xe(e,{onFailure:r=>Or(()=>t.onFailure(r)),onSuccess:r=>E(()=>t.onSuccess(r))})),un=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=zr(r);switch(o._tag){case"Left":return Or(()=>t(o.left));case"Right":return Q(o.right)}},onSuccess:y})),Rl=l(2,(e,t)=>_t(e,r=>Bl(r)?B:t(r.effect_instruction_i0))),_t=l(2,(e,t)=>Fe(r=>Se(r(e),{onFailure:o=>{let n=ie(o);return Se(t(n),{onFailure:s=>ie(Ue(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=xe(o);return ne(t(n),n)}}))),vr=l(2,(e,t)=>_t(e,Ii({onFailure:r=>ns(r)?Ee(t(Uc(r))):B,onSuccess:()=>B}))),us=l(2,(e,t)=>fP(e,t,y)),ls=e=>Ph(e,$),Ph=l(2,(e,t)=>Xe(e,{onFailure:r=>So(t(r)),onSuccess:y})),D_=(e,t)=>ee(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[zt(),zt()]),Ri=re((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new El(Le);return t.effect_instruction_i0=e,t},I=e=>x(E(e),$),E=e=>{let t=new je(mu);return t.effect_instruction_i0=e,t},Jt=l(2,(e,t)=>x(e,r=>{let o=typeof t=="function"?t(r):t;return ue(o)?le(o,r):Bf(o)?qe(n=>{o.then(s=>n(y(r)),s=>n(J(new mn(s))))}):y(r)})),Fl=e=>re(t=>{let r=t.getFiberRef($c),o=m(r,De(()=>t.scope()));return e(We($c,_(o)))}),fP=l(3,(e,t,r)=>Se(e,{onFailure:o=>dl(o).length>0?Q(Oc(p_(o))):t(),onSuccess:r})),_o=e=>{let t=new je(so);return t.effect_instruction_i0=xh(jr),t.effect_instruction_i1=()=>e,t},Fe=e=>Vc(e,function(){let t=new je(so);return t.effect_instruction_i0=xh(jr),t.effect_instruction_i1=r=>qc(r)?Pe(()=>this.effect_instruction_i0(Kr)):Pe(()=>this.effect_instruction_i0(_o)),t}),B=y(void 0);var ln=e=>{let t=new je(so);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Fi=l(2,(e,t)=>x(t,r=>r?m(e,v(_)):y(S()))),Ti=e=>{let t=new je(oi);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},q_=l(2,(e,t)=>We(e,Nl,t)),H_=l(2,(e,t)=>We(e,Hh,t)),Tl=l(2,(e,t)=>{let r=new je(so);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r}),W_=l(2,(e,t)=>We(e,Bh,t)),B_=l(2,(e,t)=>We(e,Ai,t)),Yr=e=>{let t=new je(ni);return typeof e?.priority<"u"?qh(t,e.priority):t},ps=l(2,(e,t)=>x(e,r=>v(t,o=>[r,o])));var fs=l(2,(e,t)=>x(e,r=>le(t,r))),ne=l(2,(e,t)=>x(e,()=>t)),Qr=l(3,(e,t,r)=>x(e,o=>v(t,n=>r(o,n)))),ms=qe(()=>{let e=setInterval(()=>{},2147483647);return E(()=>clearInterval(e))}),hs=e=>x(cn,t=>m(e,Wt(t))),Wt=l(2,(e,t)=>x(e.interruptAsFork(t),()=>e.await)),U_={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return O(this,arguments)}},j_={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return O(this,arguments)}},z_={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return O(this,arguments)}},G_={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return O(this,arguments)}},Nh={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return O(this,arguments)}},Lh={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return O(this,arguments)}},$_={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return O(this,arguments)}},V_={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return O(this,arguments)}};var mP="effect/FiberRef",hP=Symbol.for(mP),dP={_A:e=>e},Bt=e=>K_(e,t=>[t,t]);var He=l(2,(e,t)=>x(Bt(e),t)),cs=l(2,(e,t)=>K_(e,()=>[void 0,t]));var K_=l(2,(e,t)=>re(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var xP="effect/RequestResolver",J_=Symbol.for(xP),gP={_A:e=>e,_R:e=>e},O_=class e{runAll;target;[J_]=gP;constructor(t,r){this.runAll=t,this.target=r}[F](){return K(this,this.target?w(this.target):Qs(this))}[R](t){return this.target?yP(t)&&C(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Dr(t))}pipe(){return O(this,arguments)}},yP=e=>k(e,J_);var We=l(3,(e,t,r)=>rn(fs(Bt(t),cs(t,r)),()=>e,o=>cs(t,o))),ot=l(3,(e,t,r)=>He(t,o=>We(e,t,r(o)))),Te=(e,t)=>ds(e,{differ:ol(),fork:t?.fork??$,join:t?.join}),Y_=e=>{let t=sh();return ds(e,{differ:t,fork:t.empty})},bP=e=>{let t=ih(ol());return ds(e,{differ:t,fork:t.empty})},Al=e=>{let t=nh();return ds(e,{differ:t,fork:t.empty})},ds=(e,t)=>({[hP]:dP,initial:e,diff:(r,o)=>t.differ.diff(r,o),combine:(r,o)=>t.differ.combine(r,o),patch:r=>o=>t.differ.patch(r,o),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return O(this,arguments)}}),Q_=e=>ds(e,{differ:hh,fork:hh.empty}),dt=W(Symbol.for("effect/FiberRef/currentContext"),()=>Al(Ct())),pn=W(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Te(0)),Il=W(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Te(2048)),fn=W(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Te(Kn())),Dh=W(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Te(Nh)),Pl=W(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Te(Ur())),qh=l(2,(e,t)=>We(e,pn,t)),Z_=l(2,(e,t)=>We(e,Il,t)),Nl=W(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Te("unbounded")),Hh=W(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Te(!0)),Wh=W(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Te(_(Lh))),X_=l(2,(e,t)=>We(e,Wh,t)),Eo=W(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>bP(zt())),eE=Bt(Eo),$c=W(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Te(S(),{fork:()=>S(),join:(e,t)=>e})),xs=W(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Te(Sr,{fork:()=>Sr,join:(e,t)=>e})),Bh=W(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>Te(!0)),Ai=W(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>Te(!0)),Qc=W(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>Te(Kn())),Ll=W(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>Te(Lt())),Dl=Symbol.for("effect/Scope"),ql=Symbol.for("effect/CloseableScope"),Hl=(e,t)=>e.addFinalizer(()=>Ee(t)),gs=(e,t)=>e.addFinalizer(t),Oo=(e,t)=>e.close(t),ys=(e,t)=>e.fork(t);var Wl=function(){class e extends globalThis.Error{commit(){return J(this)}toJSON(){return{...this}}[U](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?en(Zo(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,Jf),e}(),bs=(e,t)=>{class r extends Wl{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},v_=Symbol.for("effect/Cause/errors/RuntimeException"),SP=bs({[v_]:v_},"RuntimeException");var Ah=Symbol.for("effect/Cause/errors/InterruptedException"),v4=bs({[Ah]:Ah},"InterruptedException"),tE=e=>k(e,Ah),C_=Symbol.for("effect/Cause/errors/IllegalArgument"),Zc=bs({[C_]:C_},"IllegalArgumentException");var Ih=Symbol.for("effect/Cause/errors/NoSuchElement"),ir=bs({[Ih]:Ih},"NoSuchElementException"),rE=e=>k(e,Ih),k_=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),C4=bs({[k_]:k_},"InvalidPubSubCapacityException"),w_=Symbol.for("effect/Cause/errors/ExceededCapacityException"),k4=bs({[w_]:w_},"ExceededCapacityException");var M_=Symbol.for("effect/Cause/errors/Timeout"),_P=bs({[M_]:M_},"TimeoutException"),oE=e=>new _P(`Operation timed out before the specified duration of '${Am(e)}' elapsed`);var R_=Symbol.for("effect/Cause/errors/UnknownException"),mn=function(){class e extends Wl{cause;_tag="UnknownException";error;constructor(r,o){super(o??"An unknown error occurred",{cause:r}),this.cause=r,this.error=r}}return Object.assign(e.prototype,{[R_]:R_,name:"UnknownException"}),e}();var Xc=e=>ue(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),Uh=e=>e._tag==="Failure",Bl=e=>e._tag==="Success";var nE=l(2,(e,t)=>{switch(e._tag){case Ne:return ie(e.effect_instruction_i0);case Le:return xe(t)}}),ea=e=>nE(e,void 0);var hn=(e,t)=>EP(e,t?.parallel?wt:Ue),Ul=e=>ie(ht(e));var ta=e=>ie(Zo(e)),ie=e=>{let t=new _l(Ne);return t.effect_instruction_i0=e,t},sE=l(2,(e,t)=>{switch(e._tag){case Ne:return ie(e.effect_instruction_i0);case Le:return t(e.effect_instruction_i0)}});var iE=e=>m(e,sE($));var jl=e=>ie(Kt(e)),bl=l(2,(e,t)=>{switch(e._tag){case Ne:return ie(e.effect_instruction_i0);case Le:return xe(t(e.effect_instruction_i0))}});var Ii=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Ne:return t(e.effect_instruction_i0);case Le:return r(e.effect_instruction_i0)}}),Ss=l(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case Ne:return t(e.effect_instruction_i0);case Le:return r(e.effect_instruction_i0)}}),xe=e=>{let t=new El(Le);return t.effect_instruction_i0=e,t},Yt=xe(void 0);var ra=l(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case Ne:switch(t._tag){case Le:return ie(e.effect_instruction_i0);case Ne:return ie(r(e.effect_instruction_i0,t.effect_instruction_i0))}case Le:switch(t._tag){case Le:return xe(o(e.effect_instruction_i0,t.effect_instruction_i0));case Ne:return ie(t.effect_instruction_i0)}}}),EP=(e,t)=>{let r=Dr(e);return rt(r)?m(nt(r),tr(m(Ze(r),bl(Re)),(o,n)=>m(o,ra(n,{onSuccess:(s,i)=>m(s,Qe(i)),onFailure:t}))),bl(Lr),bl(o=>rr(o)),_):S()},oa=e=>({[x_]:g_,state:Wr(y_([])),blockingOn:e,pipe(){return O(this,arguments)}}),Rt=()=>x(cn,e=>cE(e)),cE=e=>E(()=>oa(e)),ct=e=>qe(t=>{let r=Dt(e.state);switch(r._tag){case Gc:return t(r.effect);case is:return r.joiners.push(t),OP(e,t)}},e.blockingOn),jh=l(2,(e,t)=>Jr(t,e)),na=l(2,(e,t)=>E(()=>{let r=Dt(e.state);switch(r._tag){case Gc:return!1;case is:{nr(e.state,Rh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t);return!0}}})),zh=l(2,(e,t)=>na(e,t));var _s=l(2,(e,t)=>na(e,Q(t)));var aE=e=>x(cn,t=>na(e,Ml(t)));var sa=l(2,(e,t)=>na(e,y(t)));var ia=(e,t)=>{let r=Dt(e.state);if(r._tag===is){nr(e.state,Rh(t));for(let o=0,n=r.joiners.length;o<n;o++)r.joiners[o](t)}},OP=(e,t)=>E(()=>{let r=Dt(e.state);if(r._tag===is){let o=r.joiners.indexOf(t);o>=0&&r.joiners.splice(o,1)}}),vP=Bt(dt),cr=()=>vP;var ar=e=>x(cr(),e),Cr=l(2,(e,t)=>We(dt,t)(e)),zl=l(2,(e,t)=>ot(dt,r=>Hn(r,t))(e)),Es=l(2,(e,t)=>ar(r=>Cr(e,t(r)))),uE=e=>{let t=e.getFiberRef(dt).unsafeMap.get(_r.key);return t!==void 0&&t._tag==="Span"?_(t):S()},CP={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:S(),context:Ct(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Yt},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},lE=e=>{let t=Object.create(CP);return t.name=e,t};var Os=ct;var pE=zh;var fE=aE;var Gh=oa;u();var mE=iE;var hE=xe;u();var dE=Symbol.for("effect/MutableHashMap"),kP={[dE]:dE,[Symbol.iterator](){return new Kh(this)},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Kh=class e{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let t=this.referentialIterator.next();return t.done?(this.bucketIterator=new Jh(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new e(this.self)}},Jh=class{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}},vs=()=>{let e=Object.create(kP);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e};var ze=l(2,(e,t)=>{if(Zs(t)===!1)return e.referential.has(t)?_(e.referential.get(t)):S();let r=t[F](),o=e.buckets.get(r);return o===void 0?S():wP(e,o,t)}),wP=(e,t,r,o=!1)=>{for(let n=0,s=t.length;n<s;n++)if(r[R](t[n][0])){let i=t[n][1];return o&&(t.splice(n,1),e.bucketsSize--),_(i)}return S()},kr=l(2,(e,t)=>j(ze(e,t))),Ut=l(3,(e,t,r)=>{if(Zs(t)===!1)return e.referential.set(t,r),e;let o=t[F](),n=e.buckets.get(o);return n===void 0?(e.buckets.set(o,[[t,r]]),e.bucketsSize++,e):(xE(e,n,t),n.push([t,r]),e.bucketsSize++,e)}),xE=(e,t,r)=>{for(let o=0,n=t.length;o<n;o++)if(r[R](t[o][0])){t.splice(o,1),e.bucketsSize--;return}};var Cs=l(2,(e,t)=>{if(Zs(t)===!1)return e.referential.delete(t),e;let r=t[F](),o=e.buckets.get(r);return o===void 0||(xE(e,o,t),o.length===0&&e.buckets.delete(r)),e});var Gl=e=>e.referential.size+e.bucketsSize;u();u();var gE=Symbol.for("effect/MutableList"),MP={[gE]:gE,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();let r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},RP=e=>({value:e,removed:!1,prev:void 0,next:void 0}),yE=()=>{let e=Object.create(MP);return e.head=void 0,e.tail=void 0,e._length=0,e};var bE=e=>Yh(e)===0,Yh=e=>e._length;var SE=l(2,(e,t)=>{let r=RP(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),_E=e=>{let t=e.head;if(t!==void 0)return FP(e,t),t.value};var FP=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var OE=Symbol.for("effect/MutableQueue"),Qh=Symbol.for("effect/mutable/MutableQueue/Empty"),TP={[OE]:OE,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return te(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},AP=e=>{let t=Object.create(TP);return t.queue=yE(),t.capacity=e,t};var vE=()=>AP(void 0);var CE=l(2,(e,t)=>{let r=Yh(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(SE(t)(e.queue),!0)});var kE=l(2,(e,t)=>bE(e.queue)?t:_E(e.queue));u();u();u();var IP="effect/Clock",Zh=Symbol.for(IP),Qt=vt("effect/Clock"),PP=2**31-1,ME={unsafeSchedule(e,t){let r=qr(t);if(r>PP)return oo;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},RE=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));let t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),NP=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return RE;let t=RE()-e.bigint();return()=>t+e.bigint()}(),Xh=class{[Zh]=Zh;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return NP()}currentTimeMillis=E(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=E(()=>this.unsafeCurrentTimeNanos());scheduler(){return y(ME)}sleep(t){return qe(r=>{let o=ME.unsafeSchedule(()=>r(B),t);return Ee(E(o))})}},ed=()=>new Xh;u();u();u();var dn=rb;u();var FE=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");u();u();var rd="And",od="Or",nd="InvalidData",sd="MissingData",id="SourceUnavailable",cd="Unsupported";var WP="effect/ConfigError",AE=Symbol.for(WP),Pi={_tag:"ConfigError",[AE]:AE},ad=(e,t)=>{let r=Object.create(Pi);return r._op=rd,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},ud=(e,t)=>{let r=Object.create(Pi);return r._op=od,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},BP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Pi);return o._op=nd,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o},vo=(e,t,r={pathDelim:"."})=>{let o=Object.create(Pi);return o._op=sd,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o},UP=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(Pi);return n._op=id,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${m(this.path,ao(o.pathDelim))}: "${this.message}")`}}),n},jP=(e,t,r={pathDelim:"."})=>{let o=Object.create(Pi);return o._op=cd,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${m(this.path,ao(r.pathDelim))}: "${this.message}")`}}),o};var xn=l(2,(e,t)=>{switch(e._op){case rd:return ad(xn(e.left,t),xn(e.right,t));case od:return ud(xn(e.left,t),xn(e.right,t));case nd:return BP([...t,...e.path],e.message);case sd:return vo([...t,...e.path],e.message);case id:return UP([...t,...e.path],e.message,e.cause);case cd:return jP([...t,...e.path],e.message)}});u();var PE={_tag:"Empty"};var Kl=l(2,(e,t)=>{let r=Ac(t),o=e;for(;Tc(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=ho(n.first,ho(n.second,r.tail));break}case"MapName":{o=Pr(o,n.f),r=r.tail;break}case"Nested":{o=ci(o,n.name),r=r.tail;break}case"Unnested":{if(m($o(o),im(n.name)))o=Ar(o),r=r.tail;else return yt(vo(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return Ve(o)});u();var NE="Constant",LE="Fail",DE="Fallback",qE="Described",HE="Lazy",WE="MapOrFail",BE="Nested",UE="Primitive",jE="Sequence",zE="HashMap",GE="ZipWith";var Jl=(e,t)=>[...e,...t],$P="effect/ConfigProvider",$E=Symbol.for($P),Ni=vt("effect/ConfigProvider"),VP="effect/ConfigProviderFlat",VE=Symbol.for(VP),KP=e=>({[$E]:$E,pipe(){return O(this,arguments)},...e}),JP=e=>({[VE]:VE,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),YP=e=>KP({load:t=>x(ur(e,zt(),t,!1),r=>Ke($o(r),{onNone:()=>J(vo(zt(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),KE=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=a=>m(a,ao(t)),n=a=>a.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return YP(JP({load:(a,p,f=!0)=>{let h=o(a),d=s(),g=h in d?_(d[h]):S();return m(g,un(()=>vo(a,`Expected ${h} to exist in the process context`)),x(b=>tN(b,a,p,r,f)))},enumerateChildren:a=>E(()=>{let p=s(),d=Object.keys(p).map(g=>n(g.toUpperCase())).filter(g=>{for(let b=0;b<a.length;b++){let M=m(a,um(b)),T=g[b];if(T===void 0||M!==T)return!1}return!0}).flatMap(g=>g.slice(a.length,a.length+1));return ju(d)}),patch:PE}))};var QP=(e,t,r,o)=>{let n=mm(r.length,a=>a>=o.length?S():_([e(a),a+1])),s=mm(o.length,a=>a>=r.length?S():_([t(a),a+1])),i=Jl(r,n),c=Jl(o,s);return[i,c]},ZP=(e,t)=>{let r=t;if(r._tag==="Nested"){let o=e.slice();for(;r._tag==="Nested";)o.push(r.name),r=r.config;return o}return e},ur=(e,t,r,o)=>{let n=r;switch(n._tag){case NE:return y(Ot(n.value));case qE:return I(()=>ur(e,t,n.config,o));case LE:return J(vo(t,n.message));case DE:return m(I(()=>ur(e,t,n.first,o)),Er(s=>n.condition(s)?m(ur(e,t,n.second,o),Er(i=>J(ud(s,i)))):J(s)));case HE:return I(()=>ur(e,t,n.config(),o));case WE:return I(()=>m(ur(e,t,n.original,o),x(it(s=>m(n.mapOrFail(s),un(xn(ZP(t,n.original))))))));case BE:return I(()=>ur(e,Jl(t,Ot(n.name)),n.config,o));case UE:return m(Kl(t,e.patch),x(s=>m(e.load(s,n,o),x(i=>{if(i.length===0){let c=m(Ou(s),De(()=>"<n/a>"));return J(vo([],`Expected ${n.description} with name ${c}`))}return y(i)}))));case jE:return m(Kl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(oN),x(i=>i.length===0?I(()=>v(ur(e,s,n.config,!0),Ot)):m(it(i,c=>ur(e,xb(t,`[${c}]`),n.config,!0)),v(c=>{let a=vu(c);return a.length===0?Ot(zt()):Ot(a)}))))));case zE:return I(()=>m(Kl(t,e.patch),x(s=>m(e.enumerateChildren(s),x(i=>m(i,it(c=>ur(e,Jl(s,Ot(c)),n.valueConfig,o)),v(c=>c.length===0?Ot(Kn()):m(rN(c),Pr(a=>OS(fm(ee(i),a)))))))))));case GE:return I(()=>m(ur(e,t,n.left,o),Vr,x(s=>m(ur(e,t,n.right,o),Vr,x(i=>{if(co(s)&&co(i))return J(ad(s.left,i.left));if(co(s)&&ii(i))return J(s.left);if(ii(s)&&co(i))return J(i.left);if(ii(s)&&ii(i)){let c=m(t,ao(".")),a=XP(t,c),[p,f]=QP(a,a,m(s.right,Pr(Ve)),m(i.right,Pr(Ve)));return m(p,fm(f),it(([h,d])=>m(ps(h,d),v(([g,b])=>n.zip(g,b)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},XP=(e,t)=>r=>yt(vo(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var eN=(e,t)=>e.split(new RegExp(`\\s*${FE(t)}\\s*`)),tN=(e,t,r,o,n)=>n?m(eN(e,o),it(s=>r.parse(s.trim())),un(xn(t))):m(r.parse(e),Yc({onFailure:xn(t),onSuccess:Ot})),rN=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),oN=e=>m(it(e,sN),Yc({onFailure:()=>zt(),onSuccess:qn(dn)}),Vr,v(Su));var nN=/^(\[(\d+)\])$/,sN=e=>{let t=e.match(nN);if(t!==null){let r=t[2];return m(r!==void 0&&r.length>0?_(r):S(),er(iN))}return S()};var iN=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?S():_(t)};u();var JE=Symbol.for("effect/Console"),Co=vt("effect/Console"),YE={[JE]:JE,assert(e,...t){return E(()=>{console.assert(e,...t)})},clear:E(()=>{console.clear()}),count(e){return E(()=>{console.count(e)})},countReset(e){return E(()=>{console.countReset(e)})},debug(...e){return E(()=>{console.debug(...e)})},dir(e,t){return E(()=>{console.dir(e,t)})},dirxml(...e){return E(()=>{console.dirxml(...e)})},error(...e){return E(()=>{console.error(...e)})},group(e){return e?.collapsed?E(()=>console.groupCollapsed(e?.label)):E(()=>console.group(e?.label))},groupEnd:E(()=>{console.groupEnd()}),info(...e){return E(()=>{console.info(...e)})},log(...e){return E(()=>{console.log(...e)})},table(e,t){return E(()=>{console.table(e,t)})},time(e){return E(()=>console.time(e))},timeEnd(e){return E(()=>console.timeEnd(e))},timeLog(e,...t){return E(()=>{console.timeLog(e,...t)})},trace(...e){return E(()=>{console.trace(...e)})},warn(...e){return E(()=>{console.warn(...e)})},unsafe:console};u();var aN="effect/Random",ZE=Symbol.for(aN),Li=vt("effect/Random"),ld=class{seed;[ZE]=ZE;PRNG;constructor(t){this.seed=t,this.PRNG=new cu(t)}get next(){return E(()=>this.PRNG.number())}get nextBoolean(){return v(this.next,t=>t>.5)}get nextInt(){return E(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return v(this.next,o=>(r-t)*o+t)}nextIntBetween(t,r){return E(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return uN(t,r=>this.nextIntBetween(0,r))}},uN=(e,t)=>I(()=>m(E(()=>Array.from(e)),x(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return m(o,Ht(n=>m(t(n),v(s=>lN(r,n-1,s)))),le(Dr(r)))}))),lN=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},XE=e=>new ld(w(e));var fN=m(Ct(),Ce(Qt,ed()),Ce(Co,YE),Ce(Li,XE(Math.random())),Ce(Ni,KE()),Ce(Gr,__)),ye=W(Symbol.for("effect/DefaultServices/currentServices"),()=>Al(fN)),eO=e=>{let t=st(e);return ca(r=>r.sleep(t))},ca=e=>He(ye,t=>e(Be(t,Qt))),tO=ca(e=>e.currentTimeMillis),rO=ca(e=>e.currentTimeNanos),oO=l(2,(e,t)=>ot(ye,Ce(Qt,t))(e)),nO=l(2,(e,t)=>ot(ye,Ce(Ni,t))(e)),sO=e=>He(ye,t=>e(Be(t,Ni)));var Yl=e=>He(ye,t=>e(Be(t,Li))),iO=l(2,(e,t)=>ot(ye,Ce(Li,t))(e));var Ql=e=>He(ye,t=>e(Be(t,Gr))),cO=l(2,(e,t)=>ot(ye,Ce(Gr,t))(e));var pd=eO,Zl=tO,aO=rO,uO=ca,lO=Qt;u();u();function pO(e){return new Zr(e)}function fO(){return pO(new Map)}var md=Symbol.for("effect/FiberRefs"),Zr=class{locals;[md]=md;constructor(t){this.locals=t}pipe(){return O(this,arguments)}},mN=(e,t,r,o=!1)=>{let n=e,s=t,i=r,c=o,a;for(;a===void 0;)if(bt(s)&&bt(i)){let p=St(s)[0],f=Ar(s),h=St(i)[0],d=St(i)[1],g=Ar(i);p.startTimeMillis<h.startTimeMillis?(i=g,c=!0):p.startTimeMillis>h.startTimeMillis?s=f:p.id<h.id?(i=g,c=!0):p.id>h.id?s=f:a=[d,c]}else a=[n.initial,!0];return a},Xl=l(3,(e,t,r)=>{let o=new Map(e.locals);return r.locals.forEach((n,s)=>{let i=n[0][1];if(!n[0][0][R](t)){if(!o.has(s)){if(C(i,s.initial))return;o.set(s,[[t,s.join(s.initial,i)]]);return}let c=o.get(s),[a,p]=mN(s,c,n);if(p){let f=s.diff(a,i),h=c[0][1],d=s.join(h,s.patch(f)(h));if(!C(h,d)){let g,b=c[0][0];b[R](t)?g=[[b,d],...c.slice(1)]:g=[[t,d],...c],o.set(s,g)}}}}),new Zr(o)}),dd=l(2,(e,t)=>{let r=new Map;return mO(e,r,t),new Zr(r)}),mO=(e,t,r)=>{e.locals.forEach((o,n)=>{let s=o[0][1],i=n.patch(n.fork)(s);C(s,i)?t.set(n,o):t.set(n,[[r,i],...o])})},hO=e=>ju(e.locals.keys()),dO=e=>Ht(hO(e),t=>cs(t,ks(e,t))),aa=l(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new Zr(r)}),qi=l(2,(e,t)=>e.locals.has(t)?_(St(e.locals.get(t))[1]):S()),ks=l(2,(e,t)=>m(qi(e,t),De(()=>t.initial))),Hi=l(2,(e,{fiberId:t,fiberRef:r,value:o})=>{if(e.locals.size===0)return new Zr(new Map([[r,[[t,o]]]]));let n=new Map(e.locals);return hd(n,t,r,o),new Zr(n)}),hd=(e,t,r,o)=>{let n=e.get(r)??[],s;if(bt(n)){let[i,c]=St(n);if(i[R](t)){if(C(c,o))return;s=[[t,o],...n.slice(1)]}else s=[[t,o],...n]}else s=[[t,o]];e.set(r,s)},xO=l(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new Zr(new Map(t));let o=new Map(e.locals);return r!==void 0&&mO(e,o,r),t.forEach(([n,s])=>{s.length===1?hd(o,s[0][0],n,s[0][1]):s.forEach(([i,c])=>{hd(o,i,n,c)})}),new Zr(o)});var gd=qi,gO=ks,yO=Xl,bO=dO;var SO=xO;var _O=fO;u();var hN=U_,yd=j_,bd=z_,Sd=G_,_d=Nh,Ed=Lh,Od=$_,dN=V_;var xN=m(dn,ob(e=>e.ordinal));var EO=om(xN);var OO=e=>{switch(e){case"All":return hN;case"Debug":return Ed;case"Error":return bd;case"Fatal":return yd;case"Info":return _d;case"Trace":return Od;case"None":return dN;case"Warning":return Sd}};u();u();var vO=(e,t)=>({label:e,startTime:t}),CO=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var kO=vO,wO=CO;u();u();u();var Xr=Symbol.for("effect/Readable");var QK={[Xr]:Xr,pipe(){return O(this,arguments)}};var tp=Symbol.for("effect/Ref"),Md={_A:e=>e},wd=class{ref;[tp]=Md;[Xr];constructor(t){this.ref=t,this[Xr]=Xr,this.get=E(()=>Dt(this.ref))}get;modify(t){return E(()=>{let r=Dt(this.ref),[o,n]=t(r);return r!==n&&nr(n)(this.ref),o})}pipe(){return O(this,arguments)}},rp=e=>new wd(Wr(e)),ws=e=>E(()=>rp(e)),lr=e=>e.get,ko=l(2,(e,t)=>e.modify(()=>[void 0,t])),MO=l(2,(e,t)=>e.modify(r=>[r,t]));var op=l(2,(e,t)=>e.modify(t));var ua=l(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var la=ws,sp=lr,RO=MO;var FO=op;var TO=ua;u();var AO=Ql;u();var PO="Empty",NO="Add",LO="Remove",DO="Update",qO="AndThen",HO={_tag:PO},pa=(e,t)=>{let r=new Map(e.locals),o=HO;for(let[n,s]of t.locals.entries()){let i=St(s)[1],c=r.get(n);if(c!==void 0){let a=St(c)[1];C(a,i)||(o=ip({_tag:DO,fiberRef:n,patch:n.diff(a,i)})(o))}else o=ip({_tag:NO,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=ip({_tag:LO,fiberRef:n})(o);return o},ip=l(2,(e,t)=>({_tag:qO,first:e,second:t})),cp=l(3,(e,t,r)=>{let o=r,n=Ot(e);for(;bt(n);){let s=St(n),i=Ar(n);switch(s._tag){case PO:{n=i;break}case NO:{o=Hi(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case LO:{o=aa(o,s.fiberRef),n=i;break}case DO:{let c=ks(o,s.fiberRef);o=Hi(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(c)}),n=i;break}case qO:{n=ci(s.first)(ci(s.second)(i));break}}}return o});u();var BO="effect/MetricLabel",Fd=Symbol.for(BO),Td=class{key;value;[Fd]=Fd;_hash;constructor(t,r){this.key=t,this.value=r,this._hash=ce(BO+this.key+this.value)}[F](){return this._hash}[R](t){return yN(t)&&this.key===t.key&&this.value===t.value}pipe(){return O(this,arguments)}},Ms=(e,t)=>new Td(e,t),yN=e=>k(e,Fd);var UO=l(e=>ue(e[0]),function(){let e=arguments;return ot(e[0],fn,typeof e[1]=="string"?br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>br(r,o,n),t))}),lp=e=>v(e,_),jO=e=>un(e,_),Id=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),E(()=>{try{return t()}catch(o){throw T_(Zo(r?r(o):new mn(o)))}})},zO=l(3,(e,t,r)=>Er(e,o=>k(o,t)&&o[t]===r.failure?r.onFailure(o):J(o))),GO=l(2,(e,t)=>$r(e,r=>{let o=Xo(r,n=>ki(n)?_(n):S());switch(o._tag){case"None":return Q(r);case"Some":return t(o.value.defect)}})),$O=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return Q(r);case"Some":return o.value}},onSuccess:y})),VO=l(2,(e,t)=>$r(e,r=>{let o=Xo(r,n=>ki(n)?_(n):S());switch(o._tag){case"None":return Q(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:Q(r)}}})),KO=l(3,(e,t,r)=>Kc(e,In(t),r)),JO=l(2,(e,t)=>{let r;return Kc(e,o=>(r??=Object.keys(t),k(o,"_tag")&&su(o._tag)&&r.includes(o._tag)),o=>t[o._tag](o))}),YO=e=>Jc(e,{onFailure:$,onSuccess:()=>Sr}),eo=uO,QO=eo(y),ZO=l(2,(e,t)=>ne(pd(t),e)),pp=e=>re((t,r)=>e({id:t.id(),status:r,interruptors:Uc(t.getFiberRef(xs))})),XO=pp(e=>zn(e.interruptors)>0?wl:B),ev=pp(y),Wi=e=>da(e,fp,pa),bN=e=>da(e,ps(fp,Ri),([t,r],[o,n])=>[pa(t,o),sr(r,n)]),tv=y({}),rv=nu(v,x),ov=ou(v),nv=ru(v),sv=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?(o.push(c),y(!0)):t(c,a))}return v(s,()=>o)})),iv=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>v(p?t(c,a):y(!1),f=>(f||o.push(c),f)))}return v(s,()=>o)})),cv=e=>v(cr(),e),Pd=e=>us(e,()=>x(Yr(),()=>Pd(e))),av=l(2,(e,t)=>v(it(e,$),ai(t))),uv=l(3,(e,t,r)=>fa(e,t,o=>nn(()=>r(o)))),lv=l(3,(e,t,r)=>fa(e,t,()=>on(r))),fa=l(3,(e,t,r)=>x(e,o=>t(o)?y(o):r(o))),pv=l(3,(e,t,r)=>I(()=>t(e)?y(e):J(r(e)))),fv=l(e=>ue(e[0]),(e,t,r)=>fa(e,t,o=>r===void 0?J(new ir):Or(()=>r(o)))),mv=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(S()):hv(r,0,t,o.value)})),hv=(e,t,r,o)=>x(r(o,t),n=>{if(n)return y(_(o));let s=e.next();return s.done?y(S()):hv(e,t+1,r,s.value)}),dv=e=>I(()=>{let t=Dr(e);return rt(t)?m(nt(t),tr(Ze(t),(r,o)=>us(r,()=>o))):nn(()=>new Zc("Received an empty collection of effects"))}),xv=l(2,(e,t)=>an(t(an(e)))),ma=l(2,(e,t)=>Xe(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),gv=l(2,(e,t)=>I(()=>yv(e[Symbol.iterator](),0,t))),yv=(e,t,r)=>{let o=e.next();return o.done?y(!0):x(r(o.value,t),n=>n?yv(e,t+1,r):y(n))},Nd=e=>{let t=x(x(e,()=>Yr()),()=>t);return t},bv=function(){let e;return arguments.length===1?e=arguments[0]:e=arguments[1].bind(arguments[0]),I(()=>{let t=e(m),r=Pe(()=>t.next()),o=n=>n.done?y(n.value):x(Ys(n.value),s=>o(Pe(()=>t.next(s))));return o(r)})},fp=re(e=>y(e.getFiberRefs())),Sv=e=>x(e,t=>{let o=t[Symbol.iterator]().next();return o.done?J(new ir):y(o.value)}),Ld=e=>ma(e,{onFailure:Ho,onSuccess:Ho}),_v=e=>Se(e,{onFailure:t=>qd(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>B}),Ev=e=>hp((t,r)=>yO(r,t,e)),Ov=e=>ma(e,{onFailure:qo,onSuccess:oo}),vv=e=>ma(e,{onFailure:oo,onSuccess:qo}),Dd=(e,t)=>I(()=>t.while(e)?x(t.body(e),r=>Dd(r,t)):y(e)),wo=e=>(...t)=>{let r=gr(e),o;for(let n=0,s=t.length;n<s;n++){let i=t[n];fl(i)&&(o!==void 0?o=Ue(o,i):o=i,t=[...t.slice(0,n),...t.slice(n+1)],n--)}return o===void 0&&(o=Sr),re(n=>(n.log(t,o,r),B))},Cv=wo(),kv=wo(Od),qd=wo(Ed),wv=wo(_d),Mv=wo(Sd),Rv=wo(bd),Fv=wo(yd),Tv=l(2,(e,t)=>x(Zl,r=>ot(e,Pl,Xu(kO(t,r))))),Av=Bt(fn),Iv=(e,t)=>t.discard?Nv(e,t.while,t.step,t.body):v(Pv(e,t.while,t.step,t.body),ee),Pv=(e,t,r,o)=>I(()=>t(e)?x(o(e),n=>v(Pv(r(e),t,r,o),Xu(n))):E(()=>Ur())),Nv=(e,t,r,o)=>I(()=>t(e)?x(o(e),()=>Nv(r(e),t,r,o)):B),Lv=l(3,(e,t,r)=>I(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,c=0;for(;!(i=o.next()).done;){let a=c++,p=i.value;s=x(s,f=>v(r(f,p,a),([h,d])=>(n.push(d),h)))}return v(s,a=>[a,n])})),Bi=l(2,(e,t)=>Se(e,{onFailure:r=>sn(()=>t(r)),onSuccess:y})),Hd=e=>m(Rt(),x(t=>m(bN(e),Jr(t),Wd,v(r=>ne(r,m(ct(t),x(([o,n])=>le(ps(Rs(o[0]),ln(o[1])),n)))))))),Dv=e=>Xe(e,{onFailure:t=>y(t),onSuccess:y}),mp=e=>v(e,t=>!t),qv=e=>x(e,t=>{switch(t._tag){case"None":return B;case"Some":return J(new ir)}}),Wd=e=>v(la(!0),t=>Ee(Fi(e,RO(t,!1)))),Hv=e=>Xe(e,{onFailure:()=>y(S()),onSuccess:t=>y(_(t))}),Wv=l(2,(e,t)=>us(e,()=>Or(t))),Bv=l(2,(e,t)=>us(e,()=>E(t))),Uv=e=>Se(e,{onFailure:t=>{let r=ee(Bc(t));return r.length===0?Q(t):J(r)},onSuccess:y}),Rs=e=>hp((t,r)=>m(e,cp(t,r))),jv=e=>e.length>=1?qe((t,r)=>{e(r).then(o=>t(xe(o)),o=>t(Ul(o)))}):qe(t=>{e().then(r=>t(xe(r)),r=>t(Ul(r)))}),Ui=l(3,(e,t,r)=>ar(o=>Cr(e,Ce(o,t,r)))),zv=l(3,(e,t,r)=>ar(o=>x(r,n=>Cr(e,m(o,Ce(t,n)))))),Gv=Yl(y),$v=l(3,(e,t,r)=>ee(e).reduce((o,n,s)=>x(o,i=>r(i,n,s)),y(t))),Vv=l(3,(e,t,r)=>ee(e).reduceRight((o,n,s)=>x(o,i=>r(n,i,s)),y(t))),Kv=l(3,(e,t,r)=>x(E(()=>e[Symbol.iterator]()),o=>Jv(o,0,t,r.while,r.body))),Jv=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?x(n(r,s.value,t),i=>Jv(e,t+1,i,o,n)):y(r)},Yv=l(2,(e,t)=>I(()=>Qv(e,t))),Qv=(e,t)=>x(e,r=>t<=0?y(r):ne(Yr(),Qv(e,t-1))),Zv=e=>Se(e,{onFailure:J,onSuccess:y}),Xv=e=>I(()=>bO(e)),Fs=pd,ha=y(S()),e0=e=>y(_(e)),da=l(3,(e,t,r)=>x(t,o=>x(e,n=>v(t,s=>[r(o,s),n])))),t0=l(e=>ue(e[0]),function(){return Bd(arguments[0],typeof arguments[1]=="string"?[Ms(arguments[1],arguments[2])]:Object.entries(arguments[1]).map(([e,t])=>Ms(e,t)))}),Bd=l(2,(e,t)=>ot(e,Eo,r=>Ir(r,t))),r0=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>p?y(!0):(o.push(c),t(c,a)))}return v(s,()=>o)})),o0=l(2,(e,t)=>I(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let c=n.value,a=i++;s=x(s,p=>m(p?t(c,a):y(!1),v(f=>(f&&o.push(c),f))))}return v(s,()=>o)})),n0=l(2,(e,{onFailure:t,onSuccess:r})=>Se(e,{onFailure:o=>{let n=zr(o);switch(n._tag){case"Left":return ne(t(n.left),Q(o));case"Right":return Q(o)}},onSuccess:o=>le(r(o),o)})),s0=l(2,(e,t)=>$r(e,r=>Ke(wh(r),{onNone:()=>Q(r),onSome:o=>ne(t(o),Q(r))}))),Ud=l(2,(e,t)=>Se(e,{onFailure:r=>{let o=zr(r);switch(o._tag){case"Left":return ne(t(o.left),Q(r));case"Right":return Q(r)}},onSuccess:y})),i0=l(3,(e,t,r)=>Ud(e,o=>In(o,t)?r(o):B)),c0=l(2,(e,t)=>Se(e,{onFailure:r=>ne(t(r),Q(r)),onSuccess:y})),a0=e=>jd(e,aO),jd=l(2,(e,t)=>da(e,t,(r,o)=>kc(o-r))),SN=AO,u0=SN(y),zd=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?qe((o,n)=>{try{t(n).then(s=>o(xe(s)),s=>o(J(r?r(s):new mn(s))))}catch(s){o(J(r?r(s):new mn(s)))}}):qe(o=>{try{t().then(n=>o(xe(n)),n=>o(J(r?r(n):new mn(n))))}catch(n){o(J(r?r(n):new mn(n)))}})},l0=l(2,(e,t)=>x(e,r=>Id({try:()=>t.try(r),catch:t.catch}))),p0=l(2,(e,t)=>x(e,r=>zd({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),f0=l(2,(e,t)=>I(()=>t()?ha:lp(e))),m0=l(2,(e,t)=>x(t,r=>r?ha:lp(e))),h0=e=>Bi(e,Mh),hp=e=>re(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),B)),d0=l(3,(e,t,r)=>Es(e,o=>Ce(o,t,r(li(o,t))))),dp=l(2,(e,t)=>I(()=>t()?v(e,_):y(S()))),x0=l(3,(e,t,r)=>x(Bt(t),o=>r(o)?v(e,n=>[o,_(n)]):y([o,S()]))),g0=l(3,(e,t,r)=>x(sp(t),o=>r(o)?v(e,n=>[o,_(n)]):y([o,S()]))),y0=l(2,(e,t)=>t(e)),b0=(e,t)=>(...r)=>x(e,o=>t(o)(...r)),S0=(e,t)=>(...r)=>v(e,o=>t(o)(...r)),Gd=e=>new Proxy({},{get(t,r,o){return(...n)=>x(e,s=>s[r](...n))}}),$d=e=>new Proxy({},{get(t,r,o){return x(e,n=>ue(n[r])?n[r]:y(n[r]))}}),_0=e=>({functions:Gd(e),constants:$d(e)}),E0=e=>v(cr(),yr(e)),Vd=e=>x(cr(),yr(e)),O0=function(){let e=arguments;return Ld(x(Kd,t=>E(()=>{if(typeof e[0]=="string")t.attribute(e[0],e[1]);else for(let r in e[0])t.attribute(r,e[0][r])})))},v0=l(e=>ue(e[0]),function(){let e=arguments;return ot(e[0],Qc,typeof e[1]=="string"?br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>br(r,o,n),t))}),C0=Vd(_r),Kd=x(cr(),e=>{let t=e.unsafeMap.get(_r.key);return t!==void 0&&t._tag==="Span"?y(t):J(new ir)}),k0=l(e=>ue(e[0]),(e,t,r)=>ot(e,Ll,ku({_tag:"SpanLink",span:t,attributes:r??{}}))),w0=BigInt(0),xp=(e,t,r)=>{if(e.getFiberRef(Bh)===!1)return lE(t);let n=e.getFiberRef(dt),s=e.getFiberRef(ye),i=Be(s,Gr),c=Be(s,lO),a=e.getFiberRef(Ai),p=e.getFiberRefs(),f=gd(p,Qc),h=gd(p,Ll),d=r.parent?_(r.parent):r.root?S():yr(n,_r),g=h._tag==="Some"?r.links!==void 0?[...rr(h.value),...r.links??[]]:rr(h.value):r.links??zt(),b=i.span(t,d,r.context??Ct(),g,a?c.unsafeCurrentTimeNanos():w0,r.kind??"internal");return typeof r.captureStackTrace=="function"&&zc.set(b,r.captureStackTrace),f._tag==="Some"&&MS(f.value,(M,T)=>b.attribute(T,M)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([M,T])=>b.attribute(M,T)),b},M0=(e,t)=>(t=yo(t),re(r=>y(xp(r,e,t)))),R0=Bt(Qc),F0=Bt(Ll),Jd=(e,t,r,o)=>E(()=>{e.status._tag!=="Ended"&&(Uh(t)&&zc.has(e)&&e.attribute("code.stacktrace",zc.get(e)()),e.end(o?r.unsafeCurrentTimeNanos():w0,t))}),ap=(e,...t)=>{let r=yo(t.length===1?void 0:t[0]),o=t[t.length-1];return re(n=>{let s=xp(n,e,r),i=n.getFiberRef(Ai),c=Be(n.getFiberRef(ye),Qt);return _t(o(s),a=>Jd(s,a,c,i))})},up=l(2,(e,t)=>Ui(e,_r,t)),Yd=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=yo(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return ap(t,r,n=>up(o,n))}return o=>ap(t,r,n=>up(o,n))},T0=e=>function(){let t=e.captureStackTrace??!1;if(e.captureStackTrace!==!1){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let o=new Error;Error.stackTraceLimit=r;let n=!1;t=()=>{if(n!==!1)return n;if(o.stack)return n=o.stack.trim().split(`
`).slice(2).join(`
`).trim(),n}}return I(()=>{let r=typeof e.options=="function"?e.options.apply(null,arguments):e.options;return Yd(I(()=>Pe(()=>e.body.apply(this,arguments))),r.name,{...r,captureStackTrace:t})})},A0=e=>e==null?J(new ir):y(e),I0=e=>Er(v(e,_),t=>rE(t)?ha:J(t));u();u();var Qd=Kf;var P0=io;u();u();var L0="Sequential",D0="Parallel",_N="ParallelN",to={_tag:L0},q0={_tag:D0},H0=e=>({_tag:_N,parallelism:e}),Zd=e=>e._tag===L0,Xd=e=>e._tag===D0;var yp=to,bp=q0,Sp=H0;u();var Ts=pa;var As=cp;u();u();var Ep="effect/FiberStatus",gn=Symbol.for(Ep),_p="Done",B0="Running",U0="Suspended",EN=ce(`${Ep}-${_p}`),tx=class{[gn]=gn;_tag=_p;[F](){return EN}[R](t){return Op(t)&&t._tag===_p}},rx=class{runtimeFlags;[gn]=gn;_tag=B0;constructor(t){this.runtimeFlags=t}[F](){return m(w(Ep),D(w(this._tag)),D(w(this.runtimeFlags)),K(this))}[R](t){return Op(t)&&t._tag===B0&&this.runtimeFlags===t.runtimeFlags}},ox=class{runtimeFlags;blockingOn;[gn]=gn;_tag=U0;constructor(t,r){this.runtimeFlags=t,this.blockingOn=r}[F](){return m(w(Ep),D(w(this._tag)),D(w(this.runtimeFlags)),D(w(this.blockingOn)),K(this))}[R](t){return Op(t)&&t._tag===U0&&this.runtimeFlags===t.runtimeFlags&&C(this.blockingOn,t.blockingOn)}},j0=new tx,z0=e=>new rx(e),G0=(e,t)=>new ox(e,t),Op=e=>k(e,gn),$0=e=>e._tag===_p;var V0=j0,nx=z0,K0=G0;var J0=$0;u();var sC=Symbol.for("effect/Micro"),jt=Symbol.for("effect/Micro/runSymbol"),Q0=e=>typeof e=="object"&&e!==null&&sC in e,Z0=Symbol.for("effect/Micro/MicroCause"),vN={_E:$},xa=class extends globalThis.Error{_tag;traces;[Z0];constructor(t,r,o){let n=`MicroCause.${t}`,s,i,c;if(r instanceof globalThis.Error){s=`(${n}) ${r.name}`,i=r.message;let a=i.split(`
`).length;c=r.stack?`(${n}) ${r.stack.split(`
`).slice(0,a+3).join(`
`)}`:`${s}: ${i}`}else s=n,i=Bo(r,0),c=`${s}: ${i}`;o.length>0&&(c+=`
    ${o.join(`
    `)}`),super(i),this._tag=t,this.traces=o,this[Z0]=vN,this.name=s,this.stack=c}pipe(){return O(this,arguments)}toString(){return this.stack}[U](){return this.stack}},cx=class extends xa{error;constructor(t,r=[]){super("Fail",t,r),this.error=t}},CN=(e,t=[])=>new cx(e,t),ax=class extends xa{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},kN=(e,t=[])=>new ax(e,t),ux=class extends xa{constructor(t=[]){super("Interrupt","interrupted",t)}},wN=(e=[])=>new ux(e);var vp=yt(wN()),ya=Ve,MN=e=>yt(CN(e)),iC=e=>yt(kN(e));var RN=Symbol.for("effect/Micro/Env"),X0=Symbol.for("effect/Micro/EnvRef"),FN={[RN]:{_R:$},pipe(){return O(this,arguments)}},fx=e=>{let t=Object.create(FN);return t.refs=e,t},cC=()=>{let e=new AbortController,t=Object.create(null);return t[kp.key]=e,t[Is.key]=e.signal,fx(t)},Ps=l(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),aC=l(3,(e,t,r)=>{let o=Object.assign(Object.create(null),e.refs);return o[t.key]=r,fx(o)}),uC=l(2,(e,t)=>fx(t(Object.assign(Object.create(null),e.refs))));var TN={[X0]:X0},$i=(e,t)=>W(e,()=>{let r=Object.create(TN);return r.key=e,r.initial=t(),r}),kp=$i("effect/Micro/currentAbortController",()=>{}),Is=$i("effect/Micro/currentAbortSignal",()=>{}),lC=$i("effect/Micro/currentContext",()=>Ct()),AN=$i("effect/Micro/currentConcurrency",()=>"unbounded"),pC=$i("effect/Micro/currentMaxDepthBeforeYield",()=>2048),fC=$i("effect/Micro/currentInterruptible",()=>!0);var mC={...P0,_op:"Micro",[sC]:{_A:$,_E:$,_R:$},[Symbol.iterator](){return new tn(new Tr(this))}},zi=W("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:pC.initial})),IN=e=>{let t=Object.create(mC);return t[jt]=e,t},hC=(e,t)=>IN(function r(o,n){if(t&&o.refs[fC.key]!==!1&&o.refs[Is.key].aborted)return n(vp);if(zi.depth++,zi.depth===1&&(zi.maxDepthBeforeYield=Ps(o,pC)),zi.depth>=zi.maxDepthBeforeYield)DN(()=>r(o,n));else try{e(o,n)}catch(s){n(iC(s))}zi.depth--}),Mo=e=>hC(e,!0),ga=e=>Mo(function(t,r){r(e)});var lx=e=>ga(ya(e));var px=e=>Mo(function(t,r){r(ya(e()))});var Cp=e=>Mo(function(t,r){e()[jt](t,r)}),eC=lx(void 0);var PN=e=>Mo(function(t,r){let o=!1,n=e.length>1?new AbortController:void 0,s=Ps(t,Is),i;function c(){a(i?jN(HN(i,ga(vp))):ga(vp)),n!==void 0&&n.abort()}function a(p){o||(o=!0,s.removeEventListener("abort",c),p[jt](t,r))}i=n===void 0?e(a):e(a,n.signal),!o&&s.addEventListener("abort",c)});var Gi=W("effect/Micro/yieldState",()=>({tasks:[],working:!1})),NN=()=>{let e=Gi.tasks;Gi.tasks=[];for(let t=0,r=e.length;t<r;t++)e[t]()},LN="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),DN=e=>{Gi.tasks.push(e),Gi.working||(Gi.working=!0,LN(()=>{Gi.working=!1,NN()}))};var qN=l(2,(e,t)=>Mo(function(r,o){e[jt](r,function(n){o(n._tag==="Left"?n:ya(t(n.right)))})}));var dC=l(2,(e,t)=>Mo(function(r,o){e[jt](r,function(n){if(n._tag==="Left")return o(n);t(n.right)[jt](r,o)})}));var HN=l(2,(e,t)=>Mo(function(r,o){e[jt](r,function(n){if(n._tag==="Left")return o(n);if(Ps(r,Is).aborted)return o(vp);let s=Q0(t)?t:typeof t=="function"?t(n.right):t;Q0(s)?s[jt](r,o):o(ya(s))})}));var WN=e=>qN(e,t=>{}),BN=e=>Mo(function(t,r){e[jt](t,function(o){r(ya(o))})});function UN(e){let t=new AbortController,r=Ps(e,Is);function o(){t.abort(),r.removeEventListener("abort",o)}return r.addEventListener("abort",o),[uC(e,function(s){return s[kp.key]=t,s[Is.key]=t.signal,s}),o]}var sx=Symbol.for("effect/Micro/MicroScope");var tC=class e{[sx];state={_tag:"Open",finalizers:new Set};constructor(){this[sx]=sx}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return Cp(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),eC):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return Cp(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},dC(zN(r,o=>BN(o(t))),o=>WN(ga(tb(o))))}return eC})}get fork(){return px(()=>{let t=new e;if(this.state._tag==="Closed")return t.state=this.state,t;function r(o){return t.close(o)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(o=>px(()=>this.unsafeRemoveFinalizer(r))),t})}};var jN=e=>hC(function(t,r){let o=uC(t,function(n){return n[fC.key]=!1,n[Is.key]=new AbortController().signal,n});e[jt](o,r)},!1);var zN=(e,t,r)=>Mo(function(o,n){let s=r?.concurrency==="inherit"?Ps(o,AN):r?.concurrency??1,i=s==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,s),[c,a]=UN(o),p,f=Array.from(e),h=f.length,d=r?.discard?void 0:new Array(h),g=0,b=0,M=0,T=!1;function N(){for(T=!0;b<i&&g<h;){let z=g,ae=f[z];g++,b++;try{t(ae,z)[jt](c,function(_e){_e._tag==="Left"?p===void 0&&(p=_e,h=g,a()):d!==void 0&&(d[z]=_e.right),M++,b--,M===h?n(p??Ve(d)):!T&&b<i&&N()})}catch(_e){p=iC(_e),h=g,a()}}T=!1}N()});var ix=Symbol.for("effect/Micro/Handle");var rC=class{parentSignal;[ix];observers=new Set;_exit=void 0;_controller;isRoot;constructor(t,r){this.parentSignal=t,this[ix]=ix,this.isRoot=r!==void 0,this._controller=r??new AbortController,this.isRoot||t.addEventListener("abort",this.unsafeInterrupt)}unsafePoll(){return this._exit??null}unsafeInterrupt=()=>{this._controller.abort()};emit(t){this._exit||(this._exit=t,this.isRoot||this.parentSignal.removeEventListener("abort",this.unsafeInterrupt),this.observers.forEach(r=>r(t)),this.observers.clear())}addObserver(t){if(this._exit)return t(this._exit);this.observers.add(t)}removeObserver(t){this.observers.delete(t)}get await(){return Cp(()=>this._exit?lx(this._exit):PN(t=>{function r(o){t(lx(o))}return this.addObserver(r),px(()=>{this.removeObserver(r)})}))}get join(){return dC(this.await,ga)}get interrupt(){return Cp(()=>(this.unsafeInterrupt(),this.await))}};var GN=function(){class e extends globalThis.Error{[jt](r,o){o(MN(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[U](){let r=this.stack;return r?`${this.toString()}
${r.split(`
`).slice(1).join(`
`)}`:this.toString()}}return Object.assign(e.prototype,mC,jo),e}(),$N=function(){return class extends GN{constructor(e){super(),e&&Object.assign(this,e)}}}(),xC=e=>{class t extends $N{_tag=e}return t.prototype.name=e,t},oC=class extends xC("NoSuchElementException"){},nC=class extends xC("TimeoutException"){};u();var wp=class{buckets=[];scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},mx=class{maxNextTickBeforeTimer;running=!1;tasks=new wp;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Il)?t.getFiberRef(pn):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},yC=W(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new mx(2048)),Mp=class{tasks=new wp;deferred=!1;scheduleTask(t,r){this.deferred?yC.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Il)?t.getFiberRef(pn):!1}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var yn=W(Symbol.for("effect/FiberRef/currentScheduler"),()=>Te(yC)),bC=l(2,(e,t)=>We(e,yn,t));u();var Rp=W(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Te(new Map));u();var dx=(e,t,r,o)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return He(Nl,n=>n==="unbounded"?r():n>1?o(n):t());default:return e>1?o(e):t()}},ba=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return He(Nl,o=>o==="unbounded"||o>1?r():t());default:return e>1?r():t()}};u();u();u();var Fp="InterruptSignal",Tp="Stateful",Ap="Resume",Ip="YieldNow",Pp=e=>({_tag:Fp,cause:e}),Vi=e=>({_tag:Tp,onFiber:e}),Ns=e=>({_tag:Ap,effect:e}),SC=()=>({_tag:Ip});var JN="effect/FiberScope",Np=Symbol.for(JN),xx=class{[Np]=Np;fiberId=Vt;roots=new Set;add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},gx=class{fiberId;parent;[Np]=Np;constructor(t,r){this.fiberId=t,this.parent=r}add(t,r){this.parent.tell(Vi(o=>{o.addChild(r),r.addObserver(()=>{o.removeChild(r)})}))}},EC=e=>new gx(e.id(),e),bn=W(Symbol.for("effect/FiberScope/Global"),()=>new xx);var YN="effect/Fiber",Sa=Symbol.for(YN),_a={_E:e=>e,_A:e=>e},QN={[Sa]:_a,pipe(){return O(this,arguments)}},ZN="effect/Fiber",vC=Symbol.for(ZN);var yx=e=>e.await;var CC=e=>e.inheritAll;var kC=l(2,(e,t)=>e.interruptAsFork(t)),Sn=e=>fs(Mt(e.await),e.inheritAll);var n9={...QN,id:()=>Vt,await:ms,children:y([]),inheritAll:ms,poll:y(S()),interruptAsFork:()=>ms};var _n="effect/FiberCurrent";u();var XN="effect/Logger",MC=Symbol.for(XN),RC={_Message:e=>e,_Output:e=>e},Lp=e=>({[MC]:RC,log:e,pipe(){return O(this,arguments)}});var a9={[MC]:RC,log:Ho,pipe(){return O(this,arguments)}};var FC=Lp(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let c=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${Ju(o)}`].join(" "),f=db(s);for(let h=0;h<f.length;h++){let d=Bo(f[h]);d.length>0&&(p=p+" message=",p=bx(d,p))}if(t!=null&&t._tag!=="Empty"&&(p=p+" cause=",p=bx(en(t,{renderErrorCause:!0}),p)),Tc(i)){p=p+" ";let h=!0;for(let d of i)h?h=!1:p=p+" ",p=p+m(d,wO(c))}if(CS(e)>0){p=p+" ";let h=!0;for(let[d,g]of e)h?h=!1:p=p+" ",p=p+rL(d),p=p+"=",p=bx(Bo(g),p)}return p}),eL=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,tL=/^[^\s"=]+$/,bx=(e,t)=>t+(e.match(tL)?e:eL(e));var rL=e=>e.replace(/[\s="]/g,"_");var Ls={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},u9={None:[],All:[],Trace:[Ls.gray],Debug:[Ls.blue],Info:[Ls.green],Warning:[Ls.yellow],Error:[Ls.red],Fatal:[Ls.bgBrightRed,Ls.black]};var l9=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null&&process.stdout.isTTY===!0;var p9=typeof self=="object"&&self!==null&&typeof self.constructor=="function"&&self.constructor.name.includes("Worker");u();u();var TC="effect/MetricBoundaries",Sx=Symbol.for(TC),_x=class{values;[Sx]=Sx;constructor(t){this.values=t,this._hash=m(ce(TC),D(Nt(this.values)))}_hash;[F](){return this._hash}[R](t){return nL(t)&&C(this.values,t.values)}pipe(){return O(this,arguments)}},nL=e=>k(e,Sx),sL=e=>{let t=m(e,am(Re(Number.POSITIVE_INFINITY)),hm);return new _x(t)};var AC=e=>m(cm(e.count-1,t=>e.start*Math.pow(e.factor,t)),pi,sL);u();u();var cL="effect/MetricKeyType",Ea=Symbol.for(cL),LC="effect/MetricKeyType/Counter",Ex=Symbol.for(LC),DC="effect/MetricKeyType/Frequency",Ox=Symbol.for(DC),qC="effect/MetricKeyType/Gauge",vx=Symbol.for(qC),HC="effect/MetricKeyType/Histogram",Cx=Symbol.for(HC),WC="effect/MetricKeyType/Summary",kx=Symbol.for(WC),Oa={_In:e=>e,_Out:e=>e},wx=class{incremental;bigint;[Ea]=Oa;[Ex]=Ex;constructor(t,r){this.incremental=t,this.bigint=r,this._hash=ce(LC)}_hash;[F](){return this._hash}[R](t){return Rx(t)}pipe(){return O(this,arguments)}},aL=ce(DC),IC=class{preregisteredWords;[Ea]=Oa;[Ox]=Ox;constructor(t){this.preregisteredWords=t}[F](){return aL}[R](t){return Fx(t)}pipe(){return O(this,arguments)}},uL=ce(qC),PC=class{bigint;[Ea]=Oa;[vx]=vx;constructor(t){this.bigint=t}[F](){return uL}[R](t){return Tx(t)}pipe(){return O(this,arguments)}},Mx=class{boundaries;[Ea]=Oa;[Cx]=Cx;constructor(t){this.boundaries=t,this._hash=m(ce(HC),D(w(this.boundaries)))}_hash;[F](){return this._hash}[R](t){return Ax(t)&&C(this.boundaries,t.boundaries)}pipe(){return O(this,arguments)}},NC=class{maxAge;maxSize;error;quantiles;[Ea]=Oa;[kx]=kx;constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this._hash=m(ce(WC),D(w(this.maxAge)),D(w(this.maxSize)),D(w(this.error)),D(Nt(this.quantiles)))}_hash;[F](){return this._hash}[R](t){return Ix(t)&&C(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&C(this.quantiles,t.quantiles)}pipe(){return O(this,arguments)}},BC=e=>new wx(e?.incremental??!1,e?.bigint??!1);var UC=e=>new Mx(e);var Rx=e=>k(e,Ex),Fx=e=>k(e,Ox),Tx=e=>k(e,vx),Ax=e=>k(e,Cx),Ix=e=>k(e,kx);var lL="effect/MetricKey",zC=Symbol.for(lL),pL={_Type:e=>e},fL=ui(C),va=class{name;keyType;description;tags;[zC]=pL;constructor(t,r,o,n=[]){this.name=t,this.keyType=r,this.description=o,this.tags=n,this._hash=m(ce(this.name+this.description),D(w(this.keyType)),D(Nt(this.tags)))}_hash;[F](){return this._hash}[R](t){return mL(t)&&this.name===t.name&&C(this.keyType,t.keyType)&&C(this.description,t.description)&&fL(this.tags,t.tags)}pipe(){return O(this,arguments)}},mL=e=>k(e,zC),GC=(e,t)=>new va(e,BC(t),gr(t?.description));var $C=(e,t,r)=>new va(e,UC(t),gr(r));var VC=l(2,(e,t)=>t.length===0?e:new va(e.name,e.keyType,e.description,Ir(e.tags,t)));u();u();u();var dL="effect/MetricState",Ca=Symbol.for(dL),KC="effect/MetricState/Counter",Px=Symbol.for(KC),JC="effect/MetricState/Frequency",Nx=Symbol.for(JC),YC="effect/MetricState/Gauge",Lx=Symbol.for(YC),QC="effect/MetricState/Histogram",Dx=Symbol.for(QC),ZC="effect/MetricState/Summary",qx=Symbol.for(ZC),ka={_A:e=>e},Hx=class{count;[Ca]=ka;[Px]=Px;constructor(t){this.count=t}[F](){return m(w(KC),D(w(this.count)),K(this))}[R](t){return gL(t)&&this.count===t.count}pipe(){return O(this,arguments)}},xL=ui(C),Wx=class{occurrences;[Ca]=ka;[Nx]=Nx;constructor(t){this.occurrences=t}_hash;[F](){return m(ce(JC),D(Nt(ee(this.occurrences.entries()))),K(this))}[R](t){return yL(t)&&xL(ee(this.occurrences.entries()),ee(t.occurrences.entries()))}pipe(){return O(this,arguments)}},Bx=class{value;[Ca]=ka;[Lx]=Lx;constructor(t){this.value=t}[F](){return m(w(YC),D(w(this.value)),K(this))}[R](t){return bL(t)&&this.value===t.value}pipe(){return O(this,arguments)}},Ux=class{buckets;count;min;max;sum;[Ca]=ka;[Dx]=Dx;constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s}[F](){return m(w(QC),D(w(this.buckets)),D(w(this.count)),D(w(this.min)),D(w(this.max)),D(w(this.sum)),K(this))}[R](t){return SL(t)&&C(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},jx=class{error;quantiles;count;min;max;sum;[Ca]=ka;[qx]=qx;constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i}[F](){return m(w(ZC),D(w(this.error)),D(w(this.quantiles)),D(w(this.count)),D(w(this.min)),D(w(this.max)),D(w(this.sum)),K(this))}[R](t){return _L(t)&&this.error===t.error&&C(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return O(this,arguments)}},XC=e=>new Hx(e),ek=e=>new Wx(e),tk=e=>new Bx(e),rk=e=>new Ux(e.buckets,e.count,e.min,e.max,e.sum),ok=e=>new jx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var gL=e=>k(e,Px),yL=e=>k(e,Nx),bL=e=>k(e,Lx),SL=e=>k(e,Dx),_L=e=>k(e,qx);var OL="effect/MetricHook",vL=Symbol.for(OL),CL={_In:e=>e,_Out:e=>e},wa=e=>({[vL]:CL,pipe(){return O(this,arguments)},...e});var nk=BigInt(0),ik=e=>{let t=e.keyType.bigint?nk:0,r=e.keyType.incremental?e.keyType.bigint?o=>o>=nk:o=>o>=0:o=>!0;return wa({get:()=>XC(t),update:o=>{r(o)&&(t=t+o)}})},ck=e=>{let t=new Map;for(let o of e.keyType.preregisteredWords)t.set(o,0);return wa({get:()=>ek(t),update:o=>{let n=t.get(o)??0;t.set(o,n+1)}})},ak=(e,t)=>{let r=t;return wa({get:()=>tk(r),update:o=>{r=o}})},uk=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,c=Number.MAX_VALUE,a=Number.MIN_VALUE;m(t,qn(dn),Pr((h,d)=>{n[d]=h}));let p=h=>{let d=0,g=r;for(;d!==g;){let b=Math.floor(d+(g-d)/2),M=n[b];h<=M?g=b:d=b,g===d+1&&(h<=n[d]?g=d:d=g)}o[d]=o[d]+1,s=s+1,i=i+h,h<c&&(c=h),h>a&&(a=h)},f=()=>{let h=vc(r),d=0;for(let g=0;g<r;g++){let b=n[g],M=o[g];d=d+M,h[g]=[b,d]}return h};return wa({get:()=>rk({buckets:f(),count:s,min:c,max:a,sum:i}),update:p})},lk=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=m(n,qn(dn)),i=vc(o),c=0,a=0,p=0,f=Number.MAX_VALUE,h=Number.MIN_VALUE,d=b=>{let M=[],T=0;for(;T!==o-1;){let N=i[T];if(N!=null){let[z,ae]=N,_e=hi(b-z);Tm(_e,Rm)&&_e<=r&&M.push(ae)}T=T+1}return kL(t,s,qn(M,dn))},g=(b,M)=>{if(o>0){c=c+1;let T=c%o;i[T]=[M,b]}a=a+1,p=p+b,b<f&&(f=b),b>h&&(h=b)};return wa({get:()=>ok({error:t,quantiles:d(Date.now()),count:a,min:f,max:h,sum:p}),update:([b,M])=>g(b,M)})},kL=(e,t,r)=>{let o=r.length;if(!bt(t))return zt();let n=t[0],s=t.slice(1),i=sk(e,o,S(),0,n,r),c=Ot(i);return s.forEach(a=>{c.push(sk(e,o,i.value,i.consumed,a,i.rest))}),Pr(c,a=>[a.quantile,a.value])},sk=(e,t,r,o,n,s)=>{let i=e,c=t,a=r,p=o,f=n,h=s,d=e,g=t,b=r,M=o,T=n,N=s;for(;;){if(!bt(h))return{quantile:f,value:S(),consumed:p,rest:[]};if(f===1)return{quantile:f,value:_(lm(h)),consumed:p+h.length,rest:[]};let z=Sb(h,Do=>Do<=h[0]),ae=f*c,_e=i/2*ae,ft=p+z[0].length,Xt=Math.abs(ft-ae);if(ft<ae-_e){d=i,g=c,b=$o(h),M=ft,T=f,N=z[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}if(ft>ae+_e)return{quantile:f,value:a,consumed:p,rest:h};switch(a._tag){case"None":{d=i,g=c,b=$o(h),M=ft,T=f,N=z[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}case"Some":{let Do=Math.abs(ae-a.value);if(Xt<Do){d=i,g=c,b=$o(h),M=ft,T=f,N=z[1],i=d,c=g,a=b,p=M,f=T,h=N;continue}return{quantile:f,value:_(a.value),consumed:p,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};u();var ML="effect/MetricPair",RL=Symbol.for(ML),FL={_Type:e=>e};var pk=(e,t)=>({[RL]:FL,metricKey:e,metricState:t,pipe(){return O(this,arguments)}});var AL="effect/MetricRegistry",fk=Symbol.for(AL),zx=class{[fk]=fk;map=vs();snapshot(){let t=[];for(let[r,o]of this.map)t.push(pk(r,o.get()));return t}get(t){let r=m(this.map,ze(t),mt);if(r==null){if(Rx(t.keyType))return this.getCounter(t);if(Tx(t.keyType))return this.getGauge(t);if(Fx(t.keyType))return this.getFrequency(t);if(Ax(t.keyType))return this.getHistogram(t);if(Ix(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=m(this.map,ze(t),mt);if(r==null){let o=ik(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getFrequency(t){let r=m(this.map,ze(t),mt);if(r==null){let o=ck(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getGauge(t){let r=m(this.map,ze(t),mt);if(r==null){let o=ak(t,t.keyType.bigint?BigInt(0):0);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getHistogram(t){let r=m(this.map,ze(t),mt);if(r==null){let o=uk(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}getSummary(t){let r=m(this.map,ze(t),mt);if(r==null){let o=lk(t);m(this.map,kr(t))||m(this.map,Ut(t,o)),r=o}return r}},mk=()=>new zx;var PL="effect/Metric",NL=Symbol.for(PL),LL={_Type:e=>e,_In:e=>e,_Out:e=>e},hk=W(Symbol.for("effect/Metric/globalMetricRegistry"),()=>mk()),dk=function(e,t,r){let o=Object.assign(n=>Jt(n,s=>qL(o,s)),{[NL]:LL,keyType:e,unsafeUpdate:t,unsafeValue:r,register(){return this.unsafeValue([]),this},pipe(){return O(this,arguments)}});return o};var Ma=(e,t)=>xk(GC(e,t));var xk=e=>{let t,r=new WeakMap,o=n=>{if(n.length===0)return t!==void 0||(t=hk.get(e)),t;let s=r.get(n);return s!==void 0||(s=hk.get(VC(e,n)),r.set(n,s)),s};return dk(e.keyType,(n,s)=>o(s).update(n),n=>o(n).get())};var gk=(e,t,r)=>xk($C(e,t,r));var yk=l(3,(e,t,r)=>DL(e,[Ms(t,r)]));var DL=l(2,(e,t)=>dk(e.keyType,(r,o)=>e.unsafeUpdate(r,Ir(t,o)),r=>e.unsafeValue(Ir(t,r))));var qL=l(2,(e,t)=>He(Eo,r=>E(()=>e.unsafeUpdate(t,r))));u();var WL="effect/Request",Gx=Symbol.for(WL),BL={_E:e=>e,_A:e=>e},J9={...jo,[Gx]:BL},bk=e=>k(e,Gx);var $x=l(2,(e,t)=>He(Rp,r=>E(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,ia(o.result,t))}})));var Ki=class{count=0;observers=new Set;interrupted=!1;addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};u();u();u();u();u();var En={Forward:0,Backward:1},Dp=class e{self;stack;direction;count=0;constructor(t,r,o){this.self=t,this.stack=r,this.direction=o}clone(){return new e(this.self,this.stack.slice(),this.direction)}reversed(){return new e(this.self,this.stack.slice(),this.direction===En.Forward?En.Backward:En.Forward)}next(){let t=this.entry;switch(this.count++,this.direction===En.Forward?this.moveNext():this.movePrev(),t._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:t.value}}}get key(){return this.stack.length>0?_(this.stack[this.stack.length-1].key):S()}get value(){return this.stack.length>0?_(this.stack[this.stack.length-1].value):S()}get entry(){return Me(Ou(this.stack),t=>[t.key,t.value])}get index(){let t=0,r=this.stack;if(r.length===0){let o=this.self._root;return o!=null?o.count:0}else r[r.length-1].left!=null&&(t=r[r.length-1].left.count);for(let o=r.length-2;o>=0;--o)r[o+1]===r[o].right&&(++t,r[o].left!=null&&(t+=r[o].left.count));return t}moveNext(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r.right!=null)for(r=r.right;r!=null;)t.push(r),r=r.left;else for(t.pop();t.length>0&&t[t.length-1].right===r;)r=t[t.length-1],t.pop()}get hasNext(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].right!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].left===t[r])return!0;return!1}movePrev(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)t.push(r),r=r.right;else for(t.pop();t.length>0&&t[t.length-1].left===r;)r=t[t.length-1],t.pop()}get hasPrev(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].left!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].right===t[r])return!0;return!1}};u();var L={Red:0,Black:1},wr=({color:e,count:t,key:r,left:o,right:n,value:s})=>({color:e,key:r,value:s,left:o,right:n,count:t});function Vx(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}var Ro=({count:e,key:t,left:r,right:o,value:n},s)=>({color:s,key:t,value:n,left:r,right:o,count:e}),Oe=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var Sk="effect/RedBlackTree",Kx=Symbol.for(Sk),zL={_Key:e=>e,_Value:e=>e},GL={[Kx]:zL,[F](){let e=w(Sk);for(let t of this)e^=m(w(t[0]),D(w(t[1])));return K(this,e)},[R](e){if(_k(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;let t=Array.from(e);return Array.from(this).every((r,o)=>{let n=t[o];return C(r[0],n[0])&&C(r[1],n[1])})}return!1},[Symbol.iterator](){let e=[],t=this._root;for(;t!=null;)e.push(t),t=t.left;return new Dp(this,e,En.Forward)},toString(){return te(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Ra=(e,t)=>{let r=Object.create(GL);return r._ord=e,r._root=t,r},_k=e=>k(e,Kx);var Ek=l(2,(e,t)=>{let r=e._ord,o=e._root;for(;o!==void 0;){let n=r(t,o.key);if(C(t,o.key))return _(o.value);n<=0?o=o.left:o=o.right}return S()});var Jx=l(2,(e,t)=>j(Ek(e,t))),Ok=l(3,(e,t,r)=>{let o=e._ord,n=e._root,s=[],i=[];for(;n!=null;){let c=o(t,n.key);s.push(n),i.push(c),c<=0?n=n.left:n=n.right}s.push({color:L.Red,key:t,value:r,left:void 0,right:void 0,count:1});for(let c=s.length-2;c>=0;--c){let a=s[c];i[c]<=0?s[c]={color:a.color,key:a.key,value:a.value,left:s[c+1],right:a.right,count:a.count+1}:s[c]={color:a.color,key:a.key,value:a.value,left:a.left,right:s[c+1],count:a.count+1}}for(let c=s.length-1;c>1;--c){let a=s[c-1],p=s[c];if(a.color===L.Black||p.color===L.Black)break;let f=s[c-2];if(f.left===a)if(a.left===p){let h=f.right;if(h&&h.color===L.Red)a.color=L.Black,f.right=Ro(h,L.Black),f.color=L.Red,c-=1;else{if(f.color=L.Red,f.left=a.right,a.color=L.Black,a.right=f,s[c-2]=a,s[c-1]=p,Oe(f),Oe(a),c>=3){let d=s[c-3];d.left===f?d.left=a:d.right=a}break}}else{let h=f.right;if(h&&h.color===L.Red)a.color=L.Black,f.right=Ro(h,L.Black),f.color=L.Red,c-=1;else{if(a.right=p.left,f.color=L.Red,f.left=p.right,p.color=L.Black,p.left=a,p.right=f,s[c-2]=p,s[c-1]=a,Oe(f),Oe(a),Oe(p),c>=3){let d=s[c-3];d.left===f?d.left=p:d.right=p}break}}else if(a.right===p){let h=f.left;if(h&&h.color===L.Red)a.color=L.Black,f.left=Ro(h,L.Black),f.color=L.Red,c-=1;else{if(f.color=L.Red,f.right=a.left,a.color=L.Black,a.left=f,s[c-2]=a,s[c-1]=p,Oe(f),Oe(a),c>=3){let d=s[c-3];d.right===f?d.right=a:d.left=a}break}}else{let h=f.left;if(h&&h.color===L.Red)a.color=L.Black,f.left=Ro(h,L.Black),f.color=L.Red,c-=1;else{if(a.left=p.right,f.color=L.Red,f.right=p.left,p.color=L.Black,p.right=a,p.left=f,s[c-2]=p,s[c-1]=a,Oe(f),Oe(a),Oe(p),c>=3){let d=s[c-3];d.right===f?d.right=p:d.left=p}break}}}return s[0].color=L.Black,Ra(e._ord,s[0])}),vk=e=>Ck(e,En.Forward);var Ck=(e,t)=>{let r=e[Symbol.iterator](),o=0;return{[Symbol.iterator]:()=>Ck(e,t),next:()=>{o++;let n=r.key;switch(t===En.Forward?r.moveNext():r.movePrev(),n._tag){case"None":return{done:!0,value:o};case"Some":return{done:!1,value:n.value}}}}};var kk=l(2,(e,t)=>{if(!Jx(e,t))return e;let r=e._ord,o=r,n=e._root,s=[];for(;n!==void 0;){let a=o(t,n.key);s.push(n),C(t,n.key)?n=void 0:a<=0?n=n.left:n=n.right}if(s.length===0)return e;let i=new Array(s.length),c=s[s.length-1];i[i.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let a=s.length-2;a>=0;--a)c=s[a],c.left===s[a+1]?i[a]={color:c.color,key:c.key,value:c.value,left:i[a+1],right:c.right,count:c.count}:i[a]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[a+1],count:c.count};if(c=i[i.length-1],c.left!==void 0&&c.right!==void 0){let a=i.length;for(c=c.left;c.right!=null;)i.push(c),c=c.right;let p=i[a-1];i.push({color:c.color,key:p.key,value:p.value,left:c.left,right:c.right,count:c.count}),i[a-1].key=c.key,i[a-1].value=c.value;for(let f=i.length-2;f>=a;--f)c=i[f],i[f]={color:c.color,key:c.key,value:c.value,left:c.left,right:i[f+1],count:c.count};i[a-1].left=i[a]}if(c=i[i.length-1],c.color===L.Red){let a=i[i.length-2];a.left===c?a.left=void 0:a.right===c&&(a.right=void 0),i.pop();for(let p=0;p<i.length;++p)i[p].count--;return Ra(r,i[0])}else if(c.left!==void 0||c.right!==void 0){c.left!==void 0?Vx(c,c.left):c.right!==void 0&&Vx(c,c.right),c.color=L.Black;for(let a=0;a<i.length-1;++a)i[a].count--;return Ra(r,i[0])}else{if(i.length===1)return Ra(r,void 0);{for(let p=0;p<i.length;++p)i[p].count--;let a=i[i.length-2];$L(i),a.left===c?a.left=void 0:a.right=void 0}}return Ra(r,i[0])});var $L=e=>{let t,r,o,n;for(let s=e.length-1;s>=0;--s){if(t=e[s],s===0){t.color=L.Black;return}if(r=e[s-1],r.left===t){if(o=r.right,o!==void 0&&o.right!==void 0&&o.right.color===L.Red){if(o=r.right=wr(o),n=o.right=wr(o.right),r.right=o.left,o.left=r,o.right=n,o.color=r.color,t.color=L.Black,r.color=L.Black,n.color=L.Black,Oe(r),Oe(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o;return}else if(o!==void 0&&o.left!==void 0&&o.left.color===L.Red){if(o=r.right=wr(o),n=o.left=wr(o.left),r.right=n.left,o.left=n.right,n.left=r,n.right=o,n.color=r.color,r.color=L.Black,o.color=L.Black,t.color=L.Black,Oe(r),Oe(o),Oe(n),s>1){let i=e[s-2];i.left===r?i.left=n:i.right=n}e[s-1]=n;return}if(o!==void 0&&o.color===L.Black)if(r.color===L.Red){r.color=L.Black,r.right=Ro(o,L.Red);return}else{r.right=Ro(o,L.Red);continue}else if(o!==void 0){if(o=wr(o),r.right=o.left,o.left=r,o.color=r.color,r.color=L.Red,Oe(r),Oe(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}else{if(o=r.left,o!==void 0&&o.left!==void 0&&o.left.color===L.Red){if(o=r.left=wr(o),n=o.left=wr(o.left),r.left=o.right,o.right=r,o.left=n,o.color=r.color,t.color=L.Black,r.color=L.Black,n.color=L.Black,Oe(r),Oe(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o;return}else if(o!==void 0&&o.right!==void 0&&o.right.color===L.Red){if(o=r.left=wr(o),n=o.right=wr(o.right),r.left=n.right,o.right=n.left,n.right=r,n.left=o,n.color=r.color,r.color=L.Black,o.color=L.Black,t.color=L.Black,Oe(r),Oe(o),Oe(n),s>1){let i=e[s-2];i.right===r?i.right=n:i.left=n}e[s-1]=n;return}if(o!==void 0&&o.color===L.Black)if(r.color===L.Red){r.color=L.Black,r.left=Ro(o,L.Red);return}else{r.left=Ro(o,L.Red);continue}else if(o!==void 0){if(o=wr(o),r.left=o.right,o.right=r,o.color=r.color,r.color=L.Red,Oe(r),Oe(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}}};var wk=Jx,Mk=Ok,Rk=vk;var Fk=kk;var Yx=Symbol.for("effect/SortedSet"),KL={[Yx]:{_A:e=>e},[F](){return m(w(this.keyTree),D(w(Yx)),K(this))},[R](e){return JL(e)&&C(this.keyTree,e.keyTree)},[Symbol.iterator](){return Rk(this.keyTree)},toString(){return te(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(Y)}},[U](){return this.toJSON()},pipe(){return O(this,arguments)}},Ak=e=>{let t=Object.create(KL);return t.keyTree=e,t},JL=e=>k(e,Yx);var Ik=l(2,(e,t)=>wk(e.keyTree,t)?e:Ak(Mk(e.keyTree,t,!0)));var Pk=l(2,(e,t)=>Ak(Fk(e.keyTree,t)));var YL="effect/Supervisor",Qi=Symbol.for(YL),Fa={_T:e=>e},Ji=class e{underlying;value0;[Qi]=Fa;constructor(t,r){this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,m(this.value,v(t)))}zip(t){return new Yi(this,t)}},Yi=class e{left;right;_tag="Zip";[Qi]=Fa;constructor(t,r){this.left=t,this.right=r}get value(){return ps(this.left.value,this.right.value)}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Ji(this,m(this.value,v(t)))}zip(t){return new e(this,t)}},Xx=e=>k(e,Qi)&&In(e,"Zip"),Qx=class{[Qi]=Fa;fibers=new Set;get value(){return E(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ji(this,m(this.value,v(t)))}zip(t){return new Yi(this,t)}onRun(t,r){return t()}},Zx=class{effect;[Qi]=Fa;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ji(this,m(this.value,v(t)))}zip(t){return new Yi(this,t)}onRun(t,r){return t()}},Lk=class{ref;[Qi]=Fa;constructor(t){this.ref=t}get value(){return E(()=>Dt(this.ref))}onStart(t,r,o,n){m(this.ref,nr(m(Dt(this.ref),Ik(n))))}onEnd(t,r){m(this.ref,nr(m(Dt(this.ref),Pk(r))))}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ji(this,m(this.value,v(t)))}zip(t){return new Yi(this,t)}onRun(t,r){return t()}},QL=()=>new Qx,Dk=E(QL),ZL=e=>new Zx(e),Ds=W("effect/Supervisor/none",()=>ZL(B));u();u();var qk=Qo;var Wk="Empty",Bk="AddSupervisor",Uk="RemoveSupervisor",jk="AndThen",Zi={_tag:Wk},Hp=(e,t)=>({_tag:jk,first:e,second:t}),XL=(e,t)=>eD(t,Re(e)),eD=(e,t)=>{let r=e,o=t;for(;rt(o);){let n=Ze(o);switch(n._tag){case Wk:{o=nt(o);break}case Bk:{r=r.zip(n.supervisor),o=nt(o);break}case Uk:{r=eg(r,n.supervisor),o=nt(o);break}case jk:{o=Qe(n.first)(Qe(n.second)(nt(o)));break}}}return r},eg=(e,t)=>C(e,t)?Ds:Xx(e)?eg(e.left,t).zip(eg(e.right,t)):e,Wp=e=>C(e,Ds)?Hr():Xx(e)?m(Wp(e.left),fo(Wp(e.right))):jn(e),tD=(e,t)=>{if(C(e,t))return Zi;let r=Wp(e),o=Wp(t),n=m(o,jm(r),$n(Zi,(i,c)=>Hp(i,{_tag:Bk,supervisor:c}))),s=m(r,jm(o),$n(Zi,(i,c)=>Hp(i,{_tag:Uk,supervisor:c})));return Hp(n,s)},zk=qk({empty:Zi,patch:XL,combine:Hp,diff:tD});var oD=Ma("effect_fiber_started",{incremental:!0}),Gk=Ma("effect_fiber_active"),nD=Ma("effect_fiber_successes",{incremental:!0}),sD=Ma("effect_fiber_failures",{incremental:!0}),iD=yk(gk("effect_fiber_lifetimes",AC({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Ta="Continue",cD="Done",$k="Yield",aD={_E:e=>e,_A:e=>e},Aa=e=>{throw new Error(`BUG: FiberRuntime - ${Bo(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},On=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Fo=W("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Bp={[ti]:(e,t,r)=>Pe(()=>t.effect_instruction_i1(r)),OnStep:(e,t,r)=>xe(xe(r)),[ri]:(e,t,r)=>Pe(()=>t.effect_instruction_i2(r)),[_c]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),xo(e._runtimeFlags)&&e.isInterrupted()?ie(e.getInterruptedCause()):xe(r)),[oi]:(e,t,r)=>(Pe(()=>t.effect_instruction_i2(r)),Pe(()=>t.effect_instruction_i0())?(e.pushStack(t),Pe(()=>t.effect_instruction_i1())):B)},uD={[Fp]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),xo(t)?ie(o.cause):r),[Ap]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Tp]:(e,t,r,o)=>(o.onFiber(e,nx(t)),r),[Ip]:(e,t,r,o)=>x(Yr(),()=>r)},lD=e=>Ht(r_(e),t=>qs(n_(t),([r,o])=>{let n=new Map,s=[];for(let c of o){s.push(rr(c));for(let a of c)n.set(a.request,a)}let i=s.flat();return We(kD(r.runAll(s),i,()=>i.forEach(c=>{c.listeners.interrupted=!0})),Rp,n)},!1,!1)),Ia=class{[Sa]=_a;[vC]=aD;pipe(){return O(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(t,r,o){if(this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef($p),this._scheduler=this.getFiberRef(yn),mh(o)){let n=this.getFiberRef(Eo);oD.unsafeUpdate(1,n),Gk.unsafeUpdate(1,n)}this._tracer=Be(this.getFiberRef(ye),Gr)}id(){return this._fiberId}resume(t){this.tell(Ns(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>J0(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return EC(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(xs)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return I(()=>{let r=oa(this._fiberId);return this.tell(Vi((o,n)=>{ia(r,E(()=>t(o,n)))})),ct(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return qe(t=>{let r=o=>t(y(o));return this.tell(Vi((o,n)=>{o._exitValue!==null?r(this._exitValue):o.addObserver(r)})),E(()=>this.tell(Vi((o,n)=>{o.removeObserver(r)})))},this.id())}get inheritAll(){return re((t,r)=>{let o=t.id(),n=t.getFiberRefs(),s=r.runtimeFlags,i=this.getFiberRefs(),c=Xl(n,o,i);t.setFiberRefs(c);let a=t.getFiberRef(Jk),p=m(sr(s,a),gh(jr),gh(cl));return ln(p)})}get poll(){return E(()=>gr(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return E(()=>this.tell(Pp(Kt(t))))}unsafeInterruptAsFork(t){this.tell(Pp(Kt(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef(Jk,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=aa(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=Hi(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this._tracer=Be(this.getFiberRef(ye),Gr),this._supervisor=this.getFiberRef($p),this._scheduler=this.getFiberRef(yn)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Ta,o=globalThis[_n];globalThis[_n]=this;try{for(;r===Ta;)r=this._queue.length===0?cD:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[_n]=o}this._queue.length>0&&!this._running?(this._running=!0,r===$k?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(pn))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=uD[n._tag](this,t,o,n)}return o}isInterrupted(){return!ml(this.getFiberRef(xs))}addInterruptedCause(t){let r=this.getFiberRef(xs);this.setFiberRef(xs,Ue(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(Pp(Kt(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Ti({while:()=>!r,body:()=>{let n=t.next();return n.done?E(()=>{r=!0}):Ee(n.value.await)},step:()=>{}})}return null}reportExitValue(t){if(mh(this._runtimeFlags)){let r=this.getFiberRef(Eo),o=this.id().startTimeMillis,n=Date.now();switch(iD.unsafeUpdate(n-o,r),Gk.unsafeUpdate(-1,r),t._tag){case Le:{nD.unsafeUpdate(1,r);break}case Ne:{sD.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(Wh);!ns(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(dD)}log(t,r,o){let n=j(o)?o.value:this.getFiberRef(Dh),s=this.getFiberRef(pD);if(EO(s,n))return;let i=this.getFiberRef(Pl),c=this.getFiberRef(fn),a=this.getLoggers(),p=this.getFiberRefs();if(zn(a)>0){let f=Be(this.getFiberRef(ye),Qt),h=new Date(f.unsafeCurrentTimeMillis());for(let d of a)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:c,date:h})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Ip:return $k;case Fp:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ie(t.cause)),this._asyncInterruptor=null),Ta;case Ap:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Ta;case Tp:return t.onFiber(this,this._exitValue!==null?V0:K0(this._runtimeFlags,this._asyncBlockingOn)),Ta;default:return Aa(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=xo(this._runtimeFlags)&&this.isInterrupted()?ie(this.getInterruptedCause()):t;for(;r!==null;){let o=r,n=this.runLoop(o);if(n===On){let s=Fo.currentOp;Fo.currentOp=null,s._op===ni?ZS(this._runtimeFlags)?(this.tell(SC()),this.tell(Ns(Yt)),r=null):r=Yt:s._op===Ln&&(r=null)}else{this._runtimeFlags=m(this._runtimeFlags,ph(cl));let s=this.interruptAllChildren();s!==null?r=x(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(Ns(n)),r=null)}}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Ns(t));else{this._running=!0;let r=globalThis[_n];globalThis[_n]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[_n]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Ns(t))}patchRuntimeFlags(t,r){let o=go(t,r);return globalThis[_n]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(Ns(s)))};xo(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(Q(ht(s)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==ei)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==ti&&t._op!==oi)return t;t=this.popStack()}}[$y](t){return v(Bt(dt),r=>li(r,t))}Left(t){return J(t.left)}None(t){return J(new ir)}Right(t){return xe(t.right)}Some(t){return xe(t.value)}Micro(t){return A_(r=>{let o=cC().pipe(aC(lC,this.getFiberRef(dt))),n=r;return t[jt](o,s=>{if(s._tag==="Right")return n(xe(s.right));switch(s.left._tag){case"Interrupt":return n(ie(Kt(Vt)));case"Fail":return n(J(s.left.error));case"Die":return n(So(s.left.defect))}}),qe(s=>{n=i=>{s(B)},Ps(o,kp).abort()})})}[mu](t){let r=Pe(()=>t.effect_instruction_i0()),o=this.getNextSuccessCont();return o!==void 0?(o._op in Bp||Aa(o),Bp[o._op](this,o,r)):(Fo.currentOp=xe(r),On)}[Le](t){let r=t,o=this.getNextSuccessCont();return o!==void 0?(o._op in Bp||Aa(o),Bp[o._op](this,o,r.effect_instruction_i0)):(Fo.currentOp=r,On)}[Ne](t){let r=t.effect_instruction_i0,o=this.getNextFailCont();if(o!==void 0)switch(o._op){case ei:case ri:return xo(this._runtimeFlags)&&this.isInterrupted()?ie(xl(r)):Pe(()=>o.effect_instruction_i1(r));case"OnStep":return xo(this._runtimeFlags)&&this.isInterrupted()?ie(xl(r)):xe(ie(r));case _c:return this.patchRuntimeFlags(this._runtimeFlags,o.patch),xo(this._runtimeFlags)&&this.isInterrupted()?ie(Ue(r,this.getInterruptedCause())):ie(r);default:Aa(o)}else return Fo.currentOp=ie(r),On}[hu](t){return Pe(()=>t.effect_instruction_i0(this,nx(this._runtimeFlags)))}Blocked(t){let r=this.getFiberRefs(),o=this._runtimeFlags;if(this._steps.length>0){let n=[],s=this._steps[this._steps.length-1],i=this.popStack();for(;i&&i._op!=="OnStep";)n.push(i),i=this.popStack();this.setFiberRefs(s.refs),this._runtimeFlags=s.flags;let c=Ts(s.refs,r),a=sr(s.flags,o);return xe(bo(t.effect_instruction_i0,re(p=>{for(;n.length>0;)p.pushStack(n.pop());return p.setFiberRefs(As(p.id(),p.getFiberRefs())(c)),p._runtimeFlags=go(a)(p._runtimeFlags),t.effect_instruction_i1})))}return Fe(n=>x(Hs(vl(t.effect_instruction_i0)),()=>n(t.effect_instruction_i1)))}RunBlocked(t){return lD(t.effect_instruction_i0)}[so](t){let r=t.effect_instruction_i0,o=this._runtimeFlags,n=go(o,r);if(xo(n)&&this.isInterrupted())return ie(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.effect_instruction_i1){let s=sr(n,o);return this.pushStack(new Sl(s,t)),Pe(()=>t.effect_instruction_i1(o))}else return Yt}[ti](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[ei](t){return this.pushStack(t),t.effect_instruction_i0}[ri](t){return this.pushStack(t),t.effect_instruction_i0}[Ln](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,t.effect_instruction_i0),Fo.currentOp=t,On}[ni](t){return this.isYielding=!1,Fo.currentOp=t,On}[oi](t){let r=t.effect_instruction_i0,o=t.effect_instruction_i1;return r()?(this.pushStack(t),o()):Yt}[Xs](t){return Pe(()=>t.commit())}runLoop(t){let r=t;for(this.currentOpCount=0;;){if(this._runtimeFlags&QS&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),!this.isYielding){this.currentOpCount+=1;let o=this._scheduler.shouldYield(this);if(o!==!1){this.isYielding=!0,this.currentOpCount=0;let n=r;r=x(Yr({priority:o}),()=>n)}}try{if((!("_op"in r)||!(r._op in this))&&Aa(r),r=this._tracer.context(()=>An()!==r[Qd]._V?on(`Cannot execute an Effect versioned ${r[Qd]._V} with a Runtime of version ${An()}`):this[r._op](r),this),r===On){let o=Fo.currentOp;return o._op===ni||o._op===Ln?On:(Fo.currentOp=null,o._op===Le||o._op===Ne?o:ie(ht(o)))}}catch(o){F_(o)?r=ie(o.cause):tE(o)?r=ie(Ue(ht(o),Kt(Vt))):r=So(o)}}}run=()=>{this.drainQueueOnCurrentThread()}},pD=W("effect/FiberRef/currentMinimumLogLevel",()=>Te(OO("Info"))),fD=e=>Lp(t=>{let r=gO(t.context,ye);Be(r,Co).unsafe.log(e.log(t))});var mD=W(Symbol.for("effect/Logger/defaultLogger"),()=>fD(FC));var hD=W(Symbol.for("effect/Logger/tracerLogger"),()=>Lp(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=er(qi(r,dt),yr(_r)),c=Me(qi(r,ye),p=>Be(p,Qt));if(i._tag==="None"||i.value._tag==="ExternalSpan"||c._tag==="None")return;let a=Object.fromEntries(Qu(e,Bo));a["effect.fiberId"]=ES(o),a["effect.logLevel"]=n.label,t!==null&&t._tag!=="Empty"&&(a["effect.cause"]=en(t)),i.value.event(String(s),c.value.unsafeCurrentTimeNanos(),a)}));var dD=W(Symbol.for("effect/FiberRef/currentLoggers"),()=>Y_(jn(mD,hD)));var Qk=function(){if(typeof arguments[0]=="string")return mr(fn,br(arguments[0],arguments[1]));let e=Object.entries(arguments[0]);return mr(fn,kS(t=>{for(let r=0;r<e.length;r++){let[o,n]=e[r];br(t,o,n)}return t}))},Na=l(e=>ue(e[0]),(e,t)=>_o(Jt(e,r=>Xi(o=>t(r,o))))),Zk=l(e=>ue(e[0]),(e,t)=>Mr(e,Xi(r=>t(r)))),Xi=e=>re(t=>{let r=t.getFiberRefs(),o=t._runtimeFlags;return x(ag,n=>gs(n,s=>re(i=>{let c=i.getFiberRefs(),a=i._runtimeFlags,p=Ts(c,r),f=sr(a,o),h=Ts(r,c);return i.setFiberRefs(As(p,i.id(),r)),Mr(Tl(e(s),f),E(()=>{i.setFiberRefs(As(h,i.id(),i.getFiberRefs()))}))})))}),Xk=e=>We($c,_(bn))(e),Vk=Symbol.for("effect/Effect/existsPar/found"),ew=l(e=>xr(e[0])&&!ue(e[0]),(e,t,r)=>ba(r?.concurrency,()=>I(()=>tw(e[Symbol.iterator](),0,t)),()=>Xe(fr(e,(o,n)=>kl(t(o,n),{onTrue:()=>J(Vk),onFalse:()=>B}),r),{onFailure:o=>o===Vk?y(!0):J(o),onSuccess:()=>y(!1)}))),tw=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(x(r(o.value,t),n=>n?y(n):tw(e,t+1,r)))},rw=l(e=>xr(e[0])&&!ue(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>v(t(n,s),kb):t;return ba(r?.concurrency,()=>I(()=>ee(e).reduceRight((n,s,i)=>Qr(n,I(()=>o(s,i)),(c,a)=>a?[s,...c]:c),E(()=>new Array))),()=>v(fr(e,(n,s)=>v(o(n,s),i=>i?_(n):S()),r),vb))}),xD=e=>{if(Array.isArray(e)||xr(e))return[e,S()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),_(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},gD=(e,t,r)=>{let o=[];for(let n of e)o.push(Vr(n));return x(fr(o,$,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=S(),i=n.length,c=new Array(i),a=new Array(i),p=!1;for(let f=0;f<i;f++){let h=n[f];h._tag==="Left"?(c[f]=_(h.left),p=!0):(a[f]=h.right,c[f]=s)}return p?t._tag==="Some"?J(t.value(c)):J(c):r?.discard?B:t._tag==="Some"?y(t.value(a)):y(a)})},yD=(e,t,r)=>{let o=[];for(let n of e)o.push(Vr(n));return r?.discard?fr(o,$,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):v(fr(o,$,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},ec=(e,t)=>{let[r,o]=xD(e);return t?.mode==="validate"?gD(r,o,t):t?.mode==="either"?yD(r,o,t):t?.discard!==!0&&o._tag==="Some"?v(fr(r,$,t),o.value):fr(r,$,t)},ow=e=>t=>ec(t,e),nw=(e,t)=>v(ec(ee(e).map(ke),t),ai(r=>Bl(r)?_(r.effect_instruction_i0):S())),rg=l(2,(e,t)=>Array.from({length:t},()=>e)),sw=l(e=>ue(e[0]),(e,t,r)=>ec(rg(e,t),r)),fr=l(e=>xr(e[0]),(e,t,r)=>re(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(Hh);return r?.discard?dx(r.concurrency,()=>vn(yp)(s=>n?qs(e,(i,c)=>s(t(i,c)),!0,!1,1):Ht(e,(i,c)=>s(t(i,c)))),()=>vn(bp)(s=>qs(e,(i,c)=>s(t(i,c)),n,!1)),s=>vn(Sp(s))(i=>qs(e,(c,a)=>i(t(c,a)),n,!1,s))):dx(r?.concurrency,()=>vn(yp)(s=>n?tg(e,1,(i,c)=>s(t(i,c)),!0):it(e,(i,c)=>s(t(i,c)))),()=>vn(bp)(s=>Up(e,(i,c)=>s(t(i,c)),n)),s=>vn(Sp(s))(i=>tg(e,s,(c,a)=>i(t(c,a)),n)))})),Up=(e,t,r)=>I(()=>{let o=ee(e),n=new Array(o.length);return ne(qs(o,(i,c)=>x(t(i,c),a=>E(()=>n[c]=a)),r,!1),y(n))}),qs=(e,t,r,o,n)=>Fe(s=>Fl(i=>re(c=>{let a=Array.from(e).reverse(),p=a.length;if(p===0)return B;let f=0,h=!1,d=n?Math.min(a.length,n):a.length,g=new Set,b=new Array,M=()=>g.forEach(tt=>{tt._scheduler.scheduleTask(()=>{tt.unsafeInterruptAsFork(c.id())},0)}),T=new Array,N=new Array,z=new Array,ae=()=>{let tt=b.filter(({exit:q})=>q._tag==="Failure").sort((q,Z)=>q.index<Z.index?-1:q.index===Z.index?0:1).map(({exit:q})=>q);return tt.length===0&&tt.push(Yt),tt},_e=(tt,q=!1)=>{let Z=_o(i(tt)),G=bD(Z,c,c._runtimeFlags,bn);return c._scheduler.scheduleTask(()=>{q&&G.unsafeInterruptAsFork(c.id()),G.resume(Z)},0),G},ft=()=>{o||(p-=a.length,a=[]),h=!0,M()},Xt=r?Cl:ke,Do=_e(qe(tt=>{let q=(G,fe)=>{G._op==="Blocked"?z.push(G):(b.push({index:fe,exit:G}),G._op==="Failure"&&!h&&ft())},Z=()=>{if(a.length>0){let G=a.pop(),fe=f++,Ie=()=>{let X=a.pop();return fe=f++,x(Yr(),()=>x(Xt(s(t(X,fe))),be))},be=X=>a.length>0&&(q(X,fe),a.length>0)?Ie():y(X),me=x(Xt(s(t(G,fe))),be),se=_e(me);T.push(se),g.add(se),h&&se._scheduler.scheduleTask(()=>{se.unsafeInterruptAsFork(c.id())},0),se.addObserver(X=>{let we;if(X._op==="Failure"?we=X:we=X.effect_instruction_i0,N.push(se),g.delete(se),q(we,fe),b.length===p)tt(y(De(hn(ae(),{parallel:!0}),()=>Yt)));else if(z.length+b.length===p){let he=z.map(Gs=>Gs.effect_instruction_i0).reduce(_h);tt(y(bo(he,qs([De(hn(ae(),{parallel:!0}),()=>Yt),...z.map(Gs=>Gs.effect_instruction_i1)],Gs=>Gs,r,!0,n))))}else Z()})}};for(let G=0;G<d;G++)Z()}));return Ee(_t(Mt(s(Sn(Do))),Ii({onFailure:()=>{ft();let tt=z.length+1,q=Math.min(typeof n=="number"?n:z.length,z.length),Z=Array.from(z);return qe(G=>{let fe=[],Ie=0,be=0,me=(X,we)=>he=>{fe[X]=he,Ie++,Ie===tt&&G(Oc(hn(fe,{parallel:!0}))),Z.length>0&&we&&se()},se=()=>{_e(Z.pop(),!0).addObserver(me(be,!0)),be++};Do.addObserver(me(be,!1)),be++;for(let X=0;X<q;X++)se()})},onSuccess:()=>it(N,tt=>tt.inheritAll)})))}))),tg=(e,t,r,o)=>I(()=>{let n=ee(e),s=new Array(n.length);return ne(qs(n,(c,a)=>v(r(c,a),p=>s[a]=p),o,!1,t),y(s))}),pr=e=>re((t,r)=>y(cw(e,t,r.runtimeFlags))),Hs=e=>SD(e,bn),iw=l(2,(e,t)=>pr(Rl(e,r=>{let o=zr(r);switch(o._tag){case"Left":return t(o.left);case"Right":return Q(o.right)}}))),cw=(e,t,r,o=null)=>{let n=jp(e,t,r,o);return n.resume(e),n},bD=(e,t,r,o=null)=>jp(e,t,r,o),jp=(e,t,r,o=null)=>{let n=Yu(),s=t.getFiberRefs(),i=dd(s,n),c=new Ia(n,i,r),a=ks(i,dt),p=c._supervisor;return p.onStart(a,e,_(t),c),c.addObserver(h=>p.onEnd(h,c)),(o!==null?o:m(t.getFiberRef($c),De(()=>t.scope()))).add(r,c),c},SD=(e,t)=>re((r,o)=>y(cw(e,r,o.runtimeFlags,t))),og=l(e=>Wo(e[2]),(e,t,r,o)=>ba(o?.concurrency,()=>ee(e).reduce((n,s,i)=>Qr(n,s,(c,a)=>r(c,a,i)),y(t)),()=>x(la(t),n=>x(fr(e,(s,i)=>x(s,c=>TO(n,a=>r(a,c,i))),o),()=>sp(n))))),ng=l(e=>xr(e[0]),(e,t,r)=>m(fr(e,(o,n)=>Vr(t(o,n)),r),v(o=>D_(o,$)))),aw=l(e=>xr(e[0]),(e,t,r)=>x(ng(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?B:y(n):J(o))),uw=e=>{let t=Dr(e);if(!rt(t))return nn(()=>new Zc("Received an empty collection of effects"));let r=Ze(t),o=nt(t),n=s=>m(CC(s[1]),le(s[0]));return m(Rt(),x(s=>m(la(o.length),x(i=>Fe(c=>m(pr(Kr(r)),x(a=>m(o,it(p=>pr(Kr(p))),v(p=>pi(p)),v(p=>m(p,Qe(a))),Jt(p=>m(p,tr(B,(f,h)=>m(f,ne(m(yx(h),x(_D(p,h,s,i)),pr,Ee)))))),x(p=>m(c(m(Os(s),x(n))),vr(()=>m(p,tr(B,(f,h)=>m(f,fs(hs(h))))))))))))))))},_D=(e,t,r,o)=>n=>Ss(n,{onFailure:s=>m(FO(o,i=>[i===0?m(_s(r,s),Ee):B,i-1]),Mt),onSuccess:s=>m(sa(r,[s,t]),x(i=>i?m(Dr(e),tr(B,(c,a)=>a===t?c:m(c,fs(hs(a))))):B))}),lw=l(e=>xr(e[0])&&!ue(e[0]),(e,t,r,o)=>ba(o?.concurrency,()=>ee(e).reduce((n,s,i)=>Qr(n,s,(c,a)=>r(c,a,i)),t),()=>I(()=>m(og([t,...e],S(),(n,s,i)=>{switch(n._tag){case"None":return _(s);case"Some":return _(r(n.value,s,i))}},o),v(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return n.value}}))))),zp=e=>ar(t=>Ke(yr(t,Cn),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return x(ys(r,bp),o=>kn(e,o))}}})),Kk=e=>t=>ar(r=>Ke(yr(r,Cn),{onNone:()=>t,onSome:o=>o.strategy._tag==="ParallelN"&&o.strategy.parallelism===e?t:x(ys(o,Sp(e)),n=>kn(t,n))})),vn=e=>t=>ar(r=>Ke(yr(r,Cn),{onNone:()=>t($),onSome:o=>{let n=e._tag==="Parallel"?zp:e._tag==="Sequential"?Gp:Kk(e.parallelism);switch(o.strategy._tag){case"Parallel":return n(t(zp));case"Sequential":return n(t(Gp));case"ParallelN":return n(t(Kk(o.strategy.parallelism)))}}})),Ws=e=>x(Cn,e),sg=e=>x(La(),t=>vD(e,t)),Gp=e=>ar(t=>Ke(yr(t,Cn),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return x(ys(r,yp),o=>kn(e,o))}}})),pw=(e,t)=>ig([Ms(e,t)]),ig=e=>mr(Eo,t=>Ir(t,e)),fw=l(2,(e,t)=>rn(La(),r=>x(kn(e,r),t),(r,o)=>Oo(r,o))),mw=l(e=>ue(e[1]),(e,t,r)=>cg(e,t,(o,n)=>[o,n],r)),cg=l(e=>ue(e[1]),(e,t,r,o)=>Mt(To(ke(e),ke(t),(n,s)=>ra(n,s,{onSuccess:r,onFailure:(i,c)=>o?.concurrent?wt(i,c):Ue(i,c)}),o)));var hw=l(e=>xr(e[0]),(e,t,r)=>an(fr(e,(o,n)=>an(t(o,n)),r))),dw=e=>mr(ye,Ce(Qt,e)),xw=e=>mr(ye,Ce(Li,e)),gw=e=>mr(ye,Ce(Ni,e)),yw=e=>Ws(t=>x(ys(t,to),r=>m(e,kn(r),v(o=>[qt(n=>Oo(r,jl(n))),o])))),bw=l(e=>ue(e[1]),(e,t,r)=>To(e,t,(o,n)=>[o,n],r)),Sw=l(e=>ue(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?fs(e,t):To(e,t,(o,n)=>o,r)),_w=l(e=>ue(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?ne(e,t):To(e,t,(o,n)=>n,r)),To=l(e=>ue(e[1]),(e,t,r,o)=>v(ec([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),Ew=e=>e===e_?B:m(Ri,x(t=>{let r=go(t,e),o=sr(r,t);return m(ln(e),ne(Xi(()=>ln(o))),Ee)}),_o),Cn=vt("effect/Scope"),ag=Cn,ED=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.add(t)},OD={[Dl]:Dl,[ql]:ql,pipe(){return O(this,arguments)},fork(e){return E(()=>{let t=Ow(e);if(this.state._tag==="Closed")return t.state=this.state,t;let r=o=>t.close(o);return this.state.finalizers.add(r),ED(t,o=>E(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return I(()=>{if(this.state._tag==="Closed")return B;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?B:Zd(this.strategy)?m(it(t,r=>ke(r(e))),x(r=>m(hn(r),Me(ea),De(()=>Yt)))):Xd(this.strategy)?m(Up(t,r=>ke(r(e)),!1),x(r=>m(hn(r,{parallel:!0}),Me(ea),De(()=>Yt)))):m(tg(t,this.strategy.parallelism,r=>ke(r(e)),!1),x(r=>m(hn(r,{parallel:!0}),Me(ea),De(()=>Yt))))})},addFinalizer(e){return I(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.add(e),B))}},Ow=(e=to)=>{let t=Object.create(OD);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},La=(e=to)=>E(()=>Ow(e)),kn=l(2,(e,t)=>Es(e,Hn(Sm(Cn,t)))),vD=l(2,(e,t)=>m(e,kn(t),_t(r=>t.close(r)))),CD=e=>ds(e,{differ:zk,fork:Zi}),Vp=l(2,(e,t)=>Ee(Na(x(Bt(e),r=>le(cs(e,t),r)),r=>cs(e,r)))),mr=l(2,(e,t)=>He(e,r=>Vp(e,t(r))));var Jk=Q_(XS),$p=CD(Ds),vw=e=>Ee(yx(Kp(e))),Kp=e=>({[Sa]:_a,id:()=>ee(e).reduce((t,r)=>Jm(t,r.id()),Vt),await:ke(Up(e,t=>Mt(t.await),!1)),children:v(Up(e,t=>t.children,!1),vu),inheritAll:Ht(e,t=>t.inheritAll),poll:v(it(e,t=>t.poll),Cu(_(xe(new Array)),(t,r)=>{switch(r._tag){case"None":return S();case"Some":switch(t._tag){case"None":return S();case"Some":return _(ra(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:wt}))}}})),interruptAsFork:t=>Ht(e,r=>r.interruptAsFork(t)),pipe(){return O(this,arguments)}});var ug=l(3,(e,t,r)=>lg(e,t,{onSelfWin:(o,n)=>x(o.await,s=>{switch(s._tag){case Le:return x(o.inheritAll,()=>r.onSelfDone(s,n));case Ne:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>x(o.await,s=>{switch(s._tag){case Le:return x(o.inheritAll,()=>r.onOtherDone(s,n));case Ne:return r.onOtherDone(s,n)}})})),Cw=e=>Fe(t=>qt(r=>x(Hs(t(e)),o=>m(t(Sn(o)),vr(()=>m(o,kC(r))))))),Jp=l(2,(e,t)=>qt(r=>ug(e,t,{onSelfDone:(o,n)=>Ss(o,{onFailure:s=>m(Sn(n),Bi(i=>wt(s,i))),onSuccess:s=>m(n,Wt(r),le(s))}),onOtherDone:(o,n)=>Ss(o,{onFailure:s=>m(Sn(n),Bi(i=>wt(i,s))),onSuccess:s=>m(n,Wt(r),le(s))})}))),lg=l(3,(e,t,r)=>re((o,n)=>{let s=n.runtimeFlags,i=Wr(!0),c=jp(e,o,s,r.selfScope),a=jp(t,o,s,r.otherScope);return qe(p=>{c.addObserver(()=>Yk(c,a,r.onSelfWin,i,p)),a.addObserver(()=>Yk(a,c,r.onOtherWin,i,p)),c.startFork(e),a.startFork(t)},Jm(c.id(),a.id()))})),Yk=(e,t,r,o,n)=>{zu(!0,!1)(o)&&n(r(e,t))},Mr=l(2,(e,t)=>Fe(r=>Se(r(e),{onFailure:o=>Se(t,{onFailure:n=>Q(Ue(o,n)),onSuccess:()=>Q(o)}),onSuccess:o=>le(t,o)}))),kD=(e,t,r)=>qt(o=>x(x(Hs(Kr(e)),n=>qe(s=>{let i=t.map(p=>p.listeners.count),c=()=>{i.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&Xc(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&hl(p.result.state.current.effect.cause)))&&(a.forEach(p=>p()),r?.(),s(hs(n)))};n.addObserver(p=>{a.forEach(f=>f()),s(p)});let a=t.map((p,f)=>{let h=d=>{i[f]=d,c()};return p.listeners.addObserver(h),()=>p.listeners.removeObserver(h)});return c(),E(()=>{a.forEach(p=>p())})})),()=>I(()=>{let n=t.flatMap(s=>s.state.completed?[]:[s]);return Ht(n,s=>$x(s.request,jl(o)))})));var Pa=(e,t)=>(t=yo(t),_o(re(r=>{let o=li(r.getFiberRef(dt),Cn),n=xp(r,e,t),s=r.getFiberRef(Ai),i=Be(r.getFiberRef(ye),Qt);return le(gs(o,c=>Jd(n,c,i,s)),n)}))),kw=e=>mr(ye,Ce(Gr,e)),ww=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=yo(e?arguments[2]:arguments[1]);if(e){let o=arguments[0];return x(Pa(t,yo(r)),n=>Ui(o,_r,n))}return o=>x(Pa(t,yo(r)),n=>Ui(o,_r,n))};var Mw=(e,t,r,o)=>el({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),Rw=(e,t)=>el({_tag:"Pending",key:e,deferred:t}),wD=(e,t)=>el({_tag:"Refreshing",deferred:e,complete:t}),pg=Symbol.for("effect/Cache/MapKey"),fg=class{current;[pg]=pg;previous=void 0;next=void 0;constructor(t){this.current=t}[F](){return m(w(this.current),D(w(this.previous)),D(w(this.next)),K(this))}[R](t){return this===t?!0:MD(t)&&C(this.current,t.current)&&C(this.previous,t.previous)&&C(this.next,t.next)}},tc=e=>new fg(e),MD=e=>k(e,pg),mg=class{head=void 0;tail=void 0;add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},RD=()=>new mg,FD=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),TD=()=>FD(vs(),RD(),vE(),Wr(!1),0,0),AD="effect/Cache",ID=Symbol.for(AD),PD={_Key:e=>e,_Error:e=>e,_Value:e=>e},ND=e=>e,Yp=e=>({loadedMillis:e}),hg=class{capacity;context;fiberId;lookup;timeToLive;[ID]=PD;cacheState;constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this.cacheState=TD()}get(t){return v(this.getEither(t),Su)}get cacheStats(){return E(()=>ND({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Gl(this.cacheState.map)}))}getOption(t){return I(()=>Ke(ze(this.cacheState.map,t),{onNone:()=>{let r=tc(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return I(()=>Ke(ze(this.cacheState.map,t),{onNone:()=>{let r=tc(t);return this.trackAccess(r),this.trackMiss(),y(S())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return E(()=>kr(this.cacheState.map,t))}entryStats(t){return E(()=>{let r=ze(this.cacheState.map,t);if(j(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return _(Yp(o))}case"Pending":return S();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return _(Yp(o))}}return S()})}getEither(t){return I(()=>{let r=t,o,n,s=mt(ze(this.cacheState.map,r));return s===void 0&&(n=Gh(this.fiberId),o=tc(r),kr(this.cacheState.map,r)?s=mt(ze(this.cacheState.map,r)):Ut(this.cacheState.map,r,Rw(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),v(this.lookupValueOf(t,n),Ve)):x(this.resolveMapValue(s),Ke({onNone:()=>this.getEither(t),onSome:i=>y(yt(i))}))})}invalidate(t){return E(()=>{Cs(this.cacheState.map,t)})}invalidateWhen(t,r){return E(()=>{let o=ze(this.cacheState.map,t);j(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&Cs(this.cacheState.map,t)})}get invalidateAll(){return E(()=>{this.cacheState.map=vs()})}refresh(t){return eo(r=>I(()=>{let o=t,n=Gh(this.fiberId),s=mt(ze(this.cacheState.map,o));if(s===void 0&&(kr(this.cacheState.map,o)?s=mt(ze(this.cacheState.map,o)):Ut(this.cacheState.map,o,Rw(tc(o),n))),s===void 0)return Ee(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=mt(ze(this.cacheState.map,o));return C(i,s)&&Cs(this.cacheState.map,o),Ee(this.get(t))}return m(this.lookupValueOf(t,n),dp(()=>{let i=mt(ze(this.cacheState.map,o));if(C(i,s)){let c=wD(n,s);return Ut(this.cacheState.map,o,c),!0}return!1}),Ee)}case"Pending":return Os(s.deferred);case"Refreshing":return Os(s.deferred)}}))}set(t,r){return eo(o=>E(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=hE(r),c=Mw(tc(s),i,Yp(n),n+qr(st(this.timeToLive(i))));Ut(this.cacheState.map,s,c)}))}get size(){return E(()=>Gl(this.cacheState.map))}get values(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}get entries(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}get keys(){return E(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return eo(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.hasExpired(o,t.timeToLiveMillis)?(Cs(this.cacheState.map,t.key.current),y(S())):(this.trackHit(),v(t.exit,_));case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(S()):v(Os(t.deferred),_);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(S()):v(Os(t.deferred),_):v(t.complete.exit,_)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(CE(this.cacheState.accesses,t),zu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=kE(this.cacheState.accesses,Qh);n===Qh?r=!1:this.cacheState.keys.add(n)}let o=Gl(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?kr(this.cacheState.map,n.current)&&(Cs(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}nr(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return eo(o=>I(()=>{let n=t;return m(this.lookup(t),Cr(this.context),ke,x(s=>{let i=o.unsafeCurrentTimeMillis(),c=Yp(i),a=Mw(tc(n),s,c,i+qr(st(this.timeToLive(s))));return Ut(this.cacheState.map,n,a),ne(pE(r,s),s)}),vr(()=>ne(fE(r),E(()=>{Cs(this.cacheState.map,n)}))))}))}};var Fw=(e,t,r)=>new hg(e,Ct(),Vu,t,o=>st(r(o)));u();var Tw=ns;var Aw=jc;var et={};Dy(et,{Do:()=>DW,EffectTypeId:()=>Cq,Tag:()=>lU,acquireRelease:()=>y5,acquireReleaseInterruptible:()=>b5,acquireUseRelease:()=>S5,addFinalizer:()=>_5,all:()=>Aq,allSuccesses:()=>Pq,allWith:()=>Iq,allowInterrupt:()=>KH,andThen:()=>o3,annotateCurrentSpan:()=>JB,annotateLogs:()=>Y3,annotateLogsScoped:()=>Q3,annotateSpans:()=>KB,ap:()=>IB,as:()=>s5,asSome:()=>i5,asSomeError:()=>c5,asVoid:()=>a5,async:()=>oH,asyncEffect:()=>nH,awaitAllChildren:()=>I5,bind:()=>qW,bindTo:()=>HW,blocked:()=>PB,cacheRequestResult:()=>qB,cached:()=>Rq,cachedFunction:()=>Fq,cachedInvalidateWithTTL:()=>Mq,cachedWithTTL:()=>wq,catch:()=>CH,catchAll:()=>kH,catchAllCause:()=>wH,catchAllDefect:()=>MH,catchIf:()=>RH,catchSome:()=>FH,catchSomeCause:()=>TH,catchSomeDefect:()=>AH,catchTag:()=>IH,catchTags:()=>PH,cause:()=>NH,checkInterruptible:()=>JH,clock:()=>rW,clockWith:()=>oW,configProviderWith:()=>bW,console:()=>iW,consoleWith:()=>cW,context:()=>EW,contextWith:()=>OW,contextWithEffect:()=>vW,currentParentSpan:()=>QB,currentSpan:()=>YB,custom:()=>sH,daemonChildren:()=>P5,delay:()=>lW,descriptor:()=>N5,descriptorWith:()=>L5,die:()=>pH,dieMessage:()=>fH,dieSync:()=>mH,diffFiberRefs:()=>D5,disconnect:()=>YH,dropUntil:()=>Nq,dropWhile:()=>Lq,either:()=>BW,ensuring:()=>E5,ensuringChild:()=>q5,ensuringChildren:()=>H5,eventually:()=>LH,every:()=>Dq,exists:()=>qq,exit:()=>UW,fail:()=>cH,failCause:()=>uH,failCauseSync:()=>lH,failSync:()=>aH,fiberId:()=>W5,fiberIdWith:()=>B5,filter:()=>Hq,filterMap:()=>Wq,filterOrDie:()=>$W,filterOrDieMessage:()=>VW,filterOrElse:()=>KW,filterOrFail:()=>JW,finalizersMask:()=>k5,findFirst:()=>Bq,firstSuccessOf:()=>Uq,flatMap:()=>r3,flatten:()=>n3,flip:()=>u5,flipWith:()=>l5,forEach:()=>jq,forever:()=>x3,fork:()=>U5,forkAll:()=>z5,forkDaemon:()=>j5,forkIn:()=>G5,forkScoped:()=>$5,forkWithErrorHandler:()=>V5,fromFiber:()=>K5,fromFiberEffect:()=>J5,fromNullable:()=>aU,functionWithSpan:()=>sU,gen:()=>hH,getFiberRefs:()=>k3,getRuntimeFlags:()=>lB,head:()=>zq,if:()=>GW,ignore:()=>DH,ignoreLogged:()=>qH,inheritFiberRefs:()=>w3,interrupt:()=>QH,interruptWith:()=>ZH,interruptible:()=>XH,interruptibleMask:()=>e5,intoDeferred:()=>jW,isEffect:()=>kq,isFailure:()=>N3,isSuccess:()=>L3,iterate:()=>g3,labelMetrics:()=>dB,labelMetricsScoped:()=>gB,let:()=>WW,liftPredicate:()=>n5,linkSpans:()=>eU,locally:()=>M3,locallyScoped:()=>F3,locallyScopedWith:()=>T3,locallyWith:()=>R3,log:()=>B3,logAnnotations:()=>Z3,logDebug:()=>z3,logError:()=>V3,logFatal:()=>K3,logInfo:()=>G3,logTrace:()=>j3,logWarning:()=>$3,logWithLevel:()=>U3,loop:()=>y3,makeSemaphore:()=>_B,makeSpan:()=>tU,makeSpanScoped:()=>rU,map:()=>p5,mapAccum:()=>f5,mapBoth:()=>m5,mapError:()=>h5,mapErrorCause:()=>d5,mapInputContext:()=>CW,match:()=>D3,matchCause:()=>q3,matchCauseEffect:()=>H3,matchEffect:()=>W3,merge:()=>x5,mergeAll:()=>Gq,metricLabels:()=>yB,negate:()=>g5,never:()=>dH,none:()=>xH,onError:()=>O5,onExit:()=>v5,onInterrupt:()=>t5,once:()=>Tq,option:()=>zW,optionFromOptional:()=>uU,orDie:()=>eB,orDieWith:()=>tB,orElse:()=>rB,orElseFail:()=>oB,orElseSucceed:()=>nB,parallelErrors:()=>HH,parallelFinalizers:()=>C5,partition:()=>$q,patchFiberRefs:()=>A3,patchRuntimeFlags:()=>pB,promise:()=>gH,provide:()=>kW,provideService:()=>wW,provideServiceEffect:()=>MW,race:()=>i3,raceAll:()=>s3,raceFirst:()=>c3,raceWith:()=>a3,random:()=>sB,randomWith:()=>iB,reduce:()=>Vq,reduceEffect:()=>Kq,reduceRight:()=>Jq,reduceWhile:()=>Yq,repeat:()=>b3,repeatN:()=>S3,repeatOrElse:()=>_3,replicate:()=>Qq,replicateEffect:()=>Zq,request:()=>DB,retry:()=>BH,retryOrElse:()=>UH,runCallback:()=>OB,runFork:()=>EB,runPromise:()=>vB,runPromiseExit:()=>CB,runRequestBlock:()=>NB,runSync:()=>kB,runSyncExit:()=>wB,runtime:()=>uB,sandbox:()=>WH,schedule:()=>E3,scheduleForked:()=>O3,scheduleFrom:()=>v3,scope:()=>M5,scopeWith:()=>R5,scoped:()=>F5,sequentialFinalizers:()=>w5,serviceConstants:()=>AW,serviceFunction:()=>RW,serviceFunctionEffect:()=>FW,serviceFunctions:()=>TW,serviceMembers:()=>IW,serviceOption:()=>PW,serviceOptional:()=>NW,setFiberRefs:()=>I3,sleep:()=>pW,spanAnnotations:()=>ZB,spanLinks:()=>XB,step:()=>LB,succeed:()=>yH,succeedNone:()=>bH,succeedSome:()=>SH,summarized:()=>u3,supervised:()=>Y5,suspend:()=>_H,sync:()=>EH,tagMetrics:()=>hB,tagMetricsScoped:()=>xB,takeUntil:()=>Xq,takeWhile:()=>eH,tap:()=>l3,tapBoth:()=>p3,tapDefect:()=>f3,tapError:()=>m3,tapErrorCause:()=>d3,tapErrorTag:()=>h3,timed:()=>fW,timedWith:()=>mW,timeout:()=>hW,timeoutFail:()=>xW,timeoutFailCause:()=>gW,timeoutOption:()=>dW,timeoutTo:()=>yW,tracer:()=>UB,tracerWith:()=>jB,transplant:()=>Q5,try:()=>jH,tryMap:()=>zH,tryMapPromise:()=>GH,tryPromise:()=>$H,uninterruptible:()=>r5,uninterruptibleMask:()=>o5,unless:()=>YW,unlessEffect:()=>QW,unsafeMakeSemaphore:()=>SB,unsandbox:()=>VH,updateFiberRefs:()=>P3,updateService:()=>LW,useSpan:()=>oU,using:()=>T5,validate:()=>MB,validateAll:()=>tH,validateFirst:()=>rH,validateWith:()=>RB,void:()=>OH,when:()=>ZW,whenEffect:()=>XW,whenFiberRef:()=>e3,whenRef:()=>t3,whileLoop:()=>C3,withClock:()=>sW,withClockScoped:()=>nW,withConcurrency:()=>Z5,withConfigProvider:()=>SW,withConfigProviderScoped:()=>_W,withConsole:()=>uW,withConsoleScoped:()=>aW,withEarlyRelease:()=>A5,withFiberRuntime:()=>iH,withLogSpan:()=>J3,withMaxOpsBeforeYield:()=>tW,withMetric:()=>bB,withParentSpan:()=>cU,withRandom:()=>cB,withRandomScoped:()=>aB,withRequestBatching:()=>HB,withRequestCache:()=>BB,withRequestCaching:()=>WB,withRuntimeFlagsPatch:()=>fB,withRuntimeFlagsPatchScoped:()=>mB,withScheduler:()=>X5,withSchedulingPriority:()=>eW,withSpan:()=>nU,withSpanScoped:()=>iU,withTracer:()=>zB,withTracerEnabled:()=>$B,withTracerScoped:()=>GB,withTracerTiming:()=>VB,withUnhandledErrorLogLevel:()=>X3,yieldNow:()=>vH,zip:()=>FB,zipLeft:()=>TB,zipRight:()=>AB,zipWith:()=>xR});u();u();u();u();u();u();u();u();u();var DD="effect/ScheduleInterval",qa=Symbol.for(DD),dg={[qa]:qa,startMillis:0,endMillis:0},xg=(e,t)=>e>t?dg:{[qa]:qa,startMillis:e,endMillis:t},Iw=l(2,(e,t)=>Pw(e,t)===e),Pw=l(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t);var Nw=e=>e.startMillis>=e.endMillis;var Lw=l(2,(e,t)=>{let r=Math.max(e.startMillis,t.startMillis),o=Math.min(e.endMillis,t.endMillis);return xg(r,o)});var Dw=e=>xg(e,Number.POSITIVE_INFINITY);var gg=dg,qw=Iw;var Hw=Nw;var Ww=Lw;var Bw=Dw;var WD="effect/ScheduleIntervals",bg=Symbol.for(WD),Sg=e=>({[bg]:bg,intervals:e});var Uw=l(2,(e,t)=>BD(e.intervals,t.intervals,Lt())),BD=(e,t,r)=>{let o=e,n=t,s=r;for(;rt(o)&&rt(n);){let i=m(Ze(o),Ww(Ze(n))),c=Hw(i)?s:m(s,Qe(i));m(Ze(o),qw(Ze(n)))?o=nt(o):n=nt(n),s=c}return Sg(Lr(s))},Qp=e=>m(e.intervals,wu,De(()=>gg)).startMillis,jw=e=>m(e.intervals,wu,De(()=>gg)).endMillis,zw=l(2,(e,t)=>Qp(e)<Qp(t)),Gw=e=>rt(e.intervals);var $w=Sg;var Vw=Uw,Kw=Qp,_g=jw,Jw=zw,Yw=Gw;var Og="Continue",Qw="Done",Zw=e=>({_tag:Og,intervals:e}),Xw=e=>({_tag:Og,intervals:$w(Re(e))}),eM={_tag:Qw},tM=e=>e._tag===Og,rM=e=>e._tag===Qw;var oM=Zw;var nM=Xw,rc=eM,vg=tM,Ha=rM;u();var iM=Oo;var cM=ys;u();u();var zD="effect/Schedule",pM=Symbol.for(zD),fM=e=>k(e,pM),GD="effect/ScheduleDriver",$D=Symbol.for(GD),VD={_Out:e=>e,_In:e=>e,_R:e=>e},KD={_Out:e=>e,_In:e=>e,_R:e=>e},Cg=class{initial;step;[pM]=VD;constructor(t,r){this.initial=t,this.step=r}pipe(){return O(this,arguments)}},kg=class{schedule;ref;[$D]=KD;constructor(t,r){this.schedule=t,this.ref=r}get state(){return v(lr(this.ref),t=>t[1])}get last(){return x(lr(this.ref),([t,r])=>{switch(t._tag){case"None":return Or(()=>new ir);case"Some":return y(t.value)}})}get reset(){return ko(this.ref,[S(),this.schedule.initial])}next(t){return m(v(lr(this.ref),r=>r[1]),x(r=>m(Zl,x(o=>m(I(()=>this.schedule.step(o,t,r)),x(([n,s,i])=>{let c=ko(this.ref,[_(s),n]);if(Ha(i))return ne(c,J(S()));let a=Kw(i.intervals)-o;return a<=0?le(c,s):m(c,ne(Fs(hi(a))),le(s))}))))))}},ef=(e,t)=>new Cg(e,t);var JD=l(2,(e,t)=>Rg(e,(r,o)=>E(()=>t(r,o)))),Rg=l(2,(e,t)=>ef(e.initial,(r,o,n)=>x(e.step(r,o,n),([s,i,c])=>Ha(c)?y([s,i,rc]):v(t(o,i),a=>a?[s,i,c]:[s,i,rc]))));var Fg=e=>m(ws([S(),e.initial]),v(t=>new kg(e,t)));var mM=l(2,(e,t)=>YD(e,t,Vw)),YD=l(3,(e,t,r)=>ef([e.initial,t.initial],(o,n,s)=>m(Qr(e.step(o,n,s[0]),t.step(o,n,s[1]),(i,c)=>[i,c]),x(([[i,c,a],[p,f,h]])=>vg(a)&&vg(h)?wg(e,t,n,i,c,a.intervals,p,f,h.intervals,r):y([[i,p],[c,f],rc]))))),wg=(e,t,r,o,n,s,i,c,a,p)=>{let f=p(s,a);return Yw(f)?y([[o,i],[n,c],oM(f)]):m(s,Jw(a))?x(e.step(_g(s),r,o),([h,d,g])=>Ha(g)?y([[h,i],[d,c],rc]):wg(e,t,r,h,d,g.intervals,i,c,a,p)):x(t.step(_g(a),r,i),([h,d,g])=>Ha(g)?y([[o,h],[n,d],rc]):wg(e,t,r,o,n,s,h,d,g.intervals,p))};var QD=e=>ef(e.initial,(t,r,o)=>m(e.step(t,r,o),v(([n,s,i])=>[n,r,i])));var hM=e=>XD(Pg,t=>t<e);var ZD=(e,t)=>ef(e,(r,o,n)=>E(()=>[t(n),n,nM(Bw(r))]));var dM=l(2,(e,t)=>Rg(e,(r,o)=>mp(t(r))));var xM=l(2,(e,t)=>Rg(e,(r,o)=>t(r))),XD=l(2,(e,t)=>JD(e,(r,o)=>t(o)));var Zp=Symbol.for("effect/Schedule/ScheduleDefect"),Mg=class{error;[Zp];constructor(t){this.error=t,this[Zp]=Zp}},eq=e=>k(e,Zp),Xp=e=>Er(e,t=>So(new Mg(t))),gM=e=>$r(e,t=>Ke(Xo(t,r=>ki(r)&&eq(r.defect)?_(r.defect):S()),{onNone:()=>Q(t),onSome:r=>J(r.error)})),uM=l(2,(e,t)=>Tg(e,t,(r,o)=>J(r))),yM=l(2,(e,t)=>{if(fM(t))return uM(e,t);let r=t.schedule??QD(Pg),o=t.while?xM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):Xp(c)}):r,n=t.until?dM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):Xp(c)}):o,s=t.times?mM(n,hM(t.times)):n;return gM(uM(e,s))}),Tg=l(3,(e,t,r)=>x(Fg(t),o=>Xe(e,{onFailure:n=>r(n,S()),onSuccess:n=>bM(e,o,r,n)}))),bM=(e,t,r,o)=>Xe(t.next(o),{onFailure:()=>ls(t.last),onSuccess:n=>Xe(e,{onFailure:s=>r(s,_(n)),onSuccess:s=>bM(e,t,r,s)})}),lM=l(2,(e,t)=>Ag(e,t,(r,o)=>J(r))),SM=l(2,(e,t)=>{if(fM(t))return lM(e,t);let r=t.schedule??Pg,o=t.while?xM(r,i=>{let c=t.while(i);return typeof c=="boolean"?y(c):Xp(c)}):r,n=t.until?dM(o,i=>{let c=t.until(i);return typeof c=="boolean"?y(c):Xp(c)}):o,s=t.times?mM(n,hM(t.times)):n;return gM(lM(e,s))}),Ag=l(3,(e,t,r)=>x(Fg(t),o=>_M(e,o,r))),_M=(e,t,r)=>Er(e,o=>Xe(t.next(o),{onFailure:()=>m(t.last,ls,x(n=>r(o,n))),onSuccess:()=>_M(e,t,r)})),tf=l(2,(e,t)=>Ig(e,void 0,t)),Ig=l(3,(e,t,r)=>x(Fg(r),o=>EM(e,t,o))),EM=(e,t,r)=>Xe(r.next(t),{onFailure:()=>ls(r.last),onSuccess:()=>x(e,o=>EM(e,o,r))});var Pg=ZD(0,e=>e+1);var Lg=class{permits;waiters=new Set;taken=0;constructor(t){this.permits=t}get free(){return this.permits-this.taken}take=t=>qe(r=>{if(this.free<t){let o=()=>{this.free<t||(this.waiters.delete(o),this.taken+=t,r(y(t)))};return this.waiters.add(o),E(()=>{this.waiters.delete(o)})}return this.taken+=t,r(y(t))});updateTaken=t=>re(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(yn).scheduleTask(()=>{let o=this.waiters.values(),n=o.next();for(;n.done===!1&&this.free>0;)n.value(),n=o.next()},r.getFiberRef(pn)),y(this.free)));release=t=>this.updateTaken(r=>r-t);releaseAll=this.updateTaken(t=>0);withPermits=t=>r=>Fe(o=>x(o(this.take(t)),n=>Mr(o(r),this.release(n))))},of=e=>new Lg(e),CM=e=>E(()=>of(e)),kM=e=>nf(e,vw),wM=l(2,(e,t)=>v(qg(e,t),r=>r[0])),qg=l(2,(e,t)=>{let r=st(t);return x(cr(),o=>v(sf(S()),n=>[Cr(tq(e,r,n),o),rq(n)]))}),vM=(e,t,r)=>{let o=qr(st(t));return m(Rt(),Jt(n=>Jr(e,n)),v(n=>_([r+o,n])))},tq=(e,t,r)=>Fe(o=>m(eo(n=>n.currentTimeMillis),x(n=>iq(r,s=>{switch(s._tag){case"None":return _(vM(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?_(vM(e,t,n)):S()}}})),x(n=>V(n)?on("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):o(ct(n.value[1]))))),rq=e=>ko(e,S()),MM=l(2,(e,t)=>nf(e,r=>t(Kp(r)))),nf=l(2,(e,t)=>x(Dk,r=>m(Bg(e,r),Mr(x(r.value,t))))),RM=l(e=>xr(e[0]),(e,t)=>t?.discard?Ht(e,pr):v(it(e,pr),Kp)),Hg=l(2,(e,t)=>Fe(r=>x(t.fork(to),o=>m(r(e),_t(n=>o.close(n)),Hs,Jt(n=>o.addFinalizer(()=>qt(s=>C(s,n.id())?B:Ee(hs(n))))))))),Wg=e=>Ws(t=>Hg(e,t)),FM=e=>Sn(e),TM=e=>I(()=>x(e,Sn)),Ng=Symbol.for("effect/Effect/memoizeFunction.key"),rf=class{a;eq;[Ng]=Ng;constructor(t,r){this.a=t,this.eq=r}[R](t){return k(t,Ng)?this.eq?this.eq(this.a,t.a):C(this.a,t.a):!1}[F](){return this.eq?0:K(this,w(this.a))}},AM=(e,t)=>m(E(()=>vs()),x(sf),v(r=>o=>m(r.modifyEffect(n=>{let s=m(n,ze(new rf(o,t)));return V(s)?m(Rt(),Jt(i=>m(Wi(e(o)),Jr(i),pr)),v(i=>[i,m(n,Ut(new rf(o,t),i))])):y([s.value,n])}),x(ct),x(([n,s])=>m(Rs(n),le(s)))))),IM=l(2,(e,t)=>m(ke(e),Jp(ke(t)),r=>Mt(r))),PM=l(2,(e,t)=>m(e,tf(t),Wg)),Bg=l(2,(e,t)=>ot($p,o=>o.zip(t))(e)),NM=l(2,(e,t)=>Ug(e,{onTimeout:()=>oE(t),duration:t})),Ug=l(2,(e,{duration:t,onTimeout:r})=>Mt(Wa(e,{onTimeout:()=>Or(r),onSuccess:y,duration:t}))),LM=l(2,(e,{duration:t,onTimeout:r})=>Mt(Wa(e,{onTimeout:()=>sn(r),onSuccess:y,duration:t}))),DM=l(2,(e,t)=>Wa(e,{duration:t,onSuccess:_,onTimeout:S})),Wa=l(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>qt(n=>lg(e,Kr(Fs(t)),{onSelfWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>le(Wt(i,n),r(c.value))):x(Wt(i,n),()=>ie(c.cause))),onOtherWin:(s,i)=>x(s.await,c=>c._tag==="Success"?x(s.inheritAll,()=>le(Wt(i,n),o())):x(Wt(i,n),()=>ie(c.cause))),otherScope:bn}))),oq="effect/Ref/SynchronizedRef",nq=Symbol.for(oq),sq={_A:e=>e},Dg=class{ref;withLock;[nq]=sq;[tp]=Md;[Xr];constructor(t,r){this.ref=t,this.withLock=r,this[Xr]=Xr,this.get=lr(this.ref)}get;modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(x(lr(this.ref),t),x(([r,o])=>le(ko(this.ref,o),r))))}pipe(){return O(this,arguments)}},sf=e=>E(()=>qM(e)),qM=e=>{let t=rp(e),r=of(1);return new Dg(t,r.withPermits(1))},iq=l(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return v(o.value,n=>[n,n])}}));u();var WM="Fresh";u();u();var BM=Wt;var af=e=>(t,r)=>{let o=Yu(),n=[[dt,[[o,e.context]]]];r?.scheduler&&n.push([yn,[[o,r.scheduler]]]);let s=SO(e.fiberRefs,{entries:n,forkAs:o});r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Ia(o,s,e.runtimeFlags),c=t;r?.scope&&(c=x(cM(r.scope,to),p=>ne(Hl(p,qt(f=>C(f,i.id())?B:Wt(i,f))),_t(t,f=>iM(p,f)))));let a=i._supervisor;return a!==Ds&&(a.onStart(e.context,c,S(),i),i.addObserver(p=>a.onEnd(p,i))),bn.add(e.runtimeFlags,i),r?.immediate===!1?i.resume(c):i.start(c),i},Vg=e=>(t,r={})=>{let o=af(e)(t,r);return r.onExit&&o.addObserver(n=>{r.onExit(n)}),(n,s)=>Vg(e)(m(o,BM(n??Vt)),{...s,onExit:s?.onExit?i=>s.onExit(mE(i)):void 0})},aq=e=>t=>{let r=GM(e)(t);if(r._tag==="Failure")throw jM(r.effect_instruction_i0);return r.effect_instruction_i0},Gg=class extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}},uq=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Gg(e);return Error.stackTraceLimit=t,r};var jg=Symbol.for("effect/Runtime/FiberFailure"),zg=Symbol.for("effect/Runtime/FiberFailure/Cause"),$g=class extends Error{[jg];[zg];constructor(t){super(),this[jg]=jg,this[zg]=t;let r=gl(t);if(r.length>0){let o=r[0];this.name=o.name,this.message=o.message,this.stack=o.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[zg].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[U](){return this.toString()}},jM=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new $g(e);return Error.stackTraceLimit=t,r};var zM=e=>{let t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return ta(t.left);case"Right":return xe(t.right);case"Some":return xe(t.value);case"None":return ta(ir())}},GM=e=>t=>{let r=zM(t);if(r)return r;let o=new Mp,n=af(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw uq(n)},lq=e=>(t,r)=>$M(e)(t,r).then(o=>{switch(o._tag){case Le:return o.effect_instruction_i0;case Ne:throw jM(o.effect_instruction_i0)}}),$M=e=>(t,r)=>new Promise(o=>{let n=zM(t);n&&o(n);let s=af(e)(t);s.addObserver(i=>{o(i)}),r?.signal!==void 0&&(r.signal.aborted?s.unsafeInterruptAsFork(s.id()):r.signal.addEventListener("abort",()=>{s.unsafeInterruptAsFork(s.id())},{once:!0}))}),cf=class{context;runtimeFlags;fiberRefs;constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return O(this,arguments)}},pq=e=>new cf(e.context,e.runtimeFlags,e.fiberRefs),uf=()=>re((e,t)=>y(new cf(e.getFiberRef(dt),t.runtimeFlags,e.getFiberRefs()))),fq=fh(jr,lh,uh),Ao=pq({context:Ct(),runtimeFlags:fq,fiberRefs:_O()});var VM=Vg(Ao),KM=af(Ao),JM=lq(Ao),YM=$M(Ao),QM=aq(Ao),ZM=GM(Ao),XM=e=>I(()=>{let t;return x(Rt(),r=>x(uf(),o=>Fe(n=>ne(pr(n(Se(e(s=>Vg(o)(Jr(s,r))),{onFailure:s=>_s(r,s),onSuccess:s=>(t=s,B)}))),n(vr(ct(r),()=>t??B))))))});u();var tR=l(2,(e,t)=>e.modifyEffect(t));var hq="effect/Layer",rR=Symbol.for(hq),dq={_RIn:e=>e,_E:e=>e,_ROut:e=>e},VY={[rR]:dq,pipe(){return O(this,arguments)}},xq="effect/Layer/MemoMap",Kg=Symbol.for(xq),gq=e=>k(e,rR),yq=e=>e._tag===WM,Jg=class{ref;[Kg];constructor(t){this.ref=t,this[Kg]=Kg}getOrElseMemoize(t,r){return m(tR(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,c=m(s,x(([a,p])=>m(Rs(a),le(p))),_t(Ii({onFailure:()=>B,onSuccess:()=>gs(r,i)})));return y([c,o])}return m(ws(0),x(s=>m(Rt(),x(i=>m(ws(()=>B),v(c=>{let a=Fe(f=>m(La(),x(h=>m(f(x(nR(t,h,!0),d=>Wi(d(this)))),ke,x(d=>{switch(d._tag){case Ne:return m(_s(i,d.effect_instruction_i0),ne(Oo(h,d)),ne(Q(d.effect_instruction_i0)));case Le:return m(ko(c,g=>m(Oo(h,g),Fi(op(s,b=>[b===1,b-1])),Ee)),ne(ua(s,g=>g+1)),ne(gs(r,g=>m(E(()=>o.delete(t)),ne(lr(c)),x(b=>b(g))))),ne(sa(i,d.effect_instruction_i0)),le(d.effect_instruction_i0[1]))}}))))),p=[m(ct(i),_t(Ss({onFailure:()=>B,onSuccess:()=>ua(s,f=>f+1)}))),f=>m(lr(c),x(h=>h(f)))];return[a,yq(t)?o:o.set(t,p)]}))))))}),Mt)}},bq=I(()=>v(sf(new Map),e=>new Jg(e)));var oR=l(2,(e,t)=>x(bq,r=>x(nR(e,t),o=>o(r))));var nR=(e,t,r=!1)=>{let o=e;switch(o._tag){case"Locally":return E(()=>n=>o.f(n.getOrElseMemoize(o.self,t)));case"ExtendScope":return E(()=>n=>Ws(s=>n.getOrElseMemoize(o.layer,s)));case"Fold":return E(()=>n=>m(n.getOrElseMemoize(o.layer,t),Se({onFailure:s=>n.getOrElseMemoize(o.failureK(s),t),onSuccess:s=>n.getOrElseMemoize(o.successK(s),t)})));case"Fresh":return E(()=>n=>m(o.layer,oR(t)));case"FromEffect":return r?E(()=>n=>o.effect):E(()=>n=>n.getOrElseMemoize(e,t));case"Provide":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),x(s=>m(n.getOrElseMemoize(o.second,t),Cr(s)))));case"Scoped":return r?E(()=>n=>kn(o.effect,t)):E(()=>n=>n.getOrElseMemoize(e,t));case"Suspend":return E(()=>n=>n.getOrElseMemoize(o.evaluate(),t));case"ProvideMerge":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),Qr(n.getOrElseMemoize(o.second,t),o.zipK)));case"ZipWith":return E(()=>n=>m(n.getOrElseMemoize(o.first,t),To(n.getOrElseMemoize(o.second,t),o.zipK,{concurrent:!0})))}};var Sq=l(2,(e,t)=>rn(La(),r=>x(oR(t,r),o=>zl(e,o)),(r,o)=>Oo(r,o))),_q=l(2,(e,t)=>{let r=Ts(Ao.fiberRefs,t.fiberRefs),o=sr(Ao.runtimeFlags,t.runtimeFlags);return Fe(n=>re(s=>{let i=s.getFiberRef(dt),c=s.getFiberRefs(),a=As(s.id(),c)(r),p=s._runtimeFlags,f=go(o)(p),h=Ts(a,c),d=sr(f,p);return s.setFiberRefs(a),s._runtimeFlags=f,Mr(zl(n(e),Hn(i,t.context)),re(g=>(g.setFiberRefs(As(g.id(),g.getFiberRefs())(h)),g._runtimeFlags=go(d)(g._runtimeFlags),B)))}))}),sR=l(2,(e,t)=>gq(t)?Sq(e,t):Nb(t)?zl(e,t):_q(e,t));var iR=v(Bt(ye),Be(Co)),cR=e=>He(ye,t=>e(Be(t,Co))),aR=l(2,(e,t)=>ot(e,ye,Ce(Co,t))),uR=e=>mr(ye,Ce(Co,e));u();var Yg=W(Symbol.for("effect/FiberRef/currentCache"),()=>Te(Fw(65536,()=>v(Rt(),e=>({listeners:new Ki,handle:e})),()=>Fm(60)))),Qg=W(Symbol.for("effect/FiberRef/currentCacheEnabled"),()=>Te(!1)),lR=(e,t)=>x(ue(t)?t:y(t),r=>qt(o=>{let n=new Proxy(e,{});return He(Qg,s=>{if(s){let c=He(Yg,a=>x(a.getEither(n),p=>{switch(p._tag){case"Left":return p.left.listeners.interrupted?x(a.invalidateWhen(n,f=>f.handle===p.left.handle),()=>c):(p.left.listeners.increment(),Fe(f=>x(ke(bo(t_,f(ct(p.left.handle)))),h=>(p.left.listeners.decrement(),h))));case"Right":return p.right.listeners.increment(),Fe(f=>x(ke(bo(Eh(r,Oh({request:n,result:p.right.handle,listeners:p.right.listeners,ownerId:o,state:{completed:!1}})),f(ct(p.right.handle)))),()=>(p.right.listeners.decrement(),ct(p.right.handle))))}}));return c}let i=new Ki;return i.increment(),x(Rt(),c=>Mr(bo(Eh(r,Oh({request:n,result:c,listeners:i,ownerId:o,state:{completed:!1}})),ct(c)),E(()=>i.decrement())))})})),pR=(e,t)=>He(Qg,r=>r?He(Yg,o=>x(o.getEither(e),n=>{switch(n._tag){case"Left":return B;case"Right":return jh(n.right.handle,t)}})):B),fR=l(2,(e,t)=>We(e,Qg,t)),mR=l(2,(e,t)=>We(e,Yg,t));u();var hR=bk;var Cq=Mi,kq=ue,wq=wM,Mq=qg,Rq=Hd,Fq=AM,Tq=Wd,Aq=ec,Iq=ow,Pq=nw,Nq=sv,Lq=iv,Dq=gv,qq=ew,Hq=rw,Wq=av,Bq=mv,Uq=dv,jq=fr,zq=Sv,Gq=og,$q=ng,Vq=$v,Kq=lw,Jq=Vv,Yq=Kv,Qq=rg,Zq=sw,Xq=r0,eH=o0,tH=aw,rH=hw,oH=qe,nH=XM,sH=Vc,iH=re,cH=J,aH=Or,uH=Q,lH=sn,pH=So,fH=on,mH=nn,hH=bv,dH=ms,xH=qv,gH=jv,yH=y,bH=ha,SH=e0,_H=I,EH=E,OH=B;var vH=Yr,CH=zO;var kH=Er,wH=$r,MH=GO,RH=Kc,FH=I_,TH=$O,AH=VO,IH=KO,PH=JO,NH=YO,LH=Pd,DH=Ld,qH=_v,HH=Uv,WH=Zv,BH=SM,UH=Ag,jH=Id;var zH=l0,GH=p0,$H=zd,VH=h0,KH=XO,JH=P_,YH=Cw,QH=wl,ZH=Ml,XH=Kr,e5=L_,t5=vr,r5=_o,o5=Fe,n5=pv,s5=le,i5=lp,c5=jO,a5=Ee,u5=an,l5=xv,p5=v,f5=Lv,m5=Yc,h5=un,d5=Bi,x5=Dv,g5=mp,y5=Na,b5=Zk,S5=rn,_5=Xi,E5=Mr,O5=Rl,v5=_t,C5=zp,k5=vn,w5=Gp,M5=ag,R5=Ws,F5=sg,T5=fw,A5=yw,I5=kM,P5=Xk,N5=ev,L5=pp,D5=Wi,q5=MM,H5=nf,W5=cn,B5=qt,U5=pr,j5=Hs,z5=RM,G5=Hg,$5=Wg,V5=iw,K5=FM,J5=TM,Y5=Bg,Q5=Fl,Z5=q_,X5=bC,eW=qh,tW=Z_,rW=QO,oW=eo,nW=dw,sW=oO,iW=iR,cW=cR,aW=uR,uW=aR,lW=ZO,pW=Fs,fW=a0,mW=jd,hW=NM,dW=DM,xW=Ug,gW=LM,yW=Wa,bW=sO,SW=nO,_W=gw,EW=cr,OW=cv,vW=ar,CW=Es,kW=sR,wW=Ui,MW=zv,RW=S0,FW=b0,TW=Gd,AW=$d,IW=_0,PW=E0,NW=Vd,LW=d0,DW=tv,qW=rv,HW=ov,WW=nv;var BW=Vr,UW=ke,jW=Jr,zW=Hv,GW=kl;var $W=uv,VW=lv,KW=fa,JW=fv,YW=f0,QW=m0,ZW=dp,XW=Fi,e3=x0,t3=g0,r3=x,o3=as,n3=Mt,s3=uw,i3=Jp,c3=IM,a3=ug,u3=da,l3=Jt,p3=n0,f3=s0,m3=Ud,h3=i0,d3=c0,x3=Nd,g3=Dd,y3=Iv,b3=yM,S3=Yv,_3=Tg,E3=tf,O3=PM,v3=Ig,C3=Ti,k3=fp,w3=Ev,M3=We,R3=ot,F3=Vp,T3=mr,A3=Rs,I3=Xv,P3=hp,N3=Ov,L3=vv,D3=ma,q3=Jc,H3=Se,W3=Xe,B3=Cv,U3=(e,...t)=>wo(e)(...t),j3=kv,z3=qd,G3=wv,$3=Mv,V3=Rv,K3=Fv,J3=Tv,Y3=UO,Q3=Qk,Z3=Av,X3=X_,eB=ls,tB=Ph,rB=us,oB=Wv,nB=Bv,sB=Gv,iB=Yl,cB=iO,aB=xw,uB=uf,lB=Ri,pB=ln,fB=Tl,mB=Ew,hB=t0,dB=Bd,xB=pw,gB=ig,yB=eE,bB=y0,SB=of,_B=CM,EB=KM,OB=VM,vB=JM,CB=YM,kB=QM,wB=ZM,MB=mw,RB=cg,FB=bw,TB=Sw,AB=_w,xR=To,IB=l(2,(e,t)=>xR(e,t,(r,o)=>r(o))),PB=bo,NB=vl,LB=Cl,DB=l(e=>hR(e[0]),lR),qB=pR,HB=H_,WB=fR,BB=mR,UB=u0,jB=Ql,zB=cO,GB=kw,$B=W_,VB=B_,KB=v0,JB=O0,YB=Kd,QB=C0,ZB=R0,XB=F0,eU=k0,tU=M0,rU=Pa,oU=ap,nU=Yd,sU=T0,iU=ww,cU=up,aU=A0,uU=I0,lU=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function o(){}Object.setPrototypeOf(o,dm),o.key=e,Object.defineProperty(o,"stack",{get(){return r.stack}});let n=new Map;return new Proxy(o,{get(i,c,a){if(c==="use")return h=>as(o,h);if(c in o)return o[c];if(n.has(c))return n.get(c);let p=(...h)=>as(o,d=>typeof d[c]=="function"?(n.set(c,(...g)=>as(o,b=>b[c](...g))),d[c](...h)):(n.set(c,as(o,g=>g[c])),d[c])),f=as(o,h=>h[c]);return Object.assign(p,f),Object.setPrototypeOf(p,Object.getPrototypeOf(f)),n.set(c,p),p}})};u();var pU=function(){return class extends Wl{constructor(t){super(t?.message,t?.cause?{cause:t.cause}:void 0),t&&Object.assign(this,t)}}}(),lf=e=>{class t extends pU{_tag=e}return t.prototype.name=e,t};u();u();u();u();var Ba=class{constructor(t,r,o,n,s){this.message=t;this.stack=r;this.span=o;this.isPlainString=n;this.errorType=s}};u();var gR=e=>{if(typeof e=="string")return{isPlainString:!0,message:e};if(e instanceof Error&&k(e,"cause")&&k(e,"_tag"))return{isPlainString:!1,type:e._tag,message:e.cause};if(e instanceof Error&&k(e,"error"))return{isPlainString:!1,type:e.name,message:e.error};if(k(e,"_tag")&&k(e,"message"))return{isPlainString:!1,type:e._tag,message:e.message};if(k(e,"toString")&&$s(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==Array.prototype.toString){let t=e.toString(),r=t.split(": ");if(r.length>1){let[o,...n]=r;return{isPlainString:!1,type:o,message:n}}return{message:t,isPlainString:!1}}return{message:`Error: ${JSON.stringify(e)}`,isPlainString:!1}};var yR=Symbol.for("effect/SpanAnnotation"),Zg=e=>{let t=k(e,yR)?e[yR]:void 0,{message:r,type:o,isPlainString:n}=gR(e);return e instanceof Error?new Ba(r,e.stack?.split(`
`).filter(s=>/at (.*)/.exec(s)).join(`\r
`),t,!1,o):new Ba(r,void 0,t,n,o)};var bR=e=>Aw(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[Zg(r)],failCase:(t,r)=>[Zg(r)],interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o]});u();var SR=e=>Array.from(e.entries()).reduce((t,[r,o])=>r==="code.stacktrace"?{attributes:t.attributes,stacktrace:[...t.stacktrace,o]}:{attributes:new Map([...t.attributes,[r,o]]),stacktrace:t.stacktrace},{stacktrace:[],attributes:new Map});u();var pf=/ {4}at /g,_R=/^(file:\/\/)?(.*.(j|t)s)(\?.*)?:(\d*):(\d*)$/;u();var ER=global.process!==void 0?new RegExp(global.process.cwd(),"g"):null,OR=e=>ER===null?e:e.replace(ER,".");u();u();u();var vR=e=>{let t=_R.exec(e);if(t===null||t.length!==7)return;let r=t[2],o=+t[5],n=+t[6];return{filePath:r,line:o,column:n}};u();var y2=xc(Ef(),1),hz=7,Of=async({filePath:e,line:t,column:r},o=!1)=>{let n=t>=4?t-4:0;return(await y2.default.readFile(e,{encoding:"utf-8"})).split(`
`).splice(n,hz).map((i,c)=>{let a=c+n+1;return{line:a,code:i,column:a===t?o?r+1:r:void 0}})};u();var Ny=xc(Q2(),1),Ly=xc(Ef(),1),vT=xc(OT(),1);import uG from"path";var CT=async e=>{if(!await Ly.default.exists(`${e.filePath}.map`)){console.warn(`${Ny.default.blueBright.underline("effect-errors")}: ${Ny.default.yellow(`${e.filePath}.map does not exist: unable to retrieve spans sourcemaps.`)}  `);return}let r=await Ly.default.readJson(`${e.filePath}.map`,{encoding:"utf-8"});if(r.version===void 0)return;let n=new vT.SourceMapConsumer(r).originalPositionFor({column:e.column,line:e.line});if(n.source===null||n.line===null||n.column===null)return;let s=uG.resolve(e.filePath.substring(0,e.filePath.lastIndexOf("/")),n.source),i=await Of({filePath:s,line:n.line,column:n.column},!0);return{runPath:`${e.filePath}:${e.line}:${e.column}`,sourcesPath:`${s}:${n.line}:${n.column+1}`,source:i}};var kT=async e=>{let t=vR(e);if(t===void 0)return;let{filePath:r,line:o,column:n}=t;if(r.endsWith(".ts")){let s=await Of(t);return{runPath:`${r}:${o}:${n}`,sourcesPath:void 0,source:s}}return await CT(t)};var wT=async e=>await Promise.all(e.map(async t=>{let r=t.split(" "),o=r.length===2?r[1]:r[r.length-1].slice(1,-1),n=await kT(o);return n===void 0?{runPath:t.replaceAll(pf,"at "),source:void 0,sourcesPath:void 0}:{runPath:n.runPath,sourcesPath:n.sourcesPath,source:n.source}}));var MT=async(e,{reverseSpans:t,stripCwd:r}={reverseSpans:!0,stripCwd:!0})=>Tw(e)?{interrupted:!0,errors:[]}:{interrupted:!1,errors:await Promise.all(bR(e).map(async({message:n,stack:s,span:i,errorType:c,isPlainString:a})=>{let p=[],f=[];if(i!==void 0){let d=i;for(;d!==void 0&&d._tag==="Span";){let{name:g,attributes:b,status:M}=d,{attributes:T,stacktrace:N}=SR(b),z=await wT(N);p.push(...z),f.push({name:g,attributes:T,status:M}),d=de.getOrUndefined(d.parent)}}let h;return s!==void 0&&(h=r===!0?OR(s):s),{errorType:c,message:n,stack:h?.replaceAll(pf,"at ").split(`\r
`),sources:p.length>0?p:void 0,spans:t===!0?f.toReversed():f,isPlainString:a}}))};u();var RT=(e,t)=>typeof t=="bigint"?{type:"bigint",value:t.toString()}:t;u();import{fileURLToPath as pG}from"node:url";var TT=xc(Ef(),1);u();var eu=class extends lf("FetchError"){};u();var Nf=class extends lf("FileError"){};u();var lG=new RegExp(process.cwd(),"g"),FT=e=>et.sync(()=>{console.info(`\r
\u{1F4C1} ${e.replace(lG,".")}`)});var fG=pG(import.meta.url),mG=et.withSpan("readUser")(et.tryPromise({try:async()=>await TT.default.readJson("./src/examples/data/user.json"),catch:e=>new Nf({cause:e})})),hG=e=>et.withSpan("fetchUser",{attributes:{userId:e}})(et.tryPromise({try:async()=>await fetch(`https://yolo-bro-oh-no.org/users/${e}`),catch:t=>new eu({cause:t})})),dG=e=>et.withSpan("unwrapFetchUserResponse")(et.tryPromise({try:async()=>await e.json(),catch:t=>new eu({cause:t})})),xG=et.withSpan("fromPromiseTask")(et.gen(function*(){yield*FT(fG);let{id:e}=yield*mG,t=yield*hG(e);return yield*dG(t)})),AT=xG;et.runPromise(m(AT,et.sandbox,et.catchAll(e=>et.gen(function*(){let t=yield*et.tryPromise(async()=>await MT(e));return yield*et.fail(JSON.stringify(t,RT,2))})))).catch(console.error);
